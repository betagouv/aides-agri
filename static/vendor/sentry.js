var mS=Object.defineProperty;var dc=(e,t)=>{for(var n in t)mS(e,n,{get:t[n],enumerable:!0})};var pS={};dc(pS,{BrowserClient:()=>to,OpenFeatureIntegrationHook:()=>lc,SDK_VERSION:()=>it,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>ye,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>q,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>cn,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ve,Scope:()=>Ve,WINDOW:()=>M,addBreadcrumb:()=>tt,addEventProcessor:()=>Qo,addIntegration:()=>Dr,breadcrumbsIntegration:()=>Na,browserApiErrorsIntegration:()=>wa,browserProfilingIntegration:()=>tS,browserSessionIntegration:()=>xa,browserTracingIntegration:()=>D_,buildLaunchDarklyFlagUsedHandler:()=>oS,captureConsoleIntegration:()=>Ru,captureEvent:()=>fn,captureException:()=>ce,captureFeedback:()=>li,captureMessage:()=>Pn,captureSession:()=>Pr,chromeStackLineParser:()=>Hl,close:()=>tu,consoleLoggingIntegration:()=>Pu,contextLinesIntegration:()=>Kh,continueTrace:()=>Gc,createConsolaReporter:()=>Uu,createTransport:()=>oi,createUserFeedbackEnvelope:()=>Mh,dedupeIntegration:()=>ui,defaultRequestInstrumentationOptions:()=>Wi,defaultStackLineParsers:()=>Gl,defaultStackParser:()=>Ra,diagnoseSdkConnectivity:()=>uS,endSession:()=>Zo,eventFiltersIntegration:()=>ks,eventFromException:()=>sa,eventFromMessage:()=>aa,exceptionFromError:()=>eo,extraErrorDataIntegration:()=>Cu,featureFlagsIntegration:()=>Ou,feedbackAsyncIntegration:()=>oh,feedbackIntegration:()=>_l,feedbackSyncIntegration:()=>_l,flush:()=>eu,forceLoad:()=>Fh,functionToStringIntegration:()=>ai,geckoStackLineParser:()=>$l,getActiveSpan:()=>Q,getClient:()=>y,getCurrentScope:()=>x,getDefaultIntegrations:()=>Wl,getFeedback:()=>jm,getGlobalScope:()=>Ht,getIsolationScope:()=>se,getReplay:()=>d_,getRootSpan:()=>re,getSpanDescendants:()=>un,getSpanStatusFromHttpCode:()=>ns,getTraceData:()=>or,globalHandlersIntegration:()=>ka,graphqlClientIntegration:()=>eg,growthbookIntegration:()=>aS,httpClientIntegration:()=>zh,httpContextIntegration:()=>Oa,inboundFiltersIntegration:()=>ci,init:()=>Bh,instrumentAnthropicAiClient:()=>Wu,instrumentGoogleGenAIClient:()=>Yu,instrumentOpenAiClient:()=>$u,instrumentOutgoingRequests:()=>sc,instrumentSupabaseClient:()=>Ds,isEnabled:()=>Xo,isInitialized:()=>nu,lastEventId:()=>Ko,launchDarklyIntegration:()=>rS,lazyLoadIntegration:()=>ia,linkedErrorsIntegration:()=>Ma,logger:()=>Fs,makeBrowserOfflineTransport:()=>H_,makeFetchTransport:()=>uo,makeMultiplexedTransport:()=>_u,metrics:()=>Hs,moduleMetadataIntegration:()=>Au,onLoad:()=>Hh,openFeatureIntegration:()=>iS,opera10StackLineParser:()=>xh,opera11StackLineParser:()=>kh,parameterize:()=>ws,registerSpanErrorInstrumentation:()=>Go,registerWebWorker:()=>fS,replayCanvasIntegration:()=>R_,replayIntegration:()=>l_,reportPageLoaded:()=>B_,reportingObserverIntegration:()=>Wh,rewriteFramesIntegration:()=>Nu,sendFeedback:()=>ul,setActiveSpanInBrowser:()=>F_,setContext:()=>Jo,setCurrentClient:()=>Cs,setExtra:()=>Kc,setExtras:()=>Jc,setHttpStatus:()=>Qt,setMeasurement:()=>jo,setTag:()=>Qc,setTags:()=>Xc,setUser:()=>Zc,showReportDialog:()=>$h,spanToBaggageHeader:()=>Dc,spanToJSON:()=>P,spanToTraceHeader:()=>Ho,spotlightBrowserIntegration:()=>nS,startBrowserTracingNavigationSpan:()=>Wd,startBrowserTracingPageLoadSpan:()=>Gd,startInactiveSpan:()=>lt,startNewTrace:()=>ys,startSession:()=>Lr,startSpan:()=>ut,startSpanManual:()=>Zt,statsigIntegration:()=>cS,supabaseIntegration:()=>wu,suppressTracing:()=>zo,thirdPartyErrorFilterIntegration:()=>ku,unleashIntegration:()=>sS,updateSpanName:()=>Lc,webWorkerIntegration:()=>dS,winjsStackLineParser:()=>wh,withActiveSpan:()=>On,withIsolationScope:()=>ts,withScope:()=>Oe,zodErrorsIntegration:()=>xu});var E=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var v=globalThis;var it="10.20.0";function Ze(){return Rn(v),v}function Rn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||it,t[it]=t[it]||{}}function Bt(e,t,n=v){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[it]=r[it]||{};return o[e]||(o[e]=t())}var qn=["debug","info","warn","error","log","assert","trace"],hS="Sentry Logger ",br={};function Ge(e){if(!("console"in v))return e();let t=v.console,n={},r=Object.keys(br);r.forEach(o=>{let i=br[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function gS(){pc().enabled=!0}function _S(){pc().enabled=!1}function Jd(){return pc().enabled}function SS(...e){fc("log",...e)}function ES(...e){fc("warn",...e)}function yS(...e){fc("error",...e)}function fc(e,...t){E&&Jd()&&Ge(()=>{v.console[e](`${hS}[${e}]:`,...t)})}function pc(){return E?Bt("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:gS,disable:_S,isEnabled:Jd,log:SS,warn:ES,error:yS};var Kd=/\(error: (.*)\)/,Xd=/captureMessage|captureException/;function Yi(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=Kd.test(c)?c.replace(Kd,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return Qd(i.slice(o))}}function hc(e){return Array.isArray(e)?Yi(...e):e}function Qd(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(qi(t).function||"")&&t.pop(),t.reverse(),Xd.test(qi(t).function||"")&&(t.pop(),Xd.test(qi(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||qi(t).filename,function:n.function||"?"}))}function qi(e){return e[e.length-1]||{}}var mc="<anonymous>";function st(e){try{return!e||typeof e!="function"?mc:e.name||mc}catch{return mc}}function Ir(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var Vi={},Zd={};function We(e,t){Vi[e]=Vi[e]||[],Vi[e].push(t)}function je(e,t){if(!Zd[e]){Zd[e]=!0;try{t()}catch(n){E&&h.error(`Error while instrumenting ${e}`,n)}}}function Ne(e,t){let n=e&&Vi[e];if(n)for(let r of n)try{r(t)}catch(o){E&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${st(r)}
Error:`,o)}}var gc=null;function wo(e){let t="error";We(t,e),je(t,TS)}function TS(){gc=v.onerror,v.onerror=function(e,t,n,r,o){return Ne("error",{column:r,error:o,line:n,msg:e,url:t}),gc?gc.apply(this,arguments):!1},v.onerror.__SENTRY_INSTRUMENTED__=!0}var _c=null;function xo(e){let t="unhandledrejection";We(t,e),je(t,bS)}function bS(){_c=v.onunhandledrejection,v.onunhandledrejection=function(e){return Ne("unhandledrejection",e),_c?_c.apply(this,arguments):!0},v.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var ef=Object.prototype.toString;function at(e){switch(ef.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Et(e,Error)}}function vr(e,t){return ef.call(e)===`[object ${t}]`}function Ji(e){return vr(e,"ErrorEvent")}function Ki(e){return vr(e,"DOMError")}function Sc(e){return vr(e,"DOMException")}function De(e){return vr(e,"String")}function Cn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function St(e){return e===null||Cn(e)||typeof e!="object"&&typeof e!="function"}function ze(e){return vr(e,"Object")}function Yn(e){return typeof Event<"u"&&Et(e,Event)}function Ec(e){return typeof Element<"u"&&Et(e,Element)}function yc(e){return vr(e,"RegExp")}function xt(e){return!!(e?.then&&typeof e.then=="function")}function Tc(e){return ze(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Et(e,t){try{return e instanceof t}catch{return!1}}function ko(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Xi(e){return typeof Request<"u"&&Et(e,Request)}var bc=v,IS=80;function we(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||IS;for(;n&&i++<r&&(u=vS(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function vS(e,t){let n=e,r=[];if(!n?.tagName)return"";if(bc.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&De(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function et(){try{return bc.document.location.href}catch{return""}}function Oo(e){if(!bc.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function kt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Mo(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Vn(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{ko(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Ar(e,t,n=!1){return De(e)?yc(t)?t.test(e):De(t)?n?e===t:e.includes(t):!1:!1}function Fe(e,t=[],n=!1){return t.some(r=>Ar(e,r,n))}function me(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&Qi(o,r);try{e[t]=o}catch{E&&h.log(`Failed to replace method "${t}" in object`,e)}}function _e(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{E&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Qi(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,_e(e,"__sentry_original__",t)}catch{}}function Jn(e){return e.__sentry_original__}function Zi(e){if(at(e))return{message:e.message,name:e.name,stack:e.stack,...nf(e)};if(Yn(e)){let t={type:e.type,target:tf(e.target),currentTarget:tf(e.currentTarget),...nf(e)};return typeof CustomEvent<"u"&&Et(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function tf(e){try{return Ec(e)?we(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function nf(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Ic(e,t=40){let n=Object.keys(Zi(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return kt(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:kt(i,t)}return""}function AS(){let e=v;return e.crypto||e.msCrypto}function Se(e=AS()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{let n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function rf(e){return e.exception?.values?.[0]}function Jt(e){let{message:t,event_id:n}=e;if(t)return t;let r=rf(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Rr(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function qe(e,t){let n=rf(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function vc(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Mo(s,0));let i=Math.min(r-1,o);t.context_line=Mo(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Mo(s,0))}function es(e){if(RS(e))return!0;try{_e(e,"__sentry_captured__",!0)}catch{}return!1}function RS(e){try{return e.__sentry_captured__}catch{}}var sf=1e3;function yt(){return Date.now()/sf}function CS(){let{performance:e}=v;if(!e?.now||!e.timeOrigin)return yt;let t=e.timeOrigin;return()=>(t+e.now())/sf}var of;function X(){return(of??(of=CS()))()}var Ac;function NS(){let{performance:e}=v;if(!e?.now)return[void 0,"none"];let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing?.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?[e.timeOrigin,"timeOrigin"]:[s,"navigationStart"]:[r,"dateNow"]}function Ee(){return Ac||(Ac=NS()),Ac[0]}function af(e){let t=X(),n={sid:Se(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>wS(n)};return e&&an(n,e),n}function an(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||X(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Se()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function cf(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),an(e,n)}function wS(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Nn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Nn(r[o],t[o],n-1));return r}function He(){return Se()}function Ye(){return Se().substring(16)}var Rc="_sentrySpan";function ct(e,t){t?_e(e,Rc,t):delete e[Rc]}function Ft(e){return e[Rc]}var xS=100,Ve=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:He(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,ct(t,Ft(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&an(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():ze(n)?t:void 0,{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ct(this,void 0),this._attachments=[],this.setPropagationContext({traceId:He(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:xS;if(r<=0)return this;let o={timestamp:yt(),...t,message:t.message?kt(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Ft(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Nn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||Se();if(!this._client)return E&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||Se();if(!this._client)return E&&h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||Se();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(E&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function uf(){return Bt("defaultCurrentScope",()=>new Ve)}function lf(){return Bt("defaultIsolationScope",()=>new Ve)}var Cc=class{constructor(t,n){let r;t?r=t:r=new Ve;let o;n?o=n:o=new Ve,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return xt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Cr(){let e=Ze(),t=Rn(e);return t.stack=t.stack||new Cc(uf(),lf())}function kS(e){return Cr().withScope(e)}function OS(e,t){let n=Cr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function df(e){return Cr().withScope(()=>e(Cr().getIsolationScope()))}function ff(){return{withIsolationScope:df,withScope:kS,withSetScope:OS,withSetIsolationScope:(e,t)=>df(t),getCurrentScope:()=>Cr().getScope(),getIsolationScope:()=>Cr().getIsolationScope()}}function Ot(e){let t=Rn(e);return t.acs?t.acs:ff()}function x(){let e=Ze();return Ot(e).getCurrentScope()}function se(){let e=Ze();return Ot(e).getIsolationScope()}function Ht(){return Bt("globalScope",()=>new Ve)}function Oe(...e){let t=Ze(),n=Ot(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function ts(...e){let t=Ze(),n=Ot(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function y(){return x().getClient()}function Lo(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Ye()};return r&&(i.parent_span_id=r),i}var ve="sentry.source",cn="sentry.sample_rate",Po="sentry.previous_trace_sample_rate",ye="sentry.op",q="sentry.origin",wn="sentry.idle_span_finish_reason",Kt="sentry.measurement_unit",Xt="sentry.measurement_value",Nr="sentry.custom_span_name",wr="sentry.profile_id",Mt="sentry.exclusive_time";var Nc="http.request.method",wc="url.full",xc="sentry.link.type";function ns(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function Qt(e,t){e.setAttribute("http.response.status_code",t);let n=ns(t);n.message!=="unknown_error"&&e.setStatus(n)}var pf="_sentryScope",mf="_sentryIsolationScope";function MS(e){try{let t=v.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function LS(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function hf(e,t,n){e&&(_e(e,mf,MS(n)),_e(e,pf,t))}function Kn(e){let t=e;return{scope:t[pf],isolationScope:LS(t[mf])}}var rs="sentry-",PS=/^sentry-/,DS=8192;function xr(e){let t=US(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(PS)){let s=o.slice(rs.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function os(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${rs}${r}`]=o),n),{});return BS(t)}function US(e){if(!(!e||!De(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=gf(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):gf(e)}function gf(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function BS(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>DS?(E&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var FS=/^o(\d+)\./,HS=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function $S(e){return e==="http"||e==="https"}function Je(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function is(e){let t=HS.exec(e);if(!t){Ge(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return _f({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function _f(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function GS(e){if(!E)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?$S(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function WS(e){return e.match(FS)?.[1]}function ss(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=WS(n)),r}function Do(e){let t=typeof e=="string"?is(e):_f(e);if(!(!t||!GS(t)))return t}function Tt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var as=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Sf(e){if(!e)return;let t=e.match(as);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Uo(e,t){let n=Sf(e),r=xr(t);if(!n?.traceId)return{traceId:He(),sampleRand:Math.random()};let o=jS(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function Bo(e=He(),t=Ye(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function cs(e=He(),t=Ye(),n){return`00-${e}-${t}-${n?"01":"00"}`}function jS(e,t){let n=Tt(t?.sample_rand);if(n!==void 0)return n;let r=Tt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function kc(e,t){let n=ss(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var us=0,ls=1,Ef=!1;function Tf(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=P(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function Fo(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:P(e).parent_span_id,i=Kn(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Ye():t;return{parent_span_id:o,span_id:s,trace_id:n}}function Ho(e){let{traceId:t,spanId:n}=e.spanContext(),r=bt(e);return Bo(t,n,r)}function bf(e){let{traceId:t,spanId:n}=e.spanContext(),r=bt(e);return cs(t,n,r)}function ds(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===ls,attributes:i,...o}))}function $t(e){return typeof e=="number"?yf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?yf(e.getTime()):X()}function yf(e){return e>9999999999?e/1e3:e}function P(e){if(YS(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(qS(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:$t(o),timestamp:$t(s)||void 0,status:fs(a),op:r[ye],origin:r[q],links:ds(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function qS(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function YS(e){return typeof e.getSpanJSON=="function"}function bt(e){let{traceFlags:t}=e.spanContext();return t===ls}function fs(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var Xn="_sentryChildSpans",Oc="_sentryRootSpan";function ps(e,t){let n=e[Oc]||e;_e(t,Oc,n),e[Xn]?e[Xn].add(t):_e(e,Xn,new Set([t]))}function If(e,t){e[Xn]&&e[Xn].delete(t)}function un(e){let t=new Set;function n(r){if(!t.has(r)&&bt(r)){t.add(r);let o=r[Xn]?Array.from(r[Xn]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function re(e){return e[Oc]||e}function Q(){let e=Ze(),t=Ot(e);return t.getActiveSpan?t.getActiveSpan():Ft(x())}function $o(){Ef||(Ge(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Ef=!0)}function Lc(e,t){e.updateName(t),e.setAttributes({[ve]:"custom",[Nr]:t})}var vf=!1;function Go(){if(vf)return;function e(){let t=Q(),n=t&&re(t);if(n){let r="internal_error";E&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",vf=!0,wo(e),xo(e)}function Me(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||y()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Af(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Qn(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(VS(n)){if(Ar(e.description,n))return E&&Af(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?Ar(e.description,n.name):!0,o=n.op?e.op&&Ar(e.op,n.op):!0;if(r&&o)return E&&Af(e),!0}return!1}function Rf(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function VS(e){return typeof e=="string"||e instanceof RegExp}var ln="production";var Cf="_frozenDsc";function kr(e,t){_e(e,Cf,t)}function Pc(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||ln,release:n.release,public_key:r,trace_id:e,org_id:ss(t)};return t.emit("createDsc",o),o}function Zn(e,t){let n=t.getPropagationContext();return n.dsc||Pc(n.traceId,e)}function Ce(e){let t=y();if(!t)return{};let n=re(e),r=P(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[cn]??o[Po];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[Cf];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&xr(u);if(d)return a(d);let l=Pc(e.spanContext().traceId,t),p=o[ve],f=r.description;return p!=="url"&&f&&(l.transaction=f),Me()&&(l.sampled=String(bt(n)),l.sample_rand=i?.get("sentry.sample_rand")??Kn(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function Dc(e){let t=Ce(e);return os(t)}var Ke=class{constructor(t={}){this._traceId=t.traceId||He(),this._spanId=t.spanId||Ye()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:us}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Le(e,t=100,n=1/0){try{return Uc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ms(e,t=3,n=100*1024){let r=Le(e,t);return QS(r)>n?ms(e,t-1,n):r}function Uc(e,t,n=1/0,r=1/0,o=ZS()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=JS(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let f=u.toJSON();return Uc("",f,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,p=Zi(t);for(let f in p){if(!Object.prototype.hasOwnProperty.call(p,f))continue;if(l>=r){d[f]="[MaxProperties ~]";break}let m=p[f];d[f]=Uc(f,m,c-1,r,o),l++}return s(t),d}function JS(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ko(t))return"[VueViewModel]";if(Tc(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${st(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=KS(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function KS(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function XS(e){return~-encodeURI(e).split(/%..|./).length}function QS(e){return XS(JSON.stringify(e))}function ZS(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function Pe(e,t=[]){return[e,t]}function Bc(e,t){let[n,r]=e;return[n,[...r,t]]}function It(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function gs(e,t){return It(e,(n,r)=>t.includes(r))}function hs(e){let t=Rn(v);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function eE(e){let t=Rn(v);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function xn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[hs(r),i]:r.push(typeof i=="string"?hs(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Le(a))}o(c)}}return typeof r=="string"?r:tE(r)}function tE(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function Fc(e){let t=typeof e=="string"?hs(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(eE(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function Hc(e){return[{type:"span"},e]}function $c(e){let t=typeof e.data=="string"?hs(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var nE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function _s(e){return nE[e]}function Or(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Wo(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Je(r)},...o&&{trace:o}}}function rE(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function Nf(e,t,n,r){let o=Or(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Je(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Pe(i,[s])}function wf(e,t,n,r){let o=Or(n),i=e.type&&e.type!=="replay_event"?e.type:"event";rE(e,n?.sdk);let s=Wo(e,o,r,t);return delete e.sdkProcessingMetadata,Pe(s,[[{type:i},e]])}function xf(e,t){function n(f){return!!f.trace_id&&!!f.public_key}let r=Ce(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Je(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(f=>!Qn(P(f),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?f=>{let m=P(f),_=a(m);return _||($o(),m)}:P,p=[];for(let f of u){let m=l(f);m&&p.push(Hc(m))}return Pe(s,p)}function kf(e){if(!E)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=P(e),{spanId:o}=e.spanContext(),i=bt(e),s=re(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=P(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function Of(e){if(!E)return;let{description:t="< unknown name >",op:n="< unknown op >"}=P(e),{spanId:r}=e.spanContext(),i=re(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function jo(e,t,n,r=Q()){let o=r&&re(r);o&&(E&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Xt]:t,[Kt]:n}))}function Ss(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Kt],i=r[Xt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Mf=1e3,kn=class{constructor(t={}){this._traceId=t.traceId||He(),this._spanId=t.spanId||Ye(),this._startTime=t.startTimestamp||X(),this._links=t.links,this._attributes={},this.setAttributes({[q]:"manual",[ye]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?ls:us}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=$t(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ve,"custom"),this}end(t){this._endTime||(this._endTime=$t(t),Of(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ye],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:fs(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[q],profile_id:this._attributes[wr],exclusive_time:this._attributes[Mt],measurements:Ss(this._events),is_segment:this._isStandaloneSpan&&re(this)===this||void 0,segment_id:this._isStandaloneSpan?re(this).spanContext().spanId:void 0,links:ds(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){E&&h.log("[Tracing] Adding an event to span:",t);let o=Lf(n)?n:r||X(),i=Lf(n)?{}:n||{},s={name:t,time:$t(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=y();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===re(this)))return;if(this._isStandaloneSpan){this._sampled?iE(xf([this],t)):(E&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Kn(this).scope||x()).captureEvent(r)}_convertSpanToTransaction(){if(!Pf(P(this)))return;this._name||(E&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=Kn(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=un(this).filter(d=>d!==this&&!oE(d)).map(d=>P(d)).filter(Pf),s=this._attributes[ve];delete this._attributes[Nr],i.forEach(d=>{delete d.data[Nr]});let a={contexts:{trace:Tf(this)},spans:i.length>Mf?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Mf):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:Ce(this)},request:r,...s&&{transaction_info:{source:s}}},c=Ss(this._events);return c&&Object.keys(c).length&&(E&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Lf(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Pf(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function oE(e){return e instanceof kn&&e.isStandaloneSpan()}function iE(e){let t=y();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function er(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return sE(o,t,n,r)}function sE(e,t,n,r){return xt(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function Df(e,t,n){if(!Me(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=Tt(o);if(i===void 0)return E&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return E&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||E&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Es="__SENTRY_SUPPRESS_TRACING__";function ut(e,t){let n=qo();if(n.startSpan)return n.startSpan(e,t);let r=jc(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Oe(a,()=>Bf(i)(()=>{let u=x(),d=zc(u,i),p=e.onlyIfParent&&!d?new Ke:Wc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ct(u,p),er(()=>t(p),()=>{let{status:f}=P(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})},()=>{p.end()})}))}function Zt(e,t){let n=qo();if(n.startSpanManual)return n.startSpanManual(e,t);let r=jc(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Oe(a,()=>Bf(i)(()=>{let u=x(),d=zc(u,i),p=e.onlyIfParent&&!d?new Ke:Wc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ct(u,p),er(()=>t(p,()=>p.end()),()=>{let{status:f}=P(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})})}))}function lt(e){let t=qo();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=jc(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>Oe(e.scope,s):o!==void 0?s=>On(o,s):s=>s())(()=>{let s=x(),a=zc(s,o);return e.onlyIfParent&&!a?new Ke:Wc({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var Gc=(e,t)=>{let n=Ze(),r=Ot(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=y(),a=xr(i);return s&&!kc(s,a?.org_id)?ys(t):Oe(c=>{let u=Uo(o,i);return c.setPropagationContext(u),t()})};function On(e,t){let n=qo();return n.withActiveSpan?n.withActiveSpan(e,t):Oe(r=>(ct(r,e||void 0),t(r)))}function zo(e){let t=qo();return t.suppressTracing?t.suppressTracing(e):Oe(n=>{n.setSDKProcessingMetadata({[Es]:!0});let r=e();return n.setSDKProcessingMetadata({[Es]:void 0}),r})}function ys(e){return Oe(t=>(t.setPropagationContext({traceId:He(),sampleRand:Math.random()}),E&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),On(null,e)))}function Wc({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Me()){let s=new Ke;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...Ce(s)};kr(s,a)}return s}let o=se(),i;if(e&&!n)i=aE(e,r,t),ps(e,i);else if(e){let s=Ce(e),{traceId:a,spanId:c}=e.spanContext(),u=bt(e);i=Uf({traceId:a,parentSpanId:c,...t},r,u),kr(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=Uf({traceId:s,parentSpanId:c,...t},r,u),a&&kr(i,a)}return kf(i),hf(i,r,o),i}function jc(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=$t(e.startTime),delete r.startTime,r}return n}function qo(){let e=Ze();return Ot(e)}function Uf(e,t,n){let r=y(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,p]=t.getScopeData().sdkProcessingMetadata[Es]?[!1]:Df(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:Tt(u.dsc?.sample_rate)},u.sampleRand),f=new kn({...e,attributes:{[ve]:"custom",[cn]:l!==void 0&&p?l:void 0,...c},sampled:d});return!d&&r&&(E&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function aE(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Es]?!1:bt(e),s=i?new kn({...n,parentSpanId:r,traceId:o,sampled:i}):new Ke({traceId:o});ps(e,s);let a=y();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function zc(e,t){if(t)return t;if(t===null)return;let n=Ft(e);if(!n)return;let r=y();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?re(n):n}function Bf(e){return e!==void 0?t=>On(e,t):t=>t()}var Mr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},cE="heartbeatFailed",uE="idleTimeout",lE="finalTimeout",dE="externalFinish";function Ts(e,t={}){let n=new Map,r=!1,o,i=dE,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Mr.idleTimeout,finalTimeout:u=Mr.finalTimeout,childSpanTimeout:d=Mr.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:p=!0}=t,f=y();if(!f||!Me()){let b=new Ke,R={sample_rate:"0",sampled:"false",...Ce(b)};return kr(b,R),b}let m=x(),_=Q(),g=fE(e);g.end=new Proxy(g.end,{apply(b,R,I){if(l&&l(g),R instanceof Ke)return;let[k,...H]=I,C=k||X(),L=$t(C),Y=un(g).filter($=>$!==g),K=P(g);if(!Y.length||!p)return w(L),Reflect.apply(b,R,[L,...H]);let ne=f.getOptions().ignoreSpans,N=Y?.reduce(($,Z)=>{let ae=P(Z);return!ae.timestamp||ne&&Qn(ae,ne)?$:$?Math.max($,ae.timestamp):ae.timestamp},void 0),j=K.start_timestamp,O=Math.min(j?j+u/1e3:1/0,Math.max(j||-1/0,Math.min(L,N||1/0)));return w(O),Reflect.apply(b,R,[O,...H])}});function S(){o&&(clearTimeout(o),o=void 0)}function T(b){S(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=uE,g.end(b))},c)}function D(b){o=setTimeout(()=>{!r&&s&&(i=cE,g.end(b))},d)}function A(b){S(),n.set(b,!0);let R=X();D(R+d/1e3)}function U(b){if(n.has(b)&&n.delete(b),n.size===0){let R=X();T(R+c/1e3)}}function w(b){r=!0,n.clear(),a.forEach(L=>L()),ct(m,_);let R=P(g),{start_timestamp:I}=R;if(!I)return;R.data[wn]||g.setAttribute(wn,i),h.log(`[Tracing] Idle span "${R.op}" finished`);let H=un(g).filter(L=>L!==g),C=0;H.forEach(L=>{L.isRecording()&&(L.setStatus({code:2,message:"cancelled"}),L.end(b),E&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(L,void 0,2)));let Y=P(L),{timestamp:K=0,start_timestamp:ne=0}=Y,N=ne<=b,j=(u+c)/1e3,O=K-ne<=j;if(E){let $=JSON.stringify(L,void 0,2);N?O||h.log("[Tracing] Discarding span since it finished after idle span final timeout",$):h.log("[Tracing] Discarding span since it happened after idle span was finished",$)}(!O||!N)&&(If(g,L),C++)}),C>0&&g.setAttribute("sentry.idle_span_discarded_spans",C)}return a.push(f.on("spanStart",b=>{if(r||b===g||P(b).timestamp||b instanceof kn&&b.isStandaloneSpan())return;un(g).includes(b)&&A(b.spanContext().spanId)})),a.push(f.on("spanEnd",b=>{r||U(b.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",b=>{b===g&&(s=!0,T(),n.size&&D())})),t.disableAutoFinish||T(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=lE,g.end())},u),g}function fE(e){let t=lt(e);return ct(x(),t),E&&h.log("[Tracing] Started span is an idle span"),t}var qc=0,Ff=1,Hf=2;function Mn(e){return new Yo(t=>{t(e)})}function tr(e){return new Yo((t,n)=>{n(e)})}var Yo=class e{constructor(t){this._state=qc,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===qc)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ff&&n[1](this._value),this._state===Hf&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===qc){if(xt(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(Ff,i)},o=i=>{n(Hf,i)};try{t(r,o)}catch(i){o(i)}}};function $f(e,t,n,r=0){try{let o=Yc(t,n,e,r);return xt(o)?o:Mn(o)}catch(o){return tr(o)}}function Yc(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return E&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),xt(i)?i.then(s=>Yc(s,t,n,r+1)):Yc(i,t,n,r+1)}function Gf(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;pE(e,t),r&&gE(e,r),_E(e,n),mE(e,o),hE(e,i)}function dn(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:p,transactionName:f,span:m}=t;bs(e,"extra",n),bs(e,"tags",r),bs(e,"user",o),bs(e,"contexts",i),e.sdkProcessingMetadata=Nn(e.sdkProcessingMetadata,a,2),s&&(e.level=s),f&&(e.transactionName=f),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...p}}function bs(e,t,n){e[t]=Nn(e[t],n,1)}function pE(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function mE(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function hE(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function gE(e,t){e.contexts={trace:Fo(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ce(t),...e.sdkProcessingMetadata};let n=re(t),r=P(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function _E(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}var nr,Wf,jf,Ln;function Is(e){let t=v._sentryDebugIds,n=v._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Ln&&r.length===Wf&&o.length===jf)return Ln;Wf=r.length,jf=o.length,Ln={},nr||(nr={});let i=(s,a)=>{for(let c of s){let u=a[c],d=nr?.[c];if(d&&Ln&&u)Ln[d[0]]=u,nr&&(nr[c]=[d[0],u]);else if(u){let l=e(c);for(let p=l.length-1;p>=0;p--){let m=l[p]?.filename;if(m&&Ln&&nr){Ln[m]=u,nr[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),Ln}function Vc(e,t){let n=Is(e);if(!n)return[];let r=[];for(let o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function Vo(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Se(),timestamp:t.timestamp||yt()},u=n.integrations||e.integrations.map(g=>g.name);SE(c,e),TE(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&EE(c,e.stackParser);let d=IE(r,n.captureContext);n.mechanism&&qe(c,n.mechanism);let l=o?o.getEventProcessors():[],p=Ht().getScopeData();if(i){let g=i.getScopeData();dn(p,g)}if(d){let g=d.getScopeData();dn(p,g)}let f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),Gf(c,p);let m=[...l,...p.eventProcessors];return $f(m,c,n).then(g=>(g&&yE(g),typeof s=="number"&&s>0?bE(g,s,a):g))}function SE(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||ln,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&(s.url=kt(s.url,i))}function EE(e,t){let n=Is(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function yE(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function TE(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function bE(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Le(o.data,t,n)}}))},...e.user&&{user:Le(e.user,t,n)},...e.contexts&&{contexts:Le(e.contexts,t,n)},...e.extra&&{extra:Le(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Le(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Le(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Le(e.contexts.flags,3,n)),r}function IE(e,t){if(!t)return e;let n=e?e.clone():new Ve;return n.update(t),n}function zf(e){if(e)return vE(e)?{captureContext:e}:RE(e)?{captureContext:e}:e}function vE(e){return e instanceof Ve||typeof e=="function"}var AE=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function RE(e){return Object.keys(e).some(t=>AE.includes(t))}function ce(e,t){return x().captureException(e,zf(t))}function Pn(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return x().captureMessage(e,n,r)}function fn(e,t){return x().captureEvent(e,t)}function Jo(e,t){se().setContext(e,t)}function Jc(e){se().setExtras(e)}function Kc(e,t){se().setExtra(e,t)}function Xc(e){se().setTags(e)}function Qc(e,t){se().setTag(e,t)}function Zc(e){se().setUser(e)}function Ko(){return se().lastEventId()}async function eu(e){let t=y();return t?t.flush(e):(E&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function tu(e){let t=y();return t?t.close(e):(E&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function nu(){return!!y()}function Xo(){let e=y();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function Qo(e){se().addEventProcessor(e)}function Lr(e){let t=se(),n=x(),{userAgent:r}=v.navigator||{},o=af({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&an(i,{status:"exited"}),Zo(),t.setSession(o),o}function Zo(){let e=se(),n=x().getSession()||e.getSession();n&&cf(n),qf(),e.setSession()}function qf(){let e=se(),t=y(),n=e.getSession();n&&t&&t.captureSession(n)}function Pr(e=!1){if(e){Zo();return}qf()}var CE="7";function Yf(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function NE(e){return`${Yf(e)}${e.projectId}/envelope/`}function wE(e,t){let n={sentry_version:CE};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function ei(e,t,n){return t||`${NE(e)}?${wE(e,n)}`}function ru(e,t){let n=Do(e);if(!n)return"";let r=`${Yf(n)}embed/error-page/`,o=`dsn=${Je(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var Vf=[];function xE(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function ou(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return xE(r)}function Jf(e,t){let n={};return t.forEach(r=>{r&&su(e,r,n)}),n}function iu(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function su(e,t,n){if(n[t.name]){E&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Vf.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Vf.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}E&&h.log(`Integration installed: ${t.name}`)}function Dr(e){let t=y();if(!t){E&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function vs(e,t){return t?Oe(t,()=>{let n=Q(),r=n?Fo(n):Lo(t);return[n?Ce(n):Zn(e,t),r]}):[void 0,void 0]}var Kf={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function kE(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Xf(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Je(r)),Pe(o,[kE(e)])}var OE=100;function ME(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function en(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function Qf(e,t){let n=au(),r=Zf(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=OE&&Ur(e,r))}function Dn(e,t=x(),n=Qf){let r=t?.getClient()??y();if(!r){E&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){E&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=vs(r,t),u={...e.attributes},{user:{id:d,email:l,username:p}}=LE(t);en(u,"user.id",d,!1),en(u,"user.email",l,!1),en(u,"user.name",p,!1),en(u,"sentry.release",o),en(u,"sentry.environment",i);let{name:f,version:m}=r.getSdkMetadata()?.sdk??{};en(u,"sentry.sdk.name",f),en(u,"sentry.sdk.version",m);let _=r.getIntegrationByName("Replay"),g=_?.getReplayId(!0);en(u,"sentry.replay_id",g),g&&_?.getRecordingMode()==="buffer"&&en(u,"sentry._internal.replay_is_buffering",!0);let S=e.message;if(Cn(S)){let{__sentry_template_string__:k,__sentry_template_values__:H=[]}=S;H?.length&&(u["sentry.message.template"]=k),H.forEach((C,L)=>{u[`sentry.message.parameter.${L}`]=C})}let T=Ft(t);en(u,"sentry.trace.parent_span_id",T?.spanContext().spanId);let D={...e,attributes:u};r.emit("beforeCaptureLog",D);let A=a?Ge(()=>a(D)):D;if(!A){r.recordDroppedEvent("before_send","log_item",1),E&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:U,message:w,attributes:b={},severityNumber:R}=A,I={timestamp:X(),level:U,body:w,trace_id:c?.trace_id,severity_number:R??Kf[U],attributes:Object.keys(b).reduce((k,H)=>(k[H]=ME(b[H]),k),{})};n(r,I),r.emit("afterCaptureLog",A)}function Ur(e,t){let n=t??Zf(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Xf(n,r._metadata,r.tunnel,e.getDsn());au().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function Zf(e){return au().get(e)}function LE(e){let t=Ht().getScopeData();return dn(t,se().getScopeData()),dn(t,e.getScopeData()),t}function au(){return Bt("clientToLogBufferMap",()=>new WeakMap)}function PE(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function ep(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Je(r)),Pe(o,[PE(e)])}var DE=100;function UE(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function pn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function tp(e,t){let n=uu(),r=np(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=DE&&Br(e,r))}function cu(e,t){let n=t?.scope??x(),r=t?.captureSerializedMetric??tp,o=n?.getClient()??y();if(!o){E&&h.warn("No client available to capture metric.");return}let{release:i,environment:s,_experiments:a}=o.getOptions();if(!a?.enableMetrics){E&&h.warn("metrics option not enabled, metric will not be captured.");return}let[,c]=vs(o,n),u={...e.attributes},{user:{id:d,email:l,username:p}}=BE(n);pn(u,"user.id",d,!1),pn(u,"user.email",l,!1),pn(u,"user.name",p,!1),pn(u,"sentry.release",i),pn(u,"sentry.environment",s);let{name:f,version:m}=o.getSdkMetadata()?.sdk??{};pn(u,"sentry.sdk.name",f),pn(u,"sentry.sdk.version",m);let _=o.getIntegrationByName("Replay"),g=_?.getReplayId(!0);pn(u,"sentry.replay_id",g),g&&_?.getRecordingMode()==="buffer"&&pn(u,"sentry._internal.replay_is_buffering",!0);let S={...e,attributes:u},T=a?.beforeSendMetric?a.beforeSendMetric(S):S;if(!T){E&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let D={};for(let R in T.attributes)T.attributes[R]!==void 0&&(D[R]=UE(T.attributes[R]));let A=Ft(n),U=A?A.spanContext().traceId:c?.trace_id,w=A?A.spanContext().spanId:void 0,b={timestamp:X(),trace_id:U,span_id:w,name:T.name,type:T.type,unit:T.unit,value:T.value,attributes:D};E&&h.log("[Metric]",b),r(o,b),o.emit("afterCaptureMetric",S)}function Br(e,t){let n=t??np(e)??[];if(n.length===0)return;let r=e.getOptions(),o=ep(n,r._metadata,r.tunnel,e.getDsn());uu().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function np(e){return uu().get(e)}function BE(e){let t=Ht().getScopeData();return dn(t,se().getScopeData()),dn(t,e.getScopeData()),t}function uu(){return Bt("clientToMetricBufferMap",()=>new WeakMap)}function rp(e,t,n){let r=[{type:"client_report"},{timestamp:n||yt(),discarded_events:e}];return Pe(t?{dsn:t}:{},[r])}function As(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function op(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[wr],exclusive_time:s?.[Mt],measurements:e.measurements,is_segment:!0}}function ip(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[wr]:e.profile_id},...e.exclusive_time&&{[Mt]:e.exclusive_time}}}},measurements:e.measurements}}var sp="Not capturing exception because it's already been captured.",ap="Discarded session because of missing or non-string release",fp=Symbol.for("SentryInternalError"),pp=Symbol.for("SentryDoNotSendEventError"),FE=5e3;function Rs(e){return{message:e,[fp]:!0}}function lu(e){return{message:e,[pp]:!0}}function cp(e){return!!e&&typeof e=="object"&&fp in e}function up(e){return!!e&&typeof e=="object"&&pp in e}function lp(e,t,n,r,o){let i=0,s;e.on(n,()=>{i=0,clearTimeout(s)}),e.on(t,a=>{i+=r(a),i>=8e5?o(e):(clearTimeout(s),s=setTimeout(()=>{o(e)},FE))}),e.on("flush",()=>{o(e)})}var ti=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Do(t.dsn):E&&h.warn("No DSN provided, client will not send events."),this._dsn){let n=ei(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}this._options.enableLogs&&lp(this,"afterCaptureLog","flushLogs",WE,Ur),this._options._experiments?.enableMetrics&&lp(this,"afterCaptureMetric","flushMetrics",GE,Br)}captureException(t,n,r){let o=Se();if(es(t))return E&&h.log(sp),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:Se(),...r},s=Cn(t)?t:String(t),a=St(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=Se();if(n?.originalException&&es(n.originalException))return E&&h.log(sp),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),an(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];su(this,t,this._integrations),n||iu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=wf(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=Bc(r,$c(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=ln}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){E&&h.warn(ap);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){E&&h.warn(ap);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=Nf(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;E&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return E&&h.error("Error while sending envelope:",n),{}}return E&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=Jf(this,t),iu(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(an(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Vo(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Lo(r),...a.contexts};let c=Zn(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=x(),o=se()){return E&&du(t)&&h.log(`Captured error event \`${As(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{E&&(up(i)?h.log(i.message):cp(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=mp(t),c=du(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof s>"u"?void 0:Tt(s);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),tr(lu(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let p=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",p),lu("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return f;let _=$E(this,i,f,n);return HE(_,d)}).then(f=>{if(f===null){if(this.recordDroppedEvent("before_send",p),a){let S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw lu(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,f),a){let g=f.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=f.spans?f.spans.length:0,T=g-S;T>0&&this.recordDroppedEvent("before_send","span",T)}let _=f.transaction_info;if(a&&_&&f.transaction!==t.transaction){let g="custom";f.transaction_info={..._,source:g}}return this.sendEvent(f,n),f}).then(null,f=>{throw up(f)||cp(f)?f:(this.captureException(f,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:f}),Rs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){E&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){E&&h.log("No outcomes to send");return}if(!this._dsn){E&&h.log("No dsn provided, will not send outcomes");return}E&&h.log("Sending outcomes:",t);let n=rp(t,this._options.tunnel&&Je(this._dsn));this.sendEnvelope(n)}};function HE(e,t){let n=`${t} must return \`null\` or a valid event.`;if(xt(e))return e.then(r=>{if(!ze(r)&&r!==null)throw Rs(n);return r},r=>{throw Rs(`${t} rejected with ${r}`)});if(!ze(e)&&e!==null)throw Rs(n);return e}function $E(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(du(c)&&o)return o(c,r);if(mp(c)){if(s||a){let u=op(c);if(a?.length&&Qn(u,a))return null;if(s){let d=s(u);d?c=Nn(n,ip(d)):$o()}if(c.spans){let d=[],l=c.spans;for(let f of l){if(a?.length&&Qn(f,a)){Rf(l,f);continue}if(s){let m=s(f);m?d.push(m):($o(),d.push(f))}else d.push(f)}let p=c.spans.length-d.length;p&&e.recordDroppedEvent("before_send","span",p),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function du(e){return e.type===void 0}function mp(e){return e.type==="transaction"}function GE(e){let t=0;return e.name&&(t+=e.name.length*2),typeof e.value=="string"?t+=e.value.length*2:t+=8,t+hp(e.attributes)}function WE(e){let t=0;return e.message&&(t+=e.message.length*2),t+hp(e.attributes)}function hp(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*dp(n[0]):St(n)?t+=dp(n):t+=100}),t}function dp(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function fu(e,t){t.debug===!0&&(E?h.enable():Ge(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),x().update(t.initialScope);let r=new e(t);return Cs(r),r.init(),r}function Cs(e){x().setClient(e)}var pu=Symbol.for("SentryBufferFullError");function gp(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return tr(pu);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return Mn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}function Ns(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function _p(e,t){return e[t]||e.all||0}function ni(e,t,n=Date.now()){return _p(e,t)>n}function ri(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),p=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+p;else for(let f of u.split(";"))f==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[f]=r+p):o[f]=r+p}else s?o.all=r+Ns(s,r):t===429&&(o.all=r+60*1e3);return o}var jE=64;function oi(e,t,n=gp(e.bufferSize||jE)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(It(s,(l,p)=>{let f=_s(p);ni(r,f)?e.recordDroppedEvent("ratelimit_backoff",f):a.push(l)}),a.length===0)return Promise.resolve({});let c=Pe(s[0],a),u=l=>{It(c,(p,f)=>{e.recordDroppedEvent(l,_s(f))})},d=()=>t({body:xn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&E&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=ri(r,l),l),l=>{throw u("network_error"),E&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===pu)return E&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}var mu=100,hu=5e3,zE=36e5;function gu(e){function t(...n){E&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=hu,s;function a(l,p,f){return gs(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,p,f):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let p=await o.shift();p&&(t("Attempting to send previously queued event"),p[0].sent_at=new Date().toISOString(),d(p,!0).catch(f=>{t("Failed to retry sending",f)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,zE))}async function d(l,p=!1){if(!p&&gs(l,["replay_event","replay_recording"]))return await o.push(l),c(mu),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let f=await r.send(l),m=mu;if(f){if(f.headers?.["retry-after"])m=Ns(f.headers["retry-after"]);else if(f.headers?.["x-sentry-rate-limits"])m=6e4;else if((f.statusCode||0)>=400)return f}return c(m),i=hu,f}catch(f){if(await a(l,f,i))return p?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",f),{};throw f}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=hu,c(mu)),r.flush(l))}}}function Sp(e,t){let n;return It(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function qE(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=Sp(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function YE(e,t){return Pe(t?{...e[0],dsn:t}:e[0],e[1])}function _u(e,t){return n=>{let r=e(n),o=new Map;function i(c,u){let d=u?`${c}:${u}`:c,l=o.get(d);if(!l){let p=is(c);if(!p)return;let f=ei(p,n.tunnel);l=u?qE(e,u)({...n,url:f}):e({...n,url:f}),o.set(d,l)}return[c,l]}async function s(c){function u(f){let m=f?.length?f:["event"];return Sp(c,m)}let d=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f),l=d.length?d:[["",r]];return(await Promise.all(l.map(([f,m])=>m.send(YE(c,f)))))[0]}async function a(c){let u=[...o.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:s,flush:a}}}var VE="thismessage:/";function Fr(e){return"isRelative"in e}function rr(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?VE:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function Su(e){if(Fr(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Gt(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function ii(e){return e.split(/[?#]/,1)[0]}function si(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return KE(e,n)||JE(e,r)}function JE(e,t){return t?Ep(e)===Ep(t):!1}function KE(e,t){let n=rr(e);return!n||Fr(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Ep(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function ws(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var Eu=ws;function yu(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Tu(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:it})),version:it}),e._metadata=o}function or(e={}){let t=e.client||y();if(!Xo()||!t)return{};let n=Ze(),r=Ot(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||x(),i=e.span||Q(),s=i?Ho(i):XE(o),a=i?Ce(i):Zn(t,o),c=os(a);if(!as.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};if(e.propagateTraceparent){let l=i?bf(i):QE(o);l&&(d.traceparent=l)}return d}function XE(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Bo(t,r,n)}function QE(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return cs(t,r,n)}function bu(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var ZE=100;function tt(e,t){let n=y(),r=se();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=ZE}=n.getOptions();if(i<=0)return;let a={timestamp:yt(),...e},c=o?Ge(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var yp,ey="FunctionToString",Tp=new WeakMap,ty=(()=>({name:ey,setupOnce(){yp=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Jn(this),n=Tp.has(y())&&t!==void 0?t:this;return yp.apply(n,e)}}catch{}},setup(e){Tp.set(e,!0)}})),ai=ty;var ny=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ry="EventFilters",ks=(e={})=>{let t;return{name:ry,setup(n){let r=n.getOptions();t=bp(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=bp(e,i)}return oy(n,t)?null:n}}},ci=((e={})=>({...ks(e),name:"InboundFilters"}));function bp(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ny],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function oy(e,t){if(e.type){if(e.type==="transaction"&&sy(e,t.ignoreTransactions))return E&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Jt(e)}`),!0}else{if(iy(e,t.ignoreErrors))return E&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Jt(e)}`),!0;if(ly(e))return E&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Jt(e)}`),!0;if(ay(e,t.denyUrls))return E&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Jt(e)}.
Url: ${xs(e)}`),!0;if(!cy(e,t.allowUrls))return E&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Jt(e)}.
Url: ${xs(e)}`),!0}return!1}function iy(e,t){return t?.length?As(e).some(n=>Fe(n,t)):!1}function sy(e,t){if(!t?.length)return!1;let n=e.transaction;return n?Fe(n,t):!1}function ay(e,t){if(!t?.length)return!1;let n=xs(e);return n?Fe(n,t):!1}function cy(e,t){if(!t?.length)return!0;let n=xs(e);return n?Fe(n,t):!0}function uy(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function xs(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?uy(n):null}catch{return E&&h.error(`Cannot extract url for event ${Jt(e)}`),null}}function ly(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function vu(e,t,n,r,o,i){if(!o.exception?.values||!i||!Et(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Iu(e,t,r,i.originalException,n,o.exception.values,s,0))}function Iu(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Et(r[o],Error)){Ip(s,a);let u=e(t,r[o]),d=c.length;vp(u,o,d,a),c=Iu(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Et(u,Error)){Ip(s,a);let l=e(t,u),p=c.length;vp(l,`errors[${d}]`,p,a),c=Iu(e,t,n,u,o,[l,...c],l,p)}}),c}function Ip(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function vp(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var Rp=new Map,Ap=new Set;function dy(e){if(v._sentryModuleMetadata)for(let t of Object.keys(v._sentryModuleMetadata)){let n=v._sentryModuleMetadata[t];if(Ap.has(t))continue;Ap.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){Rp.set(o.filename,n);break}}}function fy(e,t){return dy(e),Rp.get(t)}function Os(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=fy(e,r.filename);o&&(r.module_metadata=o)})})}function Ms(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var Au=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{It(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(Ms(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;Os(n,t)})}});function ir(e){let t="console";We(t,e),je(t,py)}function py(){"console"in v&&qn.forEach(function(e){e in v.console&&me(v.console,e,function(t){return br[e]=t,function(...n){Ne("console",{args:n,level:e}),br[e]?.apply(v.console,n)}})})}function sr(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var my="CaptureConsole",hy=((e={})=>{let t=e.levels||qn,n=e.handled??!0;return{name:my,setup(r){"console"in v&&ir(({args:o,level:i})=>{y()!==r||!t.includes(i)||gy(o,i,n)})}}}),Ru=hy;function gy(e,t,n){let r={level:sr(t),extra:{arguments:e}};Oe(o=>{if(o.addEventProcessor(a=>(a.logger="console",qe(a,{handled:n,type:"auto.core.capture_console"}),a)),t==="assert"){if(!e[0]){let a=`Assertion failed: ${Vn(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),Pn(a,r)}return}let i=e.find(a=>a instanceof Error);if(i){ce(i,r);return}let s=Vn(e," ");Pn(s,r)})}var _y="Dedupe",Sy=(()=>{let e;return{name:_y,processEvent(t){if(t.type)return t;try{if(Ey(t,e))return E&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),ui=Sy;function Ey(e,t){return t?!!(yy(e,t)||Ty(e,t)):!1}function yy(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!wp(e,t)||!Np(e,t))}function Ty(e,t){let n=Cp(t),r=Cp(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!wp(e,t)||!Np(e,t))}function Np(e,t){let n=Ir(e),r=Ir(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function wp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Cp(e){return e.exception?.values?.[0]}var by="ExtraErrorData",Iy=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:by,processEvent(r,o,i){let{maxValueLength:s=250}=i.getOptions();return vy(r,o,t,n,s)}}}),Cu=Iy;function vy(e,t={},n,r,o){if(!t.originalException||!at(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=xp(t.originalException,r,o);if(s){let a={...e.contexts},c=Le(s,n);return ze(c)&&(_e(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function xp(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=at(s)||typeof s=="string"?kt(`${s}`,n):s}if(t&&e.cause!==void 0)if(at(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:xp(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=at(a)?a.toString():a}}return o}catch(r){E&&h.error("Unable to extract extra data from the Error object:",r)}return null}function Ay(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var Ry=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Cy(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Ry.exec(t);return n?n.slice(1):[]}function kp(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=Ay(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Op(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Mp(e,t){e=kp(e).slice(1),t=kp(t).slice(1);let n=Op(e.split("/")),r=Op(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function Lp(e,t){let n=Cy(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var Ny="RewriteFrames",Nu=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in v&&!!v.window,o=e.iteratee||wy({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:Ny,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function wy({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Mp(t,s):Lp(s);r.filename=`${n}${a}`}return r}}var xy=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],ky=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Oy={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Dp=["select","insert","upsert","update","delete"];function Ls(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Ps(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function My(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Ly(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&Oy[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Pp(e,t=!1){return new Proxy(e,{apply(n,r,o){return ut({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[q]:"auto.db.supabase",[ye]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),ce(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),ce(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function Py(e){let t=e.auth;if(!(!t||Ps(e.auth))){for(let n of xy){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Pp(r))}for(let n of ky){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Pp(r,!0))}Ls(e.auth)}}function Dy(e){Ps(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return By(i),o}}),Ls(e.prototype.from))}function Uy(e){Ps(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=Dp,i=n,s=My(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[f,m]of i.url.searchParams.entries())u.push(Ly(f,m));let d=Object.create(null);if(ze(i.body))for(let[f,m]of Object.entries(i.body))d[f]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,p={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[q]:"auto.db.supabase",[ye]:"db"};return u.length&&(p["db.query"]=u),Object.keys(d).length&&(p["db.body"]=d),ut({name:l,attributes:p},f=>Reflect.apply(t,n,[]).then(m=>{if(f&&(m&&typeof m=="object"&&"status"in m&&Qt(f,m.status||500),f.end()),m.error){let S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);let T={};u.length&&(T.query=u),Object.keys(d).length&&(T.body=d),ce(S,D=>(D.addEventProcessor(A=>(qe(A,{handled:!1,type:"auto.db.supabase.postgres"}),A)),D.setContext("supabase",T),D))}let _={type:"supabase",category:`db.${s}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(_.data=g),tt(_),m},m=>{throw f&&(Qt(f,500),f.end()),m}).then(...r))}}),Ls(e.prototype.then))}function By(e){for(let t of Dp)Ps(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return E&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),Uy(s),i}}),Ls(e.prototype[t]))}var Ds=e=>{if(!e){E&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;Dy(t),Py(e)},Fy="Supabase",Hy=(e=>({setupOnce(){Ds(e)},name:Fy})),wu=e=>Hy(e.supabaseClient);var $y=10,Gy="ZodErrors";function Wy(e){return at(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function jy(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function zy(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function qy(e){let t=new Set;for(let r of e.issues){let o=zy(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${kt(n.join(", "),100)}`}function Yy(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!Wy(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(jy);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:qy(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var Vy=((e={})=>{let t=e.limit??$y;return{name:Gy,processEvent(n,r){return Yy(t,e.saveZodIssuesAsAttachment,n,r)}}}),xu=Vy;var ku=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{It(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(Ms(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;Os(r,n)})},processEvent(t){let n=Jy(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function Jy(e){let t=Ir(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Up)).map(r=>r.slice(Up.length)):[])}var Up="_sentryBundlerPluginAppKey:";var Bp=100,Fp=10,Us="flag.evaluation.";function vt(e){let n=x().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function dt(e,t,n=Bp){let r=x().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;Ky(o,e,t,n)}function Ky(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){E&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function ft(e,t,n=Fp){if(typeof t!="boolean")return;let r=Q();if(!r)return;let o=P(r).data;if(`${Us}${e}`in o){r.setAttribute(`${Us}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith(Us)).length<n&&r.setAttribute(`${Us}${e}`,t)}var Ou=()=>({name:"FeatureFlags",processEvent(e,t,n){return vt(e)},addFeatureFlag(e,t){dt(e,t),ft(e,t)}});var Mu=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&me(t,"isOn",Hp),typeof t.getFeatureValue=="function"&&me(t,"getFeatureValue",Hp)},processEvent(t,n,r){return vt(t)}});function Hp(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(dt(n,r),ft(n,r)),r}}function Lu(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=Me()&&t(s);if(e.endTimestamp&&a){let f=e.fetchData.__span;if(!f)return;let m=r[f];m&&(Qy(m,e),delete r[f]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!Q(),l=a&&d?lt(eT(s,i,c)):new Ke;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let f=e.args[0],m=e.args[1]||{},_=Xy(f,m,Me()&&d?l:void 0,u);_&&(e.args[1]=m,m.headers=_)}let p=y();if(p){let f={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};p.emit("beforeOutgoingRequestSpan",l,f)}return l}function Xy(e,t,n,r){let o=or({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(Xi(e)?e.headers:void 0);if(c)if(Zy(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?Bs(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&Bs(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,p=l?Array.isArray(l)?[...l]:[l]:[],f=l&&(Array.isArray(l)?l.find(_=>Bs(_)):Bs(l));s&&!f&&p.push(s);let m={...c,"sentry-trace":u??i,baggage:p.length>0?p.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function Qy(e,t){if(t.response){Qt(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function Bs(e){return e.split(",").some(t=>t.trim().startsWith(rs))}function Zy(e){return typeof Headers<"u"&&Et(e,Headers)}function eT(e,t,n){let r=rr(e);return{name:r?`${t} ${Su(r)}`:t,attributes:tT(e,r,t,n)}}function tT(e,t,n,r){let o={url:e,type:"fetch","http.method":n,[q]:r,[ye]:"http.client"};return t&&(Fr(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function li(e,t={},n=x()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||y();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var Fs={};dc(Fs,{debug:()=>rT,error:()=>sT,fatal:()=>aT,fmt:()=>Eu,info:()=>oT,trace:()=>nT,warn:()=>iT});function Hr(e,t,n,r,o){Dn({level:e,message:t,attributes:n,severityNumber:o},r)}function nT(e,t,{scope:n}={}){Hr("trace",e,t,n)}function rT(e,t,{scope:n}={}){Hr("debug",e,t,n)}function oT(e,t,{scope:n}={}){Hr("info",e,t,n)}function iT(e,t,{scope:n}={}){Hr("warn",e,t,n)}function sT(e,t,{scope:n}={}){Hr("error",e,t,n)}function aT(e,t,{scope:n}={}){Hr("fatal",e,t,n)}function di(e,t,n){return"util"in v&&typeof v.util.format=="function"?v.util.format(...e):cT(e,t,n)}function cT(e,t,n){return e.map(r=>St(r)?String(r):JSON.stringify(Le(r,t,n))).join(" ")}function $p(e){return/%[sdifocO]/.test(e)}function Gp(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var uT="ConsoleLogs",Wp={[q]:"auto.console.logging"},lT=((e={})=>{let t=e.levels||qn;return{name:uT,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){E&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}ir(({args:s,level:a})=>{if(y()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let f=u.length>0?`Assertion failed: ${di(u,o,i)}`:"Assertion failed";Dn({level:"error",message:f,attributes:Wp})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!$p(s[0]),p={...Wp,...l?Gp(c,u):{}};Dn({level:d?"info":a,message:di(s,o,i),severityNumber:d?10:void 0,attributes:p})})}}}),Pu=lT;var Hs={};dc(Hs,{count:()=>dT,distribution:()=>pT,gauge:()=>fT});function Du(e,t,n,r){cu({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function dT(e,t=1,n){Du("counter",e,t,n)}function fT(e,t,n){Du("gauge",e,t,n)}function pT(e,t,n){Du("distribution",e,t,n)}var mT=["trace","debug","info","warn","error","fatal"];function Uu(e={}){let t=new Set(e.levels??mT),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||y();if(!l)return;let p=_T(o,i);if(!t.has(p))return;let{normalizeDepth:f=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),_=[];s&&_.push(s),a&&a.length>0&&_.push(di(a,f,m));let g=_.join(" ");d["sentry.origin"]="auto.logging.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),Dn({level:p,message:g,attributes:d})}}}var hT={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},gT={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function _T(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=hT[e];if(n)return n}if(typeof t=="number"){let n=gT[t];if(n)return n}return"info"}var jp="gen_ai.prompt",$r="gen_ai.system",pt="gen_ai.request.model",$s="gen_ai.request.stream",Gr="gen_ai.request.temperature",Gs="gen_ai.request.max_tokens",Wr="gen_ai.request.frequency_penalty",Ws="gen_ai.request.presence_penalty",jr="gen_ai.request.top_p",js="gen_ai.request.top_k",tn="gen_ai.response.finish_reasons",mn="gen_ai.response.model",hn="gen_ai.response.id",Un="gen_ai.usage.input_tokens",Bn="gen_ai.usage.output_tokens",Fn="gen_ai.usage.total_tokens",zr="gen_ai.operation.name",nn="gen_ai.request.messages",Xe="gen_ai.response.text",qr="gen_ai.request.available_tools",ar="gen_ai.response.streaming",mt="gen_ai.response.tool_calls",zp="openai.response.id",qp="openai.response.model",Yp="openai.response.timestamp",Vp="openai.usage.completion_tokens",Jp="openai.usage.prompt_tokens",Bu={CHAT:"chat",RESPONSES:"responses"},Fu="anthropic.response.timestamp";var Kp="OpenAI",Xp=["responses.create","chat.completions.create"],ST=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],Qp=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...ST];function zs(e){return e.includes("chat.completions")?Bu.CHAT:e.includes("responses")?Bu.RESPONSES:e.split(".").pop()||"unknown"}function Hu(e){return`gen_ai.${zs(e)}`}function Zp(e){return Xp.includes(e)}function em(e,t){return e?`${e}.${t}`:t}function tm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function nm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function rm(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function om(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function fi(e,t,n,r){t!==void 0&&e.setAttributes({[Jp]:t,[Un]:t}),n!==void 0&&e.setAttributes({[Vp]:n,[Bn]:n}),r!==void 0&&e.setAttributes({[Fn]:r})}function pi(e,t,n,r){e.setAttributes({[zp]:t,[hn]:t}),e.setAttributes({[qp]:n,[mn]:n}),e.setAttributes({[Yp]:new Date(r*1e3).toISOString()})}function ET(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function yT(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&ET(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function TT(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),ce(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!Qp.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*im(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)om(o)?yT(o,r,n):rm(o)&&TT(o,r,n,t),yield o}finally{pi(t,r.responseId,r.responseModel,r.responseTimestamp),fi(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[ar]:!0}),r.finishReasons.length&&t.setAttributes({[tn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Xe]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[mt]:JSON.stringify(i)}),t.end()}}function bT(e,t){let n={[$r]:"openai",[zr]:zs(t),[q]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Array.isArray(r.tools)?r.tools:[],s=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...s];a.length>0&&(n[qr]=JSON.stringify(a))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];n[pt]=r.model??"unknown","temperature"in r&&(n[Gr]=r.temperature),"top_p"in r&&(n[jr]=r.top_p),"frequency_penalty"in r&&(n[Wr]=r.frequency_penalty),"presence_penalty"in r&&(n[Ws]=r.presence_penalty),"stream"in r&&(n[$s]=r.stream)}else n[pt]="unknown";return n}function IT(e,t,n){if(pi(e,t.id,t.model,t.created),t.usage&&fi(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[tn]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[mt]:JSON.stringify(o)})}}}function vT(e,t,n){if(pi(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[tn]:JSON.stringify([t.status])}),t.usage&&fi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[mt]:JSON.stringify(o)})}}}function AT(e,t,n){if(!t||typeof t!="object")return;let r=t;if(tm(r)){if(IT(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Xe]:JSON.stringify(o)})}}else nm(r)&&(vT(e,r,n),n&&r.output_text&&e.setAttributes({[Xe]:r.output_text}))}function sm(e,t){"messages"in t&&e.setAttributes({[nn]:JSON.stringify(t.messages)}),"input"in t&&e.setAttributes({[nn]:JSON.stringify(t.input)})}function RT(){let t=x().getClient(),n=t?.getIntegrationByName(Kp),r=n?!!t?.getOptions().sendDefaultPii:!1;return{recordInputs:n?.options?.recordInputs??r,recordOutputs:n?.options?.recordOutputs??r}}function CT(e,t,n,r){return async function(...i){let s=r||RT(),a=bT(i,t),c=a[pt]||"unknown",u=zs(t),d=i[0];return d&&typeof d=="object"&&d.stream===!0?Zt({name:`${u} ${c} stream-response`,op:Hu(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&sm(p,i[0]);let f=await e.apply(n,i);return im(f,p,s.recordOutputs??!1)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ce(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),p.end(),f}}):ut({name:`${u} ${c}`,op:Hu(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&sm(p,i[0]);let f=await e.apply(n,i);return AT(p,f,s.recordOutputs),f}catch(f){throw ce(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function am(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=em(t,String(o));return typeof i=="function"&&Zp(s)?CT(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?am(i,s,n):i}})}function $u(e,t){return am(e,"",t)}function cr(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Yr(e){return`gen_ai.${cr(e)}`}function qs(e,t){return e?`${e}.${t}`:t}function mi(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Un]:t}),n!==void 0&&e.setAttributes({[Bn]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[Fn]:i})}}function NT(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"unknown_error"}),ce(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function wT(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function xT(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function kT(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function OT(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function cm(e,t,n,r){!(e&&typeof e=="object")||NT(e,r)||(wT(e,t),xT(e,t),kT(e,t,n),OT(e,t))}function MT(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[hn]:e.responseId}),e.responseModel&&t.setAttributes({[mn]:e.responseModel}),mi(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[ar]:!0}),e.finishReasons.length>0&&t.setAttributes({[tn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Xe]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[mt]:JSON.stringify(e.toolCalls)}),t.end())}async function*um(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)cm(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[hn]:r.responseId}),r.responseModel&&t.setAttributes({[mn]:r.responseModel}),mi(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[ar]:!0}),r.finishReasons.length>0&&t.setAttributes({[tn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Xe]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[mt]:JSON.stringify(r.toolCalls)}),t.end()}}function lm(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{cm(o,r,n,t)}),e.on("message",()=>{MT(r,t,n)}),e.on("error",o=>{ce(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var dm=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function fm(e){return dm.includes(e)}function LT(e,t){let n={[$r]:"anthropic",[zr]:cr(t),[q]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[qr]=JSON.stringify(r.tools)),n[pt]=r.model??"unknown","temperature"in r&&(n[Gr]=r.temperature),"top_p"in r&&(n[jr]=r.top_p),"stream"in r&&(n[$s]=r.stream),"top_k"in r&&(n[js]=r.top_k),"frequency_penalty"in r&&(n[Wr]=r.frequency_penalty),"max_tokens"in r&&(n[Gs]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[pt]=e[0]:n[pt]="unknown";return n}function Gu(e,t){"messages"in t&&e.setAttributes({[nn]:JSON.stringify(t.messages)}),"input"in t&&e.setAttributes({[nn]:JSON.stringify(t.input)}),"prompt"in t&&e.setAttributes({[jp]:JSON.stringify(t.prompt)})}function PT(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"unknown_error"}),ce(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function DT(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Xe]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[mt]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Xe]:t.completion}),"input_tokens"in t&&e.setAttributes({[Xe]:JSON.stringify(t.input_tokens)})}function UT(e,t){"id"in t&&"model"in t&&(e.setAttributes({[hn]:t.id,[mn]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Fu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Fu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&mi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function BT(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){PT(e,t);return}n&&DT(e,t),UT(e,t)}}function pm(e,t,n){throw ce(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function FT(e,t,n,r,o,i,s,a,c,u){let d=o[pt]??"unknown",l={name:`${i} ${d} stream-response`,op:Yr(s),attributes:o};return u?Zt(l,async p=>{try{c.recordInputs&&a&&Gu(p,a);let f=await e.apply(n,r);return um(f,p,c.recordOutputs??!1)}catch(f){return pm(f,p,s)}}):Zt(l,p=>{try{c.recordInputs&&a&&Gu(p,a);let f=t.apply(n,r);return lm(f,p,c.recordOutputs??!1)}catch(f){return pm(f,p,s)}})}function HT(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=LT(s,t),c=a[pt]??"unknown",u=cr(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream;return l||t==="messages.stream"?FT(e,o,n,s,a,u,t,d,r,l):ut({name:`${u} ${c}`,op:Yr(t),attributes:a},f=>(r.recordInputs&&d&&Gu(f,d),er(()=>o.apply(n,s),m=>{ce(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>BT(f,m,r.recordOutputs))))}})}function mm(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=qs(t,String(o));return typeof i=="function"&&fm(s)?HT(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?mm(i,s,n):i}})}function Wu(e,t){let n=!!y()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return mm(e,"",r)}var ju=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],hm="google_genai",zu="chats.create",gm="chat";function $T(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),ce(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function GT(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function WT(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function jT(e,t,n,r){!e||$T(e,r)||(GT(e,t),WT(e,t,n))}async function*_m(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)jT(o,r,n,t),yield o}finally{let o={[ar]:!0};r.responseId&&(o[hn]=r.responseId),r.responseModel&&(o[mn]=r.responseModel),r.promptTokens!==void 0&&(o[Un]=r.promptTokens),r.completionTokens!==void 0&&(o[Bn]=r.completionTokens),r.totalTokens!==void 0&&(o[Fn]=r.totalTokens),r.finishReasons.length&&(o[tn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Xe]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[mt]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Sm(e){if(ju.includes(e))return!0;let t=e.split(".").pop();return ju.includes(t)}function Em(e){return e.includes("Stream")||e.endsWith("generateContentStream")||e.endsWith("sendMessageStream")}function ym(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function zT(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Gr]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[jr]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[js]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Gs]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Wr]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Ws]=e.presencePenalty),t}function qT(e,t,n){let r={[$r]:hm,[zr]:cr(e),[q]:"auto.ai.google_genai"};if(t){if(r[pt]=ym(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,zT(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.map(s=>s.functionDeclarations);r[qr]=JSON.stringify(i)}}}else r[pt]=ym({},n);return r}function Tm(e,t){"contents"in t&&e.setAttributes({[nn]:JSON.stringify(t.contents)}),"message"in t&&e.setAttributes({[nn]:JSON.stringify(t.message)}),"history"in t&&e.setAttributes({[nn]:JSON.stringify(t.history)})}function YT(e,t,n){if(!(!t||typeof t!="object")){if(t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Un]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Bn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Fn]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Xe]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[mt]:JSON.stringify(r)})}}}function bm(e,t,n,r){let o=t===zu;return new Proxy(e,{apply(i,s,a){let c=a[0],u=qT(t,c,n),d=u[pt]??"unknown",l=cr(t);return Em(t)?Zt({name:`${l} ${d} stream-response`,op:Yr(t),attributes:u},async p=>{try{r.recordInputs&&c&&Tm(p,c);let f=await i.apply(n,a);return _m(f,p,!!r.recordOutputs)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ce(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),p.end(),f}}):ut({name:o?`${l} ${d} create`:`${l} ${d}`,op:Yr(t),attributes:u},p=>(r.recordInputs&&c&&Tm(p,c),er(()=>i.apply(n,a),f=>{ce(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},f=>{o||YT(p,f,r.recordOutputs)})))}})}function qu(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=qs(t,String(o));if(typeof s=="function"&&Sm(a)){if(a===zu){let c=bm(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?qu(l,gm,n):l}}return bm(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?qu(s,a,n):s}})}function Yu(e,t){let n=!!y()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return qu(e,"",r)}function Ys(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var Vr=v;function Vu(){return"history"in Vr&&!!Vr.history}function VT(){if(!("fetch"in Vr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function hi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function gi(){if(typeof EdgeRuntime=="string")return!0;if(!VT())return!1;if(hi(Vr.fetch))return!0;let e=!1,t=Vr.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=hi(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){E&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Ju(){return"ReportingObserver"in Vr}function ur(e,t){let n="fetch";We(n,e),je(n,()=>vm(void 0,t))}function Xu(e){let t="fetch-body-resolved";We(t,e),je(t,()=>vm(KT))}function vm(e,t=!1){t&&!gi()||me(v,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=XT(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:X()*1e3,virtualError:o,headers:QT(r)};return e||Ne("fetch",{...a}),n.apply(v,r).then(async c=>(e?e(c):Ne("fetch",{...a,endTimestamp:X()*1e3,response:c}),c),c=>{if(Ne("fetch",{...a,endTimestamp:X()*1e3,error:c}),at(c)&&c.stack===void 0&&(c.stack=o.stack,_e(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function JT(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function KT(e){let t;try{t=e.clone()}catch{return}JT(t,()=>{Ne("fetch-body-resolved",{endTimestamp:X()*1e3,response:e})})}function Ku(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Im(e){return typeof e=="string"?e:e?Ku(e,"url")?e.url:e.toString?e.toString():"":""}function XT(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Im(n),method:Ku(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Im(t),method:Ku(t,"method")?String(t.method).toUpperCase():"GET"}}function QT(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Xi(t))return new Headers(t.headers)}catch{}}function Qu(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Zu(){return"npm"}function Am(){return!Qu()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Jr(){return typeof window<"u"&&(!Am()||ZT())}function ZT(){return v.process?.type==="renderer"}var jt=v,le=jt.document,_i=jt.navigator,Gm="Report a Bug",eb="Cancel",tb="Send Bug Report",nb="Confirm",rb="Report a Bug",ob="your.email@example.org",ib="Email",sb="What's the bug? What did you expect?",ab="Description",cb="Your Name",ub="Name",lb="Thank you for your report!",db="(required)",fb="Add a screenshot",pb="Remove screenshot",mb="Highlight",hb="Hide",gb="Remove",_b="widget",Sb="api",Eb=5e3,ul=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=y();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&x().setTags(e.tags);let r=li({source:Sb,url:et(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Xs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function yb(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(_i.userAgent)||/Macintosh/i.test(_i.userAgent)&&_i.maxTouchPoints&&_i.maxTouchPoints>1||!isSecureContext)}function Vs(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Tb(e){let t=le.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function At(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var Kr=20,bb="http://www.w3.org/2000/svg";function Ib(){let e=a=>jt.document.createElementNS(bb,a),t=At(e("svg"),{width:`${Kr}`,height:`${Kr}`,viewBox:`0 0 ${Kr} ${Kr}`,fill:"var(--actor-color, var(--foreground))"}),n=At(e("g"),{clipPath:"url(#clip0_57_80)"}),r=At(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=At(e("clipPath"),{id:"clip0_57_80"}),s=At(e("rect"),{width:`${Kr}`,height:`${Kr}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function vb({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=le.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||Gm,o.appendChild(Ib()),e){let s=le.createElement("span");s.appendChild(le.createTextNode(e)),o.appendChild(s)}let i=Tb(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var Wm="rgba(88, 74, 192, 1)",Ab={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Wm,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Rm={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Wm,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Cm(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function Rb({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=le.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Cm(e==="dark"?{...Rm,...t}:{...Ab,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Cm({...Rm,...t})}
  }
}`:""}
}
`,r&&o.setAttribute("nonce",r),o}var ra=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:p={email:"email",name:"username"},tags:f,styleNonce:m,scriptNonce:_,colorScheme:g="system",themeLight:S={},themeDark:T={},addScreenshotButtonLabel:D=fb,cancelButtonLabel:A=eb,confirmButtonLabel:U=nb,emailLabel:w=ib,emailPlaceholder:b=ob,formTitle:R=rb,isRequiredLabel:I=db,messageLabel:k=ab,messagePlaceholder:H=sb,nameLabel:C=ub,namePlaceholder:L=cb,removeScreenshotButtonLabel:Y=pb,submitButtonLabel:K=tb,successMessageText:ne=lb,triggerLabel:N=Gm,triggerAriaLabel:j="",highlightToolText:O=mb,hideToolText:$=hb,removeHighlightText:Z=gb,onFormOpen:ae,onFormClose:Re,onSubmitSuccess:Te,onSubmitError:In,onFormSubmitted:Ut}={})=>{let Nt={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:p,tags:f,styleNonce:m,scriptNonce:_,colorScheme:g,themeDark:T,themeLight:S,triggerLabel:N,triggerAriaLabel:j,cancelButtonLabel:A,submitButtonLabel:K,confirmButtonLabel:U,formTitle:R,emailLabel:w,emailPlaceholder:b,messageLabel:k,messagePlaceholder:H,nameLabel:C,namePlaceholder:L,successMessageText:ne,isRequiredLabel:I,addScreenshotButtonLabel:D,removeScreenshotButtonLabel:Y,highlightToolText:O,hideToolText:$,removeHighlightText:Z,onFormClose:Re,onFormOpen:ae,onSubmitError:In,onSubmitSuccess:Te,onFormSubmitted:Ut},gt=null,vn=[],An=ue=>{if(!gt){let be=le.createElement("div");be.id=String(ue.id),le.body.appendChild(be),gt=be.attachShadow({mode:"open"}),gt.appendChild(Rb(ue))}return gt},Ro=async ue=>{let be=ue.enableScreenshot&&yb(),wt,Ue;try{wt=(t?t():await e("feedbackModalIntegration",_))(),Dr(wt)}catch{throw Xs&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let Vt=be?n?n():await e("feedbackScreenshotIntegration",_):void 0;Vt&&(Ue=Vt(),Dr(Ue))}catch{Xs&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let $e=wt.createDialog({options:{...ue,onFormClose:()=>{$e?.close(),ue.onFormClose?.()},onFormSubmitted:()=>{$e?.close(),ue.onFormSubmitted?.()}},screenshotIntegration:Ue,sendFeedback:ul,shadow:An(ue)});return $e},zi=(ue,be={})=>{let wt=Vs(Nt,be),Ue=typeof ue=="string"?le.querySelector(ue):typeof ue.addEventListener=="function"?ue:null;if(!Ue)throw Xs&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let $e=null,Vt=async()=>{$e||($e=await Ro({...wt,onFormSubmitted:()=>{$e?.removeFromDom(),wt.onFormSubmitted?.()}})),$e.appendToDom(),$e.open()};Ue.addEventListener("click",Vt);let ee=()=>{vn=vn.filter(_t=>_t!==ee),$e?.removeFromDom(),$e=null,Ue.removeEventListener("click",Vt)};return vn.push(ee),ee},Co=(ue={})=>{let be=Vs(Nt,ue),wt=An(be),Ue=vb({triggerLabel:be.triggerLabel,triggerAriaLabel:be.triggerAriaLabel,shadow:wt,styleNonce:m});return zi(Ue.el,{...be,onFormOpen(){Ue.hide()},onFormClose(){Ue.show()},onFormSubmitted(){Ue.show()}}),Ue};return{name:"Feedback",setupOnce(){!Jr()||!Nt.autoInject||(le.readyState==="loading"?le.addEventListener("DOMContentLoaded",()=>Co().appendToDom()):Co().appendToDom())},attachTo:zi,createWidget(ue={}){let be=Co(Vs(Nt,ue));return be.appendToDom(),be},async createForm(ue={}){return Ro(Vs(Nt,ue))},remove(){gt&&(gt.parentElement?.remove(),gt=null),vn.forEach(ue=>ue()),vn=[]}}});function jm(){return y()?.getIntegrationByName("Feedback")}var oa,fe,zm,lr,Nm,qm,il,Si={},ll=[],Cb=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dl=Array.isArray;function $n(e,t){for(var n in t)e[n]=t[n];return e}function Ym(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?oa.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return Qs(e,s,r,o,null)}function Qs(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++zm,__i:-1,__u:0};return o==null&&fe.vnode!=null&&fe.vnode(i),i}function Ei(e){return e.children}function Zs(e,t){this.props=e,this.context=t}function Qr(e,t){if(t==null)return e.__?Qr(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Qr(e):null}function Nb(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=$n({},o)).__v=o.__v+1,fe.vnode&&fe.vnode(r),fl(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??Qr(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Vm(r),r}function Vm(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Vm(e)}}function wm(e){(!e.__d&&(e.__d=!0)&&lr.push(e)&&!na.__r++||Nm!==fe.debounceRendering)&&((Nm=fe.debounceRendering)||qm)(na)}function na(){var e,t,n,r=[],o=[];for(lr.sort(il);e=lr.shift();)e.__d&&(n=lr.length,t=Nb(e,r,o)||t,n===0||lr.length>n?(sl(r,t,o),o.length=r.length=0,t=void 0,lr.sort(il)):t&&fe.__c&&fe.__c(t,ll));t&&sl(r,t,o),na.__r=0}function Jm(e,t,n,r,o,i,s,a,c,u,d){var l,p,f,m,_,g=r&&r.__k||ll,S=t.length;for(n.__d=c,wb(n,t,g),c=n.__d,l=0;l<S;l++)(f=n.__k[l])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?Si:g[f.__i]||Si,f.__i=l,fl(e,f,p,o,i,s,a,c,u,d),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&pl(p.ref,null,f),d.push(f.ref,f.__c||m,f)),_==null&&m!=null&&(_=m),65536&f.__u||p.__k===f.__k?c=Km(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:m&&(c=m.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=_}function wb(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Qs(null,o,null,null,o):dl(o)?Qs(Ei,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Qs(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=xb(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=Qr(i)),al(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=Qr(i)),al(i,i))}function Km(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Km(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function xb(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function xm(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Cb.test(t)?n:n+"px"}function Js(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||xm(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||xm(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Om:km,i)):e.removeEventListener(t,i?Om:km,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function km(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(fe.event?fe.event(e):e)}}function Om(e){if(this.l)return this.l[e.type+!0](fe.event?fe.event(e):e)}function fl(e,t,n,r,o,i,s,a,c,u){var d,l,p,f,m,_,g,S,T,D,A,U,w,b,R,I=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=fe.__b)&&d(t);e:if(typeof I=="function")try{if(S=t.props,T=(d=I.contextType)&&r[d.__c],D=d?T?T.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in I&&I.prototype.render?t.__c=l=new I(S,D):(t.__c=l=new Zs(S,D),l.constructor=I,l.render=Ob),T&&T.sub(l),l.props=S,l.state||(l.state={}),l.context=D,l.__n=r,p=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),I.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=$n({},l.__s)),$n(l.__s,I.getDerivedStateFromProps(S,l.__s))),f=l.props,m=l.state,l.__v=t,p)I.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(I.getDerivedStateFromProps==null&&S!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(S,D),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(S,l.__s,D)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=S,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(k){k&&(k.__=t)}),A=0;A<l._sb.length;A++)l.__h.push(l._sb[A]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(S,l.__s,D),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,m,_)})}if(l.context=D,l.props=S,l.__P=e,l.__e=!1,U=fe.__r,w=0,"prototype"in I&&I.prototype.render){for(l.state=l.__s,l.__d=!1,U&&U(t),d=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,U&&U(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++w<25);l.state=l.__s,l.getChildContext!=null&&(r=$n($n({},r),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(_=l.getSnapshotBeforeUpdate(f,m)),Jm(e,dl(R=d!=null&&d.type===Ei&&d.key==null?d.props.children:d)?R:[R],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(k){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),fe.__e(k,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=kb(n.__e,t,n,r,o,i,s,c,u);(d=fe.diffed)&&d(t)}function sl(e,t,n){for(var r=0;r<n.length;r++)pl(n[r],n[++r],n[++r]);fe.__c&&fe.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){fe.__e(i,o.__v)}})}function kb(e,t,n,r,o,i,s,a,c){var u,d,l,p,f,m,_,g=n.props,S=t.props,T=t.type;if(T==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((f=i[u])&&"setAttribute"in f==!!T&&(T?f.localName===T:f.nodeType===3)){e=f,i[u]=null;break}}if(e==null){if(T===null)return document.createTextNode(S);e=o?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,S.is&&S),i=null,a=!1}if(T===null)g===S||a&&e.data===S||(e.data=S);else{if(i=i&&oa.call(e.childNodes),g=n.props||Si,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(f=e.attributes[u]).name]=f.value;for(u in g)f=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=f:u==="key"||u in S||Js(e,u,null,f,o));for(u in S)f=S[u],u=="children"?p=f:u=="dangerouslySetInnerHTML"?d=f:u=="value"?m=f:u=="checked"?_=f:u==="key"||a&&typeof f!="function"||g[u]===f||Js(e,u,f,g[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Jm(e,dl(p)?p:[p],t,n,r,o&&T!=="foreignObject",i,s,i?i[0]:n.__k&&Qr(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&Ym(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||T==="progress"&&!m||T==="option"&&m!==g[u])&&Js(e,u,m,g[u],!1),u="checked",_!==void 0&&_!==e[u]&&Js(e,u,_,g[u],!1))}return e}function pl(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){fe.__e(r,n)}}function al(e,t,n){var r,o;if(fe.unmount&&fe.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||pl(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){fe.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&al(r[o],t,n||typeof e.type!="function");n||e.__e==null||Ym(e.__e),e.__=e.__e=e.__d=void 0}function Ob(e,t,n){return this.constructor(e,n)}function Mb(e,t,n){var r,o,i,s;fe.__&&fe.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],fl(t,e=t.__k=V(Ei,null,[e]),o||Si,Si,t.ownerSVGElement!==void 0,o?null:t.firstChild?oa.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,sl(i,e,s)}oa=ll.slice,fe={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},zm=0,Zs.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=$n({},this.state),typeof e=="function"&&(e=e($n({},n),this.props)),e&&$n(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),wm(this))},Zs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wm(this))},Zs.prototype.render=Ei,lr=[],qm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,il=function(e,t){return e.__v.__b-t.__v.__b},na.__r=0;var gn,de,el,Mm,Zr=0,Xm=[],ea=[],Ie=fe,Lm=Ie.__b,Pm=Ie.__r,Dm=Ie.diffed,Um=Ie.__c,Bm=Ie.unmount,Fm=Ie.__;function fr(e,t){Ie.__h&&Ie.__h(de,e,Zr||t),Zr=0;var n=de.__H||(de.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ea}),n.__[e]}function dr(e){return Zr=1,Qm(eh,e)}function Qm(e,t,n){var r=fr(gn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):eh(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=de,!de.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};de.u=!0;var i=de.shouldComponentUpdate,s=de.componentWillUpdate;de.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},de.shouldComponentUpdate=o}return r.__N||r.__}function Lb(e,t){var n=fr(gn++,3);!Ie.__s&&ml(n.__H,t)&&(n.__=e,n.i=t,de.__H.__h.push(n))}function Zm(e,t){var n=fr(gn++,4);!Ie.__s&&ml(n.__H,t)&&(n.__=e,n.i=t,de.__h.push(n))}function Pb(e){return Zr=5,yi(function(){return{current:e}},[])}function Db(e,t,n){Zr=6,Zm(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function yi(e,t){var n=fr(gn++,7);return ml(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Xr(e,t){return Zr=8,yi(function(){return e},t)}function Ub(e){var t=de.context[e.__c],n=fr(gn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(de)),t.props.value):e.__}function Bb(e,t){Ie.useDebugValue&&Ie.useDebugValue(t?t(e):e)}function Fb(e){var t=fr(gn++,10),n=dr();return t.__=e,de.componentDidCatch||(de.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Hb(){var e=fr(gn++,11);if(!e.__){for(var t=de.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function $b(){for(var e;e=Xm.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ta),e.__H.__h.forEach(cl),e.__H.__h=[]}catch(t){e.__H.__h=[],Ie.__e(t,e.__v)}}Ie.__b=function(e){de=null,Lm&&Lm(e)},Ie.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Fm&&Fm(e,t)},Ie.__r=function(e){Pm&&Pm(e),gn=0;var t=(de=e.__c).__H;t&&(el===de?(t.__h=[],de.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ea,n.__N=n.i=void 0})):(t.__h.forEach(ta),t.__h.forEach(cl),t.__h=[],gn=0)),el=de},Ie.diffed=function(e){Dm&&Dm(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Xm.push(t)!==1&&Mm===Ie.requestAnimationFrame||((Mm=Ie.requestAnimationFrame)||Gb)($b)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ea&&(n.__=n.__V),n.i=void 0,n.__V=ea})),el=de=null},Ie.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ta),n.__h=n.__h.filter(function(r){return!r.__||cl(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ie.__e(r,n.__v)}}),Um&&Um(e,t)},Ie.unmount=function(e){Bm&&Bm(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ta(r)}catch(o){t=o}}),n.__H=void 0,t&&Ie.__e(t,n.__v))};var Hm=typeof requestAnimationFrame=="function";function Gb(e){var t,n=function(){clearTimeout(r),Hm&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Hm&&(t=requestAnimationFrame(n))}function ta(e){var t=de,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),de=t}function cl(e){var t=de;e.__c=e.__(),de=t}function ml(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function eh(e,t){return typeof t=="function"?t(e):t}var Wb=Object.defineProperty({__proto__:null,useCallback:Xr,useContext:Ub,useDebugValue:Bb,useEffect:Lb,useErrorBoundary:Fb,useId:Hb,useImperativeHandle:Db,useLayoutEffect:Zm,useMemo:yi,useReducer:Qm,useRef:Pb,useState:dr},Symbol.toStringTag,{value:"Module"}),jb="http://www.w3.org/2000/svg";function zb(){let e=r=>le.createElementNS(jb,r),t=At(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=At(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function qb({options:e}){let t=yi(()=>({__html:zb().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Yb(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function tl(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function Vb({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:m,emailPlaceholder:_,isEmailRequired:g,isNameRequired:S,messageLabel:T,messagePlaceholder:D,nameLabel:A,namePlaceholder:U,submitButtonLabel:w,isRequiredLabel:b}=e,[R,I]=dr(!1),[k,H]=dr(null),[C,L]=dr(!1),Y=u?.input,[K,ne]=dr(null),N=Xr($=>{ne($),L(!1)},[]),j=Xr($=>{let Z=Yb($,{emailLabel:m,isEmailRequired:g,isNameRequired:S,messageLabel:T,nameLabel:A});return Z.length>0?H(`Please enter in the following required fields: ${Z.join(", ")}`):H(null),Z.length===0},[m,g,S,T,A]),O=Xr(async $=>{I(!0);try{if($.preventDefault(),!($.target instanceof HTMLFormElement))return;let Z=new FormData($.target),ae=await(u&&C?u.value():void 0),Re={name:tl(Z,"name"),email:tl(Z,"email"),message:tl(Z,"message"),attachments:ae?[ae]:void 0};if(!j(Re))return;try{let Te=await o({name:Re.name,email:Re.email,message:Re.message,source:_b,tags:d},{attachments:Re.attachments});i(Re,Te)}catch(Te){Xs&&h.error(Te),H(Te),s(Te)}}finally{I(!1)}},[u&&C,i,s]);return V("form",{class:"form",onSubmit:O},Y&&C?V(Y,{onError:N}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:R},V("div",{class:"form__top"},k?V("div",{class:"form__error-container"},k):null,c?V("label",{for:"name",class:"form__label"},V(nl,{label:A,isRequiredLabel:b,isRequired:S}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:U,required:S,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(nl,{label:m,isRequiredLabel:b,isRequired:g}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:_,required:g,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(nl,{label:T,isRequiredLabel:b,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:D,required:!0,rows:5})),Y?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:R,type:"button",onClick:()=>{ne(null),L($=>!$)}},C?p:l),K?V("div",{class:"form__error-container"},K.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:R,type:"submit"},w),V("button",{class:"btn btn--default",disabled:R,type:"button",onClick:r},f))))}function nl({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}var Ks=16,$m=17,Jb="http://www.w3.org/2000/svg";function Kb(){let e=c=>jt.document.createElementNS(Jb,c),t=At(e("svg"),{width:`${Ks}`,height:`${$m}`,viewBox:`0 0 ${Ks} ${$m}`,fill:"inherit"}),n=At(e("g"),{clipPath:"url(#clip0_57_156)"}),r=At(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=At(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=At(e("clipPath"),{id:"clip0_57_156"}),a=At(e("rect"),{width:`${Ks}`,height:`${Ks}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function Xb({open:e,onFormSubmitted:t,...n}){let r=n.options,o=yi(()=>({__html:Kb().outerHTML}),[]),[i,s]=dr(null),a=Xr(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=Xr((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},Eb))},[t]);return V(Ei,null,i?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(qb,{options:r}),V(Vb,{...n,onSubmitSuccess:c})))))}var Qb=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,Zb=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,eI=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,tI=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,nI=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function rI(e){let t=le.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Qb}
${Zb}
${eI}
${tI}
${nI}
`,e&&t.setAttribute("nonce",e),t}function oI(){let e=x().getUser(),t=se().getUser(),n=Ht().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var th=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=oI(),a=le.createElement("div"),c=rI(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),le.body.style.overflow=u},open(){p(!0),e.onFormOpen?.(),y()?.emit("openFeedbackWidget"),u=le.body.style.overflow,le.body.style.overflow="hidden"},close(){p(!1),le.body.style.overflow=u}},l=t?.createInput({h:V,hooks:Wb,dialog:d,options:e}),p=f=>{Mb(V(Xb,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&s?.[i.name]||"",defaultEmail:i&&s?.[i.email]||"",onFormClose:()=>{p(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,_)=>{p(!1),e.onSubmitSuccess?.(m,_)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:f}),a)};return d}}));function iI({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function sI(e){let t=le.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function aI({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function cI({hooks:e}){function t(){let[n,r]=e.useState(jt.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(jt.devicePixelRatio)},i=matchMedia(`(resolution: ${jt.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await _i.mediaDevices.getDisplayMedia({video:{width:jt.innerWidth*a,height:jt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=le.createElement("video");await new Promise((l,p)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(f=>f.stop()),l()},d.play().catch(p)}),i()})().catch(s)},[])}}function uI(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Hn(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function rl(e,t){Hn(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function ol(e,t,n){Hn(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{uI(i,o,t)})})}function lI({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=cI({hooks:t}),s=aI({h:e}),a=iI({h:e}),c={__html:sI(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[p,f]=t.useState("highlight"),[m,_]=t.useState([]),g=t.useRef(null),S=t.useRef(null),T=t.useRef(null),D=t.useRef(null),[A,U]=t.useState(1),w=t.useMemo(()=>{let C=le.getElementById(o.id);if(!C)return"white";let L=getComputedStyle(C);return L.getPropertyValue("--button-primary-background")||L.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let C=()=>{let L=g.current;L&&(Hn(l.canvas,{alpha:!1},Y=>{let K=Math.min(L.clientWidth/Y.width,L.clientHeight/Y.height);U(K)}),(L.clientHeight===0||L.clientWidth===0)&&setTimeout(C,0))};return C(),jt.addEventListener("resize",C),()=>{jt.removeEventListener("resize",C)}},[l]);let b=t.useCallback((C,L)=>{Hn(C,{alpha:!0},(Y,K)=>{K.scale(L,L),Y.width=l.canvas.width,Y.height=l.canvas.height})},[l]);t.useEffect(()=>{b(S.current,l.dpi),rl(S.current,l.canvas)},[l]),t.useEffect(()=>{b(T.current,l.dpi),Hn(T.current,{alpha:!0},(C,L)=>{L.clearRect(0,0,C.width,C.height)}),ol(T.current,w,m)},[m,w]),t.useEffect(()=>{b(n,l.dpi),rl(n,l.canvas),Hn(le.createElement("canvas"),{alpha:!0},(C,L)=>{L.scale(l.dpi,l.dpi),C.width=l.canvas.width,C.height=l.canvas.height,ol(C,w,m),rl(n,C)})},[m,l,w]);let R=C=>{if(!p||!D.current)return;let L=D.current.getBoundingClientRect(),Y={type:p,x:C.offsetX/A,y:C.offsetY/A},K=(j,O)=>{let $=(O.clientX-L.x)/A,Z=(O.clientY-L.y)/A;return{type:j.type,x:Math.min(j.x,$),y:Math.min(j.y,Z),w:Math.abs($-j.x),h:Math.abs(Z-j.y)}},ne=j=>{Hn(T.current,{alpha:!0},(O,$)=>{$.clearRect(0,0,O.width,O.height)}),ol(T.current,w,[...m,K(Y,j)])},N=j=>{let O=K(Y,j);O.w*A>=1&&O.h*A>=1&&_($=>[...$,O]),le.removeEventListener("mousemove",ne),le.removeEventListener("mouseup",N)};le.addEventListener("mousemove",ne),le.addEventListener("mouseup",N)},I=t.useCallback(C=>L=>{L.preventDefault(),L.stopPropagation(),_(Y=>{let K=[...Y];return K.splice(C,1),K})},[]),k={width:`${l.canvas.width*A}px`,height:`${l.canvas.height*A}px`},H=C=>{C.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:S,id:"background",style:k}),e("canvas",{ref:T,id:"foreground",style:k}),e("div",{ref:D,onMouseDown:R,style:k},m.map((C,L)=>e("div",{key:L,class:"editor__rect",style:{top:`${C.y*A}px`,left:`${C.x*A}px`,width:`${C.w*A}px`,height:`${C.h*A}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:I(L),onMouseDown:H,onMouseUp:H,type:"button"},e(a,null))))))),e(s,{options:o,action:p,setAction:f}))};return function({onError:p}){let[f,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((_,g)=>{Hn(le.createElement("canvas"),{alpha:!1},(S,T)=>{T.scale(g,g),S.width=_.videoWidth,S.height=_.videoHeight,T.drawImage(_,0,0,S.width,S.height),m({canvas:S,dpi:g})}),n.width=_.videoWidth,n.height=_.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(_=>{u.display="block",p(_)},[])}),f?e(d,{screenshot:f}):e("div",null)}}var nh=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=le.createElement("canvas");return{input:lI({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var M=v,hl=0;function gl(){return hl>0}function dI(){hl++,setTimeout(()=>{hl--})}function pr(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(Jn(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>pr(s,t));return e.apply(this,i)}catch(i){throw dI(),Oe(s=>{s.addEventProcessor(a=>(t.mechanism&&(Rr(a,void 0,void 0),qe(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),ce(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}Qi(r,e),_e(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Ti(){let e=et(),{referrer:t}=M.document||{},{userAgent:n}=M.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var fI={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient"},rh=M;async function ia(e,t){let n=fI[e],r=rh.Sentry=rh.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=pI(n),s=M.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,p)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",p)}),c=M.document.currentScript,u=M.document.body||M.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function pI(e){let n=y()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${it}/${e}.min.js`,n).toString()}var oh=ra({lazyLoadIntegration:ia});var _l=ra({getModalIntegration:()=>th,getScreenshotIntegration:()=>nh});function eo(e,t){let n=yl(e,t),r={type:SI(t),value:EI(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function mI(e,t,n,r){let i=y()?.getOptions().normalizeDepth,s=bI(t),a={__serialized__:ms(t,i)};if(s)return{exception:{values:[eo(e,s)]},extra:a};let c={exception:{values:[{type:Yn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:yI(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=yl(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Sl(e,t){return{exception:{values:[eo(e,t)]}}}function yl(e,t){let n=t.stacktrace||t.stack||"",r=gI(t),o=_I(t);try{return e(n,r,o)}catch{}return[]}var hI=/Minified React error #\d+;/i;function gI(e){return e&&hI.test(e.message)?1:0}function _I(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function ih(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function SI(e){let t=e?.name;return!t&&ih(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function EI(e){let t=e?.message;return ih(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function sa(e,t,n,r){let o=n?.syntheticException||void 0,i=ca(e,t,o,r);return qe(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Mn(i)}function aa(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=El(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),Mn(s)}function ca(e,t,n,r,o){let i;if(Ji(t)&&t.error)return Sl(e,t.error);if(Ki(t)||Sc(t)){let s=t;if("stack"in t)i=Sl(e,t);else{let a=s.name||(Ki(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=El(e,c,n,r),Rr(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return at(t)?Sl(e,t):ze(t)||Yn(t)?(i=mI(e,t,n,o),qe(i,{synthetic:!0}),i):(i=El(e,t,n,r),Rr(i,`${t}`,void 0),qe(i,{synthetic:!0}),i)}function El(e,t,n,r){let o={};if(r&&n){let i=yl(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),qe(o,{synthetic:!0})}if(Cn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function yI(e,{isUnhandledRejection:t}){let n=Ic(e),r=t?"promise rejection":"exception";return Ji(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Yn(e)?`Event \`${TI(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function TI(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function bI(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var to=class extends ti{constructor(t){let n=II(t),r=M.SENTRY_SDK_SOURCE||Zu();Tu(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a}=this._options;M.document&&(i||s||a?.enableMetrics)&&M.document.addEventListener("visibilitychange",()=>{M.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&Ur(this),a?.enableMetrics&&Br(this))}),o&&this.on("beforeSendSession",yu)}eventFromException(t,n){return sa(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return aa(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function II(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:M.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var zt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var B=v;var vI=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",rn=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=vI(t.value,n),e(t)))}};var sh=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var _n=(e=!0)=>{let t=B.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var Lt=()=>_n()?.activationStart??0;var on=(e,t=-1)=>{let n=_n(),r="navigate";return n&&(B.document?.prerendering||Lt()>0?r="prerender":B.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:sh(),navigationType:r}};var Tl=new WeakMap;function no(e,t){return Tl.get(e)||Tl.set(e,new t),Tl.get(e)}var ua=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Pt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var ro=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var bi=-1,AI=()=>B.document?.visibilityState==="hidden"&&!B.document?.prerendering?0:1/0,la=e=>{B.document.visibilityState==="hidden"&&bi>-1&&(bi=e.type==="visibilitychange"?e.timeStamp:0,CI())},RI=()=>{addEventListener("visibilitychange",la,!0),addEventListener("prerenderingchange",la,!0)},CI=()=>{removeEventListener("visibilitychange",la,!0),removeEventListener("prerenderingchange",la,!0)},oo=()=>{if(B.document&&bi<0){let e=Lt();bi=(B.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??AI(),RI()}return{get firstHiddenTime(){return bi}}};var Gn=e=>{B.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var NI=[1800,3e3],ah=(e,t={})=>{Gn(()=>{let n=oo(),r=on("FCP"),o,s=Pt("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Lt(),0),r.entries.push(c),o(!0)))});s&&(o=rn(e,r,NI,t.reportAllChanges))})};var wI=[.1,.25],ch=(e,t={})=>{ah(ro(()=>{let n=on("CLS",0),r,o=no(t,ua),i=a=>{for(let c of a)o._processEntry(c);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},s=Pt("layout-shift",i);s&&(r=rn(e,n,wI,t.reportAllChanges),B.document?.addEventListener("visibilitychange",()=>{B.document?.visibilityState==="hidden"&&(i(s.takeRecords()),r(!0))}),B?.setTimeout?.(r))}))};var uh=0,bl=1/0,da=0,xI=e=>{e.forEach(t=>{t.interactionId&&(bl=Math.min(bl,t.interactionId),da=Math.max(da,t.interactionId),uh=da?(da-bl)/7+1:0)})},Il,vl=()=>Il?uh:performance.interactionCount||0,lh=()=>{"interactionCount"in performance||Il||(Il=Pt("event",xI,{type:"event",buffered:!0,durationThreshold:0}))};var Al=10,dh=0,kI=()=>vl()-dh,fa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){dh=vl(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(kI()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Al||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>Al){let o=this._longestInteractionList.splice(Al);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var io=e=>{let t=n=>{(n.type==="pagehide"||B.document?.visibilityState==="hidden")&&e(n)};B.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var pa=e=>{let t=B.requestIdleCallback||B.setTimeout;B.document?.visibilityState==="hidden"?e():(e=ro(e),t(e),io(e))};var OI=[200,500],MI=40,fh=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Gn(()=>{lh();let n=on("INP"),r,o=no(t,fa),i=a=>{pa(()=>{for(let u of a)o._processEntry(u);let c=o._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},s=Pt("event",i,{durationThreshold:t.durationThreshold??MI});r=rn(e,n,OI,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),io(()=>{i(s.takeRecords()),r(!0)}))})};var ma=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var LI=[2500,4e3],ph=(e,t={})=>{Gn(()=>{let n=oo(),r=on("LCP"),o,i=no(t,ma),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Lt(),0),r.entries=[u],o())},a=Pt("largest-contentful-paint",s);if(a){o=rn(e,r,LI,t.reportAllChanges);let c=ro(()=>{s(a.takeRecords()),a.disconnect(),o(!0)});for(let u of["keydown","click","visibilitychange"])B.document&&addEventListener(u,()=>pa(c),{capture:!0,once:!0})}})};var PI=[800,1800],Rl=e=>{B.document?.prerendering?Gn(()=>Rl(e)):B.document?.readyState!=="complete"?addEventListener("load",()=>Rl(e),!0):setTimeout(e)},mh=(e,t={})=>{let n=on("TTFB"),r=rn(e,n,PI,t.reportAllChanges);Rl(()=>{let o=_n();o&&(n.value=Math.max(o.responseStart-Lt(),0),n.entries=[o],r(!0))})};var Ii={},ha={},hh,gh,_h,Sh;function mr(e,t=!1){return ga("cls",e,DI,hh,t)}function hr(e,t=!1){return ga("lcp",e,UI,gh,t)}function Cl(e){return ga("ttfb",e,BI,_h)}function vi(e){return ga("inp",e,FI,Sh)}function Rt(e,t){return Eh(e,t),ha[e]||(HI(e),ha[e]=!0),yh(e,t)}function Ai(e,t){let n=Ii[e];if(n?.length)for(let r of n)try{r(t)}catch(o){zt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${st(r)}
Error:`,o)}}function DI(){return ch(e=>{Ai("cls",{metric:e}),hh=e},{reportAllChanges:!0})}function UI(){return ph(e=>{Ai("lcp",{metric:e}),gh=e},{reportAllChanges:!0})}function BI(){return mh(e=>{Ai("ttfb",{metric:e}),_h=e})}function FI(){return fh(e=>{Ai("inp",{metric:e}),Sh=e})}function ga(e,t,n,r,o=!1){Eh(e,t);let i;return ha[e]||(i=n(),ha[e]=!0),r&&t({metric:r}),yh(e,t,o?i:void 0)}function HI(e){let t={};e==="event"&&(t.durationThreshold=0),Pt(e,n=>{Ai(e,{entries:n})},t)}function Eh(e,t){Ii[e]=Ii[e]||[],Ii[e].push(t)}function yh(e,t,n){return()=>{n&&n();let r=Ii[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function Th(e){return"duration"in e}function _a(e){return typeof e=="number"&&isFinite(e)}function Sn(e,t,n,{...r}){let o=P(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),On(e,()=>{let i=lt({startTime:t,...r});return i&&i.end(n),i})}function so(e){let t=y();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=x(),p=l.getUser(),f=p!==void 0?p.email||p.id||p.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let _={release:s,environment:a,user:f||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":B.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return lt({name:n,attributes:_,startTime:i,experimental:{standalone:!0}})}function En(){return B.addEventListener&&B.performance}function pe(e){return e/1e3}function bh(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function Sa(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Ea(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}io(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function Ih(e){let t=0,n;if(!Sa("layout-shift"))return;let r=mr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Ea(e,(o,i)=>{$I(t,n,i,o),r()})}function $I(e,t,n,r){zt&&h.log(`Sending CLS span (${e})`);let o=t?pe((Ee()||0)+t.startTime):X(),i=x().getScopeData().transactionName,s=t?we(t.sources[0]?.node):"Layout shift",a={[q]:"auto.http.browser.cls",[ye]:"ui.webvital.cls",[Mt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=we(u.node)});let c=so({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[Kt]:"",[Xt]:e}),c.end(o))}function vh(e){let t=0,n;if(!Sa("largest-contentful-paint"))return;let r=hr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Ea(e,(o,i)=>{GI(t,n,i,o),r()})}function GI(e,t,n,r){zt&&h.log(`Sending LCP span (${e})`);let o=pe((Ee()||0)+(t?.startTime||0)),i=x().getScopeData().transactionName,s=t?we(t.element):"Largest contentful paint",a={[q]:"auto.http.browser.lcp",[ye]:"ui.webvital.lcp",[Mt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=we(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=so({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[Kt]:"millisecond",[Xt]:e}),c.end(o))}function Dt(e){return e&&((Ee()||performance.timeOrigin)+e)/1e3}function Ri(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=bh(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Ee()||En()?.timeOrigin?WI({...t,"http.request.redirect_start":Dt(e.redirectStart),"http.request.redirect_end":Dt(e.redirectEnd),"http.request.worker_start":Dt(e.workerStart),"http.request.fetch_start":Dt(e.fetchStart),"http.request.domain_lookup_start":Dt(e.domainLookupStart),"http.request.domain_lookup_end":Dt(e.domainLookupEnd),"http.request.connect_start":Dt(e.connectStart),"http.request.secure_connection_start":Dt(e.secureConnectionStart),"http.request.connection_end":Dt(e.connectEnd),"http.request.request_start":Dt(e.requestStart),"http.request.response_start":Dt(e.responseStart),"http.request.response_end":Dt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function WI(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var jI=2147483647,Ah=0,qt={},ht,Ta;function Nl({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=En();if(r&&Ee()){r.mark&&B.performance.mark("sentry-tracing-init");let o=t?vh(n):qI(),i=YI(),s=e?Ih(n):zI();return()=>{o?.(),i(),s?.()}}return()=>{}}function wl(){Rt("longtask",({entries:e})=>{let t=Q();if(!t)return;let{op:n,start_timestamp:r}=P(t);for(let o of e){let i=pe(Ee()+o.startTime),s=pe(o.duration);n==="navigation"&&r&&i<r||Sn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[q]:"auto.ui.browser.metrics"}})}})}function xl(){new PerformanceObserver(t=>{let n=Q();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=pe(Ee()+r.startTime),{start_timestamp:i,op:s}=P(n);if(s==="navigation"&&i&&o<i)continue;let a=pe(r.duration),c={[q]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:p,sourceFunctionName:f,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,p&&(c["code.filepath"]=p),f&&(c["code.function"]=f),m!==-1&&(c["browser.script.source_char_position"]=m),Sn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function kl(){Rt("event",({entries:e})=>{let t=Q();if(t){for(let n of e)if(n.name==="click"){let r=pe(Ee()+n.startTime),o=pe(n.duration),i={name:we(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[q]:"auto.ui.browser.metrics"}},s=Oo(n.target);s&&(i.attributes["ui.component_name"]=s),Sn(t,r,r+o,i)}}})}function zI(){return mr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.cls={value:e.value,unit:""},Ta=t)},!0)}function qI(){return hr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.lcp={value:e.value,unit:"millisecond"},ht=t)},!0)}function YI(){return Cl(({metric:e})=>{e.entries[e.entries.length-1]&&(qt.ttfb={value:e.value,unit:"millisecond"})})}function Ol(e,t){let n=En(),r=Ee();if(!n?.getEntries||!r)return;let o=pe(r),i=n.getEntries(),{op:s,start_timestamp:a}=P(e);i.slice(Ah).forEach(c=>{let u=pe(c.startTime),d=pe(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{XI(e,c,o);break}case"mark":case"paint":case"measure":{JI(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=oo(),p=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&p&&(qt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&p&&(qt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{ev(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),Ah=Math.max(i.length-1,0),tv(e),s==="pageload"&&(ov(qt),t.recordClsOnPageloadSpan||delete qt.cls,t.recordLcpOnPageloadSpan||delete qt.lcp,Object.entries(qt).forEach(([c,u])=>{jo(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Lt()),nv(e,t)),ht=void 0,Ta=void 0,qt={}}function VI(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function JI(e,t,n,r,o,i){if(VI(t)||["mark","measure"].includes(t.entryType)&&Fe(t.name,i))return;let s=_n(!1),a=pe(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[q]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),KI(l,t),c<=d&&Sn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function KI(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&St(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(St(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function XI(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ya(e,t,r,n)}),ya(e,t,"secureConnection",n,"TLS/SSL"),ya(e,t,"fetch",n,"cache"),ya(e,t,"domainLookup",n,"DNS"),ZI(e,t,n)}function ya(e,t,n,r,o=n){let i=QI(n),s=t[i],a=t[`${n}Start`];!a||!s||Sn(e,r+pe(a),r+pe(s),{op:`browser.${o}`,name:t.name,attributes:{[q]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function QI(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function ZI(e,t,n){let r=n+pe(t.requestStart),o=n+pe(t.responseEnd),i=n+pe(t.responseStart);t.responseEnd&&(Sn(e,r,o,{op:"browser.request",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}),Sn(e,i,o,{op:"browser.response",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}))}function ev(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[q]:"auto.resource.browser.metrics"},u=Gt(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(B.location.origin),rv(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...Ri(t)},l=i+r,p=l+o;Sn(e,l,p,{name:n.replace(B.location.origin,""),op:a,attributes:d})}function tv(e){let t=B.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),_a(n.rtt)&&(qt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),_a(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),_a(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function nv(e,t){ht&&t.recordLcpOnPageloadSpan&&(ht.element&&e.setAttribute("lcp.element",we(ht.element)),ht.id&&e.setAttribute("lcp.id",ht.id),ht.url&&e.setAttribute("lcp.url",ht.url.trim().slice(0,200)),ht.loadTime!=null&&e.setAttribute("lcp.loadTime",ht.loadTime),ht.renderTime!=null&&e.setAttribute("lcp.renderTime",ht.renderTime),e.setAttribute("lcp.size",ht.size)),Ta?.sources&&t.recordClsOnPageloadSpan&&Ta.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,we(n.node)))}function rv(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<jI||typeof i=="string")&&(t[o]=i)})}function ov(e){let t=_n(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Ml(){return En()&&Ee()?Rt("element",iv):()=>{}}var iv=({entries:e})=>{let t=Q(),n=t?re(t):void 0,r=n?P(n).description:x().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[pe(c),"load-time"]:a?[pe(a),"render-time"]:[X(),"entry-emission"],l=s==="image-paint"?pe(Math.max(0,(a??0)-(c??0))):0,p={[q]:"auto.ui.browser.elementtiming",[ye]:"ui.elementtiming",[ve]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};ut({name:`element[${i.identifier}]`,attributes:p,startTime:u,onlyIfParent:!0},f=>{f.end(u+l)})})};var sv=1e3,Rh,Ll,Pl;function Ci(e){We("dom",e),je("dom",av)}function av(){if(!B.document)return;let e=Ne.bind(null,"dom"),t=Ch(e,!0);B.document.addEventListener("click",t,!1),B.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=B[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(me(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=Ch(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),me(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function cv(e){if(e.type!==Ll)return!1;try{if(!e.target||e.target._sentryId!==Pl)return!1}catch{}return!0}function uv(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Ch(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=lv(n);if(uv(n.type,r))return;_e(n,"_sentryCaptured",!0),r&&!r._sentryId&&_e(r,"_sentryId",Se());let o=n.type==="keypress"?"input":n.type;cv(n)||(e({event:n,name:o,global:t}),Ll=n.type,Pl=r?r._sentryId:void 0),clearTimeout(Rh),Rh=B.setTimeout(()=>{Pl=void 0,Ll=void 0},sv)}}function lv(e){try{return e.target}catch{return null}}var ba;function yn(e){let t="history";We(t,e),je(t,dv)}function dv(){if(B.addEventListener("popstate",()=>{let t=B.location.href,n=ba;if(ba=t,n===t)return;Ne("history",{from:n,to:t})}),!Vu())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=ba,i=fv(String(r));if(ba=i,o===i)return t.apply(this,n);Ne("history",{from:o,to:i})}return t.apply(this,n)}}me(B.history,"pushState",e),me(B.history,"replaceState",e)}function fv(e){try{return new URL(e,B.location.origin).toString()}catch{return e}}var Ia={};function ao(e){let t=Ia[e];if(t)return t;let n=B[e];if(hi(n))return Ia[e]=n.bind(B);let r=B.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){zt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Ia[e]=n.bind(B))}function Dl(e){Ia[e]=void 0}function gr(...e){return ao("setTimeout")(...e)}var nt="__sentry_xhr_v3__";function _r(e){We("xhr",e),je("xhr",pv)}function pv(){if(!B.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=X()*1e3,s=De(r[0])?r[0].toUpperCase():void 0,a=mv(r[1]);if(!s||!a)return t.apply(n,r);n[nt]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[nt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:X()*1e3,startTimestamp:i,xhr:n,virtualError:o};Ne("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[p,f]=l,m=d[nt];return m&&De(p)&&De(f)&&(m.request_headers[p.toLowerCase()]=f),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[nt];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:X()*1e3,xhr:n};return Ne("xhr",i),t.apply(n,r)}})}function mv(e){if(De(e))return e;try{return e.toString()}catch{}}function va(e){return new URLSearchParams(e).toString()}function Sr(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[va(e)];if(!e)return[void 0]}catch(n){return zt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return zt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function co(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}var Ul=[],Aa=new Map,hv=60;function Bl(){if(En()&&Ee()){let t=gv();return()=>{t()}}return()=>{}}var Nh={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function gv(){return vi(_v)}var _v=({metric:e})=>{if(e.value==null)return;let t=pe(e.value);if(t>hv)return;let n=e.entries.find(m=>m.duration===e.value&&Nh[m.name]);if(!n)return;let{interactionId:r}=n,o=Nh[n.name],i=pe(Ee()+n.startTime),s=Q(),a=s?re(s):void 0,u=(r!=null?Aa.get(r):void 0)||a,d=u?P(u).description:x().getScopeData().transactionName,l=we(n.target),p={[q]:"auto.http.browser.inp",[ye]:`ui.interaction.${o}`,[Mt]:n.duration},f=so({name:l,transaction:d,attributes:p,startTime:i});f&&(f.addEvent("inp",{[Kt]:"millisecond",[Xt]:e.value}),f.end(i+t))};function Fl(){let e=({entries:t})=>{let n=Q(),r=n&&re(n);t.forEach(o=>{if(!Th(o)||!r)return;let i=o.interactionId;if(i!=null&&!Aa.has(i)){if(Ul.length>10){let s=Ul.shift();Aa.delete(s)}Ul.push(i),Aa.set(i,r)}})};Rt("event",e),Rt("first-input",e)}function uo(e,t=ao("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw Dl("fetch"),c}finally{n-=s,r--}}return oi(e,o)}var Sv=10,Ev=20,yv=30,Tv=40,bv=50;function lo(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var Iv=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,vv=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Av=/\((\S*)(?::(\d+))(?::(\d+))\)/,Rv=/at (.+?) ?\(data:(.+?),/,Cv=e=>{let t=e.match(Rv);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=Iv.exec(e);if(n){let[,o,i,s]=n;return lo(o,"?",+i,+s)}let r=vv.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=Av.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=Oh(r[1]||"?",r[2]);return lo(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Hl=[yv,Cv],Nv=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,wv=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,xv=e=>{let t=Nv.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=wv.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=Oh(o,r),lo(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},$l=[bv,xv],kv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ov=e=>{let t=kv.exec(e);return t?lo(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},wh=[Tv,Ov],Mv=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Lv=e=>{let t=Mv.exec(e);return t?lo(t[2],t[3]||"?",+t[1]):void 0},xh=[Sv,Lv],Pv=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Dv=e=>{let t=Pv.exec(e);return t?lo(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},kh=[Ev,Dv],Gl=[Hl,$l],Ra=Yi(...Gl),Oh=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function Mh(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Je(r)}},i=Uv(e);return Pe(o,[i])}function Uv(e){return[{type:"user_report"},e]}var F=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var Ca=1024,Bv="Breadcrumbs",Fv=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Bv,setup(n){t.console&&ir(Gv(n)),t.dom&&Ci($v(n,t.dom)),t.xhr&&_r(Wv(n)),t.fetch&&ur(jv(n)),t.history&&yn(zv(n)),t.sentry&&n.on("beforeSendEvent",Hv(n))}}}),Na=Fv;function Hv(e){return function(n){y()===e&&tt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Jt(n)},{event:n})}}function $v(e,t){return function(r){if(y()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Ca&&(F&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Ca}, but a value of ${a} was configured. Sentry will use ${Ca} instead.`),a=Ca),typeof s=="string"&&(s=[s]);try{let u=r.event,d=qv(u)?u.target:u;o=we(d,{keyAttrs:s,maxStringLength:a}),i=Oo(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),tt(c,{event:r.event,name:r.name,global:r.global})}}function Gv(e){return function(n){if(y()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:sr(n.level),message:Vn(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Vn(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;tt(r,{input:n.args,level:n.level})}}function Wv(e){return function(n){if(y()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[nt];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},p={category:"xhr",data:d,type:"http",level:Ys(c)};e.emit("beforeOutgoingRequestBreadcrumb",p,l),tt(p,l)}}function jv(e){return function(n){if(y()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),tt(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:Ys(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),tt(c,a)}}}function zv(e){return function(n){if(y()!==e)return;let r=n.from,o=n.to,i=Gt(M.location.href),s=r?Gt(r):void 0,a=Gt(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),tt({category:"navigation",data:{from:r,to:o}})}}function qv(e){return!!e&&!!e.target}var Yv=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Vv="BrowserApiErrors",Jv=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Vv,setupOnce(){t.setTimeout&&me(M,"setTimeout",Lh),t.setInterval&&me(M,"setInterval",Lh),t.requestAnimationFrame&&me(M,"requestAnimationFrame",Kv),t.XMLHttpRequest&&"XMLHttpRequest"in M&&me(XMLHttpRequest.prototype,"send",Xv);let n=t.eventTarget;n&&(Array.isArray(n)?n:Yv).forEach(o=>Qv(o,t))}}}),wa=Jv;function Lh(e){return function(...t){let n=t[0];return t[0]=pr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${st(e)}`}}),e.apply(this,t)}}function Kv(e){return function(t){return e.apply(this,[pr(t,{mechanism:{data:{handler:st(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Xv(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&me(n,o,function(i){let s={mechanism:{data:{handler:st(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=Jn(i);return a&&(s.mechanism.data.handler=st(a)),pr(i,s)})}),e.apply(this,t)}}function Qv(e,t){let r=M[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(me(r,"addEventListener",function(o){return function(i,s,a){try{Zv(s)&&(s.handleEvent=pr(s.handleEvent,{mechanism:{data:{handler:st(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&eA(this,i,s),o.apply(this,[i,pr(s,{mechanism:{data:{handler:st(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),me(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function Zv(e){return typeof e.handleEvent=="function"}function eA(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var xa=()=>({name:"BrowserSession",setupOnce(){if(typeof M.document>"u"){F&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Lr({ignoreDuration:!0}),Pr(),yn(({from:e,to:t})=>{e!==void 0&&e!==t&&(Lr({ignoreDuration:!0}),Pr())})}});var tA="GlobalHandlers",nA=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:tA,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(rA(n),Ph("onerror")),t.onunhandledrejection&&(oA(n),Ph("onunhandledrejection"))}}}),ka=nA;function rA(e){wo(t=>{let{stackParser:n,attachStacktrace:r}=Dh();if(y()!==e||gl())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=aA(ca(n,c||o,void 0,r,!1),i,s,a);u.level="error",fn(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function oA(e){xo(t=>{let{stackParser:n,attachStacktrace:r}=Dh();if(y()!==e||gl())return;let o=iA(t),i=St(o)?sA(o):ca(n,o,void 0,r,!0);i.level="error",fn(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function iA(e){if(St(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function sA(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function aA(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=cA(t)??et();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function Ph(e){F&&h.log(`Global Handler attached: ${e}`)}function Dh(){return y()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function cA(e){if(!(!De(e)||e.length===0)){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e.slice(0,1024)}}var Oa=()=>({name:"HttpContext",preprocessEvent(e){if(!M.navigator&&!M.location&&!M.document)return;let t=Ti(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var uA="cause",lA=5,dA="LinkedErrors",fA=((e={})=>{let t=e.limit||lA,n=e.key||uA;return{name:dA,preprocessEvent(r,o,i){let s=i.getOptions();vu(eo,s.stackParser,n,t,r,o)}}}),Ma=fA;function Uh(){return pA()?(F&&Ge(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function pA(){if(typeof M.window>"u")return!1;let e=M;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=et(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(M===M.top&&r.some(i=>n.startsWith(`${i}://`)))}function Wl(e){return[ci(),ai(),wa(),Na(),ka(),Ma(),ui(),Oa(),xa()]}function Bh(e={}){let t=!e.skipBrowserExtensionCheck&&Uh(),n={...e,enabled:t?!1:e.enabled,stackParser:hc(e.stackParser||Ra),integrations:ou({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?Wl():e.defaultIntegrations}),transport:e.transport||uo};return fu(to,n)}function Fh(){}function Hh(e){e()}function $h(e={}){let t=M.document,n=t?.head||t?.body;if(!n){F&&h.error("[showReportDialog] Global document not defined");return}let r=x(),i=y()?.getDsn();if(!i){F&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Ko()},a=M.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=ru(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{M.removeEventListener("message",d)}};M.addEventListener("message",d)}n.appendChild(a)}var mA=v,hA="ReportingObserver",Gh=new WeakMap,gA=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(Gh.has(y()))for(let o of r)Oe(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Pn(`${s}: ${a}`)})}return{name:hA,setupOnce(){if(!Ju())return;new mA.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Gh.set(r,!0)}}}),Wh=gA;var _A="HttpClient",SA=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:_A,setup(n){RA(n,t),CA(n,t)}}}),zh=SA;function EA(e,t,n,r,o){if(Yh(e,n.status,n.url)){let i=NA(t,r),s,a,c,u;Jh()&&([s,c]=jh("Cookie",i),[a,u]=jh("Set-Cookie",n));let d=Vh({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});fn(d)}}function jh(e,t){let n=bA(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=qh(o))}catch{}return[n,r]}function yA(e,t,n,r,o){if(Yh(e,t.status,t.responseURL)){let i,s,a;if(Jh()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=qh(u))}catch{}try{a=IA(t)}catch{}i=r}let c=Vh({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});fn(c)}}function TA(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function qh(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function bA(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function IA(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function vA(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function AA(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function RA(e,t){gi()&&ur(n=>{if(y()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&EA(t,a,r,c,i||s)},!1)}function CA(e,t){"XMLHttpRequest"in v&&_r(n=>{if(y()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[nt];if(!s)return;let{method:a,request_headers:c}=s;try{yA(t,i,a,c,r||o)}catch(u){F&&h.warn("Error while extracting response event form XHR response",u)}})}function Yh(e,t,n){return AA(e.failedRequestStatusCodes,t)&&vA(e.failedRequestTargets,n)&&!si(n,y())}function Vh(e){let t=y(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:TA(e.responseHeaders)}}};return qe(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function NA(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Jh(){let e=y();return e?!!e.getOptions().sendDefaultPii:!1}var jl=v,wA=7,xA="ContextLines",kA=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:wA;return{name:xA,processEvent(n){return OA(n,t)}}}),Kh=kA;function OA(e,t){let n=jl.document,r=jl.location&&ii(jl.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>MA(u,s,r,t)))}),e}function MA(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||vc(t,e,r),e}var LA="GraphQLClient",PA=(e=>({name:LA,setup(t){DA(t,e),UA(t,e)}}));function DA(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=P(n).data||{};if(!(i[ye]==="http.client"))return;let c=i[wc]||i["http.url"],u=i[Nc]||i["http.method"];if(!De(c)||!De(u))return;let{endpoints:d}=t,l=Fe(c,d),p=Qh(r);if(l&&p){let f=Zh(p);if(f){let m=Xh(f);n.updateName(`${u} ${c} (${m})`),n.setAttribute("graphql.document",p)}}})}function UA(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,p=Fe(d,l),f=Qh(r);if(p&&s&&f){let m=Zh(f);if(!s.graphql&&m){let _=Xh(m);s["graphql.document"]=m.query,s["graphql.operation"]=_}}}})}function Xh(e){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=BA(t);return r?`${o} ${r}`:`${o}`}function Qh(e){let t="xhr"in e,n;if(t){let r=e.xhr[nt];n=r&&Sr(r.body)[0]}else{let r=co(e.input);n=Sr(r)[0]}return n}function BA(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Zh(e){let t;try{let n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}var eg=PA;var ge=v,Ed="sentryReplaySession",FA="replay_event",yd="Unable to send Replay",HA=3e5,$A=9e5,GA=5e3,WA=5500,jA=6e4,zA=5e3,qA=3,tg=15e4,La=5e3,YA=3e3,VA=300,Td=2e7,JA=4999,KA=15e3,ng=36e5,XA=Object.defineProperty,QA=(e,t,n)=>t in e?XA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rg=(e,t,n)=>QA(e,typeof t!="symbol"?t+"":t,n),ke=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(ke||{});function ZA(e){return e.nodeType===e.ELEMENT_NODE}function xi(e){return e?.host?.shadowRoot===e}function ki(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function eR(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function tR(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Fa(e){try{let t=e.rules||e.cssRules;return t?eR(Array.from(t,Ag).join("")):null}catch{return null}}function nR(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function Ag(e){let t;if(oR(e))try{t=Fa(e.styleSheet)||tR(e)}catch{}else if(iR(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=nR(e)),r&&(n=rR(n)),r||o)return n}return t||e.cssText}function rR(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function oR(e){return"styleSheet"in e}function iR(e){return"selectorText"in e}var Ha=class{constructor(){rg(this,"idNodeMap",new Map),rg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function sR(){return new Ha}function Xa({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Mi({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Eo(e){return e.toLowerCase()}function Kl(e){return e.toUpperCase()}var og="__rrweb_original__";function aR(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=og in i?i[og]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function bd(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Eo(t):null}function $a(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Rg(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var ig={};function Cg(e){let t=ig[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return ig[e]=r.bind(window)}function Xl(...e){return Cg("setTimeout")(...e)}function Ng(...e){return Cg("clearTimeout")(...e)}function wg(e){try{return e.contentDocument}catch{}}var cR=1,uR=new RegExp("[^a-z0-9-_:]"),Li=-2;function Id(){return cR++}function lR(e){if(e instanceof HTMLFormElement)return"form";let t=Eo(e.tagName);return uR.test(t)?"div":t}function dR(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var fo,sg,fR=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,pR=/^(?:[a-z+]+:)?\/\//i,mR=/^www\..*/i,hR=/^(data:)([^,]*),(.*)/i;function Ga(e,t){return(e||"").replace(fR,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(pR.test(c)||mR.test(c))return`url(${u}${c}${u})`;if(hR.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${dR(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let p of l)p!=="."&&(p===".."?d.pop():d.push(p));return`url(${u}${d.join("/")}${u})`})}var gR=/^[^ \t\n\r\u000c]+/,_R=/^[, \t\n\r\u000c]+/;function SR(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(_R),!(n>=t.length);){let i=r(gR);if(i.slice(-1)===",")i=ho(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=ho(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var ag=new WeakMap;function ho(e,t){return!t||t.trim()===""?t:Qa(e,t)}function ER(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Qa(e,t){let n=ag.get(e);if(n||(n=e.createElement("a"),ag.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function xg(e,t,n,r,o,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?ho(e,r):n==="srcset"?SR(e,r):n==="style"?Ga(r,Qa(e)):t==="object"&&n==="data"?ho(e,r):typeof i=="function"?i(n,r,o):r)}function kg(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function yR(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function TR(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Er(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Er(e.parentNode,t,n,r+1)}function go(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(TR(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function yo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Er(s,go(r,o)),c<0)return!0;a=Er(s,go(t,n),c>=0?c:1/0)}else{if(a=Er(s,go(t,n)),a<0)return!1;c=Er(s,go(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function bR(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=Xl(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Ng(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return Xl(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function IR(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=Xl(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Ng(i),r=!0,t()})}function vR(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:m={},maskTextFn:_,maskInputFn:g,dataURLOptions:S={},inlineImages:T,recordCanvas:D,keepIframeSrcFn:A,newlyAddedElement:U=!1}=t,w=AR(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ke.Document,childNodes:[],compatMode:e.compatMode}:{type:ke.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ke.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return CR(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:m,maskInputFn:g,dataURLOptions:S,inlineImages:T,recordCanvas:D,keepIframeSrcFn:A,newlyAddedElement:U,rootId:w,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p});case e.TEXT_NODE:return RR(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,maskTextFn:_,maskInputOptions:m,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:ke.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:ke.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function AR(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function RR(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,p=e.textContent,f=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,_=l==="TEXTAREA"?!0:void 0;if(f&&p){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(p=Fa(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}p=Ga(p,Qa(t.doc))}m&&(p="SCRIPT_PLACEHOLDER");let g=yo(e,r,i,o,s,n);if(!f&&!m&&!_&&p&&g&&(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),_&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),l==="OPTION"&&p){let S=Xa({type:null,tagName:l,maskInputOptions:c});p=Mi({isMasked:yo(e,r,i,o,s,S),element:e,value:p,maskInputFn:u})}return{type:ke.Text,textContent:p||"",isStyle:f,rootId:d}}function CR(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:m=!1,rootId:_,maskTextClass:g,unmaskTextClass:S,maskTextSelector:T,unmaskTextSelector:D}=t,A=yR(e,r,o,i),U=lR(e),w={},b=e.attributes.length;for(let I=0;I<b;I++){let k=e.attributes[I];k.name&&!kg(U,k.name,k.value)&&(w[k.name]=xg(n,U,Eo(k.name),k.value,e,c))}if(U==="link"&&s){let I=Array.from(n.styleSheets).find(H=>H.href===e.href),k=null;I&&(k=Fa(I)),k&&(w.rel=null,w.href=null,w.crossorigin=null,w._cssText=Ga(k,I.href))}if(U==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let I=Fa(e.sheet);I&&(w._cssText=Ga(I,Qa(n)))}if(U==="input"||U==="textarea"||U==="select"||U==="option"){let I=e,k=bd(I),H=$a(I,Kl(U),k),C=I.checked;if(k!=="submit"&&k!=="button"&&H){let L=yo(I,g,T,S,D,Xa({type:k,tagName:Kl(U),maskInputOptions:a}));w.value=Mi({isMasked:L,element:I,value:H,maskInputFn:u})}C&&(w.checked=C)}if(U==="option"&&(e.selected&&!a.select?w.selected=!0:delete w.selected),U==="canvas"&&p){if(e.__context==="2d")aR(e)||(w.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let I=e.toDataURL(d.type,d.quality),k=n.createElement("canvas");k.width=e.width,k.height=e.height;let H=k.toDataURL(d.type,d.quality);I!==H&&(w.rr_dataURL=I)}}if(U==="img"&&l){fo||(fo=n.createElement("canvas"),sg=fo.getContext("2d"));let I=e,k=I.currentSrc||I.getAttribute("src")||"<unknown-src>",H=I.crossOrigin,C=()=>{I.removeEventListener("load",C);try{fo.width=I.naturalWidth,fo.height=I.naturalHeight,sg.drawImage(I,0,0),w.rr_dataURL=fo.toDataURL(d.type,d.quality)}catch(L){if(I.crossOrigin!=="anonymous"){I.crossOrigin="anonymous",I.complete&&I.naturalWidth!==0?C():I.addEventListener("load",C);return}else console.warn(`Cannot inline img src=${k}! Error: ${L}`)}I.crossOrigin==="anonymous"&&(H?w.crossOrigin=H:I.removeAttribute("crossorigin"))};I.complete&&I.naturalWidth!==0?C():I.addEventListener("load",C)}if((U==="audio"||U==="video")&&(w.rr_mediaState=e.paused?"paused":"played",w.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(w.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(w.rr_scrollTop=e.scrollTop)),A){let{width:I,height:k}=e.getBoundingClientRect();w={class:w.class,rr_width:`${I}px`,rr_height:`${k}px`}}U==="iframe"&&!f(w.src)&&(!A&&!wg(e)&&(w.rr_src=w.src),delete w.src);let R;try{customElements.get(U)&&(R=!0)}catch{}return{type:ke.Element,tagName:U,attributes:w,childNodes:[],isSVG:ER(e)||void 0,needBlock:A,rootId:_,isCustom:R}}function he(e){return e==null?"":e.toLowerCase()}function NR(e,t){if(t.comment&&e.type===ke.Comment)return!0;if(e.type===ke.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Rg(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(he(e.attributes.name).match(/^msapplication-tile(image|color)$/)||he(e.attributes.name)==="application-name"||he(e.attributes.rel)==="icon"||he(e.attributes.rel)==="apple-touch-icon"||he(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&he(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(he(e.attributes.property).match(/^(og|twitter|fb):/)||he(e.attributes.name).match(/^(og|twitter):/)||he(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(he(e.attributes.name)==="robots"||he(e.attributes.name)==="googlebot"||he(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(he(e.attributes.name)==="author"||he(e.attributes.name)==="generator"||he(e.attributes.name)==="framework"||he(e.attributes.name)==="publisher"||he(e.attributes.name)==="progid"||he(e.attributes.property).match(/^article:/)||he(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(he(e.attributes.name)==="google-site-verification"||he(e.attributes.name)==="yandex-verification"||he(e.attributes.name)==="csrf-token"||he(e.attributes.name)==="p:domain_verify"||he(e.attributes.name)==="verify-v1"||he(e.attributes.name)==="verification"||he(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function _o(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:m={},maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:T,dataURLOptions:D={},inlineImages:A=!1,recordCanvas:U=!1,onSerialize:w,onIframeLoad:b,iframeLoadTimeout:R=5e3,onBlockedImageLoad:I,onStylesheetLoad:k,stylesheetLoadTimeout:H=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:L=!1}=t,{preserveWhiteSpace:Y=!0}=t,K=vR(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,dataURLOptions:D,inlineImages:A,recordCanvas:U,keepIframeSrcFn:C,newlyAddedElement:L});if(!K)return console.warn(e,"not serialized"),null;let ne;r.hasNode(e)?ne=r.getId(e):NR(K,T)||!Y&&K.type===ke.Text&&!K.isStyle&&!K.textContent.replace(/^\s+|\s+$/gm,"").length?ne=Li:ne=Id();let N=Object.assign(K,{id:ne});if(r.add(e,N),ne===Li)return null;w&&w(e);let j=!p;if(N.type===ke.Element){j=j&&!N.needBlock;let O=e.shadowRoot;O&&ki(O)&&(N.isShadowHost=!0)}if((N.type===ke.Document||N.type===ke.Element)&&j){T.headWhitespace&&N.type===ke.Element&&N.tagName==="head"&&(Y=!1);let O={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:T,dataURLOptions:D,inlineImages:A,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:w,onIframeLoad:b,iframeLoadTimeout:R,onBlockedImageLoad:I,onStylesheetLoad:k,stylesheetLoadTimeout:H,keepIframeSrcFn:C},$=e.childNodes?Array.from(e.childNodes):[];for(let Z of $){let ae=_o(Z,O);ae&&N.childNodes.push(ae)}if(ZA(e)&&e.shadowRoot)for(let Z of Array.from(e.shadowRoot.childNodes)){let ae=_o(Z,O);ae&&(ki(e.shadowRoot)&&(ae.isShadow=!0),N.childNodes.push(ae))}}if(e.parentNode&&xi(e.parentNode)&&ki(e.parentNode)&&(N.isShadow=!0),N.type===ke.Element&&N.tagName==="iframe"&&!N.needBlock&&bR(e,()=>{let O=wg(e);if(O&&b){let $=_o(O,{doc:O,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:T,dataURLOptions:D,inlineImages:A,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:w,onIframeLoad:b,iframeLoadTimeout:R,onStylesheetLoad:k,stylesheetLoadTimeout:H,keepIframeSrcFn:C});$&&b(e,$)}},R),N.type===ke.Element&&N.tagName==="img"&&!e.complete&&N.needBlock){let O=e,$=()=>{if(O.isConnected&&!O.complete&&I)try{let Z=O.getBoundingClientRect();Z.width>0&&Z.height>0&&I(O,N,Z)}catch{}O.removeEventListener("load",$)};O.isConnected&&O.addEventListener("load",$)}return N.type===ke.Element&&N.tagName==="link"&&typeof N.attributes.rel=="string"&&(N.attributes.rel==="stylesheet"||N.attributes.rel==="preload"&&typeof N.attributes.href=="string"&&Rg(N.attributes.href)==="css")&&IR(e,()=>{if(k){let O=_o(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:T,dataURLOptions:D,inlineImages:A,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:w,onIframeLoad:b,iframeLoadTimeout:R,onStylesheetLoad:k,stylesheetLoadTimeout:H,keepIframeSrcFn:C});O&&k(e,O)}},H),N.type===ke.Element&&delete N.needBlock,N}function wR(e,t){let{mirror:n=new Ha,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:m=!1,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOM:T=!1,dataURLOptions:D,preserveWhiteSpace:A,onSerialize:U,onIframeLoad:w,iframeLoadTimeout:b,onBlockedImageLoad:R,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:H=()=>!1}=t||{};return _o(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:T===!0||T==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:T==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:T===!1?{}:T,dataURLOptions:D,inlineImages:p,recordCanvas:f,preserveWhiteSpace:A,onSerialize:U,onIframeLoad:w,iframeLoadTimeout:b,onBlockedImageLoad:R,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:H,newlyAddedElement:!1})}function ot(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var po=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,cg={map:{},getId(){return console.error(po),-1},getNode(){return console.error(po),null},removeNodeFromMap(){console.error(po)},has(){return console.error(po),!1},reset(){console.error(po)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(cg=new Proxy(cg,{get(e,t,n){return t==="map"&&console.error(po),Reflect.get(e,t,n)}}));function Pi(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(PR(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Za(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Og(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){Za(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Og(e,t,i||{},!0)}function vd(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Wa=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Wa=()=>new Date().getTime());function Mg(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Lg(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Pg(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Dg(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ct(e,t,n,r,o){if(!e)return!1;let i=Dg(e);if(!i)return!1;let s=go(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Er(i,s),c=-1;return a<0?!1:(r&&(c=Er(i,go(null,r))),a>-1&&c<0?!0:a<c)}function xR(e,t){return t.getId(e)!==-1}function zl(e,t){return t.getId(e)===Li}function Ug(e,t){if(xi(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Ug(e.parentNode,t):!0:!0}function Ql(e){return!!e.changedTouches}function kR(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Bg(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Fg(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Zl(e){return!!e?.shadowRoot}var ed=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Hg(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function OR(e){let t=e,n;for(;n=Hg(t);)t=n;return t}function MR(e){let t=e.ownerDocument;if(!t)return!1;let n=OR(e);return t.contains(n)}function $g(e){let t=e.ownerDocument;return t?t.contains(e)||MR(e):!1}var ug={};function Ad(e){let t=ug[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return ug[e]=r.bind(window)}function LR(...e){return Ad("requestAnimationFrame")(...e)}function Za(...e){return Ad("setTimeout")(...e)}function PR(...e){return Ad("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),z=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(z||{}),rt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(rt||{}),Tn=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Tn||{}),mo=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(mo||{});function Rd(e){try{return e.contentDocument}catch{}}function DR(e){try{return e.contentWindow}catch{}}function lg(e){return"__ln"in e}var td=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&lg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&lg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},dg=(e,t)=>`${e}@${t}`,nd=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new td,o=c=>{let u=c,d=Li;for(;d===Li;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!$g(c))return;let u=xi(c.parentNode)?this.mirror.getId(Hg(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=_o(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{Bg(p,this.mirror)&&!Ct(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),Fg(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),Zl(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,f)=>{Ct(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,f),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,f)=>{this.stylesheetManager.attachLinkElement(p,f)},onBlockedImageLoad:(p,f,{width:m,height:_})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:f.id,attributes:{style:{width:`${m}px`,height:`${_}px`}}}]})}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)fg(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!pg(this.droppedSet,c)&&!fg(this.removes,c,this.mirror)||pg(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let f=d.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=f.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!zl(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!Ct(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:yo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Dg(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=bd(n),a=n.tagName;o=$a(n,a,s);let c=Xa({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=yo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Mi({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ct(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!Rd(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!kg(n.tagName,r)&&(i.attributes[r]=xg(this.doc,Eo(n.tagName),Eo(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ct(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=xi(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ct(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||zl(n,this.mirror)||!xR(n,this.mirror)||(this.addedSet.has(n)?(rd(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Ug(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[dg(r,o)]?rd(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:xi(t.target)&&ki(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(zl(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[dg(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ct(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),Zl(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function rd(e,t){e.delete(t),t.childNodes?.forEach(n=>rd(e,n))}function fg(e,t,n){return e.length===0?!1:UR(e,t,n)}function UR(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function pg(e,t){return e.size===0?!1:Gg(e,t)}function Gg(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:Gg(e,n):!1}var Oi;function BR(e){Oi=e}function FR(){Oi=void 0}var oe=e=>Oi?(...n)=>{try{return e(...n)}catch(r){if(Oi&&Oi(r)===!0)return()=>{};throw r}}:e,So=[];function Hi(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Wg(e,t){let n=new nd;So.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(oe(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function HR({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=Pi(oe(l=>{let p=Date.now()-a;e(s.map(f=>(f.timeOffset-=p,f)),l),s=[],a=null}),i),u=oe(Pi(oe(l=>{let p=Hi(l),{clientX:f,clientY:m}=Ql(l)?l.changedTouches[0]:l;a||(a=Wa()),s.push({x:f,y:m,id:r.getId(p),timeOffset:Wa()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?z.Drag:l instanceof MouseEvent?z.MouseMove:z.TouchMove)}),o,{trailing:!1})),d=[ot("mousemove",u,n),ot("touchmove",u,n),ot("drag",u,n)];return oe(()=>{d.forEach(l=>l())})}function $R({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>p=>{let f=Hi(p);if(Ct(f,r,o,i,!0))return;let m=null,_=l;if("pointerType"in p){switch(p.pointerType){case"mouse":m=Tn.Mouse;break;case"touch":m=Tn.Touch;break;case"pen":m=Tn.Pen;break}m===Tn.Touch?rt[l]===rt.MouseDown?_="TouchStart":rt[l]===rt.MouseUp&&(_="TouchEnd"):Tn.Pen}else Ql(p)&&(m=Tn.Touch);m!==null?(u=m,(_.startsWith("Touch")&&m===Tn.Touch||_.startsWith("Mouse")&&m===Tn.Mouse)&&(m=null)):rt[l]===rt.Click&&(m=u,u=null);let g=Ql(p)?p.changedTouches[0]:p;if(!g)return;let S=n.getId(f),{clientX:T,clientY:D}=g;oe(e)({type:rt[_],id:S,x:T,y:D,...m!==null&&{pointerType:m}})};return Object.keys(rt).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let p=Eo(l),f=d(l);if(window.PointerEvent)switch(rt[l]){case rt.MouseDown:case rt.MouseUp:p=p.replace("mouse","pointer");break;case rt.TouchStart:case rt.TouchEnd:return}c.push(ot(p,f,t))}),oe(()=>{c.forEach(l=>l())})}function jg({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=oe(Pi(oe(c=>{let u=Hi(c);if(!u||Ct(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=Mg(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return ot("scroll",a,t)}function GR({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=oe(Pi(oe(()=>{let i=Lg(),s=Pg();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return ot("resize",o,t)}var WR=["INPUT","TEXTAREA","SELECT"],mg=new WeakMap;function jR({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:_}){function g(b){let R=Hi(b),I=b.isTrusted,k=R&&Kl(R.tagName);if(k==="OPTION"&&(R=R.parentElement),!R||!k||WR.indexOf(k)<0||Ct(R,r,o,i,!0))return;let H=R;if(H.classList.contains(s)||a&&H.matches(a))return;let C=bd(R),L=$a(H,k,C),Y=!1,K=Xa({maskInputOptions:c,tagName:k,type:C}),ne=yo(R,p,m,f,_,K);(C==="radio"||C==="checkbox")&&(Y=R.checked),L=Mi({isMasked:ne,element:R,value:L,maskInputFn:u}),S(R,l?{text:L,isChecked:Y,userTriggered:I}:{text:L,isChecked:Y});let N=R.name;C==="radio"&&N&&Y&&t.querySelectorAll(`input[type="radio"][name="${N}"]`).forEach(j=>{if(j!==R){let O=Mi({isMasked:ne,element:j,value:$a(j,k,C),maskInputFn:u});S(j,l?{text:O,isChecked:!Y,userTriggered:!1}:{text:O,isChecked:!Y})}})}function S(b,R){let I=mg.get(b);if(!I||I.text!==R.text||I.isChecked!==R.isChecked){mg.set(b,R);let k=n.getId(b);oe(e)({...R,id:k})}}let D=(d.input==="last"?["change"]:["input","change"]).map(b=>ot(b,oe(g),t)),A=t.defaultView;if(!A)return()=>{D.forEach(b=>b())};let U=A.Object.getOwnPropertyDescriptor(A.HTMLInputElement.prototype,"value"),w=[[A.HTMLInputElement.prototype,"value"],[A.HTMLInputElement.prototype,"checked"],[A.HTMLSelectElement.prototype,"value"],[A.HTMLTextAreaElement.prototype,"value"],[A.HTMLSelectElement.prototype,"selectedIndex"],[A.HTMLOptionElement.prototype,"selected"]];return U&&U.set&&D.push(...w.map(b=>Og(b[0],b[1],{set(){oe(g)({target:this,isTrusted:!1})}},!1,A))),oe(()=>{D.forEach(b=>b())})}function ja(e){let t=[];function n(r,o){if(Pa("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Pa("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Pa("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Pa("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function Wn(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function zR({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:oe((d,l,p)=>{let[f,m]=p,{id:_,styleId:g}=Wn(l,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,adds:[{rule:f,index:m}]}),d.apply(l,p)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:_}=Wn(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,removes:[{index:f}]}),d.apply(l,p)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:_}=Wn(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replace:f}),d.apply(l,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:_}=Wn(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replaceSync:f}),d.apply(l,p)})}));let c={};Da("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Da("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Da("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Da("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:oe((p,f,m)=>{let[_,g]=m,{id:S,styleId:T}=Wn(f.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||T&&T!==-1)&&e({id:S,styleId:T,adds:[{rule:_,index:[...ja(f),g||0]}]}),p.apply(f,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:oe((p,f,m)=>{let[_]=m,{id:g,styleId:S}=Wn(f.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||S&&S!==-1)&&e({id:g,styleId:S,removes:[{index:[...ja(f),_]}]}),p.apply(f,m)})})}),oe(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function zg({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),oe(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function qR({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:oe((a,c,u)=>{let[d,l,p]=u;if(n.has(d))return i.apply(c,[d,l,p]);let{id:f,styleId:m}=Wn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:d,value:l,priority:p},index:ja(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:oe((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:p}=Wn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||p&&p!==-1)&&e({id:l,styleId:p,remove:{property:d},index:ja(c.parentRule)}),a.apply(c,u)})}),oe(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function YR({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=oe(u=>Pi(oe(d=>{let l=Hi(d);if(!l||Ct(l,t,n,r,!0))return;let{currentTime:p,volume:f,muted:m,playbackRate:_}=l;e({type:u,id:o.getId(l),currentTime:p,volume:f,muted:m,playbackRate:_})}),i.media||500)),c=[ot("play",a(mo.Play),s),ot("pause",a(mo.Pause),s),ot("seeked",a(mo.Seeked),s),ot("volumechange",a(mo.VolumeChange),s),ot("ratechange",a(mo.RateChange),s)];return oe(()=>{c.forEach(u=>u())})}function VR({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=vd(t.fonts,"add",function(a){return function(c){return Za(oe(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),oe(()=>{r.forEach(a=>a())})}function JR(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=oe(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let p=0;p<l;p++){let f=u.getRangeAt(p),{startContainer:m,startOffset:_,endContainer:g,endOffset:S}=f;Ct(m,r,o,i,!0)||Ct(g,r,o,i,!0)||d.push({start:n.getId(m),startOffset:_,end:n.getId(g),endOffset:S})}s({ranges:d})});return c(),ot("selectionchange",c)}function KR({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:vd(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function XR(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Wg(e,e.doc));let o=HR(e),i=$R(e),s=jg(e),a=GR(e,{win:n}),c=jR(e),u=YR(e),d=()=>{},l=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(d=zR(e,{win:n}),l=zg(e,e.doc),p=qR(e,{win:n}),e.collectFonts&&(f=VR(e)));let m=JR(e),_=KR(e),g=[];for(let S of e.plugins)g.push(S.observer(S.callback,n,S.options));return oe(()=>{So.forEach(S=>S.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),p(),f(),m(),_(),g.forEach(S=>S())})}function Pa(e){return typeof window[e]<"u"}function Da(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Di=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},od=class{constructor(){this.crossOriginIframeMirror=new Di(Id),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},id=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Di(Id),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Di(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=Rd(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:z.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case z.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.Drag:case z.TouchMove:case z.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.ViewportResize:return!1;case z.MediaInteraction:case z.MouseInteraction:case z.Scroll:case z.CanvasMutation:case z.Input:return this.replaceIds(n.data,t,["id"]),n;case z.StyleSheetRule:case z.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case z.Font:return n;case z.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case z.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==ke.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},sd=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},ad=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!ki(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=Wg({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(jg({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Za(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(zg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=Rd(t),r=DR(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(vd(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&$g(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Ni=0;Ni<hg.length;Ni++)QR[hg.charCodeAt(Ni)]=Ni;var Ni,za=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},cd=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new ed,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Ag(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},ud=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,LR(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Ae,qa;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var Yt=sR();function bn(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:m=!0,maskAllInputs:_,maskInputOptions:g,slimDOMOptions:S,maskAttributeFn:T,maskInputFn:D,maskTextFn:A,maxCanvasSize:U=null,packFn:w,sampling:b={},dataURLOptions:R={},mousemoveWait:I,recordDOM:k=!0,recordCanvas:H=!1,recordCrossOriginIframes:C=!1,recordAfter:L=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Y=!1,collectFonts:K=!1,inlineImages:ne=!1,plugins:N,keepIframeSrcFn:j=()=>!1,ignoreCSSAttributes:O=new Set([]),errorHandler:$,onMutation:Z,getCanvasManager:ae}=e;BR($);let Re=C?window.parent===window:!0,Te=!1;if(!Re)try{window.parent.document&&(Te=!1)}catch{Te=!0}if(Re&&!t)throw new Error("emit function is required");if(!Re&&!Te)return()=>{};I!==void 0&&b.mousemove===void 0&&(b.mousemove=I),Yt.reset();let In=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Ut=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};kR();let Nt,gt=0,vn=ee=>{for(let _t of N||[])_t.eventProcessor&&(ee=_t.eventProcessor(ee));return w&&!Te&&(ee=w(ee)),ee};Ae=(ee,_t)=>{let te=ee;if(te.timestamp=Wa(),So[0]?.isFrozen()&&te.type!==J.FullSnapshot&&!(te.type===J.IncrementalSnapshot&&te.data.source===z.Mutation)&&So.forEach(Be=>Be.unfreeze()),Re)t?.(vn(te),_t);else if(Te){let Be={type:"rrweb",event:vn(te),origin:window.location.origin,isCheckout:_t};window.parent.postMessage(Be,"*")}if(te.type===J.FullSnapshot)Nt=te,gt=0;else if(te.type===J.IncrementalSnapshot){if(te.data.source===z.Mutation&&te.data.isAttachIframe)return;gt++;let Be=r&&gt>=r,ie=n&&Nt&&te.timestamp-Nt.timestamp>n;(Be||ie)&&Vt(!0)}};let An=ee=>{Ae({type:J.IncrementalSnapshot,data:{source:z.Mutation,...ee}})},Ro=ee=>Ae({type:J.IncrementalSnapshot,data:{source:z.Scroll,...ee}}),zi=ee=>Ae({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...ee}}),Co=ee=>Ae({type:J.IncrementalSnapshot,data:{source:z.AdoptedStyleSheet,...ee}}),ue=new cd({mutationCb:An,adoptedStyleSheetCb:Co}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new od:new id({mirror:Yt,mutationCb:An,stylesheetManager:ue,recordCrossOriginIframes:C,wrappedEmit:Ae});for(let ee of N||[])ee.getMirror&&ee.getMirror({nodeMirror:Yt,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});let wt=new ud,Ue=e0(ae,{mirror:Yt,win:window,mutationCb:ee=>Ae({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...ee}}),recordCanvas:H,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:U,sampling:b.canvas,dataURLOptions:R,errorHandler:$}),$e=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new sd:new ad({mutationCb:An,scrollCb:Ro,bypassOptions:{onMutation:Z,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:In,dataURLOptions:R,maskAttributeFn:T,maskTextFn:A,maskInputFn:D,recordCanvas:H,inlineImages:ne,sampling:b,slimDOMOptions:Ut,iframeManager:be,stylesheetManager:ue,canvasManager:Ue,keepIframeSrcFn:j,processedNodeManager:wt},mirror:Yt}),Vt=(ee=!1)=>{if(!k)return;Ae({type:J.Meta,data:{href:window.location.href,width:Pg(),height:Lg()}},ee),ue.reset(),$e.init(),So.forEach(te=>te.lock());let _t=wR(document,{mirror:Yt,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskAllInputs:In,maskAttributeFn:T,maskInputFn:D,maskTextFn:A,slimDOM:Ut,dataURLOptions:R,recordCanvas:H,inlineImages:ne,onSerialize:te=>{Bg(te,Yt)&&be.addIframe(te),Fg(te,Yt)&&ue.trackLinkElement(te),Zl(te)&&$e.addShadowRoot(te.shadowRoot,document)},onIframeLoad:(te,Be)=>{be.attachIframe(te,Be),te.contentWindow&&Ue.addWindow(te.contentWindow),$e.observeAttachShadow(te)},onStylesheetLoad:(te,Be)=>{ue.attachLinkElement(te,Be)},onBlockedImageLoad:(te,Be,{width:ie,height:No})=>{An({adds:[],removes:[],texts:[],attributes:[{id:Be.id,attributes:{style:{width:`${ie}px`,height:`${No}px`}}}]})},keepIframeSrcFn:j});if(!_t)return console.warn("Failed to snapshot the document");Ae({type:J.FullSnapshot,data:{node:_t,initialOffset:Mg(window)}}),So.forEach(te=>te.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ue.adoptStyleSheets(document.adoptedStyleSheets,Yt.getId(document))};qa=Vt;try{let ee=[],_t=Be=>oe(XR)({onMutation:Z,mutationCb:An,mousemoveCb:(ie,No)=>Ae({type:J.IncrementalSnapshot,data:{source:No,positions:ie}}),mouseInteractionCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.MouseInteraction,...ie}}),scrollCb:Ro,viewportResizeCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.ViewportResize,...ie}}),inputCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.Input,...ie}}),mediaInteractionCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.StyleDeclaration,...ie}}),canvasMutationCb:zi,fontCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:z.Font,...ie}}),selectionCb:ie=>{Ae({type:J.IncrementalSnapshot,data:{source:z.Selection,...ie}})},customElementCb:ie=>{Ae({type:J.IncrementalSnapshot,data:{source:z.CustomElement,...ie}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:In,inlineStylesheet:m,sampling:b,recordDOM:k,recordCanvas:H,inlineImages:ne,userTriggeredOnInput:Y,collectFonts:K,doc:Be,maskAttributeFn:T,maskInputFn:D,maskTextFn:A,keepIframeSrcFn:j,blockSelector:i,unblockSelector:s,slimDOMOptions:Ut,dataURLOptions:R,mirror:Yt,iframeManager:be,stylesheetManager:ue,shadowDomManager:$e,processedNodeManager:wt,canvasManager:Ue,ignoreCSSAttributes:O,plugins:N?.filter(ie=>ie.observer)?.map(ie=>({observer:ie.observer,options:ie.options,callback:No=>Ae({type:J.Plugin,data:{plugin:ie.name,payload:No}})}))||[]},{});be.addLoadListener(Be=>{try{ee.push(_t(Be.contentDocument))}catch(ie){console.warn(ie)}});let te=()=>{Vt(),ee.push(_t(document))};return document.readyState==="interactive"||document.readyState==="complete"?te():(ee.push(ot("DOMContentLoaded",()=>{Ae({type:J.DomContentLoaded,data:{}}),L==="DOMContentLoaded"&&te()})),ee.push(ot("load",()=>{Ae({type:J.Load,data:{}}),L==="load"&&te()},window))),()=>{ee.forEach(Be=>Be()),wt.destroy(),qa=void 0,FR()}}catch(ee){console.warn(ee)}}function ZR(e){if(!qa)throw new Error("please take full snapshot after start recording");qa(e)}bn.mirror=Yt;bn.takeFullSnapshot=ZR;function e0(e,t){try{return e?e(t):new za}catch{return console.warn("Unable to initialize CanvasManager"),new za}}var gg;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(gg||(gg={}));var t0=3,n0=5;function Cd(e){return e>9999999999?e:e*1e3}function ql(e){return e>9999999999?e/1e3:e}function $i(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Le(t,10,1e3)}}),t.category==="console")))}var r0="button,a";function qg(e){return e.closest(r0)||e}function Yg(e){let t=Vg(e);return!t||!(t instanceof Element)?t:qg(t)}function Vg(e){return o0(e)?e.target:e}function o0(e){return typeof e=="object"&&!!e&&"target"in e}var jn;function i0(e){return jn||(jn=[],s0()),jn.push(e),()=>{let t=jn?jn.indexOf(e):-1;t>-1&&jn.splice(t,1)}}function s0(){me(ge,"open",function(e){return function(...t){if(jn)try{jn.forEach(n=>n())}catch{}return e.apply(ge,t)}})}var a0=new Set([z.Mutation,z.StyleSheetRule,z.StyleDeclaration,z.AdoptedStyleSheet,z.CanvasMutation,z.Selection,z.MediaInteraction]);function c0(e,t,n){e.handleClick(t,n)}var ld=class{constructor(t,n,r=$i){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=i0(()=>{this._lastMutation=_g()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(l0(n,this._ignoreSelector)||!d0(t))return;let r={timestamp:ql(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=ql(t)}registerScroll(t=Date.now()){this._lastScroll=ql(t)}registerClick(t){let n=qg(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=_g();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:ge.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:ge.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=gr(()=>this._checkClicks(),1e3)}},u0=["A","BUTTON","INPUT"];function l0(e,t){return!!(!u0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function d0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function _g(){return Date.now()/1e3}function f0(e,t){try{if(!p0(t))return;let{source:n}=t.data;if(a0.has(n)&&e.registerMutation(t.timestamp),n===z.Scroll&&e.registerScroll(t.timestamp),m0(t)){let{type:r,id:o}=t.data,i=bn.mirror.getNode(o);i instanceof HTMLElement&&r===rt.Click&&e.registerClick(i)}}catch{}}function p0(e){return e.type===t0}function m0(e){return e.data.source===z.MouseInteraction}function sn(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Nd=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Nd||{}),h0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function g0(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(h0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var _0=e=>t=>{if(!e.isEnabled())return;let n=S0(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&c0(e.clickDetector,n,Yg(t.event)),$i(e,n)};function Jg(e,t){let n=bn.mirror.getId(e),r=n&&bn.mirror.getNode(n),o=r&&bn.mirror.getMeta(r),i=o&&y0(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===Nd.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:g0(i.attributes)}}:{}}}function S0(e){let{target:t,message:n}=E0(e);return sn({category:`ui.${e.name}`,...Jg(t,n)})}function E0(e){let t=e.name==="click",n,r=null;try{r=t?Yg(e.event):Vg(e.event),n=we(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function y0(e){return e.type===Nd.Element}function T0(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=b0(t);n&&$i(e,n)}function b0(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||I0(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=we(s,{maxStringLength:200})||"<unknown>",d=Jg(s,u);return sn({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function I0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var v0={resource:w0,paint:C0,navigation:N0};function Yl(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function A0(e){return e.map(R0).filter(Boolean)}function R0(e){let t=v0[e.entryType];return t?t(e):null}function To(e){return((Ee()||ge.performance.timeOrigin)+e)/1e3}function C0(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=To(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function N0(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:p,startTime:f,transferSize:m,type:_}=e;return o===0?null:{type:`${t}.${_}`,start:To(f),end:To(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:p}}}function w0(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:To(i),end:To(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function x0(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return wd(e,"largest-contentful-paint",n)}function k0(e){return e.sources!==void 0}function O0(e){let t=[],n=[];for(let r of e.entries)if(k0(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=bn.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return wd(e,"cumulative-layout-shift",n,t)}function M0(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return wd(e,"interaction-to-next-paint",n)}function wd(e,t,n,r){let o=e.value,i=e.rating,s=To(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>bn.mirror.getId(a)):void 0,attributions:r}}}function L0(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Rt(o,n))}),r.push(hr(Yl(x0,e)),mr(Yl(O0,e)),vi(Yl(M0,e))),()=>{r.forEach(o=>o())}}var G=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,P0='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function D0(){let e=new Blob([P0]);return URL.createObjectURL(e)}var Sg=["log","warn","error"],Ba="[Replay] ";function Vl(e,t="info"){tt({category:"console",data:{logger:"replay"},level:t,message:`${Ba}${e}`},{level:t})}function U0(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return G?(Sg.forEach(r=>{n[r]=(...o)=>{h[r](Ba,...o),t&&Vl(o.join(""),sr(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(Ba,r),e?ce(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Vl(r,"error")},n.infoTick=(...r)=>{h.log(Ba,...r),t&&setTimeout(()=>Vl(r[0]),0)}):Sg.forEach(r=>{n[r]=()=>{}}),n}var W=U0(),Ui=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Td}.`)}},Ya=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Td)throw new Ui;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?Cd(t):null}},dd=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){G&&W.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){G&&W.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},fd=class{constructor(t){this._worker=new dd(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=Cd(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Td?Promise.reject(new Ui):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{G&&W.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},pd=class{constructor(t){this._fallback=new Ya,this._compression=new fd(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){G&&W.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){G&&W.exception(i,"Failed to add events when switching buffers.")}}};function B0({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=F0(t);if(n)return n}return G&&W.log("Using simple buffer"),new Ya}function F0(e){try{let t=e||H0();if(!t)return;G&&W.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new pd(n)}catch(t){G&&W.exception(t,"Failed to create compression worker")}}function H0(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?D0():""}function xd(){try{return"sessionStorage"in ge&&!!ge.sessionStorage}catch{return!1}}function $0(e){G0(),e.session=void 0}function G0(){if(xd())try{ge.sessionStorage.removeItem(Ed)}catch{}}function Kg(e){return e===void 0?!1:Math.random()<e}function kd(e){if(xd())try{ge.sessionStorage.setItem(Ed,JSON.stringify(e))}catch{}}function Xg(e){let t=Date.now(),n=e.id||Se(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a}}function W0(e,t){return Kg(e)?"session":t?"buffer":!1}function Eg({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=W0(e,t),i=Xg({sampled:o,previousSessionId:r});return n&&kd(i),i}function j0(){if(!xd())return null;try{let e=ge.sessionStorage.getItem(Ed);if(!e)return null;let t=JSON.parse(e);return G&&W.infoTick("Loading existing session"),Xg(t)}catch{return null}}function md(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Qg(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return md(e.started,t,r)||md(e.lastActivity,n,r)}function Zg(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Qg(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Jl({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&j0();return o?Zg(o,{sessionIdleExpire:e,maxReplayDuration:t})?(G&&W.infoTick("Session in sessionStorage is expired, creating new one..."),Eg(r,{previousSessionId:o.id})):o:(G&&W.infoTick("Creating new session"),Eg(r,{previousSessionId:n}))}function z0(e){return e.type===J.Custom}function Od(e,t,n){return t_(e,t)?(e_(e,t,n),!0):!1}function q0(e,t,n){return t_(e,t)?e_(e,t,n):Promise.resolve(null)}async function e_(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=Y0(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof Ui,a=s?"addEventSizeExceeded":"addEvent";if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a});let c=y();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function t_(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=Cd(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(G&&W.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function Y0(e,t){try{if(typeof t=="function"&&z0(e))return t(e)}catch(n){return G&&W.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Md(e){return!e.type}function hd(e){return e.type==="transaction"}function V0(e){return e.type==="replay_event"}function yg(e){return e.type==="feedback"}function J0(e){return(t,n)=>{if(!e.isEnabled()||!Md(t)&&!hd(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(hd(t)){K0(e,t);return}X0(e,t)}}}function K0(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function X0(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||gr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function Q0(e){return t=>{!e.isEnabled()||!Md(t)||Z0(e,t)}}function Z0(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=sn({category:"replay.hydrate-error",data:{url:et()}});$i(e,r)}}function eC(e){let t=y();t&&t.on("beforeAddBreadcrumb",n=>tC(e,n))}function tC(e,t){if(!e.isEnabled()||!n_(t))return;let n=nC(t);n&&$i(e,n)}function nC(e){return!n_(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?rC(e):sn(e)}function rC(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return sn(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>La?(n=!0,`${o.slice(0,La)}\u2026`):o;if(typeof o=="object")try{let i=Le(o,7);return JSON.stringify(i).length>La?(n=!0,`${JSON.stringify(i,null,2).slice(0,La)}\u2026`):i}catch{}return o});return sn({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function n_(e){return!!e.category}function oC(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function r_(){let e=x().getPropagationContext().dsc;e&&delete e.replay_id;let t=Q();if(t){let n=Ce(t);delete n.replay_id}}function iC(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function sC(e,t){return e.recordingMode!=="buffer"||t.message===yd||!t.exception||t.type?!1:Kg(e.getOptions().errorSampleRate)}function aC(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:V0(t)?(delete t.breadcrumbs,t):!Md(t)&&!hd(t)&&!yg(t)?t:e.checkAndHandleExpiredSession()?yg(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),iC(e,t),t):oC(t,n)&&!e.getOptions()._experiments.captureExceptions?(G&&W.log("Ignoring error from rrweb internals",t),null):((sC(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(r_(),t),{id:"Replay"})}function ec(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function cC(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function uC(e){return t=>{if(!e.isEnabled())return;let n=cC(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(ec(e,[n]),!1)))}}function lC(e,t){return G&&e.getOptions()._experiments.traceInternals?!1:si(t,y())}function o_(e,t){e.isEnabled()&&t!==null&&(lC(e,t.name)||e.addUpdate(()=>(ec(e,[t]),!0)))}function tc(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=va(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function i_(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function Va(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function s_(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function Bi(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function zn(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=dC(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function gd(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function dC(e){if(!e||typeof e!="string")return{body:e};let t=e.length>tg,n=fC(e);if(t){let r=e.slice(0,tg);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function fC(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Ja(e,t){let n=pC(e);return Fe(n,t)}function pC(e,t=ge.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ge.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function mC(e,t,n){try{let r=await gC(e,t,n),o=s_("resource.fetch",r);o_(n.replay,o)}catch(r){G&&W.exception(r,"Failed to capture fetch breadcrumb")}}function hC(e,t){let{input:n,response:r}=t,o=n?co(n):void 0,i=tc(o),s=r?i_(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function gC(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Ja(s,n.networkDetailAllowUrls)&&!Ja(s,n.networkDetailDenyUrls),p=l?_C(n,t.input,u):Bi(u),f=await SC(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:f}}function _C({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?TC(n,t):{};if(!e)return zn(o,r,void 0);let i=co(n),[s,a]=Sr(i,W),c=zn(o,r,s);return a?Va(c,a):c}async function SC(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Bi(o);let i=r?a_(r.headers,n):{};if(!r||!t&&o!==void 0)return zn(i,o,void 0);let[s,a]=await yC(r),c=EC(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?Va(c,a):c}function EC(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?tc(e):n;return r?t?zn(o,i,e):zn(o,i,void 0):Bi(i)}catch(i){return G&&W.exception(i,"Failed to serialize response body"),zn(o,n,void 0)}}async function yC(e){let t=bC(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await IC(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(G&&W.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(G&&W.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function a_(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function TC(e,t){return e.length===1&&typeof e[0]!="string"?Tg(e[0],t):e.length===2?Tg(e[1],t):{}}function Tg(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?a_(n,t):Array.isArray(n)?{}:gd(n,t):{}}function bC(e){try{return e.clone()}catch(t){G&&W.exception(t,"Failed to clone response body")}}function IC(e){return new Promise((t,n)=>{let r=gr(()=>n(new Error("Timeout while trying to read response body")),500);vC(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function vC(e){return await e.text()}async function AC(e,t,n){try{let r=CC(e,t,n),o=s_("resource.xhr",r);o_(n.replay,o)}catch(r){G&&W.exception(r,"Failed to capture xhr breadcrumb")}}function RC(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=tc(r),i=n.getResponseHeader("content-length")?i_(n.getResponseHeader("content-length")):kC(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function CC(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:p}=e.data;if(!c)return null;if(!a||!Ja(c,n.networkDetailAllowUrls)||Ja(c,n.networkDetailDenyUrls)){let w=Bi(l),b=Bi(p);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:w,response:b}}let f=a[nt],m=f?gd(f.request_headers,n.networkRequestHeaders):{},_=gd(NC(a),n.networkResponseHeaders),[g,S]=n.networkCaptureBodies?Sr(s,W):[void 0],[T,D]=n.networkCaptureBodies?wC(a):[void 0],A=zn(m,l,g),U=zn(_,p,T);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S?Va(A,S):A,response:D?Va(U,D):U}}function NC(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}function wC(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return xC(e.response,e.responseType)}catch(n){t.push(n)}return G&&W.warn("Failed to get xhr response body",...t),[void 0]}function xC(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return G&&W.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return G&&W.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function kC(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return tc(n)}catch{return}}function OC(e){let t=y();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>MC(a,c,u))}catch{}}function MC(e,t,n){if(t.data)try{LC(t)&&DC(n)&&(RC(t,n),AC(t,n,e)),PC(t)&&UC(n)&&(hC(t,n),mC(t,n,e))}catch(r){G&&W.exception(r,"Error when enriching network breadcrumb")}}function LC(e){return e.category==="xhr"}function PC(e){return e.category==="fetch"}function DC(e){return e?.xhr}function UC(e){return e?.response}function BC(e){let t=y();Ci(_0(e)),yn(uC(e)),eC(e),OC(e);let n=aC(e);Qo(n),t&&(t.on("beforeSendEvent",Q0(e)),t.on("afterSendEvent",J0(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function FC(e){try{return Promise.all(ec(e,[HC(ge.performance.memory)]))}catch{return[]}}function HC(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function $C(e,t,n){return bu(e,t,{...n,setTimeoutImpl:gr})}var Ua=v.navigator;function GC(){return/iPhone|iPad|iPod/i.test(Ua?.userAgent??"")||/Macintosh/i.test(Ua?.userAgent??"")&&Ua?.maxTouchPoints&&Ua?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function WC(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){G&&W.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&f0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Od(e,n,o))return!0;if(!o)return!1;let i=e.session;if(zC(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer){let s=e.eventBuffer.getEarliestTimestamp();s&&(G&&W.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&kd(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function jC(e){let t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function zC(e,t){!t||!e.session||e.session.segmentId!==0||Od(e,jC(e),!1)}function qC(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function YC(e,t,n,r){return Pe(Wo(e,Or(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function VC({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function JC({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await Vo(e.getOptions(),r,i,t,e,se());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function KC({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=VC({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=y(),p=x(),f=l?.getTransport(),m=l?.getDsn();if(!l||!f||!m||!i.sampled)return Promise.resolve({});let _={type:FA,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await JC({scope:p,client:l,replayId:t,event:_});if(!g)return l.recordDroppedEvent("event_processor","replay"),G&&W.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;let S=YC(g,s,m,l.getOptions().tunnel),T;try{T=await f.send(S)}catch(A){let U=new Error(yd);try{U.cause=A}catch{}throw U}if(typeof T.statusCode=="number"&&(T.statusCode<200||T.statusCode>=300))throw new Ka(T.statusCode);let D=ri({},T);if(ni(D,"replay"))throw new Fi(D);return T}var Ka=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},Fi=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function c_(e,t={count:0,interval:zA}){let{recordingData:n,onError:r}=e;if(n.length)try{return await KC(e),!0}catch(o){if(o instanceof Ka||o instanceof Fi)throw o;if(Jo("Replays",{_retryCount:t.count}),r&&r(o),t.count>=qA){let i=new Error(`${yd} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{gr(async()=>{try{await c_(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var u_="__THROTTLED",XC="__SKIPPED";function QC(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?XC:u_}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var _d=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:HA,sessionIdleExpire:$A},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=$C(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=QC((s,a)=>q0(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(YA,r),timeout:r,scrollTimeout:VA,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new ld(this,i)),G){let s=t._experiments;W.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{ge.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=sn({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=sn({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{T0(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){G&&W.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){G&&W.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",G&&W.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){G&&W.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){G&&W.log("Buffering is in progress, call `flush()` to save the replay");return}G&&W.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=Jl({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){G&&W.log("Buffering is in progress, call `flush()` to save the replay");return}G&&W.infoTick("Starting replay in buffer mode");let t=Jl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=bn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:jA}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:WC(this),...GC(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{G&&W.log(`Stopping Replay${n?` triggered by ${n}`:""}`),r_(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,$0(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),G&&W.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),G&&W.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();G&&W.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&md(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${ge.location.pathname}${ge.location.hash}${ge.location.search}`,n=`${ge.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===u_){let o=sn({category:"replay.throttled"});this.addUpdate(()=>!Od(this,{type:n0,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||Q(),n=t&&re(t),o=(n&&P(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return P(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=B0({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=Jl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return Zg(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{ge.document.addEventListener("visibilitychange",this._handleVisibilityChange),ge.addEventListener("blur",this._handleWindowBlur),ge.addEventListener("focus",this._handleWindowFocus),ge.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(BC(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=L0(this)}_removeListeners(){try{ge.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ge.removeEventListener("blur",this._handleWindowBlur),ge.removeEventListener("focus",this._handleWindowFocus),ge.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||Qg(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){G&&W.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=A0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(ec(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){G&&W.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await FC(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await c_({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=y();if(r){let o=n instanceof Fi?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){G&&W.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){G&&W.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&G&&W.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&kd(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=qC(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=sn({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function wi(e,t){return[...e,...t].join(",")}function ZC({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=wi(e,[".sentry-mask","[data-sentry-mask]"]),a=wi(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:wi(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:wi(r,[]),ignoreSelector:wi(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function eN({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var bg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',tN=["content-length","content-type","accept"],Ig=!1,l_=(e=>new Sd(e)),Sd=class{constructor({flushMinDelay:t=GA,flushMaxDelay:n=WA,minReplayDuration:r=JA,maxReplayDuration:o=ng,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:S=[],networkCaptureBodies:T=!0,networkRequestHeaders:D=[],networkResponseHeaders:A=[],mask:U=[],maskAttributes:w=["title","placeholder","aria-label"],unmask:b=[],block:R=[],unblock:I=[],ignore:k=[],maskFn:H,beforeAddRecordingEvent:C,beforeErrorSampling:L,onError:Y}={}){this.name="Replay";let K=ZC({mask:U,unmask:b,block:R,unblock:I,ignore:k});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:H,maskInputFn:H,maskAttributeFn:(ne,N,j)=>eN({maskAttributes:w,maskAllText:u,privacyOptions:K,key:ne,value:N,el:j}),...K,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ne=>{try{ne.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,KA),maxReplayDuration:Math.min(o,ng),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:_,networkDetailAllowUrls:g,networkDetailDenyUrls:S,networkCaptureBodies:T,networkRequestHeaders:vg(D),networkResponseHeaders:vg(A),beforeAddRecordingEvent:C,beforeErrorSampling:L,onError:Y,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${bg}`:bg),this._isInitialized&&Jr())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ig}set _isInitialized(t){Ig=t}afterAllSetup(t){!Jr()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=nN(this._initialOptions,t);this._replay=new _d({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function nN(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=Tt(n.replaysSessionSampleRate),i=Tt(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ge(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function vg(e){return[...tN,...e.map(t=>t.toLowerCase())]}function d_(){return y()?.getIntegrationByName("Replay")}var rN=Object.defineProperty,oN=(e,t,n)=>t in e?rN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f_=(e,t,n)=>oN(e,typeof t!="symbol"?t+"":t,n),Pd=class{constructor(){f_(this,"idNodeMap",new Map),f_(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function iN(){return new Pd}function sN(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Dd(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Dd(e.parentNode,t,n,r+1)}function p_(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(sN(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var bo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,m_={map:{},getId(){return console.error(bo),-1},getNode(){return console.error(bo),null},removeNodeFromMap(){console.error(bo)},has(){return console.error(bo),!1},reset(){console.error(bo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(m_=new Proxy(m_,{get(e,t,n){return t==="map"&&console.error(bo),Reflect.get(e,t,n)}}));function Bd(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){b_(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Bd(e,t,i||{},!0)}function Fd(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function aN(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function ic(e,t,n,r,o){if(!e)return!1;let i=aN(e);if(!i)return!1;let s=p_(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Dd(i,s),c=-1;return a<0?!1:(r&&(c=Dd(i,p_(null,r))),a>-1&&c<0?!0:a<c)}var h_={};function T_(e){let t=h_[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return h_[e]=r.bind(window)}function yr(...e){return T_("requestAnimationFrame")(...e)}function b_(...e){return T_("setTimeout")(...e)}var vo=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(vo||{}),rc;function cN(e){rc=e}var Ld=e=>rc?(...n)=>{try{return e(...n)}catch(r){if(rc&&rc(r)===!0)return()=>{};throw r}}:e,Io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Gi=0;Gi<Io.length;Gi++)uN[Io.charCodeAt(Gi)]=Gi;var Gi,lN=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Io[t[n]>>2],o+=Io[(t[n]&3)<<4|t[n+1]>>4],o+=Io[(t[n+1]&15)<<2|t[n+2]>>6],o+=Io[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},g_=new Map;function dN(e,t){let n=g_.get(e);return n||(n=new Map,g_.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var I_=(e,t,n)=>{if(!e||!(A_(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=dN(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function oc(e,t,n){if(e instanceof Array)return e.map(r=>oc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=lN(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[oc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[oc(e.data,t,n),e.width,e.height]};if(A_(e,t)||typeof e=="object"){let r=e.constructor.name,o=I_(e,t,n);return{rr_type:r,index:o}}}}return e}var v_=(e,t,n)=>e.map(r=>oc(r,t,n)),A_=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function fN(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=Fd(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return ic(this.canvas,n,r,o,!0)||b_(()=>{let l=v_(d,t,this);e(this.canvas,{type:vo["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Bd(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:vo["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function pN(e){return e==="experimental-webgl"?"webgl":e}function __(e,t,n,r,o){let i=[];try{let s=Fd(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!ic(this,t,n,r,!0)){let d=pN(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function S_(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=Fd(e,d,function(p){return function(...f){let m=p.apply(this,f);if(I_(m,a,this),"tagName"in this.canvas&&!ic(this.canvas,r,o,i,!0)){let _=v_(f,a,this),g={type:t,property:d,args:_};n(this.canvas,g)}return m}});c.push(l)}catch{let l=Bd(e,d,{set(p){n(this.canvas,{type:t,property:d,args:[p],setter:!0})}});c.push(l)}return c}function mN(e,t,n,r,o,i){let s=[];return s.push(...S_(t.WebGLRenderingContext.prototype,vo.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...S_(t.WebGL2RenderingContext.prototype,vo.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var hN='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function gN(){let e=new Blob([hN]);return URL.createObjectURL(e)}var Ud=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&cN(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&Ld(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Ld(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=__(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}yr(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(gN());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:vo["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=yr(n)};t=yr(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=__(t,n,r,o,!1),s=fN(this.processMutation.bind(this),t,n,r,o),a=mN(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{ic(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let _=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(_))){if(this.snapshotInProgressMap.set(_,!0),!n&&["webgl","webgl2"].includes(m.__context)){let g=m.getContext(m.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(m).then(g=>{this.worker?.postMessage({id:_,bitmap:g,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[g])}).catch(g=>{Ld(()=>{throw this.snapshotInProgressMap.delete(_),g})()})}}),!0)}startPendingCanvasMutationFlusher(){yr(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,yr(t)};yr(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),yr(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}iN();var E_;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(E_||(E_={}));var y_={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},_N="ReplayCanvas",nc=1280,SN=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,nc):nc,n?Math.min(n,nc):nc]},o,i=new Promise(s=>o=s);return{name:_N,getOptions(){let{quality:s,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{let d=new Ud({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return o(d),d},...y_[s]||y_.medium}},async snapshot(s,a){(await i).snapshot(s,a)}}}),R_=SN;var C_=new WeakMap,Hd=new Map,Wi={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function sc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c}={...Wi,...t},u=typeof i=="function"?i:f=>!0,d=f=>yN(f,a),l={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(m=>{if(m.op==="http.client"){let _=Hd.get(m.span_id);_&&(m.timestamp=_/1e3,Hd.delete(m.span_id))}}),f)),o&&Xu(f=>{if(f.response){let m=C_.get(f.response);m&&f.endTimestamp&&Hd.set(m,f.endTimestamp)}}),ur(f=>{let m=Lu(f,u,d,l,{propagateTraceparent:p});if(f.response&&f.fetchData.__span&&C_.set(f.response,f.fetchData.__span),m){let _=w_(f.fetchData.url),g=_?Gt(_).host:void 0;m.setAttributes({"http.url":_,"server.address":g}),s&&N_(m),c?.(m,{headers:f.headers})}})),r&&_r(f=>{let m=TN(f,u,d,l,p);if(m){s&&N_(m);let _;try{_=new Headers(f.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(m,{headers:_})}})}function EN(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function N_(e){let{url:t}=P(e).data;if(!t||typeof t!="string")return;let n=Rt("resource",({entries:r})=>{r.forEach(o=>{EN(o)&&o.name.endsWith(t)&&(e.setAttributes(Ri(o)),setTimeout(n))})})}function yN(e,t){let n=et();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?Fe(r.toString(),t)||i&&Fe(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?Fe(e,t):r}}function TN(e,t,n,r,o){let i=e.xhr,s=i?.[nt];if(!i||i.__sentry_own_request__||!s)return;let{url:a,method:c}=s,u=Me()&&t(a);if(e.endTimestamp&&u){let g=i.__sentry_xhr_span_id__;if(!g)return;let S=r[g];S&&s.status_code!==void 0&&(Qt(S,s.status_code),S.end(),delete r[g]);return}let d=w_(a),l=d?Gt(d):Gt(a),p=ii(a),f=!!Q(),m=u&&f?lt({name:`${c} ${p}`,attributes:{url:a,type:"xhr","http.method":c,"http.url":d,"server.address":l?.host,[q]:"auto.http.browser",[ye]:"http.client",...l?.search&&{"http.query":l?.search},...l?.hash&&{"http.fragment":l?.hash}}}):new Ke;i.__sentry_xhr_span_id__=m.spanContext().spanId,r[i.__sentry_xhr_span_id__]=m,n(a)&&bN(i,Me()&&f?m:void 0,o);let _=y();return _&&_.emit("beforeOutgoingRequestSpan",m,e),m}function bN(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=or({span:t,propagateTraceparent:n});r&&IN(e,r,o,i)}function IN(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!vN(i))&&e.setRequestHeader("baggage",n)}}catch{}}function vN(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function w_(e){try{return new URL(e,M.location.origin).href}catch{return}}function x_(){M.document?M.document.addEventListener("visibilitychange",()=>{let e=Q();if(!e)return;let t=re(e);if(M.document.hidden&&t){let n="cancelled",{op:r,status:o}=P(t);F&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):F&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var AN=3600,k_="sentry_previous_trace",RN="sentry.previous_trace";function O_(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?wN():void 0;e.on("spanStart",s=>{if(re(s)!==s)return;let a=x().getPropagationContext();o=CN(o,s,a),r&&NN(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=x(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String($d(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=$d(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[Po]:o.sampleRate}})}function CN(e,t,n){let r=P(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[cn])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=AN&&(F&&h.log(`Adding previous_trace ${s} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:s,attributes:{[xc]:"previous_trace"}}),t.setAttribute(RN,`${s.traceId}-${s.spanId}-${$d(s)?1:0}`)),i)}function NN(e){try{M.sessionStorage.setItem(k_,JSON.stringify(e))}catch(t){F&&h.warn("Could not store previous trace in sessionStorage",t)}}function wN(){try{let e=M.sessionStorage?.getItem(k_);return JSON.parse(e)}catch{return}}function $d(e){return e.traceFlags===1}var xN="BrowserTracing",kN={...Mr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Wi},D_=((e={})=>{let t={name:void 0,source:void 0},n=M.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:p,childSpanTimeout:f,markBackgroundSpan:m,traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:T,enableHTTPTimings:D,ignoreResourceSpans:A,ignorePerformanceApiSpans:U,instrumentPageLoad:w,instrumentNavigation:b,detectRedirects:R,linkPreviousTrace:I,consistentTraceSampling:k,enableReportPageLoaded:H,onRequestSpanStart:C}={...kN,...e},L,Y,K;function ne(N,j,O=!0){let $=j.op==="pageload",Z=j.name,ae=d?d(j):j,Re=ae.attributes||{};if(Z!==ae.name&&(Re[ve]="custom",ae.attributes=Re),!O){let Ut=yt();lt({...ae,startTime:Ut}).end(Ut);return}t.name=ae.name,t.source=Re[ve];let Te=Ts(ae,{idleTimeout:l,finalTimeout:p,childSpanTimeout:f,disableAutoFinish:$,beforeSpanEnd:Ut=>{L?.(),Ol(Ut,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:A,ignorePerformanceApiSpans:U}),L_(N,void 0);let Nt=x(),gt=Nt.getPropagationContext();Nt.setPropagationContext({...gt,traceId:Te.spanContext().traceId,sampled:bt(Te),dsc:Ce(Ut)}),$&&(K=void 0)},trimIdleSpanEndTimestamp:!H});$&&H&&(K=Te),L_(N,Te);function In(){n&&["interactive","complete"].includes(n.readyState)&&N.emit("idleSpanEnableAutoFinish",Te)}$&&!H&&n&&(n.addEventListener("readystatechange",()=>{In()}),In())}return{name:xN,setup(N){if(Go(),L=Nl({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:N}),r&&Bl(),o&&Ml(),s&&v.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?xl():i&&wl(),a&&kl(),R&&n){let O=()=>{Y=X()};addEventListener("click",O,{capture:!0}),addEventListener("keydown",O,{capture:!0,passive:!0})}function j(){let O=ji(N);O&&!P(O).timestamp&&(F&&h.log(`[Tracing] Finishing current active span with op: ${P(O).op}`),O.setAttribute(wn,"cancelled"),O.end())}N.on("startNavigationSpan",(O,$)=>{if(y()!==N)return;if($?.isRedirect){F&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ne(N,{op:"navigation.redirect",...O},!1);return}Y=void 0,j(),se().setPropagationContext({traceId:He(),sampleRand:Math.random(),propagationSpanId:Me()?void 0:Ye()});let Z=x();Z.setPropagationContext({traceId:He(),sampleRand:Math.random(),propagationSpanId:Me()?void 0:Ye()}),Z.setSDKProcessingMetadata({normalizedRequest:void 0}),ne(N,{op:"navigation",...O,parentSpan:null,forceTransaction:!0})}),N.on("startPageLoadSpan",(O,$={})=>{if(y()!==N)return;j();let Z=$.sentryTrace||M_("sentry-trace"),ae=$.baggage||M_("baggage"),Re=Uo(Z,ae),Te=x();Te.setPropagationContext(Re),Me()||(Te.getPropagationContext().propagationSpanId=Ye()),Te.setSDKProcessingMetadata({normalizedRequest:Ti()}),ne(N,{op:"pageload",...O})}),N.on("endPageloadSpan",()=>{H&&K&&(K.setAttribute(wn,"reportPageLoaded"),K.end())})},afterAllSetup(N){let j=et();if(I!=="off"&&O_(N,{linkPreviousTrace:I,consistentTraceSampling:k}),M.location){if(w){let O=Ee();Gd(N,{name:M.location.pathname,startTime:O?O/1e3:void 0,attributes:{[ve]:"url",[q]:"auto.pageload.browser"}})}b&&yn(({to:O,from:$})=>{if($===void 0&&j?.indexOf(O)!==-1){j=void 0;return}j=void 0;let Z=rr(O),ae=ji(N),Re=ae&&R&&MN(ae,Y);Wd(N,{name:Z?.pathname||M.location.pathname,attributes:{[ve]:"url",[q]:"auto.navigation.browser"}},{url:O,isRedirect:Re})})}m&&x_(),a&&ON(N,l,p,f,t),r&&Fl(),sc(N,{traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:T,enableHTTPTimings:D,onRequestSpanStart:C})}}});function Gd(e,t,n){e.emit("startPageLoadSpan",t,n),x().setTransactionName(t.name);let r=ji(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Wd(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=x();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...Ti(),url:r}}),ji(e)}function M_(e){return M.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function ON(e,t,n,r,o){let i=M.document,s,a=()=>{let c="ui.action.click",u=ji(e);if(u){let d=P(u).op;if(["navigation","pageload"].includes(d)){F&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(wn,"interactionInterrupted"),s.end(),s=void 0),!o.name){F&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=Ts({name:o.name,op:c,attributes:{[ve]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var U_="_sentry_idleSpan";function ji(e){return e[U_]}function L_(e,t){_e(e,U_,t)}var P_=1.5;function MN(e,t){let n=P(e),r=yt(),o=n.start_timestamp;return!(r-o>P_||t&&r-t<=P_)}function B_(e=y()){e?.emit("endPageloadSpan")}function F_(e){let t=Q();if(t===e)return;let n=x();e.end=new Proxy(e.end,{apply(r,o,i){return ct(n,t),Reflect.apply(r,o,i)}}),ct(n,e)}function Ao(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function LN(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Ao(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function jd(e){return Ao(e.getAllKeys())}function PN(e,t,n){return e(r=>jd(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),Ao(r.transaction)}))}function DN(e,t,n){return e(r=>jd(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),Ao(r.transaction)}))}function UN(e){return e(t=>jd(t).then(n=>{let r=n[0];if(r!=null)return Ao(t.get(r)).then(o=>(t.delete(r),Ao(t.transaction).then(()=>o)))}))}function BN(e){let t;function n(){return t==null&&(t=LN(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await xn(r);await PN(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await xn(r);await DN(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await UN(n());if(r)return Fc(r)}catch{}}}}function FN(e){return t=>{let n=e({...t,createStore:BN});return M.addEventListener("online",async r=>{await n.flush()}),n}}function H_(e=uo){return FN(gu(e))}var $_=1e6,ac=String(0),HN="main",cc=M.navigator,W_="",j_="",z_="",zd=cc?.userAgent||"",q_="",$N=cc?.language||cc?.languages?.[0]||"";function GN(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var G_=cc?.userAgentData;GN(G_)&&G_.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(W_=e.platform||"",z_=e.architecture||"",q_=e.model||"",j_=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];zd=`${t.brand} ${t.version}`}}).catch(e=>{});function WN(e){return!("thread_metadata"in e)}function jN(e){return WN(e)?YN(e):e}function zN(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&F&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function qN(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=zN(r),i=jN(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:X()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:X()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||ln,runtime:{name:"javascript",version:M.navigator.userAgent},os:{name:W_,version:j_,build_number:zd},device:{locale:$N,model:q_,manufacturer:zd,architecture:z_,is_emulator:!1},debug_meta:{images:VN(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||Se(),trace_id:o,active_thread_id:ac,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function uc(e){return P(e).op==="pageload"}function YN(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[ac]:{name:HN}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=Ee(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*$_).toFixed(0),stack_id:t,thread_id:ac};return}let l=e.stacks[u.stackId],p=[];for(;l;){p.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let f={elapsed_since_start_ns:((u.timestamp+c-i)*$_).toFixed(0),stack_id:n,thread_id:ac};r.stacks[n]=p,r.samples[d]=f,n++}),r}function Y_(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function V_(e){let t=[];return It(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function VN(e){let r=y()?.getOptions()?.stackParser;return r?Vc(r,e):[]}function JN(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(F&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(F&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function KN(e){return e.samples.length<2?(F&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(F&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var J_=!1,qd=3e4;function XN(e){return typeof e=="function"}function K_(){let e=M.Profiler;if(!XN(e)){F&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(qd/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{F&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),J_=!0}}function Yd(e){if(J_)return F&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return F&&h.log("[Profiling] Discarding profile because transaction was not sampled."),!1;let n=y()?.getOptions();if(!n)return F&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return JN(r)?r?(r===!0?!0:Math.random()<r)?!0:(F&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(F&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(F&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function X_(e,t,n,r){return KN(n)?qN(e,t,n,r):null}var Tr=new Map;function Q_(){return Tr.size}function Z_(e){let t=Tr.get(e);return t&&Tr.delete(e),t}function eS(e,t){if(Tr.set(e,t),Tr.size>30){let n=Tr.keys().next().value;Tr.delete(n)}}function Vd(e){let t;uc(e)&&(t=X()*1e3);let n=K_();if(!n)return;F&&h.log(`[Profiling] started profiling span: ${P(e).description}`);let r=Se();x().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n)return n.stop().then(c=>{if(i&&(M.clearTimeout(i),i=void 0),F&&h.log(`[Profiling] stopped profiling of span: ${P(e).description}`),!c){F&&h.log(`[Profiling] profiler returned null profile for: ${P(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}eS(r,c)}).catch(c=>{F&&h.log("[Profiling] error while stopping profiler:",c)})}let i=M.setTimeout(()=>{F&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",P(e).description),o()},qd),s=e.end.bind(e);function a(){return e?(o().then(()=>{s()},()=>{s()}),e):s()}e.end=a}var QN="BrowserProfiling",ZN=(()=>({name:QN,setup(e){let t=Q(),n=t&&re(t);n&&uc(n)&&Yd(n)&&Vd(n),e.on("spanStart",r=>{r===re(r)&&Yd(r)&&Vd(r)}),e.on("beforeEnvelope",r=>{if(!Q_())return;let o=V_(r);if(!o.length)return;let i=[];for(let s of o){let a=s?.contexts,c=a?.profile?.profile_id,u=a?.profile?.start_timestamp;if(typeof c!="string"){F&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!c){F&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}a?.profile&&delete a.profile;let d=Z_(c);if(!d){F&&h.log(`[Profiling] Could not retrieve profile for span: ${c}`);continue}let l=X_(c,u,d,s);l&&i.push(l)}Y_(r,i)})}})),tS=ZN;var ew="SpotlightBrowser",tw=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:ew,setup:()=>{F&&h.log("Using Sidecar URL",t)},processEvent:n=>rw(n)?null:n,afterAllSetup:n=>{nw(n,t)}}});function nw(e,t){let n=ao("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:xn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var nS=tw;function rw(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}var rS=()=>({name:"LaunchDarkly",processEvent(e,t,n){return vt(e)}});function oS(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{dt(e,t.value),ft(e,t.value)}}}var iS=()=>({name:"OpenFeature",processEvent(e,t,n){return vt(e)}}),lc=class{after(t,n){dt(n.flagKey,n.value),ft(n.flagKey,n.value)}error(t,n,r){dt(t.flagKey,t.defaultValue),ft(t.flagKey,t.defaultValue)}};var sS=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;me(t,"isEnabled",ow)},processEvent(t,n,r){return vt(t)}});function ow(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(dt(n,r),ft(n,r)):F&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var aS=(({growthbookClass:e})=>Mu({growthbookClass:e}));var cS=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{dt(n.gate.name,n.gate.value),ft(n.gate.name,n.gate.value)})},processEvent(t,n,r){return vt(t)}});async function uS(){let e=y();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await zo(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var iw="WebWorker",dS=({worker:e})=>({name:iw,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>lS(t))},addWorker:t=>lS(t)});function lS(e){e.addEventListener("message",t=>{sw(t.data)&&(t.stopImmediatePropagation(),F&&h.log("Sentry debugId web worker message received",t.data),M._sentryDebugIds={...t.data._sentryDebugIds,...M._sentryDebugIds})})}function fS({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0})}function sw(e){return ze(e)&&e._sentryMessage===!0&&"_sentryDebugIds"in e&&(ze(e._sentryDebugIds)||e._sentryDebugIds===void 0)}export{pS as Sentry};
