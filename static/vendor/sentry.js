var cT=Object.defineProperty;var eu=(e,t)=>{for(var n in t)cT(e,n,{get:t[n],enumerable:!0})};var aT={};eu(aT,{BrowserClient:()=>wo,MULTIPLEXED_TRANSPORT_EXTRA_KEY:()=>mo,OpenFeatureIntegrationHook:()=>Zc,SDK_VERSION:()=>_t,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>se,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>H,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>Nn,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ve,Scope:()=>et,WINDOW:()=>w,addBreadcrumb:()=>dt,addEventProcessor:()=>xi,addIntegration:()=>co,breadcrumbsIntegration:()=>lc,browserApiErrorsIntegration:()=>dc,browserProfilingIntegration:()=>KE,browserSessionIntegration:()=>fc,browserTracingIntegration:()=>NE,buildLaunchDarklyFlagUsedHandler:()=>QE,captureConsoleIntegration:()=>gl,captureEvent:()=>rn,captureException:()=>X,captureFeedback:()=>$i,captureMessage:()=>vi,captureSession:()=>ao,chromeStackLineParser:()=>Gd,close:()=>zu,consoleLoggingIntegration:()=>Nl,contextLinesIntegration:()=>Fg,continueTrace:()=>Ou,createConsolaReporter:()=>wl,createLangChainCallbackHandler:()=>ql,createTransport:()=>Pi,createUserFeedbackEnvelope:()=>yg,dedupeIntegration:()=>Gi,defaultRequestInstrumentationOptions:()=>As,defaultStackLineParsers:()=>Wd,defaultStackParser:()=>cc,diagnoseSdkConnectivity:()=>rT,endSession:()=>ki,eventFiltersIntegration:()=>da,eventFromException:()=>Wa,eventFromMessage:()=>ja,exceptionFromError:()=>No,extraErrorDataIntegration:()=>Sl,featureFlagsIntegration:()=>bl,feedbackAsyncIntegration:()=>j_,feedbackIntegration:()=>gd,feedbackSyncIntegration:()=>gd,flush:()=>ju,forceLoad:()=>Cg,functionToStringIntegration:()=>Fi,geckoStackLineParser:()=>$d,getActiveSpan:()=>K,getClient:()=>T,getCurrentScope:()=>x,getDefaultIntegrations:()=>qd,getFeedback:()=>x_,getGlobalScope:()=>tn,getIsolationScope:()=>ie,getReplay:()=>tE,getRootSpan:()=>Z,getSpanDescendants:()=>Cn,getSpanStatusFromHttpCode:()=>Ds,getTraceData:()=>vr,globalHandlersIntegration:()=>pc,graphqlClientIntegration:()=>Wg,growthbookIntegration:()=>tT,httpClientIntegration:()=>Lg,httpContextIntegration:()=>mc,inboundFiltersIntegration:()=>Hi,init:()=>Ng,instrumentAnthropicAiClient:()=>Hl,instrumentGoogleGenAIClient:()=>jl,instrumentLangGraph:()=>Vl,instrumentOpenAiClient:()=>Bl,instrumentOutgoingRequests:()=>Yc,instrumentSupabaseClient:()=>_a,isEnabled:()=>wi,isInitialized:()=>qu,lastEventId:()=>Ci,launchDarklyIntegration:()=>XE,lazyLoadIntegration:()=>$a,linkedErrorsIntegration:()=>hc,logger:()=>Ea,makeBrowserOfflineTransport:()=>kE,makeFetchTransport:()=>Do,makeMultiplexedTransport:()=>cl,metrics:()=>Ta,moduleMetadataIntegration:()=>_l,onLoad:()=>wg,openFeatureIntegration:()=>ZE,opera10StackLineParser:()=>Sg,opera11StackLineParser:()=>Eg,parameterize:()=>ua,registerSpanErrorInstrumentation:()=>Si,registerWebWorker:()=>sT,replayCanvasIntegration:()=>_E,replayIntegration:()=>eE,reportPageLoaded:()=>wE,reportingObserverIntegration:()=>Og,rewriteFramesIntegration:()=>El,sendFeedback:()=>ud,setActiveSpanInBrowser:()=>xE,setContext:()=>Ni,setCurrentClient:()=>ca,setExtra:()=>Hu,setExtras:()=>Fu,setHttpStatus:()=>gn,setMeasurement:()=>Ti,setTag:()=>$u,setTags:()=>Gu,setUser:()=>Wu,showReportDialog:()=>xg,spanToBaggageHeader:()=>vu,spanToJSON:()=>M,spanToTraceHeader:()=>_i,spotlightBrowserIntegration:()=>Rg,startBrowserTracingNavigationSpan:()=>Vf,startBrowserTracingPageLoadSpan:()=>Yf,startInactiveSpan:()=>Et,startNewTrace:()=>ea,startSession:()=>so,startSpan:()=>qe,startSpanManual:()=>lt,statsigIntegration:()=>nT,supabaseIntegration:()=>Tl,suppressTracing:()=>yi,thirdPartyErrorFilterIntegration:()=>Il,uiProfiler:()=>_g,unleashIntegration:()=>eT,updateSpanName:()=>Au,webWorkerIntegration:()=>iT,winjsStackLineParser:()=>gg,withActiveSpan:()=>qn,withIsolationScope:()=>Us,withScope:()=>De,zodErrorsIntegration:()=>yl});var y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var v=globalThis;var _t="10.38.0";function st(){return Hn(v),v}function Hn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||_t,t[_t]=t[_t]||{}}function Zt(e,t,n=v){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[_t]=r[_t]||{};return o[e]||(o[e]=t())}var dr=["debug","info","warn","error","log","assert","trace"],uT="Sentry Logger ",qr={};function Ve(e){if(!("console"in v))return e();let t=v.console,n={},r=Object.keys(qr);r.forEach(o=>{let i=qr[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function lT(){nu().enabled=!0}function dT(){nu().enabled=!1}function tp(){return nu().enabled}function fT(...e){tu("log",...e)}function pT(...e){tu("warn",...e)}function mT(...e){tu("error",...e)}function tu(e,...t){y&&tp()&&Ve(()=>{v.console[e](`${uT}[${e}]:`,...t)})}function nu(){return y?Zt("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:lT,disable:dT,isEnabled:tp,log:fT,warn:pT,error:mT};var np=/\(error: (.*)\)/,rp=/captureMessage|captureException/;function ws(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=np.test(c)?c.replace(np,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return op(i.slice(o))}}function ou(e){return Array.isArray(e)?ws(...e):e}function op(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Cs(t).function||"")&&t.pop(),t.reverse(),rp.test(Cs(t).function||"")&&(t.pop(),rp.test(Cs(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Cs(t).filename,function:n.function||"?"}))}function Cs(e){return e[e.length-1]||{}}var ru="<anonymous>";function gt(e){try{return!e||typeof e!="function"?ru:e.name||ru}catch{return ru}}function Yr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function xs(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}function ip(e){let t=e?.startsWith("file://")?e.slice(7):e;return t?.match(/\/[A-Z]:/)&&(t=t.slice(1)),t}var ks={},sp={};function Je(e,t){ks[e]=ks[e]||[],ks[e].push(t)}function Ke(e,t){if(!sp[e]){sp[e]=!0;try{t()}catch(n){y&&h.error(`Error while instrumenting ${e}`,n)}}}function Me(e,t){let n=e&&ks[e];if(n)for(let r of n)try{r(t)}catch(o){y&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}var iu=null;function ni(e){let t="error";Je(t,e),Ke(t,hT)}function hT(){iu=v.onerror,v.onerror=function(e,t,n,r,o){return Me("error",{column:r,error:o,line:n,msg:e,url:t}),iu?iu.apply(this,arguments):!1},v.onerror.__SENTRY_INSTRUMENTED__=!0}var su=null;function ri(e){let t="unhandledrejection";Je(t,e),Ke(t,_T)}function _T(){su=v.onunhandledrejection,v.onunhandledrejection=function(e){return Me("unhandledrejection",e),su?su.apply(this,arguments):!0},v.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var ap=Object.prototype.toString;function Xe(e){switch(ap.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Nt(e,Error)}}function Vr(e,t){return ap.call(e)===`[object ${t}]`}function oi(e){return Vr(e,"ErrorEvent")}function Os(e){return Vr(e,"DOMError")}function au(e){return Vr(e,"DOMException")}function Fe(e){return Vr(e,"String")}function Rn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function at(e){return e===null||Rn(e)||typeof e!="object"&&typeof e!="function"}function we(e){return Vr(e,"Object")}function fr(e){return typeof Event<"u"&&Nt(e,Event)}function cu(e){return typeof Element<"u"&&Nt(e,Element)}function uu(e){return Vr(e,"RegExp")}function Gt(e){return!!(e?.then&&typeof e.then=="function")}function lu(e){return we(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Nt(e,t){try{return e instanceof t}catch{return!1}}function ii(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function si(e){return typeof Request<"u"&&Nt(e,Request)}var du=v,gT=80;function Re(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||gT;for(;n&&i++<r&&(u=ST(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function ST(e,t){let n=e,r=[];if(!n?.tagName)return"";if(du.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&Fe(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function ct(){try{return du.document.location.href}catch{return""}}function ai(e){if(!du.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function ge(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&Ms(o,r);try{e[t]=o}catch{y&&h.log(`Failed to replace method "${t}" in object`,e)}}function Se(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{y&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Ms(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,Se(e,"__sentry_original__",t)}catch{}}function pr(e){return e.__sentry_original__}function Ls(e){if(Xe(e))return{message:e.message,name:e.name,stack:e.stack,...up(e)};if(fr(e)){let t={type:e.type,target:cp(e.target),currentTarget:cp(e.currentTarget),...up(e)};return typeof CustomEvent<"u"&&Nt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function cp(e){try{return cu(e)?Re(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function up(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function fu(e){let t=Object.keys(Ls(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}var Jr;function mr(e){if(Jr!==void 0)return Jr?Jr(e):e();let t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=v;return t in n&&typeof n[t]=="function"?(Jr=n[t],Jr(e)):(Jr=null,e())}function St(){return mr(()=>Math.random())}function hr(){return mr(()=>Date.now())}function pn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ci(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function _r(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{ii(o)?n.push(xs(o)):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Kr(e,t,n=!1){return Fe(e)?uu(t)?t.test(e):Fe(t)?n?e===t:e.includes(t):!1:!1}function je(e,t=[],n=!1){return t.some(r=>Kr(e,r,n))}function ET(){let e=v;return e.crypto||e.msCrypto}var pu;function TT(){return St()*16}function le(e=ET()){try{if(e?.randomUUID)return mr(()=>e.randomUUID()).replace(/-/g,"")}catch{}return pu||(pu="10000000100040008000"+1e11),pu.replace(/[018]/g,t=>(t^(TT()&15)>>t/4).toString(16))}function lp(e){return e.exception?.values?.[0]}function mn(e){let{message:t,event_id:n}=e;if(t)return t;let r=lp(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Xr(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Qe(e,t){let n=lp(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function mu(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>ci(s,0));let i=Math.min(r-1,o);t.context_line=ci(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>ci(s,0))}function Ps(e){if(yT(e))return!0;try{Se(e,"__sentry_captured__",!0)}catch{}return!1}function yT(e){try{return e.__sentry_captured__}catch{}}var fp=1e3;function Ct(){return hr()/fp}function IT(){let{performance:e}=v;if(!e?.now||!e.timeOrigin)return Ct;let t=e.timeOrigin;return()=>(t+mr(()=>e.now()))/fp}var dp;function Q(){return(dp??(dp=IT()))()}var hu=null;function bT(){let{performance:e}=v;if(!e?.now)return;let t=3e5,n=mr(()=>e.now()),r=hr(),o=e.timeOrigin;if(typeof o=="number"&&Math.abs(o+n-r)<t)return o;let i=e.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<t?i:r-n}function Ee(){return hu===null&&(hu=bT()),hu}function pp(e){let t=Q(),n={sid:le(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>AT(n)};return e&&vn(n,e),n}function vn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Q(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:le()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function mp(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),vn(e,n)}function AT(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Gn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Gn(r[o],t[o],n-1));return r}function ze(){return le()}function Ze(){return le().substring(16)}var _u="_sentrySpan";function ut(e,t){t?Se(e,_u,t):delete e[_u]}function en(e){return e[_u]}var RT=100,et=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ze(),sampleRand:St()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,t._conversationId=this._conversationId,ut(t,en(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&vn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(t){return this._conversationId=t||void 0,this._notifyScopeListeners(),this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():we(n)?t:void 0,{tags:o,attributes:i,extra:s,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l,conversationId:f}=r||{};return this._tags={...this._tags,...o},this._attributes={...this._attributes,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,ut(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ze(),sampleRand:St()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:RT;if(r<=0)return this;let o={timestamp:Ct(),...t,message:t.message?pn(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:en(this),conversationId:this._conversationId}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Gn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture message!"),o;let i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||le();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(y&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function hp(){return Zt("defaultCurrentScope",()=>new et)}function _p(){return Zt("defaultIsolationScope",()=>new et)}var gu=class{constructor(t,n){let r;t?r=t:r=new et;let o;n?o=n:o=new et,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return Gt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Qr(){let e=st(),t=Hn(e);return t.stack=t.stack||new gu(hp(),_p())}function vT(e){return Qr().withScope(e)}function NT(e,t){let n=Qr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function gp(e){return Qr().withScope(()=>e(Qr().getIsolationScope()))}function Sp(){return{withIsolationScope:gp,withScope:vT,withSetScope:NT,withSetIsolationScope:(e,t)=>gp(t),getCurrentScope:()=>Qr().getScope(),getIsolationScope:()=>Qr().getIsolationScope()}}function $t(e){let t=Hn(e);return t.acs?t.acs:Sp()}function x(){let e=st();return $t(e).getCurrentScope()}function ie(){let e=st();return $t(e).getIsolationScope()}function tn(){return Zt("globalScope",()=>new et)}function De(...e){let t=st(),n=$t(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function Us(...e){let t=st(),n=$t(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function T(){return x().getClient()}function ui(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Ze()};return r&&(i.parent_span_id=r),i}var ve="sentry.source",Nn="sentry.sample_rate",li="sentry.previous_trace_sample_rate",se="sentry.op",H="sentry.origin",$n="sentry.idle_span_finish_reason",hn="sentry.measurement_unit",_n="sentry.measurement_value",Zr="sentry.custom_span_name",eo="sentry.profile_id",Wt="sentry.exclusive_time";var Su="http.request.method",Eu="url.full",Tu="sentry.link.type",yu="gen_ai.conversation.id";function Ds(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}function gn(e,t){e.setAttribute("http.response.status_code",t);let n=Ds(t);n.message!=="unknown_error"&&e.setStatus(n)}var Ep="_sentryScope",Tp="_sentryIsolationScope";function CT(e){try{let t=v.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function wT(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function yp(e,t,n){e&&(Se(e,Tp,CT(n)),Se(e,Ep,t))}function gr(e){let t=e;return{scope:t[Ep],isolationScope:wT(t[Tp])}}var Bs="sentry-",xT=/^sentry-/,kT=8192;function to(e){let t=OT(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(xT)){let s=o.slice(Bs.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function Fs(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Bs}${r}`]=o),n),{});return MT(t)}function OT(e){if(!(!e||!Fe(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Ip(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Ip(e)}function Ip(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function MT(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>kT?(y&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var LT=/^o(\d+)\./,PT=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function UT(e){return e==="http"||e==="https"}function He(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function Hs(e){let t=PT.exec(e);if(!t){Ve(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return bp({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function bp(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function DT(e){if(!y)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?UT(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function BT(e){return e.match(LT)?.[1]}function Gs(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=BT(n)),r}function di(e){let t=typeof e=="string"?Hs(e):bp(e);if(!(!t||!DT(t)))return t}function wt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var $s=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Ap(e){if(!e)return;let t=e.match($s);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function fi(e,t){let n=Ap(e),r=to(t);if(!n?.traceId)return{traceId:ze(),sampleRand:St()};let o=FT(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function pi(e=ze(),t=Ze(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function mi(e=ze(),t=Ze(),n){return`00-${e}-${t}-${n?"01":"00"}`}function FT(e,t){let n=wt(t?.sample_rand);if(n!==void 0)return n;let r=wt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?St()*r:r+St()*(1-r):St()}function Iu(e,t){let n=Gs(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var js=0,zs=1,Rp=!1;function Np(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=M(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function hi(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:M(e).parent_span_id,i=gr(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Ze():t;return{parent_span_id:o,span_id:s,trace_id:n}}function _i(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return pi(t,n,r)}function Cp(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return mi(t,n,r)}function qs(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===zs,attributes:i,...o}))}function nn(e){return typeof e=="number"?vp(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?vp(e.getTime()):Q()}function vp(e){return e>9999999999?e/1e3:e}function M(e){if($T(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(GT(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:nn(o),timestamp:nn(s)||void 0,status:Ys(a),op:r[se],origin:r[H],links:qs(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function GT(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function $T(e){return typeof e.getSpanJSON=="function"}function xt(e){let{traceFlags:t}=e.spanContext();return t===zs}function Ys(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"internal_error"}var Sr="_sentryChildSpans",bu="_sentryRootSpan";function Vs(e,t){let n=e[bu]||e;Se(t,bu,n),e[Sr]?e[Sr].add(t):Se(e,Sr,new Set([t]))}function wp(e,t){e[Sr]&&e[Sr].delete(t)}function Cn(e){let t=new Set;function n(r){if(!t.has(r)&&xt(r)){t.add(r);let o=r[Sr]?Array.from(r[Sr]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function Z(e){return e[bu]||e}function K(){let e=st(),t=$t(e);return t.getActiveSpan?t.getActiveSpan():en(x())}function gi(){Rp||(Ve(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Rp=!0)}function Au(e,t){e.updateName(t),e.setAttributes({[ve]:"custom",[Zr]:t})}var xp=!1;function Si(){if(xp)return;function e(){let t=K(),n=t&&Z(t);if(n){let r="internal_error";y&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",xp=!0,ni(e),ri(e)}function xe(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||T()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function kp(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Er(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(WT(n)){if(Kr(e.description,n))return y&&kp(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?Kr(e.description,n.name):!0,o=n.op?e.op&&Kr(e.op,n.op):!0;if(r&&o)return y&&kp(e),!0}return!1}function Op(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function WT(e){return typeof e=="string"||e instanceof RegExp}var wn="production";var Mp="_frozenDsc";function no(e,t){Se(e,Mp,t)}function Ru(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||wn,release:n.release,public_key:r,trace_id:e,org_id:Gs(t)};return t.emit("createDsc",o),o}function Tr(e,t){let n=t.getPropagationContext();return n.dsc||Ru(n.traceId,e)}function ke(e){let t=T();if(!t)return{};let n=Z(e),r=M(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[Nn]??o[li];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[Mp];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&to(u);if(d)return a(d);let l=Ru(e.spanContext().traceId,t),f=o[ve],p=r.description;return f!=="url"&&p&&(l.transaction=p),xe()&&(l.sampled=String(xt(n)),l.sample_rand=i?.get("sentry.sample_rand")??gr(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function vu(e){let t=ke(e);return Fs(t)}var tt=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Ze()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:js}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Be(e,t=100,n=1/0){try{return Nu("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Js(e,t=3,n=100*1024){let r=Be(e,t);return YT(r)>n?Js(e,t-1,n):r}function Nu(e,t,n=1/0,r=1/0,o=VT()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=jT(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let p=u.toJSON();return Nu("",p,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,f=Ls(t);for(let p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}let m=f[p];d[p]=Nu(p,m,c-1,r,o),l++}return s(t),d}function jT(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ii(t))return xs(t);if(lu(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${gt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=zT(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function zT(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function qT(e){return~-encodeURI(e).split(/%..|./).length}function YT(e){return qT(JSON.stringify(e))}function VT(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function Oe(e,t=[]){return[e,t]}function Cu(e,t){let[n,r]=e;return[n,[...r,t]]}function kt(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function ro(e,t){return kt(e,(n,r)=>t.includes(r))}function Ks(e){let t=Hn(v);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function JT(e){let t=Hn(v);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Wn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Ks(r),i]:r.push(typeof i=="string"?Ks(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Be(a))}o(c)}}return typeof r=="string"?r:KT(r)}function KT(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function wu(e){let t=typeof e=="string"?Ks(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(JT(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function xu(e){return[{type:"span"},e]}function ku(e){let t=typeof e.data=="string"?Ks(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var XT={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Xs(e){return XT[e]}function jn(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ei(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:He(r)},...o&&{trace:o}}}function QT(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function Lp(e,t,n,r){let o=jn(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:He(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Oe(i,[s])}function Pp(e,t,n,r){let o=jn(n),i=e.type&&e.type!=="replay_event"?e.type:"event";QT(e,n?.sdk);let s=Ei(e,o,r,t);return delete e.sdkProcessingMetadata,Oe(s,[[{type:i},e]])}function Up(e,t){function n(p){return!!p.trace_id&&!!p.public_key}let r=ke(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:He(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!Er(M(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?p=>{let m=M(p),_=a(m);return _||(gi(),m)}:M,f=[];for(let p of u){let m=l(p);m&&f.push(xu(m))}return Oe(s,f)}function Dp(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=M(e),{spanId:o}=e.spanContext(),i=xt(e),s=Z(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=M(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function Bp(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >"}=M(e),{spanId:r}=e.spanContext(),i=Z(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function Ti(e,t,n,r=K()){let o=r&&Z(r);o&&(y&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[_n]:t,[hn]:n}))}function Qs(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[hn],i=r[_n];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Fp=1e3,zn=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Ze(),this._startTime=t.startTimestamp||Q(),this._links=t.links,this._attributes={},this.setAttributes({[H]:"manual",[se]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?zs:js}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=nn(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ve,"custom"),this}end(t){this._endTime||(this._endTime=nn(t),Bp(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[se],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ys(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[H],profile_id:this._attributes[eo],exclusive_time:this._attributes[Wt],measurements:Qs(this._events),is_segment:this._isStandaloneSpan&&Z(this)===this||void 0,segment_id:this._isStandaloneSpan?Z(this).spanContext().spanId:void 0,links:qs(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){y&&h.log("[Tracing] Adding an event to span:",t);let o=Hp(n)?n:r||Q(),i=Hp(n)?{}:n||{},s={name:t,time:nn(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=T();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Z(this)))return;if(this._isStandaloneSpan){this._sampled?ey(Up([this],t)):(y&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(gr(this).scope||x()).captureEvent(r)}_convertSpanToTransaction(){if(!Gp(M(this)))return;this._name||(y&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=gr(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=Cn(this).filter(d=>d!==this&&!ZT(d)).map(d=>M(d)).filter(Gp),s=this._attributes[ve];delete this._attributes[Zr],i.forEach(d=>{delete d.data[Zr]});let a={contexts:{trace:Np(this)},spans:i.length>Fp?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Fp):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ke(this)},request:r,...s&&{transaction_info:{source:s}}},c=Qs(this._events);return c&&Object.keys(c).length&&(y&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Hp(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Gp(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function ZT(e){return e instanceof zn&&e.isStandaloneSpan()}function ey(e){let t=T();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function yr(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return ty(o,t,n,r)}function ty(e,t,n,r){return Gt(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function $p(e,t,n){if(!xe(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=wt(o);if(i===void 0)return y&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return y&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||y&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Zs="__SENTRY_SUPPRESS_TRACING__";function qe(e,t){let n=Ii();if(n.startSpan)return n.startSpan(e,t);let r=Lu(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return De(a,()=>jp(i)(()=>{let u=x(),d=Pu(u,i),f=e.onlyIfParent&&!d?new tt:Mu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ut(u,f),yr(()=>t(f),()=>{let{status:p}=M(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})},()=>{f.end()})}))}function lt(e,t){let n=Ii();if(n.startSpanManual)return n.startSpanManual(e,t);let r=Lu(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return De(a,()=>jp(i)(()=>{let u=x(),d=Pu(u,i),f=e.onlyIfParent&&!d?new tt:Mu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ut(u,f),yr(()=>t(f,()=>f.end()),()=>{let{status:p}=M(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})})}))}function Et(e){let t=Ii();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=Lu(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>De(e.scope,s):o!==void 0?s=>qn(o,s):s=>s())(()=>{let s=x(),a=Pu(s,o);return e.onlyIfParent&&!a?new tt:Mu({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var Ou=(e,t)=>{let n=st(),r=$t(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=T(),a=to(i);return s&&!Iu(s,a?.org_id)?ea(t):De(c=>{let u=fi(o,i);return c.setPropagationContext(u),ut(c,void 0),t()})};function qn(e,t){let n=Ii();return n.withActiveSpan?n.withActiveSpan(e,t):De(r=>(ut(r,e||void 0),t(r)))}function yi(e){let t=Ii();return t.suppressTracing?t.suppressTracing(e):De(n=>{n.setSDKProcessingMetadata({[Zs]:!0});let r=e();return n.setSDKProcessingMetadata({[Zs]:void 0}),r})}function ea(e){return De(t=>(t.setPropagationContext({traceId:ze(),sampleRand:St()}),y&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),qn(null,e)))}function Mu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!xe()){let s=new tt;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...ke(s)};no(s,a)}return s}let o=ie(),i;if(e&&!n)i=ny(e,r,t),Vs(e,i);else if(e){let s=ke(e),{traceId:a,spanId:c}=e.spanContext(),u=xt(e);i=Wp({traceId:a,parentSpanId:c,...t},r,u),no(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=Wp({traceId:s,parentSpanId:c,...t},r,u),a&&no(i,a)}return Dp(i),yp(i,r,o),i}function Lu(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=nn(e.startTime),delete r.startTime,r}return n}function Ii(){let e=st();return $t(e)}function Wp(e,t,n){let r=T(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Zs]?[!1]:$p(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:wt(u.dsc?.sample_rate)},u.sampleRand),p=new zn({...e,attributes:{[ve]:"custom",[Nn]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(y&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function ny(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Zs]?!1:xt(e),s=i?new zn({...n,parentSpanId:r,traceId:o,sampled:i}):new tt({traceId:o});Vs(e,s);let a=T();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function Pu(e,t){if(t)return t;if(t===null)return;let n=en(e);if(!n)return;let r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Z(n):n}function jp(e){return e!==void 0?t=>qn(e,t):t=>t()}var oo={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ry="heartbeatFailed",oy="idleTimeout",iy="finalTimeout",sy="externalFinish";function ta(e,t={}){let n=new Map,r=!1,o,i=sy,s=!t.disableAutoFinish,a=[],{idleTimeout:c=oo.idleTimeout,finalTimeout:u=oo.finalTimeout,childSpanTimeout:d=oo.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=T();if(!p||!xe()){let E=new tt,O={sample_rate:"0",sampled:"false",...ke(E)};return no(E,O),E}let m=x(),_=K(),g=ay(e);g.end=new Proxy(g.end,{apply(E,O,G){if(l&&l(g),O instanceof tt)return;let[A,...L]=G,C=A||Q(),P=nn(C),F=Cn(g).filter(N=>N!==g),re=M(g);if(!F.length||!f)return B(P),Reflect.apply(E,O,[P,...L]);let ee=p.getOptions().ignoreSpans,ae=F?.reduce((N,Y)=>{let de=M(Y);return!de.timestamp||ee&&Er(de,ee)?N:N?Math.max(N,de.timestamp):de.timestamp},void 0),R=re.start_timestamp,q=Math.min(R?R+u/1e3:1/0,Math.max(R||-1/0,Math.min(P,ae||1/0)));return B(q),Reflect.apply(E,O,[q,...L])}});function S(){o&&(clearTimeout(o),o=void 0)}function I(E){S(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=oy,g.end(E))},c)}function U(E){o=setTimeout(()=>{!r&&s&&(i=ry,g.end(E))},d)}function k(E){S(),n.set(E,!0);let O=Q();U(O+d/1e3)}function $(E){if(n.has(E)&&n.delete(E),n.size===0){let O=Q();I(O+c/1e3)}}function B(E){r=!0,n.clear(),a.forEach(F=>F()),ut(m,_);let O=M(g),{start_timestamp:G}=O;if(!G)return;O.data[$n]||g.setAttribute($n,i);let L=O.status;(!L||L==="unknown")&&g.setStatus({code:1}),h.log(`[Tracing] Idle span "${O.op}" finished`);let C=Cn(g).filter(F=>F!==g),P=0;C.forEach(F=>{F.isRecording()&&(F.setStatus({code:2,message:"cancelled"}),F.end(E),y&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(F,void 0,2)));let re=M(F),{timestamp:ee=0,start_timestamp:ae=0}=re,R=ae<=E,q=(u+c)/1e3,N=ee-ae<=q;if(y){let Y=JSON.stringify(F,void 0,2);R?N||h.log("[Tracing] Discarding span since it finished after idle span final timeout",Y):h.log("[Tracing] Discarding span since it happened after idle span was finished",Y)}(!N||!R)&&(wp(g,F),P++)}),P>0&&g.setAttribute("sentry.idle_span_discarded_spans",P)}return a.push(p.on("spanStart",E=>{if(r||E===g||M(E).timestamp||E instanceof zn&&E.isStandaloneSpan())return;Cn(g).includes(E)&&k(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||$(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===g&&(s=!0,I(),n.size&&U())})),t.disableAutoFinish||I(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=iy,g.end())},u),g}function ay(e){let t=Et(e);return ut(x(),t),y&&h.log("[Tracing] Started span is an idle span"),t}var Uu=0,zp=1,qp=2;function Yn(e){return new bi(t=>{t(e)})}function Ir(e){return new bi((t,n)=>{n(e)})}var bi=class e{constructor(t){this._state=Uu,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===Uu)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===zp&&n[1](this._value),this._state===qp&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===Uu){if(Gt(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(zp,i)},o=i=>{n(qp,i)};try{t(r,o)}catch(i){o(i)}}};function Yp(e,t,n,r=0){try{let o=Du(t,n,e,r);return Gt(o)?o:Yn(o)}catch(o){return Ir(o)}}function Du(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return y&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),Gt(i)?i.then(s=>Du(s,t,n,r+1)):Du(i,t,n,r+1)}var br,Vp,Jp,Vn;function na(e){let t=v._sentryDebugIds,n=v._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Vn&&r.length===Vp&&o.length===Jp)return Vn;Vp=r.length,Jp=o.length,Vn={},br||(br={});let i=(s,a)=>{for(let c of s){let u=a[c],d=br?.[c];if(d&&Vn&&u)Vn[d[0]]=u,br&&(br[c]=[d[0],u]);else if(u){let l=e(c);for(let f=l.length-1;f>=0;f--){let m=l[f]?.filename;if(m&&Vn&&br){Vn[m]=u,br[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),Vn}function Bu(e,t){let n=na(e);if(!n)return[];let r=[];for(let o of t){let i=ip(o);i&&n[i]&&r.push({type:"sourcemap",code_file:o,debug_id:n[i]})}return r}function Xp(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;cy(e,t),r&&dy(e,r),fy(e,n),uy(e,o),ly(e,i)}function Kp(e,t){let{extra:n,tags:r,attributes:o,user:i,contexts:s,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:m,span:_}=t;Ai(e,"extra",n),Ai(e,"tags",r),Ai(e,"attributes",o),Ai(e,"user",i),Ai(e,"contexts",s),e.sdkProcessingMetadata=Gn(e.sdkProcessingMetadata,c,2),a&&(e.level=a),m&&(e.transactionName=m),_&&(e.span=_),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function Ai(e,t,n){e[t]=Gn(e[t],n,1)}function io(e,t){let n=tn().getScopeData();return e&&Kp(n,e.getScopeData()),t&&Kp(n,t.getScopeData()),n}function cy(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function uy(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ly(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function dy(e,t){e.contexts={trace:hi(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ke(t),...e.sdkProcessingMetadata};let n=Z(t),r=M(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function fy(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function Ri(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||le(),timestamp:t.timestamp||Ct()},u=n.integrations||e.integrations.map(g=>g.name);py(c,e),_y(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&my(c,e.stackParser);let d=Sy(r,n.captureContext);n.mechanism&&Qe(c,n.mechanism);let l=o?o.getEventProcessors():[],f=io(i,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),Xp(c,f);let m=[...l,...f.eventProcessors];return Yp(m,c,n).then(g=>(g&&hy(g),typeof s=="number"&&s>0?gy(g,s,a):g))}function py(e,t){let{environment:n,release:r,dist:o,maxValueLength:i}=t;e.environment=e.environment||n||wn,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&i&&(s.url=pn(s.url,i)),i&&e.exception?.values?.forEach(a=>{a.value&&(a.value=pn(a.value,i))})}function my(e,t){let n=na(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function hy(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function _y(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function gy(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Be(o.data,t,n)}}))},...e.user&&{user:Be(e.user,t,n)},...e.contexts&&{contexts:Be(e.contexts,t,n)},...e.extra&&{extra:Be(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Be(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Be(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Be(e.contexts.flags,3,n)),r}function Sy(e,t){if(!t)return e;let n=e?e.clone():new et;return n.update(t),n}function Qp(e){if(e)return Ey(e)?{captureContext:e}:yy(e)?{captureContext:e}:e}function Ey(e){return e instanceof et||typeof e=="function"}var Ty=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function yy(e){return Object.keys(e).some(t=>Ty.includes(t))}function X(e,t){return x().captureException(e,Qp(t))}function vi(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return x().captureMessage(e,n,r)}function rn(e,t){return x().captureEvent(e,t)}function Ni(e,t){ie().setContext(e,t)}function Fu(e){ie().setExtras(e)}function Hu(e,t){ie().setExtra(e,t)}function Gu(e){ie().setTags(e)}function $u(e,t){ie().setTag(e,t)}function Wu(e){ie().setUser(e)}function Ci(){return ie().lastEventId()}async function ju(e){let t=T();return t?t.flush(e):(y&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function zu(e){let t=T();return t?t.close(e):(y&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function qu(){return!!T()}function wi(){let e=T();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function xi(e){ie().addEventProcessor(e)}function so(e){let t=ie(),n=x(),{userAgent:r}=v.navigator||{},o=pp({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&vn(i,{status:"exited"}),ki(),t.setSession(o),o}function ki(){let e=ie(),n=x().getSession()||e.getSession();n&&mp(n),Zp(),e.setSession()}function Zp(){let e=ie(),t=T(),n=e.getSession();n&&t&&t.captureSession(n)}function ao(e=!1){if(e){ki();return}Zp()}var Iy="7";function em(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function by(e){return`${em(e)}${e.projectId}/envelope/`}function Ay(e,t){let n={sentry_version:Iy};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Oi(e,t,n){return t||`${by(e)}?${Ay(e,n)}`}function Yu(e,t){let n=di(e);if(!n)return"";let r=`${em(n)}embed/error-page/`,o=`dsn=${He(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var Vu=[];function Ry(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Ju(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return Ry(r)}function tm(e,t){let n={};return t.forEach(r=>{r&&Xu(e,r,n)}),n}function Ku(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Xu(e,t,n){if(n[t.name]){y&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!Vu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),Vu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}y&&h.log(`Integration installed: ${t.name}`)}function co(e){let t=T();if(!t){y&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function vy(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function Ny(e,t){let{value:n,unit:r}=vy(e)?e:{value:e,unit:void 0},o=Cy(n),i=r&&typeof r=="string"?{unit:r}:{};if(o)return{...o,...i};if(!t||t==="skip-undefined"&&n===void 0)return;let s="";try{s=JSON.stringify(n)??""}catch{}return{value:s,type:"string",...i}}function uo(e,t=!1){let n={};for(let[r,o]of Object.entries(e??{})){let i=Ny(o,t);i&&(n[r]=i)}return n}function Cy(e){let t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function ra(e,t){return t?De(t,()=>{let n=K(),r=n?hi(n):ui(t);return[n?ke(n):Tr(e,t),r]}):[void 0,void 0]}var nm={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function wy(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function rm(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=He(r)),Oe(o,[wy(e)])}var xy=100;function Sn(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function om(e,t){let n=Qu(),r=im(e);r===void 0?n.set(e,[t]):r.length>=xy?(lo(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Jn(e,t=x(),n=om){let r=t?.getClient()??T();if(!r){y&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){y&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=ra(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=io(ie(),t);Sn(u,"user.id",d,!1),Sn(u,"user.email",l,!1),Sn(u,"user.name",f,!1),Sn(u,"sentry.release",o),Sn(u,"sentry.environment",i);let{name:m,version:_}=r.getSdkMetadata()?.sdk??{};Sn(u,"sentry.sdk.name",m),Sn(u,"sentry.sdk.version",_);let g=r.getIntegrationByName("Replay"),S=g?.getReplayId(!0);Sn(u,"sentry.replay_id",S),S&&g?.getRecordingMode()==="buffer"&&Sn(u,"sentry._internal.replay_is_buffering",!0);let I=e.message;if(Rn(I)){let{__sentry_template_string__:L,__sentry_template_values__:C=[]}=I;C?.length&&(u["sentry.message.template"]=L),C.forEach((P,F)=>{u[`sentry.message.parameter.${F}`]=P})}let U=en(t);Sn(u,"sentry.trace.parent_span_id",U?.spanContext().spanId);let k={...e,attributes:u};r.emit("beforeCaptureLog",k);let $=a?Ve(()=>a(k)):k;if(!$){r.recordDroppedEvent("before_send","log_item",1),y&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:B,message:E,attributes:O={},severityNumber:G}=$,A={timestamp:Q(),level:B,body:E,trace_id:c?.trace_id,severity_number:G??nm[B],attributes:{...uo(p),...uo(O,!0)}};n(r,A),r.emit("afterCaptureLog",$)}function lo(e,t){let n=t??im(e)??[];if(n.length===0)return;let r=e.getOptions(),o=rm(n,r._metadata,r.tunnel,e.getDsn());Qu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function im(e){return Qu().get(e)}function Qu(){return Zt("clientToLogBufferMap",()=>new WeakMap)}function ky(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function sm(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=He(r)),Oe(o,[ky(e)])}var Oy=1e3;function xn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function am(e,t){let n=el(),r=cm(e);r===void 0?n.set(e,[t]):r.length>=Oy?(fo(e,r),n.set(e,[t])):n.set(e,[...r,t])}function My(e,t,n){let{release:r,environment:o}=t.getOptions(),i={...e.attributes};xn(i,"user.id",n.id,!1),xn(i,"user.email",n.email,!1),xn(i,"user.name",n.username,!1),xn(i,"sentry.release",r),xn(i,"sentry.environment",o);let{name:s,version:a}=t.getSdkMetadata()?.sdk??{};xn(i,"sentry.sdk.name",s),xn(i,"sentry.sdk.version",a);let c=t.getIntegrationByName("Replay"),u=c?.getReplayId(!0);return xn(i,"sentry.replay_id",u),u&&c?.getRecordingMode()==="buffer"&&xn(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function Ly(e,t,n,r){let[,o]=ra(t,n),i=en(n),s=i?i.spanContext().traceId:o?.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:Q(),trace_id:s??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...uo(r),...uo(e.attributes,"skip-undefined")}}}function Zu(e,t){let n=t?.scope??x(),r=t?.captureSerializedMetric??am,o=n?.getClient()??T();if(!o){y&&h.warn("No client available to capture metric.");return}let{_experiments:i,enableMetrics:s,beforeSendMetric:a}=o.getOptions();if(!(s??i?.enableMetrics??!0)){y&&h.warn("metrics option not enabled, metric will not be captured.");return}let{user:u,attributes:d}=io(ie(),n),l=My(e,o,u);o.emit("processMetric",l);let f=a||i?.beforeSendMetric,p=f?f(l):l;if(!p){y&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let m=Ly(p,o,n,d);y&&h.log("[Metric]",m),r(o,m),o.emit("afterCaptureMetric",p)}function fo(e,t){let n=t??cm(e)??[];if(n.length===0)return;let r=e.getOptions(),o=sm(n,r._metadata,r.tunnel,e.getDsn());el().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function cm(e){return el().get(e)}function el(){return Zt("clientToMetricBufferMap",()=>new WeakMap)}var po=Symbol.for("SentryBufferFullError");function Ar(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return Ir(po);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return Yn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}var um=60*1e3;function oa(e,t=hr()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?um:r-t}function lm(e,t){return e[t]||e.all||0}function Mi(e,t,n=hr()){return lm(e,t)>n}function Li(e,{statusCode:t,headers:n},r=hr()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(let p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else s?o.all=r+oa(s,r):t===429&&(o.all=r+60*1e3);return o}var tl=64;function Pi(e,t,n=Ar(e.bufferSize||tl)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(kt(s,(l,f)=>{let p=Xs(f);Mi(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});let c=Oe(s[0],a),u=l=>{if(ro(c,["client_report"])){y&&h.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}kt(c,(f,p)=>{e.recordDroppedEvent(l,Xs(p))})},d=()=>t({body:Wn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&y&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Li(r,l),l),l=>{throw u("network_error"),y&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===po)return y&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}function dm(e,t,n){let r=[{type:"client_report"},{timestamp:n||Ct(),discarded_events:e}];return Oe(t?{dsn:t}:{},[r])}function ia(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function fm(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[eo],exclusive_time:s?.[Wt],measurements:e.measurements,is_segment:!0}}function pm(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[eo]:e.profile_id},...e.exclusive_time&&{[Wt]:e.exclusive_time}}}},measurements:e.measurements}}var mm="Not capturing exception because it's already been captured.",hm="Discarded session because of missing or non-string release",ym=Symbol.for("SentryInternalError"),Im=Symbol.for("SentryDoNotSendEventError"),Py=5e3;function sa(e){return{message:e,[ym]:!0}}function nl(e){return{message:e,[Im]:!0}}function _m(e){return!!e&&typeof e=="object"&&ym in e}function gm(e){return!!e&&typeof e=="object"&&Im in e}function Sm(e,t,n,r,o){let i=0,s,a=!1;e.on(n,()=>{i=0,clearTimeout(s),a=!1}),e.on(t,c=>{i+=r(c),i>=8e5?o(e):a||(a=!0,s=setTimeout(()=>{o(e)},Py))}),e.on("flush",()=>{o(e)})}var Ui=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Ar(t.transportOptions?.bufferSize??tl),t.dsn?this._dsn=di(t.dsn):y&&h.warn("No DSN provided, client will not send events."),this._dsn){let r=Oi(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Sm(this,"afterCaptureLog","flushLogs",Fy,lo),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Sm(this,"afterCaptureMetric","flushMetrics",By,fo)}captureException(t,n,r){let o=le();if(Ps(t))return y&&h.log(mm),o;let i={event_id:o,...n};return this._process(()=>this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r)).then(s=>s),"error"),i.event_id}captureMessage(t,n,r,o){let i={event_id:le(),...r},s=Rn(t)?t:String(t),a=at(t),c=a?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(()=>c.then(u=>this._captureEvent(u,i,o)),a?"unknown":"error"),i.event_id}captureEvent(t,n,r){let o=le();if(n?.originalException&&Ps(n.originalException))return y&&h.log(mm),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope,u=Em(t.type);return this._process(()=>this._captureEvent(t,i,a||r,c),u),i.event_id}captureSession(t){this.sendSession(t),vn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];Xu(this,t,this._integrations),n||Ku(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Pp(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=Cu(r,ku(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=wn}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){y&&h.warn(hm);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){y&&h.warn(hm);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=Lp(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;y&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return y&&h.error("Error while sending envelope:",n),{}}return y&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=tm(this,t),Ku(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0,r=!1;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(vn(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Ri(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:ui(r),...a.contexts};let c=Tr(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=x(),o=ie()){return y&&rl(t)&&h.log(`Captured error event \`${ia(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{y&&(gm(i)?h.log(i.message):_m(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=bm(t),c=rl(t),d=`before send for type \`${t.type||"error"}\``,l=typeof s>"u"?void 0:wt(s);if(c&&typeof l=="number"&&St()>l)return this.recordDroppedEvent("sample_rate","error"),Ir(nl(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let f=Em(t.type);return this._prepareEvent(t,n,r,o).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),nl("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;let _=Dy(this,i,p,n);return Uy(_,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){let S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw nl(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,p),a){let g=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=p.spans?p.spans.length:0,I=g-S;I>0&&this.recordDroppedEvent("before_send","span",I)}let _=p.transaction_info;if(a&&_&&p.transaction!==t.transaction){let g="custom";p.transaction_info={..._,source:g}}return this.sendEvent(p,n),p}).then(null,p=>{throw gm(p)||_m(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),sa(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===po&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){y&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){y&&h.log("No outcomes to send");return}if(!this._dsn){y&&h.log("No dsn provided, will not send outcomes");return}y&&h.log("Sending outcomes:",t);let n=dm(t,this._options.tunnel&&He(this._dsn));this.sendEnvelope(n)}};function Em(e){return e==="replay_event"?"replay":e||"error"}function Uy(e,t){let n=`${t} must return \`null\` or a valid event.`;if(Gt(e))return e.then(r=>{if(!we(r)&&r!==null)throw sa(n);return r},r=>{throw sa(`${t} rejected with ${r}`)});if(!we(e)&&e!==null)throw sa(n);return e}function Dy(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(rl(c)&&o)return o(c,r);if(bm(c)){if(s||a){let u=fm(c);if(a?.length&&Er(u,a))return null;if(s){let d=s(u);d?c=Gn(n,pm(d)):gi()}if(c.spans){let d=[],l=c.spans;for(let p of l){if(a?.length&&Er(p,a)){Op(l,p);continue}if(s){let m=s(p);m?d.push(m):(gi(),d.push(p))}else d.push(p)}let f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function rl(e){return e.type===void 0}function bm(e){return e.type==="transaction"}function By(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+Am(e.attributes)}function Fy(e){let t=0;return e.message&&(t+=e.message.length*2),t+Am(e.attributes)}function Am(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Tm(n[0]):at(n)?t+=Tm(n):t+=100}),t}function Tm(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Hy(e){return Xe(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function aa(e){return Hy(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function ol(e,t){t.debug===!0&&(y?h.enable():Ve(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),x().update(t.initialScope);let r=new e(t);return ca(r),r.init(),r}function ca(e){x().setClient(e)}var il=100,sl=5e3,Gy=36e5;function al(e){function t(...n){y&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=sl,s;function a(l,f,p){return ro(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let f=await o.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,Gy))}async function d(l,f=!1){if(!f&&ro(l,["replay_event","replay_recording"]))return await o.push(l),c(il),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let p=await r.send(l),m=il;if(p){if(p.headers?.["retry-after"])m=oa(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])m=6e4;else if((p.statusCode||0)>=400)return p}return c(m),i=sl,p}catch(p){if(await a(l,p,i))return f?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=sl,c(il)),r.flush(l))}}}var mo="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function Rm(e,t){let n;return kt(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function $y(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=Rm(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function Wy(e,t){return Oe(t?{...e[0],dsn:t}:e[0],e[1])}function cl(e,t){return n=>{let r=e(n),o=new Map,i=t||(u=>{let d=u.getEvent();return d?.extra?.[mo]&&Array.isArray(d.extra[mo])?d.extra[mo]:[]});function s(u,d){let l=d?`${u}:${d}`:u,f=o.get(l);if(!f){let p=Hs(u);if(!p)return;let m=Oi(p,n.tunnel);f=d?$y(e,d)({...n,url:m}):e({...n,url:m}),o.set(l,f)}return[u,f]}async function a(u){function d(m){let _=m?.length?m:["event"];return Rm(u,_)}let l=i({envelope:u,getEvent:d}).map(m=>typeof m=="string"?s(m,void 0):s(m.dsn,m.release)).filter(m=>!!m),f=l.length?l:[["",r]];return(await Promise.all(f.map(([m,_])=>_.send(Wy(u,m)))))[0]}async function c(u){let d=[...o.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}var jy="thismessage:/";function ho(e){return"isRelative"in e}function Rr(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?jy:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function ul(e){if(ho(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function on(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Di(e){return e.split(/[?#]/,1)[0]}function jt(e,t=!0){if(e.startsWith("data:")){let n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",o=e.includes(";base64,"),i=e.indexOf(","),s="";if(t&&i!==-1){let a=e.slice(i+1);s=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${o?",base64":""}${s?`,${s}`:""}`}return e}function Bi(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return qy(e,n)||zy(e,r)}function zy(e,t){return t?vm(e)===vm(t):!1}function qy(e,t){let n=Rr(e);return!n||ho(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function vm(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function ua(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var ll=ua;function dl(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function fl(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:_t})),version:_t}),e._metadata=o}function vr(e={}){let t=e.client||T();if(!wi()||!t)return{};let n=st(),r=$t(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||x(),i=e.span||K(),s=i?_i(i):Yy(o),a=i?ke(i):Tr(t,o),c=Fs(a);if(!$s.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};return e.propagateTraceparent&&(d.traceparent=i?Cp(i):Vy(o)),d}function Yy(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return pi(t,r,n)}function Vy(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return mi(t,r,n)}function pl(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var Jy=100;function dt(e,t){let n=T(),r=ie();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Jy}=n.getOptions();if(i<=0)return;let a={timestamp:Ct(),...e},c=o?Ve(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var Nm,Ky="FunctionToString",Cm=new WeakMap,Xy=(()=>({name:Ky,setupOnce(){Nm=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=pr(this),n=Cm.has(T())&&t!==void 0?t:this;return Nm.apply(n,e)}}catch{}},setup(e){Cm.set(e,!0)}})),Fi=Xy;var Qy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Zy="EventFilters",da=(e={})=>{let t;return{name:Zy,setup(n){let r=n.getOptions();t=wm(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=wm(e,i)}return eI(n,t)?null:n}}},Hi=((e={})=>({...da(e),name:"InboundFilters"}));function wm(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Qy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function eI(e,t){if(e.type){if(e.type==="transaction"&&nI(e,t.ignoreTransactions))return y&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${mn(e)}`),!0}else{if(tI(e,t.ignoreErrors))return y&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${mn(e)}`),!0;if(sI(e))return y&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${mn(e)}`),!0;if(rI(e,t.denyUrls))return y&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${mn(e)}.
Url: ${la(e)}`),!0;if(!oI(e,t.allowUrls))return y&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${mn(e)}.
Url: ${la(e)}`),!0}return!1}function tI(e,t){return t?.length?ia(e).some(n=>je(n,t)):!1}function nI(e,t){if(!t?.length)return!1;let n=e.transaction;return n?je(n,t):!1}function rI(e,t){if(!t?.length)return!1;let n=la(e);return n?je(n,t):!1}function oI(e,t){if(!t?.length)return!0;let n=la(e);return n?je(n,t):!0}function iI(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function la(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?iI(n):null}catch{return y&&h.error(`Cannot extract url for event ${mn(e)}`),null}}function sI(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function hl(e,t,n,r,o,i){if(!o.exception?.values||!i||!Nt(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=ml(e,t,r,i.originalException,n,o.exception.values,s,0))}function ml(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Nt(r[o],Error)){xm(s,a,r);let u=e(t,r[o]),d=c.length;km(u,o,d,a),c=ml(e,t,n,r[o],o,[u,...c],u,d)}return Om(r)&&r.errors.forEach((u,d)=>{if(Nt(u,Error)){xm(s,a,r);let l=e(t,u),f=c.length;km(l,`errors[${d}]`,f,a),c=ml(e,t,n,u,o,[l,...c],l,f)}}),c}function Om(e){return Array.isArray(e.errors)}function xm(e,t,n){e.mechanism={handled:!0,type:"auto.core.linked_errors",...Om(n)&&{is_exception_group:!0},...e.mechanism,exception_id:t}}function km(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var Lm=new Map,Mm=new Set;function aI(e){if(v._sentryModuleMetadata)for(let t of Object.keys(v._sentryModuleMetadata)){let n=v._sentryModuleMetadata[t];if(Mm.has(t))continue;Mm.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){Lm.set(o.filename,n);break}}}function cI(e,t){return aI(e),Lm.get(t)}function fa(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=cI(e,r.filename);o&&(r.module_metadata=o)})})}function pa(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var _l=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{kt(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(pa(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;fa(n,t)})}});function Nr(e){let t="console";Je(t,e),Ke(t,uI)}function uI(){"console"in v&&dr.forEach(function(e){e in v.console&&ge(v.console,e,function(t){return qr[e]=t,function(...n){Me("console",{args:n,level:e}),qr[e]?.apply(v.console,n)}})})}function Kn(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var lI="CaptureConsole",dI=((e={})=>{let t=e.levels||dr,n=e.handled??!0;return{name:lI,setup(r){"console"in v&&Nr(({args:o,level:i})=>{T()!==r||!t.includes(i)||fI(o,i,n)})}}}),gl=dI;function fI(e,t,n){let r=Kn(t),o=new Error,i={level:Kn(t),extra:{arguments:e}};De(s=>{if(s.addEventProcessor(u=>(u.logger="console",Qe(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){let u=`Assertion failed: ${_r(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),s.captureMessage(u,r,{captureContext:i,syntheticException:o})}return}let a=e.find(u=>u instanceof Error);if(a){X(a,i);return}let c=_r(e," ");s.captureMessage(c,r,{captureContext:i,syntheticException:o})})}var pI="Dedupe",mI=(()=>{let e;return{name:pI,processEvent(t){if(t.type)return t;try{if(hI(t,e))return y&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),Gi=mI;function hI(e,t){return t?!!(_I(e,t)||gI(e,t)):!1}function _I(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Dm(e,t)||!Um(e,t))}function gI(e,t){let n=Pm(t),r=Pm(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Dm(e,t)||!Um(e,t))}function Um(e,t){let n=Yr(e),r=Yr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function Dm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Pm(e){return e.exception?.values?.[0]}var SI="ExtraErrorData",EI=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:SI,processEvent(r,o,i){let{maxValueLength:s}=i.getOptions();return TI(r,o,t,n,s)}}}),Sl=EI;function TI(e,t={},n,r,o){if(!t.originalException||!Xe(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=Bm(t.originalException,r,o);if(s){let a={...e.contexts},c=Be(s,n);return we(c)&&(Se(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function Bm(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=Xe(s)||typeof s=="string"?n?pn(`${s}`,n):`${s}`:s}if(t&&e.cause!==void 0)if(Xe(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:Bm(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=Xe(a)?a.toString():a}}return o}catch(r){y&&h.error("Unable to extract extra data from the Error object:",r)}return null}function yI(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var II=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function bI(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=II.exec(t);return n?n.slice(1):[]}function Fm(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=yI(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Hm(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Gm(e,t){e=Fm(e).slice(1),t=Fm(t).slice(1);let n=Hm(e.split("/")),r=Hm(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function $m(e,t){let n=bI(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var AI="RewriteFrames",El=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in v&&!!v.window,o=e.iteratee||RI({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:AI,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function RI({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Gm(t,s):$m(s);r.filename=`${n}${a}`}return r}}var vI=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],NI=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],CI={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},jm=["select","insert","upsert","update","delete"];function ma(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function ha(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function wI(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function xI(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&CI[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Wm(e,t=!1){return new Proxy(e,{apply(n,r,o){return qe({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[H]:"auto.db.supabase",[se]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),X(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),X(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function kI(e){let t=e.auth;if(!(!t||ha(e.auth))){for(let n of vI){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Wm(r))}for(let n of NI){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Wm(r,!0))}ma(e.auth)}}function OI(e){ha(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return LI(i),o}}),ma(e.prototype.from))}function MI(e){ha(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=jm,i=n,s=wI(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[p,m]of i.url.searchParams.entries())u.push(xI(p,m));let d=Object.create(null);if(we(i.body))for(let[p,m]of Object.entries(i.body))d[p]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[H]:"auto.db.supabase",[se]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),qe({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(m=>{if(p&&(m&&typeof m=="object"&&"status"in m&&gn(p,m.status||500),p.end()),m.error){let S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);let I={};u.length&&(I.query=u),Object.keys(d).length&&(I.body=d),X(S,U=>(U.addEventProcessor(k=>(Qe(k,{handled:!1,type:"auto.db.supabase.postgres"}),k)),U.setContext("supabase",I),U))}let _={type:"supabase",category:`db.${s}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(_.data=g),dt(_),m},m=>{throw p&&(gn(p,500),p.end()),m}).then(...r))}}),ma(e.prototype.then))}function LI(e){for(let t of jm)ha(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return y&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),MI(s),i}}),ma(e.prototype[t]))}var _a=e=>{if(!e){y&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;OI(t),kI(e)},PI="Supabase",UI=(e=>({setupOnce(){_a(e)},name:PI})),Tl=e=>UI(e.supabaseClient);var DI=10,BI="ZodErrors";function FI(e){return Xe(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function HI(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function GI(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function $I(e){let t=new Set;for(let r of e.issues){let o=GI(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${pn(n.join(", "),100)}`}function WI(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!FI(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(HI);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:$I(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var jI=((e={})=>{let t=e.limit??DI;return{name:BI,processEvent(n,r){return WI(t,e.saveZodIssuesAsAttachment,n,r)}}}),yl=jI;var Il=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{kt(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(pa(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;fa(r,n)})},processEvent(t){let n=qI(t,e.ignoreSentryInternalFrames);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function zI(e,t){if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes(VI))return!1;if(e.pre_context){let n=e.pre_context.length;for(let r=0;r<n;r++)if(e.pre_context[r]?.includes(YI))return!0}return!1}function qI(e,t){let n=Yr(e);if(n)return n.filter((r,o)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!zI(r,o)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(o=>o.startsWith(zm)).map(o=>o.slice(zm.length)):[])}var zm="_sentryBundlerPluginAppKey:",YI="Attempt to invoke user-land function",VI="fn.apply(this, wrappedArguments)";var qm=100,Ym=10,ga="flag.evaluation.";function Ot(e){let n=x().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function Tt(e,t,n=qm){let r=x().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;JI(o,e,t,n)}function JI(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){y&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function yt(e,t,n=Ym){if(typeof t!="boolean")return;let r=K();if(!r)return;let o=M(r).data;if(`${ga}${e}`in o){r.setAttribute(`${ga}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith(ga)).length<n&&r.setAttribute(`${ga}${e}`,t)}var bl=()=>({name:"FeatureFlags",processEvent(e,t,n){return Ot(e)},addFeatureFlag(e,t){Tt(e,t),yt(e,t)}});var Al=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&ge(t,"isOn",Vm),typeof t.getFeatureValue=="function"&&ge(t,"getFeatureValue",Vm)},processEvent(t,n,r){return Ot(t)}});function Vm(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(Tt(n,r),yt(n,r)),r}}var KI="ConversationId",XI=(()=>({name:KI,setup(e){e.on("spanStart",t=>{let n=x().getScopeData(),r=ie().getScopeData(),o=n.conversationId||r.conversationId;o&&t.setAttribute(yu,o)})}})),Rl=XI;function vl(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=xe()&&t(s);if(e.endTimestamp&&a){let p=e.fetchData.__span;if(!p)return;let m=r[p];m&&(eb(m,e),QI(m,e,o),delete r[p]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!K(),l=a&&d?Et(nb(s,i,c)):new tt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let p=e.args[0],m={...e.args[1]||{}},_=ZI(p,m,xe()&&d?l:void 0,u);_&&(e.args[1]=m,m.headers=_)}let f=T();if(f){let p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function QI(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function ZI(e,t,n,r){let o=vr({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(si(e)?e.headers:void 0);if(c)if(tb(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?Sa(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&Sa(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(_=>Sa(_)):Sa(l));s&&!p&&f.push(s);let m={...c,"sentry-trace":u??i,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function eb(e,t){if(t.response){gn(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function Sa(e){return e.split(",").some(t=>t.trim().startsWith(Bs))}function tb(e){return typeof Headers<"u"&&Nt(e,Headers)}function nb(e,t,n){if(e.startsWith("data:")){let i=jt(e);return{name:`${t} ${i}`,attributes:Jm(e,void 0,t,n)}}let r=Rr(e),o=r?ul(r):e;return{name:`${t} ${o}`,attributes:Jm(e,r,t,n)}}function Jm(e,t,n,r){let o={url:jt(e),type:"fetch","http.method":n,[H]:r,[se]:"http.client"};return t&&(ho(t)||(o["http.url"]=jt(t.href),o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function $i(e,t={},n=x()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||T();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var Ea={};eu(Ea,{debug:()=>ob,error:()=>ab,fatal:()=>cb,fmt:()=>ll,info:()=>ib,trace:()=>rb,warn:()=>sb});function _o(e,t,n,r,o){Jn({level:e,message:t,attributes:n,severityNumber:o},r)}function rb(e,t,{scope:n}={}){_o("trace",e,t,n)}function ob(e,t,{scope:n}={}){_o("debug",e,t,n)}function ib(e,t,{scope:n}={}){_o("info",e,t,n)}function sb(e,t,{scope:n}={}){_o("warn",e,t,n)}function ab(e,t,{scope:n}={}){_o("error",e,t,n)}function cb(e,t,{scope:n}={}){_o("fatal",e,t,n)}function Wi(e,t,n){return"util"in v&&typeof v.util.format=="function"?v.util.format(...e):ub(e,t,n)}function ub(e,t,n){return e.map(r=>at(r)?String(r):JSON.stringify(Be(r,t,n))).join(" ")}function Km(e){return/%[sdifocO]/.test(e)}function Xm(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var lb="ConsoleLogs",Qm={[H]:"auto.log.console"},db=((e={})=>{let t=e.levels||dr;return{name:lb,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){y&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Nr(({args:s,level:a})=>{if(T()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let p=u.length>0?`Assertion failed: ${Wi(u,o,i)}`:"Assertion failed";Jn({level:"error",message:p,attributes:Qm})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!Km(s[0]),f={...Qm,...l?Xm(c,u):{}};Jn({level:d?"info":a,message:Wi(s,o,i),severityNumber:d?10:void 0,attributes:f})})}}}),Nl=db;var Ta={};eu(Ta,{count:()=>fb,distribution:()=>mb,gauge:()=>pb});function Cl(e,t,n,r){Zu({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function fb(e,t=1,n){Cl("counter",e,t,n)}function pb(e,t,n){Cl("gauge",e,t,n)}function mb(e,t,n){Cl("distribution",e,t,n)}var hb=["trace","debug","info","warn","error","fatal"];function wl(e={}){let t=new Set(e.levels??hb),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||T();if(!l)return;let f=Sb(o,i);if(!t.has(f))return;let{normalizeDepth:p=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),_=[];s&&_.push(s),a&&a.length>0&&_.push(Wi(a,p,m));let g=_.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),Jn({level:f,message:g,attributes:d})}}}var _b={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},gb={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function Sb(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=_b[e];if(n)return n}if(typeof t=="number"){let n=gb[t];if(n)return n}return"info"}var Zm="gen_ai.prompt",Xn="gen_ai.system",Le="gen_ai.request.model",go="gen_ai.request.stream",Qn="gen_ai.request.temperature",So="gen_ai.request.max_tokens",Zn="gen_ai.request.frequency_penalty",Eo="gen_ai.request.presence_penalty",er="gen_ai.request.top_p",ya="gen_ai.request.top_k",eh="gen_ai.request.encoding_format",th="gen_ai.request.dimensions",It="gen_ai.response.finish_reasons",nt="gen_ai.response.model",zt="gen_ai.response.id",nh="gen_ai.response.stop_reason",Mt="gen_ai.usage.input_tokens",Lt="gen_ai.usage.output_tokens",Pt="gen_ai.usage.total_tokens",bt="gen_ai.operation.name",qt="sentry.sdk_meta.gen_ai.input.messages.original_length",sn="gen_ai.input.messages",En="gen_ai.system_instructions",Pe="gen_ai.response.text",tr="gen_ai.request.available_tools",Cr="gen_ai.response.streaming",Ge="gen_ai.response.tool_calls",xl="gen_ai.agent.name",rh="gen_ai.pipeline.name",ji="gen_ai.conversation.id",oh="gen_ai.usage.cache_creation_input_tokens",ih="gen_ai.usage.cache_read_input_tokens";var sh="gen_ai.invoke_agent";var ah="gen_ai.embeddings.input";var ch="gen_ai.tool.name";var uh="gen_ai.tool.input",lh="gen_ai.tool.output",kl="openai.response.id",Ol="openai.response.model",Ml="openai.response.timestamp",dh="openai.usage.completion_tokens",fh="openai.usage.prompt_tokens",wr={CHAT:"chat",EMBEDDINGS:"embeddings"},Ll="anthropic.response.timestamp";var ba=e=>new TextEncoder().encode(e).length,Ul=e=>ba(JSON.stringify(e));function Aa(e,t){if(ba(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){let i=Math.floor((n+r)/2),s=e.slice(0,i);ba(s)<=t?(o=s,n=i+1):r=i-1}return o}function Eb(e){return typeof e=="string"?e:"text"in e?e.text:""}function ph(e,t){return typeof e=="string"?t:{...e,text:t}}function Tb(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function yb(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function zi(e){return!e||typeof e!="object"?!1:Ib(e)||hh(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function Ib(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&zi(e.source)}function hh(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function _h(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function bb(e,t){let n={...e,content:""},r=Ul(n),o=t-r;if(o<=0)return[];let i=Aa(e.content,o);return[{...e,content:i}]}function Ab(e,t){let{parts:n}=e,r=n.map(a=>ph(a,"")),o=Ul({...e,parts:r}),i=t-o;if(i<=0)return[];let s=[];for(let a of n){let c=Eb(a),u=ba(c);if(u<=i)s.push(a),i-=u;else if(s.length===0){let d=Aa(c,i);d&&s.push(ph(a,d));break}else break}return s.length<=0?[]:[{...e,parts:s}]}function Rb(e,t){if(!e)return[];if(typeof e=="string"){let n=Aa(e,t);return n?[n]:[]}return typeof e!="object"?[]:Tb(e)?bb(e,t):_h(e)?Ab(e,t):[]}var mh="[Filtered]",vb=["image_url","data","content","b64_json","result","uri"];function Ia(e){let t={...e};zi(t.source)&&(t.source=Ia(t.source)),hh(e)&&(t.inlineData={...e.inlineData,data:mh});for(let n of vb)typeof t[n]=="string"&&(t[n]=mh);return t}function Pl(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(yb(n)?r={...n,content:Pl(n.content)}:"content"in n&&zi(n.content)&&(r={...n,content:Ia(n.content)}),_h(n)&&(r={...r??n,parts:Pl(n.parts)}),zi(r)?r=Ia(r):zi(n)&&(r=Ia(n))),r??n})}function Nb(e,t){if(!Array.isArray(e)||e.length===0)return e;let n=e[e.length-1],r=Pl([n]),o=r[0];return Ul(o)<=t?r:Rb(o,t)}function nr(e){return Nb(e,2e4)}function gh(e){return Aa(e,2e4)}function xr(e){return e.includes("messages")?"chat":e.includes("completions")?"text_completion":e.includes("generateContent")?"generate_content":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function To(e){return`gen_ai.${xr(e)}`}function Ra(e,t){return e?`${e}.${t}`:t}function qi(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Mt]:t}),n!==void 0&&e.setAttributes({[Lt]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[Pt]:i})}}function va(e){if(typeof e=="string")return gh(e);if(Array.isArray(e)){let t=nr(e);return JSON.stringify(t)}return JSON.stringify(e)}function Tn(e){if(!Array.isArray(e))return{systemInstructions:void 0,filteredMessages:e};let t=e.findIndex(s=>s&&typeof s=="object"&&"role"in s&&s.role==="system");if(t===-1)return{systemInstructions:void 0,filteredMessages:e};let n=e[t],r=typeof n.content=="string"?n.content:n.content!==void 0?JSON.stringify(n.content):void 0;if(!r)return{systemInstructions:void 0,filteredMessages:e};let o=JSON.stringify([{type:"text",content:r}]),i=[...e.slice(0,t),...e.slice(t+1)];return{systemInstructions:o,filteredMessages:i}}var Sh=["responses.create","chat.completions.create","embeddings.create","conversations.create"],Cb=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],Eh=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...Cb];function Na(e){return e.includes("chat.completions")?wr.CHAT:e.includes("responses")?wr.CHAT:e.includes("embeddings")?wr.EMBEDDINGS:e.includes("conversations")?wr.CHAT:e.split(".").pop()||"unknown"}function Dl(e){return`gen_ai.${Na(e)}`}function Th(e){return Sh.includes(e)}function yh(e,t){return e?`${e}.${t}`:t}function Ih(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function bh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function Ah(e){if(e===null||typeof e!="object"||!("object"in e))return!1;let t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function Rh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function vh(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function Nh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function Ch(e,t,n){if(Ca(e,t.id,t.model,t.created),t.usage&&Yi(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[It]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[Ge]:JSON.stringify(o)})}}}function wh(e,t,n){if(Ca(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[It]:JSON.stringify([t.status])}),t.usage&&Yi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[Ge]:JSON.stringify(o)})}}}function xh(e,t){e.setAttributes({[Ol]:t.model,[nt]:t.model}),t.usage&&Yi(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function kh(e,t){let{id:n,created_at:r}=t;e.setAttributes({[kl]:n,[zt]:n,[ji]:n}),r&&e.setAttributes({[Ml]:new Date(r*1e3).toISOString()})}function Yi(e,t,n,r){t!==void 0&&e.setAttributes({[fh]:t,[Mt]:t}),n!==void 0&&e.setAttributes({[dh]:n,[Lt]:n}),r!==void 0&&e.setAttributes({[Pt]:r})}function Ca(e,t,n,r){e.setAttributes({[kl]:t,[zt]:t}),e.setAttributes({[Ol]:n,[nt]:n}),e.setAttributes({[Ml]:new Date(r*1e3).toISOString()})}function wb(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function Oh(e){let t={[Le]:e.model??"unknown"};"temperature"in e&&(t[Qn]=e.temperature),"top_p"in e&&(t[er]=e.top_p),"frequency_penalty"in e&&(t[Zn]=e.frequency_penalty),"presence_penalty"in e&&(t[Eo]=e.presence_penalty),"stream"in e&&(t[go]=e.stream),"encoding_format"in e&&(t[eh]=e.encoding_format),"dimensions"in e&&(t[th]=e.dimensions);let n=wb(e);return n&&(t[ji]=n),t}function xb(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function kb(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&xb(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function Ob(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),X(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!Eh.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*Mh(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)Nh(o)?kb(o,r,n):vh(o)&&Ob(o,r,n,t),yield o}finally{Ca(t,r.responseId,r.responseModel,r.responseTimestamp),Yi(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Cr]:!0}),r.finishReasons.length&&t.setAttributes({[It]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Pe]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[Ge]:JSON.stringify(i)}),t.end()}}function Mb(e){let t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],o=[...t,...r];return o.length>0?JSON.stringify(o):void 0}function Lb(e,t){let n={[Xn]:"openai",[bt]:Na(t),[H]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Mb(r);o&&(n[tr]=o),Object.assign(n,Oh(r))}else n[Le]="unknown";return n}function Pb(e,t,n){if(!t||typeof t!="object")return;let r=t;if(Ih(r)){if(Ch(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Pe]:JSON.stringify(o)})}}else bh(r)?(wh(e,r,n),n&&r.output_text&&e.setAttributes({[Pe]:r.output_text})):Ah(r)?xh(e,r):Rh(r)&&kh(e,r)}function Lh(e,t,n){if(n===wr.EMBEDDINGS&&"input"in t){let a=t.input;if(a==null||typeof a=="string"&&a.length===0||Array.isArray(a)&&a.length===0)return;e.setAttribute(ah,typeof a=="string"?a:JSON.stringify(a));return}let r="input"in t?t.input:"messages"in t?t.messages:void 0;if(!r||Array.isArray(r)&&r.length===0)return;let{systemInstructions:o,filteredMessages:i}=Tn(r);o&&e.setAttribute(En,o);let s=va(i);e.setAttribute(sn,s),Array.isArray(i)?e.setAttribute(qt,i.length):e.setAttribute(qt,1)}function Ub(e,t,n,r){return async function(...i){let s=Lb(i,t),a=s[Le]||"unknown",c=Na(t),u=i[0];return u&&typeof u=="object"&&u.stream===!0?lt({name:`${c} ${a} stream-response`,op:Dl(t),attributes:s},async l=>{try{r.recordInputs&&u&&Lh(l,u,c);let f=await e.apply(n,i);return Mh(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:2,message:"internal_error"}),X(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):qe({name:`${c} ${a}`,op:Dl(t),attributes:s},async l=>{try{r.recordInputs&&u&&Lh(l,u,c);let f=await e.apply(n,i);return Pb(l,f,r.recordOutputs),f}catch(f){throw X(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function Ph(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=yh(t,String(o));return typeof i=="function"&&Th(s)?Ub(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Ph(i,s,n):i}})}function Bl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Ph(e,"",r)}function Db(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"internal_error"}),X(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function Bb(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function Fb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function Hb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function Gb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function Uh(e,t,n,r){!(e&&typeof e=="object")||Db(e,r)||(Bb(e,t),Fb(e,t),Hb(e,t,n),Gb(e,t))}function $b(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[zt]:e.responseId}),e.responseModel&&t.setAttributes({[nt]:e.responseModel}),qi(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Cr]:!0}),e.finishReasons.length>0&&t.setAttributes({[It]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Pe]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[Ge]:JSON.stringify(e.toolCalls)}),t.end())}async function*Dh(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)Uh(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[zt]:r.responseId}),r.responseModel&&t.setAttributes({[nt]:r.responseModel}),qi(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Cr]:!0}),r.finishReasons.length>0&&t.setAttributes({[It]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Pe]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[Ge]:JSON.stringify(r.toolCalls)}),t.end()}}function Bh(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{Uh(o,r,n,t)}),e.on("message",()=>{$b(r,t,n)}),e.on("error",o=>{X(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var Fh=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Hh(e){return Fh.includes(e)}function Gh(e,t){if(Array.isArray(t)&&t.length===0)return;let{systemInstructions:n,filteredMessages:r}=Tn(t);n&&e.setAttributes({[En]:n});let o=Array.isArray(r)?r.length:1;e.setAttributes({[sn]:va(r),[qt]:o})}function $h(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),X(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function Wh(e){let{system:t,messages:n,input:r}=e,o=typeof t=="string"?[{role:"system",content:e.system}]:[],i=Array.isArray(r)?r:r!=null?[r]:void 0,s=Array.isArray(n)?n:n!=null?[n]:[],a=i??s;return[...o,...a]}function Wb(e,t){let n={[Xn]:"anthropic",[bt]:xr(t),[H]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[tr]=JSON.stringify(r.tools)),n[Le]=r.model??"unknown","temperature"in r&&(n[Qn]=r.temperature),"top_p"in r&&(n[er]=r.top_p),"stream"in r&&(n[go]=r.stream),"top_k"in r&&(n[ya]=r.top_k),"frequency_penalty"in r&&(n[Zn]=r.frequency_penalty),"max_tokens"in r&&(n[So]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[Le]=e[0]:n[Le]="unknown";return n}function Fl(e,t){let n=Wh(t);Gh(e,n),"prompt"in t&&e.setAttributes({[Zm]:JSON.stringify(t.prompt)})}function jb(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Pe]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[Ge]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Pe]:t.completion}),"input_tokens"in t&&e.setAttributes({[Pe]:JSON.stringify(t.input_tokens)})}function zb(e,t){"id"in t&&"model"in t&&(e.setAttributes({[zt]:t.id,[nt]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Ll]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Ll]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&qi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function qb(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){$h(e,t);return}n&&jb(e,t),zb(e,t)}}function jh(e,t,n){throw X(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function Yb(e,t,n,r,o,i,s,a,c,u,d){let l=o[Le]??"unknown",f={name:`${i} ${l} stream-response`,op:To(s),attributes:o};return u&&!d?lt(f,async p=>{try{c.recordInputs&&a&&Fl(p,a);let m=await e.apply(n,r);return Dh(m,p,c.recordOutputs??!1)}catch(m){return jh(m,p,s)}}):lt(f,p=>{try{c.recordInputs&&a&&Fl(p,a);let m=t.apply(n,r);return Bh(m,p,c.recordOutputs??!1)}catch(m){return jh(m,p,s)}})}function Vb(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=Wb(s,t),c=a[Le]??"unknown",u=xr(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?Yb(e,o,n,s,a,u,t,d,r,l,f):qe({name:`${u} ${c}`,op:To(t),attributes:a},p=>(r.recordInputs&&d&&Fl(p,d),yr(()=>o.apply(n,s),m=>{X(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>qb(p,m,r.recordOutputs))))}})}function zh(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=Ra(t,String(o));return typeof i=="function"&&Hh(s)?Vb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?zh(i,s,n):i}})}function Hl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return zh(e,"",r)}var Gl=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],qh="google_genai",$l="chats.create",Yh="chat";function Jb(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),X(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function Kb(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function Xb(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Qb(e,t,n,r){!e||Jb(e,r)||(Kb(e,t),Xb(e,t,n))}async function*Vh(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)Qb(o,r,n,t),yield o}finally{let o={[Cr]:!0};r.responseId&&(o[zt]=r.responseId),r.responseModel&&(o[nt]=r.responseModel),r.promptTokens!==void 0&&(o[Mt]=r.promptTokens),r.completionTokens!==void 0&&(o[Lt]=r.completionTokens),r.totalTokens!==void 0&&(o[Pt]=r.totalTokens),r.finishReasons.length&&(o[It]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Pe]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[Ge]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Jh(e){if(Gl.includes(e))return!0;let t=e.split(".").pop();return Gl.includes(t)}function Kh(e){return e.includes("Stream")}function yo(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>yo(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function Xh(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Zb(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Qn]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[er]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[ya]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[So]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Zn]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Eo]=e.presencePenalty),t}function eA(e,t,n){let r={[Xn]:qh,[bt]:xr(e),[H]:"auto.ai.google_genai"};if(t){if(r[Le]=Xh(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,Zb(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.flatMap(s=>s.functionDeclarations);r[tr]=JSON.stringify(i)}}}else r[Le]=Xh({},n);return r}function Qh(e,t){let n=[];if("config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...yo(t.config.systemInstruction,"system")),"history"in t&&n.push(...yo(t.history,"user")),"contents"in t&&n.push(...yo(t.contents,"user")),"message"in t&&n.push(...yo(t.message,"user")),Array.isArray(n)&&n.length){let{systemInstructions:r,filteredMessages:o}=Tn(n);r&&e.setAttribute(En,r);let i=Array.isArray(o)?o.length:0;e.setAttributes({[qt]:i,[sn]:JSON.stringify(nr(o))})}}function tA(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(nt,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Mt]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Lt]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Pt]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Pe]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[Ge]:JSON.stringify(r)})}}}function Zh(e,t,n,r){let o=t===$l;return new Proxy(e,{apply(i,s,a){let c=a[0],u=eA(t,c,n),d=u[Le]??"unknown",l=xr(t);return Kh(t)?lt({name:`${l} ${d} stream-response`,op:To(t),attributes:u},async f=>{try{r.recordInputs&&c&&Qh(f,c);let p=await i.apply(n,a);return Vh(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:2,message:"internal_error"}),X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):qe({name:o?`${l} ${d} create`:`${l} ${d}`,op:To(t),attributes:u},f=>(r.recordInputs&&c&&Qh(f,c),yr(()=>i.apply(n,a),p=>{X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{o||tA(f,p,r.recordOutputs)})))}})}function Wl(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=Ra(t,String(o));if(typeof s=="function"&&Jh(a)){if(a===$l){let c=Zh(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?Wl(l,Yh,n):l}}return Zh(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?Wl(s,a,n):s}})}function jl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Wl(e,"",r)}var kr="auto.ai.langchain",e_={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"};var Yt=(e,t,n)=>{n!=null&&(e[t]=n)},Ut=(e,t,n)=>{let r=Number(n);Number.isNaN(r)||(e[t]=r)};function At(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Vi(e){let t=e.toLowerCase();return e_[t]??t}function t_(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function zl(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Ji(e){return e.map(t=>{let n=t._getType;if(typeof n=="function"){let o=n.call(t);return{role:Vi(o),content:At(t.content)}}if(t.lc===1&&t.kwargs){let o=t.id,i=Array.isArray(o)&&o.length>0?o[o.length-1]:"",s=typeof i=="string"?t_(i):"user";return{role:Vi(s),content:At(t.kwargs?.content)}}if(t.type){let o=String(t.type).toLowerCase();return{role:Vi(o),content:At(t.content)}}if(t.role)return{role:Vi(String(t.role)),content:At(t.content)};let r=t.constructor?.name;return r&&r!=="Object"?{role:Vi(t_(r)),content:At(t.content)}:{role:"user",content:At(t.content)}})}function nA(e,t,n){let r={},o="kwargs"in e?e.kwargs:void 0,i=t?.temperature??n?.ls_temperature??o?.temperature;Ut(r,Qn,i);let s=t?.max_tokens??n?.ls_max_tokens??o?.max_tokens;Ut(r,So,s);let a=t?.top_p??o?.top_p;Ut(r,er,a);let c=t?.frequency_penalty;Ut(r,Zn,c);let u=t?.presence_penalty;return Ut(r,Eo,u),t&&"stream"in t&&Yt(r,go,!!t.stream),r}function n_(e,t,n,r,o){return{[Xn]:At(e??"langchain"),[bt]:"chat",[Le]:At(t),[H]:kr,...nA(n,r,o)}}function r_(e,t,n,r,o){let i=o?.ls_provider,s=r?.model??o?.ls_model_name??"unknown",a=n_(i,s,e,r,o);if(n&&Array.isArray(t)&&t.length>0){Yt(a,qt,t.length);let c=t.map(u=>({role:"user",content:u}));Yt(a,sn,At(c))}return a}function o_(e,t,n,r,o){let i=o?.ls_provider??e.id?.[2],s=r?.model??o?.ls_model_name??"unknown",a=n_(i,s,e,r,o);if(n&&Array.isArray(t)&&t.length>0){let c=Ji(t.flat()),{systemInstructions:u,filteredMessages:d}=Tn(c);u&&Yt(a,En,u);let l=Array.isArray(d)?d.length:0;Yt(a,qt,l);let f=nr(d);Yt(a,sn,At(f))}return a}function rA(e,t){let n=[],r=e.flat();for(let o of r){let i=o.message?.content;if(Array.isArray(i))for(let s of i){let a=s;a.type==="tool_use"&&n.push(a)}}n.length>0&&Yt(t,Ge,At(n))}function oA(e,t){if(!e)return;let n=e.tokenUsage,r=e.usage;if(n)Ut(t,Mt,n.promptTokens),Ut(t,Lt,n.completionTokens),Ut(t,Pt,n.totalTokens);else if(r){Ut(t,Mt,r.input_tokens),Ut(t,Lt,r.output_tokens);let o=Number(r.input_tokens),i=Number(r.output_tokens),s=(Number.isNaN(o)?0:o)+(Number.isNaN(i)?0:i);s>0&&Ut(t,Pt,s),r.cache_creation_input_tokens!==void 0&&Ut(t,oh,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&Ut(t,ih,r.cache_read_input_tokens)}}function i_(e,t){if(!e)return;let n={};if(Array.isArray(e.generations)){let u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&Yt(n,It,At(u)),rA(e.generations,n),t){let d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&Yt(n,Pe,At(d))}}oA(e.llmOutput,n);let r=e.llmOutput,i=e.generations?.[0]?.[0]?.message,s=r?.model_name??r?.model??i?.response_metadata?.model_name;s&&Yt(n,nt,s);let a=r?.id??i?.id;a&&Yt(n,zt,a);let c=r?.stop_reason??i?.response_metadata?.finish_reason;return c&&Yt(n,nh,At(c)),n}function ql(e={}){let t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,o=s=>{let a=r.get(s);a?.isRecording()&&(a.end(),r.delete(s))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(s,a,c,u,d,l,f,p){let m=zl(l),_=r_(s,a,t,m,f),g=_[Le],S=_[bt];lt({name:`${S} ${g}`,op:"gen_ai.chat",attributes:{..._,[se]:"gen_ai.chat"}},I=>(r.set(c,I),I))},handleChatModelStart(s,a,c,u,d,l,f,p){let m=zl(l),_=o_(s,a,t,m,f),g=_[Le],S=_[bt];lt({name:`${S} ${g}`,op:"gen_ai.chat",attributes:{..._,[se]:"gen_ai.chat"}},I=>(r.set(c,I),I))},handleLLMEnd(s,a,c,u,d){let l=r.get(a);if(l?.isRecording()){let f=i_(s,n);f&&l.setAttributes(f),o(a)}},handleLLMError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"llm_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${kr}.llm_error_handler`}})},handleChainStart(s,a,c,u){let d=s.name||"unknown_chain",l={[H]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),lt({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[se]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(s)}),o(a))},handleChainError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"chain_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${kr}.chain_error_handler`}})},handleToolStart(s,a,c,u){let d=s.name||"unknown_tool",l={[H]:kr,[ch]:d};t&&(l[uh]=a),lt({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[se]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({[lh]:JSON.stringify(s)}),o(a))},handleToolError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"tool_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${kr}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}var Yl="auto.ai.langgraph";function iA(e){if(!e||e.length===0)return null;let t=[];for(let n of e)if(n&&typeof n=="object"){let r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function sA(e){let t=e,n=0,r=0,o=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){let i=t.usage_metadata;return typeof i.input_tokens=="number"&&(n=i.input_tokens),typeof i.output_tokens=="number"&&(r=i.output_tokens),typeof i.total_tokens=="number"&&(o=i.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:o}}if(t.response_metadata&&typeof t.response_metadata=="object"){let i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){let s=i.tokenUsage;typeof s.promptTokens=="number"&&(n=s.promptTokens),typeof s.completionTokens=="number"&&(r=s.completionTokens),typeof s.totalTokens=="number"&&(o=s.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:o}}function aA(e,t){let n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){let r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(nt,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(It,[r.finish_reason])}}function s_(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;let t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function a_(e,t,n){let o=n?.messages;if(!o||!Array.isArray(o))return;let i=t?.length??0,s=o.length>i?o.slice(i):[];if(s.length===0)return;let a=iA(s);a&&e.setAttribute(Ge,JSON.stringify(a));let c=Ji(s);e.setAttribute(Pe,JSON.stringify(c));let u=0,d=0,l=0;for(let f of s){let p=sA(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,aA(e,f)}u>0&&e.setAttribute(Mt,u),d>0&&e.setAttribute(Lt,d),l>0&&e.setAttribute(Pt,l)}function c_(e,t){return new Proxy(e,{apply(n,r,o){return qe({op:"gen_ai.create_agent",name:"create_agent",attributes:{[H]:Yl,[se]:"gen_ai.create_agent",[bt]:"create_agent"}},i=>{try{let s=Reflect.apply(n,r,o),a=o.length>0?o[0]:{};a?.name&&typeof a.name=="string"&&(i.setAttribute(xl,a.name),i.updateName(`create_agent ${a.name}`));let c=s.invoke;return c&&typeof c=="function"&&(s.invoke=cA(c.bind(s),s,a,t)),s}catch(s){throw i.setStatus({code:2,message:"internal_error"}),X(s,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),s}})}})}function cA(e,t,n,r){return new Proxy(e,{apply(o,i,s){return qe({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[H]:Yl,[se]:sh,[bt]:"invoke_agent"}},async a=>{try{let c=n?.name;c&&typeof c=="string"&&(a.setAttribute(rh,c),a.setAttribute(xl,c),a.updateName(`invoke_agent ${c}`));let l=(s.length>1?s[1]:void 0)?.configurable?.thread_id;l&&typeof l=="string"&&a.setAttribute(ji,l);let f=s_(t);f&&a.setAttribute(tr,JSON.stringify(f));let p=r.recordInputs,m=r.recordOutputs,_=s.length>0?s[0].messages??[]:[];if(_&&p){let S=Ji(_),{systemInstructions:I,filteredMessages:U}=Tn(S);I&&a.setAttribute(En,I);let k=nr(U),$=Array.isArray(U)?U.length:0;a.setAttributes({[sn]:JSON.stringify(k),[qt]:$})}let g=await Reflect.apply(o,i,s);return m&&a_(a,_??null,g),g}catch(c){throw a.setStatus({code:2,message:"internal_error"}),X(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function Vl(e,t){let n=t||{};return e.compile=c_(e.compile.bind(e),n),e}function wa(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var Io=v;function Jl(){return"history"in Io&&!!Io.history}function uA(){if(!("fetch"in Io))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Ki(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Xi(){if(typeof EdgeRuntime=="string")return!0;if(!uA())return!1;if(Ki(Io.fetch))return!0;let e=!1,t=Io.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Ki(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){y&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Kl(){return"ReportingObserver"in Io}function Or(e,t){let n="fetch";Je(n,e),Ke(n,()=>l_(void 0,t))}function Xl(e){let t="fetch-body-resolved";Je(t,e),Ke(t,()=>l_(dA))}function l_(e,t=!1){t&&!Xi()||ge(v,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=fA(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:Q()*1e3,virtualError:o,headers:pA(r)};return e||Me("fetch",{...a}),n.apply(v,r).then(async c=>(e?e(c):Me("fetch",{...a,endTimestamp:Q()*1e3,response:c}),c),c=>{Me("fetch",{...a,endTimestamp:Q()*1e3,error:c}),Xe(c)&&c.stack===void 0&&(c.stack=o.stack,Se(c,"framesToPop",1));let d=T()?.getOptions().enhanceFetchErrorMessages??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let p=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${p})`:Se(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function lA(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function dA(e){let t;try{t=e.clone()}catch{return}lA(t,()=>{Me("fetch-body-resolved",{endTimestamp:Q()*1e3,response:e})})}function xa(e,t){return!!e&&typeof e=="object"&&!!e[t]}function u_(e){return typeof e=="string"?e:e?xa(e,"url")?e.url:e.toString?e.toString():"":""}function fA(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:u_(n),method:xa(r,"method")?String(r.method).toUpperCase():si(n)&&xa(n,"method")?String(n.method).toUpperCase():"GET"}}let t=e[0];return{url:u_(t),method:xa(t,"method")?String(t.method).toUpperCase():"GET"}}function pA(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(si(t))return new Headers(t.headers)}catch{}}function Ql(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Zl(){return"npm"}function d_(){return!Ql()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function rr(){return typeof window<"u"&&(!d_()||mA())}function mA(){return v.process?.type==="renderer"}var cn=v,pe=cn.document,Qi=cn.navigator,C_="Report a Bug",hA="Cancel",_A="Send Bug Report",gA="Confirm",SA="Report a Bug",EA="your.email@example.org",TA="Email",yA="What's the bug? What did you expect?",IA="Description",bA="Your Name",AA="Name",RA="Thank you for your report!",vA="(required)",NA="Add a screenshot",CA="Remove screenshot",wA="Highlight",xA="Hide",kA="Remove",OA="widget",MA="api",LA=5e3,ud=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=T();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&x().setTags(e.tags);let r=$i({source:MA,url:ct(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},La=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function PA(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Qi.userAgent)||/Macintosh/i.test(Qi.userAgent)&&Qi.maxTouchPoints&&Qi.maxTouchPoints>1||!isSecureContext)}function ka(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function UA(e){let t=pe.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Dt(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var bo=20,DA="http://www.w3.org/2000/svg";function BA(){let e=a=>cn.document.createElementNS(DA,a),t=Dt(e("svg"),{width:`${bo}`,height:`${bo}`,viewBox:`0 0 ${bo} ${bo}`,fill:"var(--actor-color, var(--foreground))"}),n=Dt(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Dt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=Dt(e("clipPath"),{id:"clip0_57_80"}),s=Dt(e("rect"),{width:`${bo}`,height:`${bo}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function FA({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=pe.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||C_,o.appendChild(BA()),e){let s=pe.createElement("span");s.appendChild(pe.createTextNode(e)),o.appendChild(s)}let i=UA(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var w_="rgba(88, 74, 192, 1)",HA={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:w_,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},f_={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:w_,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function p_(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function GA({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=pe.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${p_(e==="dark"?{...f_,...t}:{...HA,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${p_({...f_,...t})}
  }
}`:""}
`,r&&o.setAttribute("nonce",r),o}var Ha=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:m,scriptNonce:_,colorScheme:g="system",themeLight:S={},themeDark:I={},addScreenshotButtonLabel:U=NA,cancelButtonLabel:k=hA,confirmButtonLabel:$=gA,emailLabel:B=TA,emailPlaceholder:E=EA,formTitle:O=SA,isRequiredLabel:G=vA,messageLabel:A=IA,messagePlaceholder:L=yA,nameLabel:C=AA,namePlaceholder:P=bA,removeScreenshotButtonLabel:F=CA,submitButtonLabel:re=_A,successMessageText:ee=RA,triggerLabel:ae=C_,triggerAriaLabel:R="",highlightToolText:q=wA,hideToolText:N=xA,removeHighlightText:Y=kA,onFormOpen:de,onFormClose:ce,onSubmitSuccess:Ce,onSubmitError:ot,onFormSubmitted:Bn}={})=>{let it={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:m,scriptNonce:_,colorScheme:g,themeDark:I,themeLight:S,triggerLabel:ae,triggerAriaLabel:R,cancelButtonLabel:k,submitButtonLabel:re,confirmButtonLabel:$,formTitle:O,emailLabel:B,emailPlaceholder:E,messageLabel:A,messagePlaceholder:L,nameLabel:C,namePlaceholder:P,successMessageText:ee,isRequiredLabel:G,addScreenshotButtonLabel:U,removeScreenshotButtonLabel:F,highlightToolText:q,hideToolText:N,removeHighlightText:Y,onFormClose:ce,onFormOpen:de,onSubmitError:ot,onSubmitSuccess:Ce,onFormSubmitted:Bn},ht=null,dn=[],Fn=fe=>{if(!ht){let be=pe.createElement("div");be.id=String(fe.id),pe.body.appendChild(be),ht=be.attachShadow({mode:"open"}),ht.appendChild(GA(fe))}return ht},Zo=async fe=>{let be=fe.enableScreenshot&&PA(),Ht,$e;try{Ht=(t?t():await e("feedbackModalIntegration",_))(),co(Ht)}catch{throw La&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let fn=be?n?n():await e("feedbackScreenshotIntegration",_):void 0;fn&&($e=fn(),co($e))}catch{La&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let Ye=Ht.createDialog({options:{...fe,onFormClose:()=>{Ye?.close(),fe.onFormClose?.()},onFormSubmitted:()=>{Ye?.close(),fe.onFormSubmitted?.()}},screenshotIntegration:$e,sendFeedback:ud,shadow:Fn(fe)});return Ye},Ns=(fe,be={})=>{let Ht=ka(it,be),$e=typeof fe=="string"?pe.querySelector(fe):typeof fe.addEventListener=="function"?fe:null;if(!$e)throw La&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ye=null,fn=async()=>{Ye||(Ye=await Zo({...Ht,onFormSubmitted:()=>{Ye?.removeFromDom(),Ht.onFormSubmitted?.()}})),Ye.appendToDom(),Ye.open()};$e.addEventListener("click",fn);let te=()=>{dn=dn.filter(vt=>vt!==te),Ye?.removeFromDom(),Ye=null,$e.removeEventListener("click",fn)};return dn.push(te),te},ei=(fe={})=>{let be=ka(it,fe),Ht=Fn(be),$e=FA({triggerLabel:be.triggerLabel,triggerAriaLabel:be.triggerAriaLabel,shadow:Ht,styleNonce:m});return Ns($e.el,{...be,onFormOpen(){$e.hide()},onFormClose(){$e.show()},onFormSubmitted(){$e.show()}}),$e};return{name:"Feedback",setupOnce(){!rr()||!it.autoInject||(pe.readyState==="loading"?pe.addEventListener("DOMContentLoaded",()=>ei().appendToDom()):ei().appendToDom())},attachTo:Ns,createWidget(fe={}){let be=ei(ka(it,fe));return be.appendToDom(),be},async createForm(fe={}){return Zo(ka(it,fe))},remove(){ht&&(ht.parentElement?.remove(),ht=null),dn.forEach(fe=>fe()),dn=[]}}});function x_(){return T()?.getIntegrationByName("Feedback")}var Ga,he,k_,Mr,m_,O_,id,Zi={},ld=[],$A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dd=Array.isArray;function ir(e,t){for(var n in t)e[n]=t[n];return e}function M_(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?Ga.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return Pa(e,s,r,o,null)}function Pa(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++k_,__i:-1,__u:0};return o==null&&he.vnode!=null&&he.vnode(i),i}function es(e){return e.children}function Ua(e,t){this.props=e,this.context=t}function Ro(e,t){if(t==null)return e.__?Ro(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Ro(e):null}function WA(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=ir({},o)).__v=o.__v+1,he.vnode&&he.vnode(r),fd(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??Ro(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&L_(r),r}function L_(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return L_(e)}}function h_(e){(!e.__d&&(e.__d=!0)&&Mr.push(e)&&!Fa.__r++||m_!==he.debounceRendering)&&((m_=he.debounceRendering)||O_)(Fa)}function Fa(){var e,t,n,r=[],o=[];for(Mr.sort(id);e=Mr.shift();)e.__d&&(n=Mr.length,t=WA(e,r,o)||t,n===0||Mr.length>n?(sd(r,t,o),o.length=r.length=0,t=void 0,Mr.sort(id)):t&&he.__c&&he.__c(t,ld));t&&sd(r,t,o),Fa.__r=0}function P_(e,t,n,r,o,i,s,a,c,u,d){var l,f,p,m,_,g=r&&r.__k||ld,S=t.length;for(n.__d=c,jA(n,t,g),c=n.__d,l=0;l<S;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Zi:g[p.__i]||Zi,p.__i=l,fd(e,p,f,o,i,s,a,c,u,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&pd(f.ref,null,p),d.push(p.ref,p.__c||m,p)),_==null&&m!=null&&(_=m),65536&p.__u||f.__k===p.__k?c=U_(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:m&&(c=m.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=_}function jA(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Pa(null,o,null,null,o):dd(o)?Pa(es,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Pa(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=zA(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=Ro(i)),ad(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=Ro(i)),ad(i,i))}function U_(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=U_(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function zA(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function __(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||$A.test(t)?n:n+"px"}function Oa(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||__(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||__(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?S_:g_,i)):e.removeEventListener(t,i?S_:g_,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function g_(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(he.event?he.event(e):e)}}function S_(e){if(this.l)return this.l[e.type+!0](he.event?he.event(e):e)}function fd(e,t,n,r,o,i,s,a,c,u){var d,l,f,p,m,_,g,S,I,U,k,$,B,E,O,G=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=he.__b)&&d(t);e:if(typeof G=="function")try{if(S=t.props,I=(d=G.contextType)&&r[d.__c],U=d?I?I.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in G&&G.prototype.render?t.__c=l=new G(S,U):(t.__c=l=new Ua(S,U),l.constructor=G,l.render=YA),I&&I.sub(l),l.props=S,l.state||(l.state={}),l.context=U,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),G.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=ir({},l.__s)),ir(l.__s,G.getDerivedStateFromProps(S,l.__s))),p=l.props,m=l.state,l.__v=t,f)G.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(G.getDerivedStateFromProps==null&&S!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(S,U),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(S,l.__s,U)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=S,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(A){A&&(A.__=t)}),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(S,l.__s,U),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,m,_)})}if(l.context=U,l.props=S,l.__P=e,l.__e=!1,$=he.__r,B=0,"prototype"in G&&G.prototype.render){for(l.state=l.__s,l.__d=!1,$&&$(t),d=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,$&&$(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++B<25);l.state=l.__s,l.getChildContext!=null&&(r=ir(ir({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(_=l.getSnapshotBeforeUpdate(p,m)),P_(e,dd(O=d!=null&&d.type===es&&d.key==null?d.props.children:d)?O:[O],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(A){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),he.__e(A,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=qA(n.__e,t,n,r,o,i,s,c,u);(d=he.diffed)&&d(t)}function sd(e,t,n){for(var r=0;r<n.length;r++)pd(n[r],n[++r],n[++r]);he.__c&&he.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){he.__e(i,o.__v)}})}function qA(e,t,n,r,o,i,s,a,c){var u,d,l,f,p,m,_,g=n.props,S=t.props,I=t.type;if(I==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!I&&(I?p.localName===I:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(I===null)return document.createTextNode(S);e=o?document.createElementNS("http://www.w3.org/2000/svg",I):document.createElement(I,S.is&&S),i=null,a=!1}if(I===null)g===S||a&&e.data===S||(e.data=S);else{if(i=i&&Ga.call(e.childNodes),g=n.props||Zi,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in S||Oa(e,u,null,p,o));for(u in S)p=S[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?m=p:u=="checked"?_=p:u==="key"||a&&typeof p!="function"||g[u]===p||Oa(e,u,p,g[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),P_(e,dd(f)?f:[f],t,n,r,o&&I!=="foreignObject",i,s,i?i[0]:n.__k&&Ro(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&M_(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||I==="progress"&&!m||I==="option"&&m!==g[u])&&Oa(e,u,m,g[u],!1),u="checked",_!==void 0&&_!==e[u]&&Oa(e,u,_,g[u],!1))}return e}function pd(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){he.__e(r,n)}}function ad(e,t,n){var r,o;if(he.unmount&&he.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||pd(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){he.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&ad(r[o],t,n||typeof e.type!="function");n||e.__e==null||M_(e.__e),e.__=e.__e=e.__d=void 0}function YA(e,t,n){return this.constructor(e,n)}function VA(e,t,n){var r,o,i,s;he.__&&he.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],fd(t,e=t.__k=V(es,null,[e]),o||Zi,Zi,t.ownerSVGElement!==void 0,o?null:t.firstChild?Ga.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,sd(i,e,s)}Ga=ld.slice,he={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},k_=0,Ua.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ir({},this.state),typeof e=="function"&&(e=e(ir({},n),this.props)),e&&ir(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),h_(this))},Ua.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),h_(this))},Ua.prototype.render=es,Mr=[],O_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,id=function(e,t){return e.__v.__b-t.__v.__b},Fa.__r=0;var kn,me,ed,E_,vo=0,D_=[],Da=[],Ae=he,T_=Ae.__b,y_=Ae.__r,I_=Ae.diffed,b_=Ae.__c,A_=Ae.unmount,R_=Ae.__;function Pr(e,t){Ae.__h&&Ae.__h(me,e,vo||t),vo=0;var n=me.__H||(me.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Da}),n.__[e]}function Lr(e){return vo=1,B_(H_,e)}function B_(e,t,n){var r=Pr(kn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):H_(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=me,!me.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};me.u=!0;var i=me.shouldComponentUpdate,s=me.componentWillUpdate;me.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},me.shouldComponentUpdate=o}return r.__N||r.__}function JA(e,t){var n=Pr(kn++,3);!Ae.__s&&md(n.__H,t)&&(n.__=e,n.i=t,me.__H.__h.push(n))}function F_(e,t){var n=Pr(kn++,4);!Ae.__s&&md(n.__H,t)&&(n.__=e,n.i=t,me.__h.push(n))}function KA(e){return vo=5,ts(function(){return{current:e}},[])}function XA(e,t,n){vo=6,F_(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function ts(e,t){var n=Pr(kn++,7);return md(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Ao(e,t){return vo=8,ts(function(){return e},t)}function QA(e){var t=me.context[e.__c],n=Pr(kn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(me)),t.props.value):e.__}function ZA(e,t){Ae.useDebugValue&&Ae.useDebugValue(t?t(e):e)}function eR(e){var t=Pr(kn++,10),n=Lr();return t.__=e,me.componentDidCatch||(me.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function tR(){var e=Pr(kn++,11);if(!e.__){for(var t=me.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function nR(){for(var e;e=D_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ba),e.__H.__h.forEach(cd),e.__H.__h=[]}catch(t){e.__H.__h=[],Ae.__e(t,e.__v)}}Ae.__b=function(e){me=null,T_&&T_(e)},Ae.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),R_&&R_(e,t)},Ae.__r=function(e){y_&&y_(e),kn=0;var t=(me=e.__c).__H;t&&(ed===me?(t.__h=[],me.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Da,n.__N=n.i=void 0})):(t.__h.forEach(Ba),t.__h.forEach(cd),t.__h=[],kn=0)),ed=me},Ae.diffed=function(e){I_&&I_(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(D_.push(t)!==1&&E_===Ae.requestAnimationFrame||((E_=Ae.requestAnimationFrame)||rR)(nR)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Da&&(n.__=n.__V),n.i=void 0,n.__V=Da})),ed=me=null},Ae.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ba),n.__h=n.__h.filter(function(r){return!r.__||cd(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ae.__e(r,n.__v)}}),b_&&b_(e,t)},Ae.unmount=function(e){A_&&A_(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ba(r)}catch(o){t=o}}),n.__H=void 0,t&&Ae.__e(t,n.__v))};var v_=typeof requestAnimationFrame=="function";function rR(e){var t,n=function(){clearTimeout(r),v_&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);v_&&(t=requestAnimationFrame(n))}function Ba(e){var t=me,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),me=t}function cd(e){var t=me;e.__c=e.__(),me=t}function md(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function H_(e,t){return typeof t=="function"?t(e):t}var oR=Object.defineProperty({__proto__:null,useCallback:Ao,useContext:QA,useDebugValue:ZA,useEffect:JA,useErrorBoundary:eR,useId:tR,useImperativeHandle:XA,useLayoutEffect:F_,useMemo:ts,useReducer:B_,useRef:KA,useState:Lr},Symbol.toStringTag,{value:"Module"}),iR="http://www.w3.org/2000/svg";function sR(){let e=r=>pe.createElementNS(iR,r),t=Dt(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Dt(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function aR({options:e}){let t=ts(()=>({__html:sR().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function cR(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function td(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function uR({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:m,emailPlaceholder:_,isEmailRequired:g,isNameRequired:S,messageLabel:I,messagePlaceholder:U,nameLabel:k,namePlaceholder:$,submitButtonLabel:B,isRequiredLabel:E}=e,[O,G]=Lr(!1),[A,L]=Lr(null),[C,P]=Lr(!1),F=u?.input,[re,ee]=Lr(null),ae=Ao(N=>{ee(N),P(!1)},[]),R=Ao(N=>{let Y=cR(N,{emailLabel:m,isEmailRequired:g,isNameRequired:S,messageLabel:I,nameLabel:k});return Y.length>0?L(`Please enter in the following required fields: ${Y.join(", ")}`):L(null),Y.length===0},[m,g,S,I,k]),q=Ao(async N=>{G(!0);try{if(N.preventDefault(),!(N.target instanceof HTMLFormElement))return;let Y=new FormData(N.target),de=await(u&&C?u.value():void 0),ce={name:td(Y,"name"),email:td(Y,"email"),message:td(Y,"message"),attachments:de?[de]:void 0};if(!R(ce))return;try{let Ce=await o({name:ce.name,email:ce.email,message:ce.message,source:OA,tags:d},{attachments:ce.attachments});i(ce,Ce)}catch(Ce){La&&h.error(Ce),L(Ce),s(Ce)}}finally{G(!1)}},[u&&C,i,s]);return V("form",{class:"form",onSubmit:q},F&&C?V(F,{onError:ae}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:O},V("div",{class:"form__top"},A?V("div",{class:"form__error-container"},A):null,c?V("label",{for:"name",class:"form__label"},V(nd,{label:k,isRequiredLabel:E,isRequired:S}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:$,required:S,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(nd,{label:m,isRequiredLabel:E,isRequired:g}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:_,required:g,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(nd,{label:I,isRequiredLabel:E,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:U,required:!0,rows:5})),F?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:O,type:"button",onClick:()=>{ee(null),P(N=>!N)}},C?f:l),re?V("div",{class:"form__error-container"},re.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:O,type:"submit"},B),V("button",{class:"btn btn--default",disabled:O,type:"button",onClick:r},p))))}function nd({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}var Ma=16,N_=17,lR="http://www.w3.org/2000/svg";function dR(){let e=c=>cn.document.createElementNS(lR,c),t=Dt(e("svg"),{width:`${Ma}`,height:`${N_}`,viewBox:`0 0 ${Ma} ${N_}`,fill:"inherit"}),n=Dt(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Dt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Dt(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=Dt(e("clipPath"),{id:"clip0_57_156"}),a=Dt(e("rect"),{width:`${Ma}`,height:`${Ma}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function fR({open:e,onFormSubmitted:t,...n}){let r=n.options,o=ts(()=>({__html:dR().outerHTML}),[]),[i,s]=Lr(null),a=Ao(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=Ao((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},LA))},[t]);return V(es,null,i?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(aR,{options:r}),V(uR,{...n,onSubmitSuccess:c})))))}var pR=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,mR=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,hR=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,_R=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,gR=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function SR(e){let t=pe.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${pR}
${mR}
${hR}
${_R}
${gR}
`,e&&t.setAttribute("nonce",e),t}function ER(){let e=x().getUser(),t=ie().getUser(),n=tn().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var G_=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=ER(),a=pe.createElement("div"),c=SR(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),pe.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),T()?.emit("openFeedbackWidget"),u=pe.body.style.overflow,pe.body.style.overflow="hidden"},close(){f(!1),pe.body.style.overflow=u}},l=t?.createInput({h:V,hooks:oR,dialog:d,options:e}),f=p=>{VA(V(fR,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&s?.[i.name]||""),defaultEmail:String(i&&s?.[i.email]||""),onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,_)=>{f(!1),e.onSubmitSuccess?.(m,_)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function TR({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function yR(e){let t=pe.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function IR({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function bR({hooks:e}){function t(){let[n,r]=e.useState(cn.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(cn.devicePixelRatio)},i=matchMedia(`(resolution: ${cn.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await Qi.mediaDevices.getDisplayMedia({video:{width:cn.innerWidth*a,height:cn.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=pe.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(s)},[])}}function AR(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function or(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function rd(e,t){or(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function od(e,t,n){or(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{AR(i,o,t)})})}function RR({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=bR({hooks:t}),s=IR({h:e}),a=TR({h:e}),c={__html:yR(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[f,p]=t.useState("highlight"),[m,_]=t.useState([]),g=t.useRef(null),S=t.useRef(null),I=t.useRef(null),U=t.useRef(null),[k,$]=t.useState(1),B=t.useMemo(()=>{let C=pe.getElementById(o.id);if(!C)return"white";let P=getComputedStyle(C);return P.getPropertyValue("--button-primary-background")||P.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let C=()=>{let P=g.current;P&&(or(l.canvas,{alpha:!1},F=>{let re=Math.min(P.clientWidth/F.width,P.clientHeight/F.height);$(re)}),(P.clientHeight===0||P.clientWidth===0)&&setTimeout(C,0))};return C(),cn.addEventListener("resize",C),()=>{cn.removeEventListener("resize",C)}},[l]);let E=t.useCallback((C,P)=>{or(C,{alpha:!0},(F,re)=>{re.scale(P,P),F.width=l.canvas.width,F.height=l.canvas.height})},[l]);t.useEffect(()=>{E(S.current,l.dpi),rd(S.current,l.canvas)},[l]),t.useEffect(()=>{E(I.current,l.dpi),or(I.current,{alpha:!0},(C,P)=>{P.clearRect(0,0,C.width,C.height)}),od(I.current,B,m)},[m,B]),t.useEffect(()=>{E(n,l.dpi),rd(n,l.canvas),or(pe.createElement("canvas"),{alpha:!0},(C,P)=>{P.scale(l.dpi,l.dpi),C.width=l.canvas.width,C.height=l.canvas.height,od(C,B,m),rd(n,C)})},[m,l,B]);let O=C=>{if(!f||!U.current)return;let P=U.current.getBoundingClientRect(),F={type:f,x:C.offsetX/k,y:C.offsetY/k},re=(R,q)=>{let N=(q.clientX-P.x)/k,Y=(q.clientY-P.y)/k;return{type:R.type,x:Math.min(R.x,N),y:Math.min(R.y,Y),w:Math.abs(N-R.x),h:Math.abs(Y-R.y)}},ee=R=>{or(I.current,{alpha:!0},(q,N)=>{N.clearRect(0,0,q.width,q.height)}),od(I.current,B,[...m,re(F,R)])},ae=R=>{let q=re(F,R);q.w*k>=1&&q.h*k>=1&&_(N=>[...N,q]),pe.removeEventListener("mousemove",ee),pe.removeEventListener("mouseup",ae)};pe.addEventListener("mousemove",ee),pe.addEventListener("mouseup",ae)},G=t.useCallback(C=>P=>{P.preventDefault(),P.stopPropagation(),_(F=>{let re=[...F];return re.splice(C,1),re})},[]),A={width:`${l.canvas.width*k}px`,height:`${l.canvas.height*k}px`},L=C=>{C.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:S,id:"background",style:A}),e("canvas",{ref:I,id:"foreground",style:A}),e("div",{ref:U,onMouseDown:O,style:A},m.map((C,P)=>e("div",{key:P,class:"editor__rect",style:{top:`${C.y*k}px`,left:`${C.x*k}px`,width:`${C.w*k}px`,height:`${C.h*k}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:G(P),onMouseDown:L,onMouseUp:L,type:"button"},e(a,null))))))),e(s,{options:o,action:f,setAction:p}))};return function({onError:f}){let[p,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((_,g)=>{or(pe.createElement("canvas"),{alpha:!1},(S,I)=>{I.scale(g,g),S.width=_.videoWidth,S.height=_.videoHeight,I.drawImage(_,0,0,S.width,S.height),m({canvas:S,dpi:g})}),n.width=_.videoWidth,n.height=_.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(_=>{u.display="block",f(_)},[])}),p?e(d,{screenshot:p}):e("div",null)}}var $_=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=pe.createElement("canvas");return{input:RR({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var w=v,hd=0;function _d(){return hd>0}function vR(){hd++,setTimeout(()=>{hd--})}function Ur(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(pr(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>Ur(s,t));return e.apply(this,i)}catch(i){throw vR(),De(s=>{s.addEventProcessor(a=>(t.mechanism&&(Xr(a,void 0,void 0),Qe(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),X(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}Ms(r,e),Se(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function ns(){let e=ct(),{referrer:t}=w.document||{},{userAgent:n}=w.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var NR={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},W_=w;async function $a(e,t){let n=NR[e],r=W_.Sentry=W_.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=CR(n),s=w.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,f)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",f)}),c=w.document.currentScript,u=w.document.body||w.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function CR(e){let n=T()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${_t}/${e}.min.js`,n).toString()}var j_=Ha({lazyLoadIntegration:$a});var gd=Ha({getModalIntegration:()=>G_,getScreenshotIntegration:()=>$_});function No(e,t){let n=Td(e,t),r={type:MR(t),value:LR(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function wR(e,t,n,r){let i=T()?.getOptions().normalizeDepth,s=DR(t),a={__serialized__:Js(t,i)};if(s)return{exception:{values:[No(e,s)]},extra:a};let c={exception:{values:[{type:fr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:PR(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=Td(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Sd(e,t){return{exception:{values:[No(e,t)]}}}function Td(e,t){let n=t.stacktrace||t.stack||"",r=kR(t),o=OR(t);try{return e(n,r,o)}catch{}return[]}var xR=/Minified React error #\d+;/i;function kR(e){return e&&xR.test(e.message)?1:0}function OR(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function z_(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function MR(e){let t=e?.name;return!t&&z_(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function LR(e){let t=e?.message;return z_(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?aa(t.error):aa(e):"No error message"}function Wa(e,t,n,r){let o=n?.syntheticException||void 0,i=Co(e,t,o,r);return Qe(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Yn(i)}function ja(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=Ed(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),Yn(s)}function Co(e,t,n,r,o){let i;if(oi(t)&&t.error)return Sd(e,t.error);if(Os(t)||au(t)){let s=t;if("stack"in t)i=Sd(e,t);else{let a=s.name||(Os(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=Ed(e,c,n,r),Xr(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Xe(t)?Sd(e,t):we(t)||fr(t)?(i=wR(e,t,n,o),Qe(i,{synthetic:!0}),i):(i=Ed(e,t,n,r),Xr(i,`${t}`,void 0),Qe(i,{synthetic:!0}),i)}function Ed(e,t,n,r){let o={};if(r&&n){let i=Td(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),Qe(o,{synthetic:!0})}if(Rn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function PR(e,{isUnhandledRejection:t}){let n=fu(e),r=t?"promise rejection":"exception";return oi(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:fr(e)?`Event \`${UR(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function UR(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function DR(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var wo=class extends Ui{constructor(t){let n=BR(t),r=w.SENTRY_SDK_SOURCE||Zl();fl(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;w.document&&(i||s||u)&&w.document.addEventListener("visibilitychange",()=>{w.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&lo(this),u&&fo(this))}),o&&this.on("beforeSendSession",dl)}eventFromException(t,n){return Wa(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return ja(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function BR(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:w.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var Vt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var D=v;var FR=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",yn=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=FR(t.value,n),e(t)))}};var On=(e=!0)=>{let t=D.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var Jt=()=>On()?.activationStart??0;function Kt(e,t,n){D.document&&D.addEventListener(e,t,n)}function Dr(e,t,n){D.document&&D.removeEventListener(e,t,n)}var xo=-1,q_=new Set,HR=()=>D.document?.visibilityState==="hidden"&&!D.document?.prerendering?0:1/0,za=e=>{if(GR(e)&&xo>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(let t of q_)t();isFinite(xo)||(xo=e.type==="visibilitychange"?e.timeStamp:0,Dr("prerenderingchange",za,!0))}},In=()=>{if(D.document&&xo<0){let e=Jt();xo=(D.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??HR(),Kt("visibilitychange",za,!0),Kt("pagehide",za,!0),Kt("prerenderingchange",za,!0)}return{get firstHiddenTime(){return xo},onHidden(e){q_.add(e)}}};function GR(e){return e.type==="pagehide"||D.document?.visibilityState==="hidden"}var Y_=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var bn=(e,t=-1)=>{let n=On(),r="navigate";return n&&(D.document?.prerendering||Jt()>0?r="prerender":D.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:Y_(),navigationType:r}};var yd=new WeakMap;function ko(e,t){try{return yd.get(e)||yd.set(e,new t),yd.get(e)}catch{return new t}}var qa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Xt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var Oo=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var sr=e=>{D.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var $R=[1800,3e3],V_=(e,t={})=>{sr(()=>{let n=In(),r=bn("FCP"),o,s=Xt("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Jt(),0),r.entries.push(c),o(!0)))});s&&(o=yn(e,r,$R,t.reportAllChanges))})};var WR=[.1,.25],J_=(e,t={})=>{V_(Oo(()=>{let n=bn("CLS",0),r,o=In(),i=ko(t,qa),s=c=>{for(let u of c)i._processEntry(u);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,r())},a=Xt("layout-shift",s);a&&(r=yn(e,n,WR,t.reportAllChanges),o.onHidden(()=>{s(a.takeRecords()),r(!0)}),D?.setTimeout?.(r))}))};var K_=0,Id=1/0,Ya=0,jR=e=>{e.forEach(t=>{t.interactionId&&(Id=Math.min(Id,t.interactionId),Ya=Math.max(Ya,t.interactionId),K_=Ya?(Ya-Id)/7+1:0)})},bd,Ad=()=>bd?K_:performance.interactionCount||0,X_=()=>{"interactionCount"in performance||bd||(bd=Xt("event",jR,{type:"event",buffered:!0,durationThreshold:0}))};var Rd=10,Q_=0,zR=()=>Ad()-Q_,Va=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Q_=Ad(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(zR()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Rd||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>Rd){let o=this._longestInteractionList.splice(Rd);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var Ja=e=>{let t=D.requestIdleCallback||D.setTimeout;D.document?.visibilityState==="hidden"?e():(e=Oo(e),Kt("visibilitychange",e,{once:!0,capture:!0}),Kt("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),Dr("visibilitychange",e,{capture:!0}),Dr("pagehide",e,{capture:!0})}))};var qR=[200,500],YR=40,Z_=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;let n=In();sr(()=>{X_();let r=bn("INP"),o,i=ko(t,Va),s=c=>{Ja(()=>{for(let d of c)i._processEntry(d);let u=i._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,o())})},a=Xt("event",s,{durationThreshold:t.durationThreshold??YR});o=yn(e,r,qR,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{s(a.takeRecords()),o(!0)}))})};var Ka=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var VR=[2500,4e3],eg=(e,t={})=>{sr(()=>{let n=In(),r=bn("LCP"),o,i=ko(t,Ka),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Jt(),0),r.entries=[u],o())},a=Xt("largest-contentful-paint",s);if(a){o=yn(e,r,VR,t.reportAllChanges);let c=Oo(()=>{s(a.takeRecords()),a.disconnect(),o(!0)}),u=d=>{d.isTrusted&&(Ja(c),Dr(d.type,u,{capture:!0}))};for(let d of["keydown","click","visibilitychange"])Kt(d,u,{capture:!0})}})};var JR=[800,1800],vd=e=>{D.document?.prerendering?sr(()=>vd(e)):D.document?.readyState!=="complete"?addEventListener("load",()=>vd(e),!0):setTimeout(e)},tg=(e,t={})=>{let n=bn("TTFB"),r=yn(e,n,JR,t.reportAllChanges);vd(()=>{let o=On();o&&(n.value=Math.max(o.responseStart-Jt(),0),n.entries=[o],r(!0))})};var rs={},Xa={},ng,rg,og,ig;function Br(e,t=!1){return Qa("cls",e,KR,ng,t)}function Fr(e,t=!1){return Qa("lcp",e,XR,rg,t)}function Nd(e){return Qa("ttfb",e,QR,og)}function os(e){return Qa("inp",e,ZR,ig)}function Bt(e,t){return sg(e,t),Xa[e]||(ev(e),Xa[e]=!0),ag(e,t)}function is(e,t){let n=rs[e];if(n?.length)for(let r of n)try{r(t)}catch(o){Vt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}function KR(){return J_(e=>{is("cls",{metric:e}),ng=e},{reportAllChanges:!0})}function XR(){return eg(e=>{is("lcp",{metric:e}),rg=e},{reportAllChanges:!0})}function QR(){return tg(e=>{is("ttfb",{metric:e}),og=e})}function ZR(){return Z_(e=>{is("inp",{metric:e}),ig=e})}function Qa(e,t,n,r,o=!1){sg(e,t);let i;return Xa[e]||(i=n(),Xa[e]=!0),r&&t({metric:r}),ag(e,t,o?i:void 0)}function ev(e){let t={};e==="event"&&(t.durationThreshold=0),Xt(e,n=>{is(e,{entries:n})},t)}function sg(e,t){rs[e]=rs[e]||[],rs[e].push(t)}function ag(e,t,n){return()=>{n&&n();let r=rs[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function cg(e){return"duration"in e}var ug=e=>{let t=n=>{(n.type==="pagehide"||D.document?.visibilityState==="hidden")&&e(n)};Kt("visibilitychange",t,{capture:!0,once:!0}),Kt("pagehide",t,{capture:!0,once:!0})};function Za(e){return typeof e=="number"&&isFinite(e)}function Mn(e,t,n,{...r}){let o=M(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),qn(e,()=>{let i=Et({startTime:t,...r});return i&&i.end(n),i})}function Mo(e){let t=T();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=x(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let _={release:s,environment:a,user:p||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":D.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return Et({name:n,attributes:_,startTime:i,experimental:{standalone:!0}})}function Ln(){return D.addEventListener&&D.performance}function _e(e){return e/1e3}function lg(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function ec(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function tc(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}ug(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function dg(e){let t=0,n;if(!ec("layout-shift"))return;let r=Br(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);tc(e,(o,i)=>{tv(t,n,i,o),r()})}function tv(e,t,n,r){Vt&&h.log(`Sending CLS span (${e})`);let o=t?_e((Ee()||0)+t.startTime):Q(),i=x().getScopeData().transactionName,s=t?Re(t.sources[0]?.node):"Layout shift",a={[H]:"auto.http.browser.cls",[se]:"ui.webvital.cls",[Wt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=Re(u.node)});let c=Mo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[hn]:"",[_n]:e}),c.end(o))}function fg(e){let t=0,n;if(!ec("largest-contentful-paint"))return;let r=Fr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);tc(e,(o,i)=>{nv(t,n,i,o),r()})}function nv(e,t,n,r){Vt&&h.log(`Sending LCP span (${e})`);let o=_e((Ee()||0)+(t?.startTime||0)),i=x().getScopeData().transactionName,s=t?Re(t.element):"Largest contentful paint",a={[H]:"auto.http.browser.lcp",[se]:"ui.webvital.lcp",[Wt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Re(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=Mo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[hn]:"millisecond",[_n]:e}),c.end(o))}function Qt(e){return e&&((Ee()||performance.timeOrigin)+e)/1e3}function ss(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=lg(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Ee()||Ln()?.timeOrigin?rv({...t,"http.request.redirect_start":Qt(e.redirectStart),"http.request.redirect_end":Qt(e.redirectEnd),"http.request.worker_start":Qt(e.workerStart),"http.request.fetch_start":Qt(e.fetchStart),"http.request.domain_lookup_start":Qt(e.domainLookupStart),"http.request.domain_lookup_end":Qt(e.domainLookupEnd),"http.request.connect_start":Qt(e.connectStart),"http.request.secure_connection_start":Qt(e.secureConnectionStart),"http.request.connection_end":Qt(e.connectEnd),"http.request.request_start":Qt(e.requestStart),"http.request.response_start":Qt(e.responseStart),"http.request.response_end":Qt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function rv(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var ov=2147483647,pg=0,un={},Rt,rc;function Cd({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=Ln();if(r&&Ee()){r.mark&&D.performance.mark("sentry-tracing-init");let o=t?fg(n):sv(),i=av(),s=e?dg(n):iv();return()=>{o?.(),i(),s?.()}}return()=>{}}function wd(){Bt("longtask",({entries:e})=>{let t=K();if(!t)return;let{op:n,start_timestamp:r}=M(t);for(let o of e){let i=_e(Ee()+o.startTime),s=_e(o.duration);n==="navigation"&&r&&i<r||Mn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[H]:"auto.ui.browser.metrics"}})}})}function xd(){new PerformanceObserver(t=>{let n=K();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=_e(Ee()+r.startTime),{start_timestamp:i,op:s}=M(n);if(s==="navigation"&&i&&o<i)continue;let a=_e(r.duration),c={[H]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),m!==-1&&(c["browser.script.source_char_position"]=m),Mn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function kd(){Bt("event",({entries:e})=>{let t=K();if(t){for(let n of e)if(n.name==="click"){let r=_e(Ee()+n.startTime),o=_e(n.duration),i={name:Re(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[H]:"auto.ui.browser.metrics"}},s=ai(n.target);s&&(i.attributes["ui.component_name"]=s),Mn(t,r,r+o,i)}}})}function iv(){return Br(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(un.cls={value:e.value,unit:""},rc=t)},!0)}function sv(){return Fr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(un.lcp={value:e.value,unit:"millisecond"},Rt=t)},!0)}function av(){return Nd(({metric:e})=>{e.entries[e.entries.length-1]&&(un.ttfb={value:e.value,unit:"millisecond"})})}function Od(e,t){let n=Ln(),r=Ee();if(!n?.getEntries||!r)return;let o=_e(r),i=n.getEntries(),{op:s,start_timestamp:a}=M(e);i.slice(pg).forEach(c=>{let u=_e(c.startTime),d=_e(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{dv(e,c,o);break}case"mark":case"paint":case"measure":{uv(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=In(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(un.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(un.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{mv(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),pg=Math.max(i.length-1,0),hv(e),s==="pageload"&&(Sv(un),t.recordClsOnPageloadSpan||delete un.cls,t.recordLcpOnPageloadSpan||delete un.lcp,Object.entries(un).forEach(([c,u])=>{Ti(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Jt()),_v(e,t)),Rt=void 0,rc=void 0,un={}}function cv(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function uv(e,t,n,r,o,i){if(cv(t)||["mark","measure"].includes(t.entryType)&&je(t.name,i))return;let s=On(!1),a=_e(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[H]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),lv(l,t),c<=d&&Mn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function lv(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&at(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(at(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function dv(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{nc(e,t,r,n)}),nc(e,t,"secureConnection",n,"TLS/SSL"),nc(e,t,"fetch",n,"cache"),nc(e,t,"domainLookup",n,"DNS"),pv(e,t,n)}function nc(e,t,n,r,o=n){let i=fv(n),s=t[i],a=t[`${n}Start`];!a||!s||Mn(e,r+_e(a),r+_e(s),{op:`browser.${o}`,name:t.name,attributes:{[H]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function fv(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function pv(e,t,n){let r=n+_e(t.requestStart),o=n+_e(t.responseEnd),i=n+_e(t.responseStart);t.responseEnd&&(Mn(e,r,o,{op:"browser.request",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}),Mn(e,i,o,{op:"browser.response",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}))}function mv(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[H]:"auto.resource.browser.metrics"},u=on(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(D.location.origin),gv(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...ss(t)},l=i+r,f=l+o;Mn(e,l,f,{name:n.replace(D.location.origin,""),op:a,attributes:d})}function hv(e){let t=D.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Za(n.rtt)&&(un["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Za(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Za(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function _v(e,t){Rt&&t.recordLcpOnPageloadSpan&&(Rt.element&&e.setAttribute("lcp.element",Re(Rt.element)),Rt.id&&e.setAttribute("lcp.id",Rt.id),Rt.url&&e.setAttribute("lcp.url",Rt.url.trim().slice(0,200)),Rt.loadTime!=null&&e.setAttribute("lcp.loadTime",Rt.loadTime),Rt.renderTime!=null&&e.setAttribute("lcp.renderTime",Rt.renderTime),e.setAttribute("lcp.size",Rt.size)),rc?.sources&&t.recordClsOnPageloadSpan&&rc.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Re(n.node)))}function gv(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<ov||typeof i=="string")&&(t[o]=i)})}function Sv(e){let t=On(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Md(){return Ln()&&Ee()?Bt("element",Ev):()=>{}}var Ev=({entries:e})=>{let t=K(),n=t?Z(t):void 0,r=n?M(n).description:x().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[_e(c),"load-time"]:a?[_e(a),"render-time"]:[Q(),"entry-emission"],l=s==="image-paint"?_e(Math.max(0,(a??0)-(c??0))):0,f={[H]:"auto.ui.browser.elementtiming",[se]:"ui.elementtiming",[ve]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};qe({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})};var Tv=1e3,mg,Ld,Pd;function as(e){Je("dom",e),Ke("dom",yv)}function yv(){if(!D.document)return;let e=Me.bind(null,"dom"),t=hg(e,!0);D.document.addEventListener("click",t,!1),D.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=D[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(ge(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=hg(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),ge(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function Iv(e){if(e.type!==Ld)return!1;try{if(!e.target||e.target._sentryId!==Pd)return!1}catch{}return!0}function bv(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function hg(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=Av(n);if(bv(n.type,r))return;Se(n,"_sentryCaptured",!0),r&&!r._sentryId&&Se(r,"_sentryId",le());let o=n.type==="keypress"?"input":n.type;Iv(n)||(e({event:n,name:o,global:t}),Ld=n.type,Pd=r?r._sentryId:void 0),clearTimeout(mg),mg=D.setTimeout(()=>{Pd=void 0,Ld=void 0},Tv)}}function Av(e){try{return e.target}catch{return null}}var oc;function Pn(e){let t="history";Je(t,e),Ke(t,Rv)}function Rv(){if(D.addEventListener("popstate",()=>{let t=D.location.href,n=oc;if(oc=t,n===t)return;Me("history",{from:n,to:t})}),!Jl())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=oc,i=vv(String(r));if(oc=i,o===i)return t.apply(this,n);Me("history",{from:o,to:i})}return t.apply(this,n)}}ge(D.history,"pushState",e),ge(D.history,"replaceState",e)}function vv(e){try{return new URL(e,D.location.origin).toString()}catch{return e}}var ic={};function Lo(e){let t=ic[e];if(t)return t;let n=D[e];if(Ki(n))return ic[e]=n.bind(D);let r=D.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){Vt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(ic[e]=n.bind(D))}function Ud(e){ic[e]=void 0}function Hr(...e){return Lo("setTimeout")(...e)}var ft="__sentry_xhr_v3__";function Gr(e){Je("xhr",e),Ke("xhr",Nv)}function Nv(){if(!D.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=Q()*1e3,s=Fe(r[0])?r[0].toUpperCase():void 0,a=Cv(r[1]);if(!s||!a)return t.apply(n,r);n[ft]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[ft];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:Q()*1e3,startTimestamp:i,xhr:n,virtualError:o};Me("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[f,p]=l,m=d[ft];return m&&Fe(f)&&Fe(p)&&(m.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[ft];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:Q()*1e3,xhr:n};return Me("xhr",i),t.apply(n,r)}})}function Cv(e){if(Fe(e))return e;try{return e.toString()}catch{}}var wv=Symbol.for("sentry__originalRequestBody");function sc(e){return new URLSearchParams(e).toString()}function $r(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[sc(e)];if(!e)return[void 0]}catch(n){return Vt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Vt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Po(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){let n=e[0][wv];return n!==void 0?n:void 0}}function cs(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Vt&&h.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}var Dd=[],ac=new Map,Uo=new Map,xv=60;function Fd(){if(Ln()&&Ee()){let t=kv();return()=>{t()}}return()=>{}}var Bd={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function kv(){return os(Ov)}var Ov=({metric:e})=>{if(e.value==null)return;let t=_e(e.value);if(t>xv)return;let n=e.entries.find(m=>m.duration===e.value&&Bd[m.name]);if(!n)return;let{interactionId:r}=n,o=Bd[n.name],i=_e(Ee()+n.startTime),s=K(),a=s?Z(s):void 0,c=r!=null?ac.get(r):void 0,u=c?.span||a,d=u?M(u).description:x().getScopeData().transactionName,l=c?.elementName||Re(n.target),f={[H]:"auto.http.browser.inp",[se]:`ui.interaction.${o}`,[Wt]:n.duration},p=Mo({name:l,transaction:d,attributes:f,startTime:i});p&&(p.addEvent("inp",{[hn]:"millisecond",[_n]:e.value}),p.end(i+t))};function Hd(){let e=Object.keys(Bd);rr()&&e.forEach(o=>{D.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){let i=o.target;if(!i)return;let s=Re(i),a=Math.round(o.timeStamp);if(Uo.set(a,s),Uo.size>50){let c=Uo.keys().next().value;c!==void 0&&Uo.delete(c)}}function n(o){let i=Math.round(o.startTime),s=Uo.get(i);if(!s)for(let a=-5;a<=5;a++){let c=Uo.get(i+a);if(c){s=c;break}}return s||"<unknown>"}let r=({entries:o})=>{let i=K(),s=i&&Z(i);o.forEach(a=>{if(!cg(a))return;let c=a.interactionId;if(c==null||ac.has(c))return;let u=a.target?Re(a.target):n(a);if(Dd.length>10){let d=Dd.shift();ac.delete(d)}Dd.push(c),ac.set(c,{span:s,elementName:u})})};Bt("event",r),Bt("first-input",r)}var Mv=40;function Do(e,t=Lo("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw Ud("fetch"),c}finally{n-=s,r--}}return Pi(e,o,Ar(e.bufferSize||Mv))}var b=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Lv(){let e=T();if(!e){b&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){b&&h.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function Pv(){let e=T();if(!e){b&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){b&&h.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}var _g={startProfiler:Lv,stopProfiler:Pv};var Uv=10,Dv=20,Bv=30,Fv=40,Hv=50;function Bo(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var Gv=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,$v=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wv=/\((\S*)(?::(\d+))(?::(\d+))\)/,jv=/at (.+?) ?\(data:(.+?),/,zv=e=>{let t=e.match(jv);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=Gv.exec(e);if(n){let[,o,i,s]=n;return Bo(o,"?",+i,+s)}let r=$v.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=Wv.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=Tg(r[1]||"?",r[2]);return Bo(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Gd=[Bv,zv],qv=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yv=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Vv=e=>{let t=qv.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=Yv.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=Tg(o,r),Bo(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},$d=[Hv,Vv],Jv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Kv=e=>{let t=Jv.exec(e);return t?Bo(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},gg=[Fv,Kv],Xv=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Qv=e=>{let t=Xv.exec(e);return t?Bo(t[2],t[3]||"?",+t[1]):void 0},Sg=[Uv,Qv],Zv=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,eN=e=>{let t=Zv.exec(e);return t?Bo(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},Eg=[Dv,eN],Wd=[Gd,$d],cc=ws(...Wd),Tg=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function yg(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:He(r)}},i=tN(e);return Oe(o,[i])}function tN(e){return[{type:"user_report"},e]}var uc=1024,nN="Breadcrumbs",rN=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:nN,setup(n){t.console&&Nr(sN(n)),t.dom&&as(iN(n,t.dom)),t.xhr&&Gr(aN(n)),t.fetch&&Or(cN(n)),t.history&&Pn(uN(n)),t.sentry&&n.on("beforeSendEvent",oN(n))}}}),lc=rN;function oN(e){return function(n){T()===e&&dt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:mn(n)},{event:n})}}function iN(e,t){return function(r){if(T()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>uc&&(b&&h.warn(`\`dom.maxStringLength\` cannot exceed ${uc}, but a value of ${a} was configured. Sentry will use ${uc} instead.`),a=uc),typeof s=="string"&&(s=[s]);try{let u=r.event,d=lN(u)?u.target:u;o=Re(d,{keyAttrs:s,maxStringLength:a}),i=ai(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),dt(c,{event:r.event,name:r.name,global:r.global})}}function sN(e){return function(n){if(T()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Kn(n.level),message:_r(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${_r(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;dt(r,{input:n.args,level:n.level})}}function aN(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[ft];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f={category:"xhr",data:d,type:"http",level:wa(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),dt(f,l)}}function cN(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),dt(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:wa(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),dt(c,a)}}}function uN(e){return function(n){if(T()!==e)return;let r=n.from,o=n.to,i=on(w.location.href),s=r?on(r):void 0,a=on(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),dt({category:"navigation",data:{from:r,to:o}})}}function lN(e){return!!e&&!!e.target}var dN=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],fN="BrowserApiErrors",pN=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:fN,setupOnce(){t.setTimeout&&ge(w,"setTimeout",Ig),t.setInterval&&ge(w,"setInterval",Ig),t.requestAnimationFrame&&ge(w,"requestAnimationFrame",mN),t.XMLHttpRequest&&"XMLHttpRequest"in w&&ge(XMLHttpRequest.prototype,"send",hN);let n=t.eventTarget;n&&(Array.isArray(n)?n:dN).forEach(o=>_N(o,t))}}}),dc=pN;function Ig(e){return function(...t){let n=t[0];return t[0]=Ur(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${gt(e)}`}}),e.apply(this,t)}}function mN(e){return function(t){return e.apply(this,[Ur(t,{mechanism:{data:{handler:gt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function hN(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ge(n,o,function(i){let s={mechanism:{data:{handler:gt(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=pr(i);return a&&(s.mechanism.data.handler=gt(a)),Ur(i,s)})}),e.apply(this,t)}}function _N(e,t){let r=w[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(ge(r,"addEventListener",function(o){return function(i,s,a){try{gN(s)&&(s.handleEvent=Ur(s.handleEvent,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&SN(this,i,s),o.apply(this,[i,Ur(s,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),ge(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function gN(e){return typeof e.handleEvent=="function"}function SN(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var fc=()=>({name:"BrowserSession",setupOnce(){if(typeof w.document>"u"){b&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}so({ignoreDuration:!0}),ao(),Pn(({from:e,to:t})=>{e!==void 0&&e!==t&&(so({ignoreDuration:!0}),ao())})}});var EN="GlobalHandlers",TN=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:EN,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(yN(n),bg("onerror")),t.onunhandledrejection&&(IN(n),bg("onunhandledrejection"))}}}),pc=TN;function yN(e){ni(t=>{let{stackParser:n,attachStacktrace:r}=Ag();if(T()!==e||_d())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=bN(Co(n,c||o,void 0,r,!1),i,s,a);u.level="error",rn(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function IN(e){ri(t=>{let{stackParser:n,attachStacktrace:r}=Ag();if(T()!==e||_d())return;let o=jd(t),i=at(o)?zd(o):Co(n,o,void 0,r,!0);i.level="error",rn(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function jd(e){if(at(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function zd(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function bN(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=AN(t)??ct();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function bg(e){b&&h.log(`Global Handler attached: ${e}`)}function Ag(){return T()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function AN(e){if(!(!Fe(e)||e.length===0))return e.startsWith("data:")?`<${jt(e,!1)}>`:e}var mc=()=>({name:"HttpContext",preprocessEvent(e){if(!w.navigator&&!w.location&&!w.document)return;let t=ns(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var RN="cause",vN=5,NN="LinkedErrors",CN=((e={})=>{let t=e.limit||vN,n=e.key||RN;return{name:NN,preprocessEvent(r,o,i){let s=i.getOptions();hl(No,s.stackParser,n,t,r,o)}}}),hc=CN;var wN="SpotlightBrowser",xN=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:wN,setup:()=>{b&&h.log("Using Sidecar URL",t)},processEvent:n=>ON(n)?null:n,afterAllSetup:n=>{kN(n,t)}}});function kN(e,t){let n=Lo("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Wn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var Rg=xN;function ON(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function vg(){return MN()?(b&&Ve(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function MN(){if(typeof w.window>"u")return!1;let e=w;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=ct(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(w===w.top&&r.some(i=>n.startsWith(`${i}://`)))}function qd(e){return[Hi(),Fi(),Rl(),dc(),lc(),pc(),hc(),Gi(),mc(),fc()]}function Ng(e={}){let t=!e.skipBrowserExtensionCheck&&vg(),n=e.defaultIntegrations==null?qd():e.defaultIntegrations,r={...e,enabled:t?!1:e.enabled,stackParser:ou(e.stackParser||cc),integrations:Ju({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||Do};return ol(wo,r)}function Cg(){}function wg(e){e()}function xg(e={}){let t=w.document,n=t?.head||t?.body;if(!n){b&&h.error("[showReportDialog] Global document not defined");return}let r=x(),i=T()?.getDsn();if(!i){b&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Ci()},a=w.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=Yu(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{w.removeEventListener("message",d)}};w.addEventListener("message",d)}n.appendChild(a)}var LN=v,PN="ReportingObserver",kg=new WeakMap,UN=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(kg.has(T()))for(let o of r)De(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}vi(`${s}: ${a}`)})}return{name:PN,setupOnce(){if(!Kl())return;new LN.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){kg.set(r,!0)}}}),Og=UN;var DN="HttpClient",BN=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:DN,setup(n){qN(n,t),YN(n,t)}}}),Lg=BN;function FN(e,t,n,r,o){if(Ug(e,n.status,n.url)){let i=VN(t,r),s,a,c,u;Bg()&&([s,c]=Mg("Cookie",i),[a,u]=Mg("Set-Cookie",n));let d=Dg({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});rn(d)}}function Mg(e,t){let n=$N(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=Pg(o))}catch{}return[n,r]}function HN(e,t,n,r,o){if(Ug(e,t.status,t.responseURL)){let i,s,a;if(Bg()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=Pg(u))}catch{}try{a=WN(t)}catch{}i=r}let c=Dg({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});rn(c)}}function GN(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Pg(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function $N(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function WN(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function jN(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function zN(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function qN(e,t){Xi()&&Or(n=>{if(T()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&FN(t,a,r,c,i||s)},!1)}function YN(e,t){"XMLHttpRequest"in v&&Gr(n=>{if(T()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[ft];if(!s)return;let{method:a,request_headers:c}=s;try{HN(t,i,a,c,r||o)}catch(u){b&&h.warn("Error while extracting response event form XHR response",u)}})}function Ug(e,t,n){return zN(e.failedRequestStatusCodes,t)&&jN(e.failedRequestTargets,n)&&!Bi(n,T())}function Dg(e){let t=T(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:GN(e.responseHeaders)}}};return Qe(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function VN(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Bg(){let e=T();return e?!!e.getOptions().sendDefaultPii:!1}var Yd=v,JN=7,KN="ContextLines",XN=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:JN;return{name:KN,processEvent(n){return QN(n,t)}}}),Fg=XN;function QN(e,t){let n=Yd.document,r=Yd.location&&Di(Yd.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>ZN(u,s,r,t)))}),e}function ZN(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||mu(t,e,r),e}var eC="GraphQLClient",tC=(e=>({name:eC,setup(t){nC(t,e),rC(t,e)}}));function nC(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=M(n).data||{};if(!(i[se]==="http.client"))return;let c=i[Eu]||i["http.url"],u=i[Su]||i["http.method"];if(!Fe(c)||!Fe(u))return;let{endpoints:d}=t,l=je(c,d),f=Gg(r);if(l&&f){let p=$g(f);if(p){let m=Hg(p);n.updateName(`${u} ${c} (${m})`),gc(p)&&n.setAttribute("graphql.document",p.query),Sc(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function rC(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,f=je(d,l),p=Gg(r);if(f&&s&&p){let m=$g(p);if(!s.graphql&&m){let _=Hg(m);s["graphql.operation"]=_,gc(m)&&(s["graphql.document"]=m.query),Sc(m)&&(s["graphql.persisted_query.hash.sha256"]=m.extensions.persistedQuery.sha256Hash,s["graphql.persisted_query.version"]=m.extensions.persistedQuery.version)}}}})}function Hg(e){if(Sc(e))return`persisted ${e.operationName}`;if(gc(e)){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=oC(t);return r?`${o} ${r}`:`${o}`}return"unknown"}function Gg(e){let t="xhr"in e,n;if(t){let r=e.xhr[ft];n=r&&$r(r.body)[0]}else{let r=Po(e.input);n=$r(r)[0]}return n}function oC(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function _c(e){return typeof e=="object"&&e!==null}function gc(e){return _c(e)&&typeof e.query=="string"}function Sc(e){return _c(e)&&typeof e.operationName=="string"&&_c(e.extensions)&&_c(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function $g(e){try{let t=JSON.parse(e);return gc(t)||Sc(t)?t:void 0}catch{return}}var Wg=tC;var ye=v,bf="sentryReplaySession",iC="replay_event",Af="Unable to send Replay",sC=3e5,aC=9e5,cC=5e3,uC=5500,lC=6e4,dC=5e3,fC=3,jg=15e4,Ec=5e3,pC=3e3,mC=300,Rf=2e7,hC=4999,_C=5e4,zg=36e5,gC=Object.defineProperty,SC=(e,t,n)=>t in e?gC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qg=(e,t,n)=>SC(e,typeof t!="symbol"?t+"":t,n),Ue=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ue||{});function EC(e){return e.nodeType===e.ELEMENT_NODE}function ds(e){return e?.host?.shadowRoot===e}function fs(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function TC(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function yC(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Ac(e){try{let t=e.rules||e.cssRules;return t?TC(Array.from(t,hS).join("")):null}catch{return null}}function IC(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function hS(e){let t;if(AC(e))try{t=Ac(e.styleSheet)||yC(e)}catch{}else if(RC(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=IC(e)),r&&(n=bC(n)),r||o)return n}return t||e.cssText}function bC(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function AC(e){return"styleSheet"in e}function RC(e){return"selectorText"in e}var Rc=class{constructor(){qg(this,"idNodeMap",new Map),qg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function vC(){return new Rc}function Dc({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function ms({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function qo(e){return e.toLowerCase()}function Zd(e){return e.toUpperCase()}var Yg="__rrweb_original__";function NC(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=Yg in i?i[Yg]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function vf(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?qo(t):null}function vc(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function _S(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var Vg={};function gS(e){let t=Vg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Vg[e]=r.bind(window)}function ef(...e){return gS("setTimeout")(...e)}function SS(...e){return gS("clearTimeout")(...e)}function ES(e){try{return e.contentDocument}catch{}}var CC=1,wC=new RegExp("[^a-z0-9-_:]"),hs=-2;function Nf(){return CC++}function xC(e){if(e instanceof HTMLFormElement)return"form";let t=qo(e.tagName);return wC.test(t)?"div":t}function kC(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Fo,Jg,OC=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,MC=/^(?:[a-z+]+:)?\/\//i,LC=/^www\..*/i,PC=/^(data:)([^,]*),(.*)/i;function UC(e,t){if(!e||t.size===0)return e;try{let n=e.split(";"),r=[];for(let o of n){if(o=o.trim(),!o)continue;let i=o.indexOf(":");if(i===-1){r.push(o);continue}let s=o.slice(0,i).trim();t.has(s)||r.push(o)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function Nc(e,t){return(e||"").replace(OC,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(MC.test(c)||LC.test(c))return`url(${u}${c}${u})`;if(PC.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${kC(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}var DC=/^[^ \t\n\r\u000c]+/,BC=/^[, \t\n\r\u000c]+/;function FC(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(BC),!(n>=t.length);){let i=r(DC);if(i.slice(-1)===",")i=$o(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=$o(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var Kg=new WeakMap;function $o(e,t){return!t||t.trim()===""?t:Bc(e,t)}function HC(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Bc(e,t){let n=Kg.get(e);if(n||(n=e.createElement("a"),Kg.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function TS(e,t,n,r,o,i,s){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return $o(e,r);if(n==="xlink:href"&&r[0]!=="#")return $o(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return $o(e,r);if(n==="srcset")return FC(e,r);if(n==="style"){let a=Nc(r,Bc(e));return s&&s.size>0&&(a=UC(a,s)),a}else if(t==="object"&&n==="data")return $o(e,r);return typeof i=="function"?i(n,r,o):r}function yS(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function GC(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function $C(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Wr(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Wr(e.parentNode,t,n,r+1)}function Wo(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if($C(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Yo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Wr(s,Wo(r,o)),c<0)return!0;a=Wr(s,Wo(t,n),c>=0?c:1/0)}else{if(a=Wr(s,Wo(t,n)),a<0)return!1;c=Wr(s,Wo(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function WC(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=ef(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{SS(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return ef(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function jC(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=ef(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{SS(i),r=!0,t()})}function zC(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:m={},maskTextFn:_,maskInputFn:g,dataURLOptions:S={},inlineImages:I,recordCanvas:U,keepIframeSrcFn:k,newlyAddedElement:$=!1,ignoreCSSAttributes:B}=t,E=qC(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ue.Document,childNodes:[],compatMode:e.compatMode}:{type:Ue.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ue.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return VC(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:m,maskInputFn:g,dataURLOptions:S,inlineImages:I,recordCanvas:U,keepIframeSrcFn:k,newlyAddedElement:$,rootId:E,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:B});case e.TEXT_NODE:return YC(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:_,maskInputOptions:m,maskInputFn:g,rootId:E});case e.CDATA_SECTION_NODE:return{type:Ue.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Ue.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function qC(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function YC(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,f=e.textContent,p=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,_=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=Ac(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}f=Nc(f,Bc(t.doc))}m&&(f="SCRIPT_PLACEHOLDER");let g=Yo(e,r,i,o,s,n);if(!p&&!m&&!_&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),_&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){let S=Dc({type:null,tagName:l,maskInputOptions:c});f=ms({isMasked:Yo(e,r,i,o,s,S),element:e,value:f,maskInputFn:u})}return{type:Ue.Text,textContent:f||"",isStyle:p,rootId:d}}function VC(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:_,maskTextClass:g,unmaskTextClass:S,maskTextSelector:I,unmaskTextSelector:U,ignoreCSSAttributes:k}=t,$=GC(e,r,o,i),B=xC(e),E={},O=e.attributes.length;for(let A=0;A<O;A++){let L=e.attributes[A];L.name&&!yS(B,L.name,L.value)&&(E[L.name]=TS(n,B,qo(L.name),L.value,e,c,k))}if(B==="link"&&s){let A=Array.from(n.styleSheets).find(C=>C.href===e.href),L=null;A&&(L=Ac(A)),L&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=Nc(L,A.href))}if(B==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let A=Ac(e.sheet);A&&(E._cssText=Nc(A,Bc(n)))}if(B==="input"||B==="textarea"||B==="select"||B==="option"){let A=e,L=vf(A),C=vc(A,Zd(B),L),P=A.checked;if(L!=="submit"&&L!=="button"&&C){let F=Yo(A,g,I,S,U,Dc({type:L,tagName:Zd(B),maskInputOptions:a}));E.value=ms({isMasked:F,element:A,value:C,maskInputFn:u})}P&&(E.checked=P)}if(B==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),B==="canvas"&&f){if(e.__context==="2d")NC(e)||(E.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let A=e.toDataURL(d.type,d.quality),L=n.createElement("canvas");L.width=e.width,L.height=e.height;let C=L.toDataURL(d.type,d.quality);A!==C&&(E.rr_dataURL=A)}}if(B==="img"&&l){Fo||(Fo=n.createElement("canvas"),Jg=Fo.getContext("2d"));let A=e,L=A.currentSrc||A.getAttribute("src")||"<unknown-src>",C=A.crossOrigin,P=()=>{A.removeEventListener("load",P);try{Fo.width=A.naturalWidth,Fo.height=A.naturalHeight,Jg.drawImage(A,0,0),E.rr_dataURL=Fo.toDataURL(d.type,d.quality)}catch(F){if(A.crossOrigin!=="anonymous"){A.crossOrigin="anonymous",A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P);return}else console.warn(`Cannot inline img src=${L}! Error: ${F}`)}A.crossOrigin==="anonymous"&&(C?E.crossOrigin=C:A.removeAttribute("crossorigin"))};A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P)}if((B==="audio"||B==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),$){let{width:A,height:L}=e.getBoundingClientRect();E={class:E.class,rr_width:`${A}px`,rr_height:`${L}px`}}B==="iframe"&&!p(E.src)&&(!$&&!ES(e)&&(E.rr_src=E.src),delete E.src);let G;try{customElements.get(B)&&(G=!0)}catch{}return{type:Ue.Element,tagName:B,attributes:E,childNodes:[],isSVG:HC(e)||void 0,needBlock:$,rootId:_,isCustom:G}}function Te(e){return e==null?"":e.toLowerCase()}function JC(e,t){if(t.comment&&e.type===Ue.Comment)return!0;if(e.type===Ue.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&_S(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Te(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Te(e.attributes.name)==="application-name"||Te(e.attributes.rel)==="icon"||Te(e.attributes.rel)==="apple-touch-icon"||Te(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Te(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Te(e.attributes.property).match(/^(og|twitter|fb):/)||Te(e.attributes.name).match(/^(og|twitter):/)||Te(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Te(e.attributes.name)==="robots"||Te(e.attributes.name)==="googlebot"||Te(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Te(e.attributes.name)==="author"||Te(e.attributes.name)==="generator"||Te(e.attributes.name)==="framework"||Te(e.attributes.name)==="publisher"||Te(e.attributes.name)==="progid"||Te(e.attributes.property).match(/^article:/)||Te(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Te(e.attributes.name)==="google-site-verification"||Te(e.attributes.name)==="yandex-verification"||Te(e.attributes.name)==="csrf-token"||Te(e.attributes.name)==="p:domain_verify"||Te(e.attributes.name)==="verify-v1"||Te(e.attributes.name)==="verification"||Te(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function jo(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:m={},maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:U={},inlineImages:k=!1,recordCanvas:$=!1,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:O=5e3,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:L=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:P=!1,ignoreCSSAttributes:F}=t,{preserveWhiteSpace:re=!0}=t,ee=zC(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,dataURLOptions:U,inlineImages:k,recordCanvas:$,keepIframeSrcFn:C,newlyAddedElement:P,ignoreCSSAttributes:F});if(!ee)return console.warn(e,"not serialized"),null;let ae;r.hasNode(e)?ae=r.getId(e):JC(ee,I)||!re&&ee.type===Ue.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?ae=hs:ae=Nf();let R=Object.assign(ee,{id:ae});if(r.add(e,R),ae===hs)return null;B&&B(e);let q=!f;if(R.type===Ue.Element){q=q&&!R.needBlock;let N=e.shadowRoot;N&&fs(N)&&(R.isShadowHost=!0)}if((R.type===Ue.Document||R.type===Ue.Element)&&q){I.headWhitespace&&R.type===Ue.Element&&R.tagName==="head"&&(re=!1);let N={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:U,inlineImages:k,recordCanvas:$,preserveWhiteSpace:re,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:O,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:F},Y=e.childNodes?Array.from(e.childNodes):[];for(let de of Y){let ce=jo(de,N);ce&&R.childNodes.push(ce)}if(EC(e)&&e.shadowRoot)for(let de of Array.from(e.shadowRoot.childNodes)){let ce=jo(de,N);ce&&(fs(e.shadowRoot)&&(ce.isShadow=!0),R.childNodes.push(ce))}}if(e.parentNode&&ds(e.parentNode)&&fs(e.parentNode)&&(R.isShadow=!0),R.type===Ue.Element&&R.tagName==="iframe"&&!R.needBlock&&WC(e,()=>{let N=ES(e);if(N&&E){let Y=jo(N,{doc:N,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:U,inlineImages:k,recordCanvas:$,preserveWhiteSpace:re,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:O,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:F});Y&&E(e,Y)}},O),R.type===Ue.Element&&R.tagName==="img"&&!e.complete&&R.needBlock){let N=e,Y=()=>{if(N.isConnected&&!N.complete&&G)try{let de=N.getBoundingClientRect();de.width>0&&de.height>0&&G(N,R,de)}catch{}N.removeEventListener("load",Y)};N.isConnected&&N.addEventListener("load",Y)}return R.type===Ue.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&_S(R.attributes.href)==="css")&&jC(e,()=>{if(A){let N=jo(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:U,inlineImages:k,recordCanvas:$,preserveWhiteSpace:re,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:O,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:F});N&&A(e,N)}},L),R.type===Ue.Element&&delete R.needBlock,R}function KC(e,t){let{mirror:n=new Rc,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:m=!1,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOM:I=!1,dataURLOptions:U,preserveWhiteSpace:k,onSerialize:$,onIframeLoad:B,iframeLoadTimeout:E,onBlockedImageLoad:O,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:C=new Set([])}=t||{};return jo(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I===!0||I==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:I==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:I===!1?{}:I,dataURLOptions:U,inlineImages:f,recordCanvas:p,preserveWhiteSpace:k,onSerialize:$,onIframeLoad:B,iframeLoadTimeout:E,onBlockedImageLoad:O,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:L,newlyAddedElement:!1,ignoreCSSAttributes:C})}function mt(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var Ho=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Xg={map:{},getId(){return console.error(Ho),-1},getNode(){return console.error(Ho),null},removeNodeFromMap(){console.error(Ho)},has(){return console.error(Ho),!1},reset(){console.error(Ho)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Xg=new Proxy(Xg,{get(e,t,n){return t==="map"&&console.error(Ho),Reflect.get(e,t,n)}}));function _s(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(n0(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Fc(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function IS(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){Fc(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>IS(e,t,i||{},!0)}function Cf(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Cc=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Cc=()=>new Date().getTime());function bS(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function AS(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function RS(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function vS(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ft(e,t,n,r,o){if(!e)return!1;let i=vS(e);if(!i)return!1;let s=Wo(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Wr(i,s),c=-1;return a<0?!1:(r&&(c=Wr(i,Wo(null,r))),a>-1&&c<0?!0:a<c)}function XC(e,t){return t.getId(e)!==-1}function Vd(e,t){return t.getId(e)===hs}function NS(e,t){if(ds(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?NS(e.parentNode,t):!0:!0}function tf(e){return!!e.changedTouches}function QC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function CS(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function wS(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function nf(e){return!!e?.shadowRoot}var rf=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function xS(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function ZC(e){let t=e,n;for(;n=xS(t);)t=n;return t}function e0(e){let t=e.ownerDocument;if(!t)return!1;let n=ZC(e);return t.contains(n)}function kS(e){let t=e.ownerDocument;return t?t.contains(e)||e0(e):!1}var Qg={};function wf(e){let t=Qg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Qg[e]=r.bind(window)}function t0(...e){return wf("requestAnimationFrame")(...e)}function Fc(...e){return wf("setTimeout")(...e)}function n0(...e){return wf("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),z=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(z||{}),pt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(pt||{}),Un=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Un||{}),Go=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Go||{});function xf(e){try{return e.contentDocument}catch{}}function r0(e){try{return e.contentWindow}catch{}}function Zg(e){return"__ln"in e}var of=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Zg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Zg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},eS=(e,t)=>`${e}@${t}`,sf=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new of,o=c=>{let u=c,d=hs;for(;d===hs;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!kS(c))return;let u=ds(c.parentNode)?this.mirror.getId(xS(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=jo(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{CS(f,this.mirror)&&!Ft(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),wS(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),nf(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ft(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:m,height:_})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${m}px`,height:`${_}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)tS(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!nS(this.droppedSet,c)&&!tS(this.removes,c,this.mirror)||nS(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=p.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Vd(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Yo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,vS(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=vf(n),a=n.tagName;o=vc(n,a,s);let c=Dc({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Yo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=ms({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!xf(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!yS(n.tagName,r)&&(i.attributes[r]=TS(this.doc,qo(n.tagName),qo(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=ds(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Vd(n,this.mirror)||!XC(n,this.mirror)||(this.addedSet.has(n)?(af(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||NS(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[eS(r,o)]?af(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:ds(t.target)&&fs(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Vd(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[eS(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ft(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),nf(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function af(e,t){e.delete(t),t.childNodes?.forEach(n=>af(e,n))}function tS(e,t,n){return e.length===0?!1:o0(e,t,n)}function o0(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function nS(e,t){return e.size===0?!1:OS(e,t)}function OS(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:OS(e,n):!1}var ps;function i0(e){ps=e}function s0(){ps=void 0}var oe=e=>ps?(...n)=>{try{return e(...n)}catch(r){if(ps&&ps(r)===!0)return()=>{};throw r}}:e,zo=[];function ys(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function MS(e,t){let n=new sf;zo.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(oe(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function a0({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=_s(oe(l=>{let f=Date.now()-a;e(s.map(p=>(p.timeOffset-=f,p)),l),s=[],a=null}),i),u=oe(_s(oe(l=>{let f=ys(l),{clientX:p,clientY:m}=tf(l)?l.changedTouches[0]:l;a||(a=Cc()),s.push({x:p,y:m,id:r.getId(f),timeOffset:Cc()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?z.Drag:l instanceof MouseEvent?z.MouseMove:z.TouchMove)}),o,{trailing:!1})),d=[mt("mousemove",u,n),mt("touchmove",u,n),mt("drag",u,n)];return oe(()=>{d.forEach(l=>l())})}function c0({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>f=>{let p=ys(f);if(Ft(p,r,o,i,!0))return;let m=null,_=l;if("pointerType"in f){switch(f.pointerType){case"mouse":m=Un.Mouse;break;case"touch":m=Un.Touch;break;case"pen":m=Un.Pen;break}m===Un.Touch?pt[l]===pt.MouseDown?_="TouchStart":pt[l]===pt.MouseUp&&(_="TouchEnd"):Un.Pen}else tf(f)&&(m=Un.Touch);m!==null?(u=m,(_.startsWith("Touch")&&m===Un.Touch||_.startsWith("Mouse")&&m===Un.Mouse)&&(m=null)):pt[l]===pt.Click&&(m=u,u=null);let g=tf(f)?f.changedTouches[0]:f;if(!g)return;let S=n.getId(p),{clientX:I,clientY:U}=g;oe(e)({type:pt[_],id:S,x:I,y:U,...m!==null&&{pointerType:m}})};return Object.keys(pt).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=qo(l),p=d(l);if(window.PointerEvent)switch(pt[l]){case pt.MouseDown:case pt.MouseUp:f=f.replace("mouse","pointer");break;case pt.TouchStart:case pt.TouchEnd:return}c.push(mt(f,p,t))}),oe(()=>{c.forEach(l=>l())})}function LS({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=oe(_s(oe(c=>{let u=ys(c);if(!u||Ft(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=bS(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return mt("scroll",a,t)}function u0({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=oe(_s(oe(()=>{let i=AS(),s=RS();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return mt("resize",o,t)}var l0=["INPUT","TEXTAREA","SELECT"],rS=new WeakMap;function d0({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:_}){function g(E){let O=ys(E),G=E.isTrusted,A=O&&Zd(O.tagName);if(A==="OPTION"&&(O=O.parentElement),!O||!A||l0.indexOf(A)<0||Ft(O,r,o,i,!0))return;let L=O;if(L.classList.contains(s)||a&&L.matches(a))return;let C=vf(O),P=vc(L,A,C),F=!1,re=Dc({maskInputOptions:c,tagName:A,type:C}),ee=Yo(O,f,m,p,_,re);(C==="radio"||C==="checkbox")&&(F=O.checked),P=ms({isMasked:ee,element:O,value:P,maskInputFn:u}),S(O,l?{text:P,isChecked:F,userTriggered:G}:{text:P,isChecked:F});let ae=O.name;C==="radio"&&ae&&F&&t.querySelectorAll(`input[type="radio"][name="${ae}"]`).forEach(R=>{if(R!==O){let q=ms({isMasked:ee,element:R,value:vc(R,A,C),maskInputFn:u});S(R,l?{text:q,isChecked:!F,userTriggered:!1}:{text:q,isChecked:!F})}})}function S(E,O){let G=rS.get(E);if(!G||G.text!==O.text||G.isChecked!==O.isChecked){rS.set(E,O);let A=n.getId(E);oe(e)({...O,id:A})}}let U=(d.input==="last"?["change"]:["input","change"]).map(E=>mt(E,oe(g),t)),k=t.defaultView;if(!k)return()=>{U.forEach(E=>E())};let $=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),B=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return $&&$.set&&U.push(...B.map(E=>IS(E[0],E[1],{set(){oe(g)({target:this,isTrusted:!1})}},!1,k))),oe(()=>{U.forEach(E=>E())})}function wc(e){let t=[];function n(r,o){if(Tc("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Tc("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Tc("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Tc("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function ar(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function f0({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:oe((d,l,f)=>{let[p,m]=f,{id:_,styleId:g}=ar(l,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,adds:[{rule:p,index:m}]}),d.apply(l,f)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=ar(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,removes:[{index:p}]}),d.apply(l,f)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=ar(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=ar(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replaceSync:p}),d.apply(l,f)})}));let c={};yc("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(yc("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),yc("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),yc("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:oe((f,p,m)=>{let[_,g]=m,{id:S,styleId:I}=ar(p.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||I&&I!==-1)&&e({id:S,styleId:I,adds:[{rule:_,index:[...wc(p),g||0]}]}),f.apply(p,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:oe((f,p,m)=>{let[_]=m,{id:g,styleId:S}=ar(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||S&&S!==-1)&&e({id:g,styleId:S,removes:[{index:[...wc(p),_]}]}),f.apply(p,m)})})}),oe(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function PS({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),oe(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function p0({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:oe((a,c,u)=>{let[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);let{id:p,styleId:m}=ar(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:d,value:l,priority:f},index:wc(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:oe((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:f}=ar(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:wc(c.parentRule)}),a.apply(c,u)})}),oe(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function m0({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=oe(u=>_s(oe(d=>{let l=ys(d);if(!l||Ft(l,t,n,r,!0))return;let{currentTime:f,volume:p,muted:m,playbackRate:_}=l;e({type:u,id:o.getId(l),currentTime:f,volume:p,muted:m,playbackRate:_})}),i.media||500)),c=[mt("play",a(Go.Play),s),mt("pause",a(Go.Pause),s),mt("seeked",a(Go.Seeked),s),mt("volumechange",a(Go.VolumeChange),s),mt("ratechange",a(Go.RateChange),s)];return oe(()=>{c.forEach(u=>u())})}function h0({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=Cf(t.fonts,"add",function(a){return function(c){return Fc(oe(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),oe(()=>{r.forEach(a=>a())})}function _0(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=oe(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){let p=u.getRangeAt(f),{startContainer:m,startOffset:_,endContainer:g,endOffset:S}=p;Ft(m,r,o,i,!0)||Ft(g,r,o,i,!0)||d.push({start:n.getId(m),startOffset:_,end:n.getId(g),endOffset:S})}s({ranges:d})});return c(),mt("selectionchange",c)}function g0({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Cf(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function S0(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=MS(e,e.doc));let o=a0(e),i=c0(e),s=LS(e),a=u0(e,{win:n}),c=d0(e),u=m0(e),d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=f0(e,{win:n}),l=PS(e,e.doc),f=p0(e,{win:n}),e.collectFonts&&(p=h0(e)));let m=_0(e),_=g0(e),g=[];for(let S of e.plugins)g.push(S.observer(S.callback,n,S.options));return oe(()=>{zo.forEach(S=>S.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),f(),p(),m(),_(),g.forEach(S=>S())})}function Tc(e){return typeof window[e]<"u"}function yc(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var gs=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},cf=class{constructor(){this.crossOriginIframeMirror=new gs(Nf),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},uf=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new gs(Nf),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new gs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=xf(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:z.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case z.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.Drag:case z.TouchMove:case z.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.ViewportResize:return!1;case z.MediaInteraction:case z.MouseInteraction:case z.Scroll:case z.CanvasMutation:case z.Input:return this.replaceIds(n.data,t,["id"]),n;case z.StyleSheetRule:case z.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case z.Font:return n;case z.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case z.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Ue.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},lf=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},df=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!fs(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=MS({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(LS({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Fc(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(PS({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=xf(t),r=r0(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Cf(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&kS(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},oS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(us=0;us<oS.length;us++)E0[oS.charCodeAt(us)]=us;var us,xc=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},ff=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new rf,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:hS(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},pf=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,t0(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Ne,kc;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var ln=vC();function Dn(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,maskAllInputs:_,maskInputOptions:g,slimDOMOptions:S,maskAttributeFn:I,maskInputFn:U,maskTextFn:k,maxCanvasSize:$=null,packFn:B,sampling:E={},dataURLOptions:O={},mousemoveWait:G,recordDOM:A=!0,recordCanvas:L=!1,recordCrossOriginIframes:C=!1,recordAfter:P=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:re=!1,inlineImages:ee=!1,plugins:ae,keepIframeSrcFn:R=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:N,onMutation:Y,getCanvasManager:de}=e;i0(N);let ce=C?window.parent===window:!0,Ce=!1;if(!ce)try{window.parent.document&&(Ce=!1)}catch{Ce=!0}if(ce&&!t)throw new Error("emit function is required");if(!ce&&!Ce)return()=>{};G!==void 0&&E.mousemove===void 0&&(E.mousemove=G),ln.reset();let ot=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Bn=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};QC();let it,ht=0,dn=te=>{for(let vt of ae||[])vt.eventProcessor&&(te=vt.eventProcessor(te));return B&&!Ce&&(te=B(te)),te};Ne=(te,vt)=>{let ne=te;if(ne.timestamp=Cc(),zo[0]?.isFrozen()&&ne.type!==J.FullSnapshot&&!(ne.type===J.IncrementalSnapshot&&ne.data.source===z.Mutation)&&zo.forEach(We=>We.unfreeze()),ce)t?.(dn(ne),vt);else if(Ce){let We={type:"rrweb",event:dn(ne),origin:window.location.origin,isCheckout:vt};window.parent.postMessage(We,"*")}if(ne.type===J.FullSnapshot)it=ne,ht=0;else if(ne.type===J.IncrementalSnapshot){if(ne.data.source===z.Mutation&&ne.data.isAttachIframe)return;ht++;let We=r&&ht>=r,ue=n&&it&&ne.timestamp-it.timestamp>n;(We||ue)&&fn(!0)}};let Fn=te=>{Ne({type:J.IncrementalSnapshot,data:{source:z.Mutation,...te}})},Zo=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.Scroll,...te}}),Ns=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...te}}),ei=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.AdoptedStyleSheet,...te}}),fe=new ff({mutationCb:Fn,adoptedStyleSheetCb:ei}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new cf:new uf({mirror:ln,mutationCb:Fn,stylesheetManager:fe,recordCrossOriginIframes:C,wrappedEmit:Ne});for(let te of ae||[])te.getMirror&&te.getMirror({nodeMirror:ln,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});let Ht=new pf,$e=y0(de,{mirror:ln,win:window,mutationCb:te=>Ne({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...te}}),recordCanvas:L,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:$,sampling:E.canvas,dataURLOptions:O,errorHandler:N}),Ye=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new lf:new df({mutationCb:Fn,scrollCb:Zo,bypassOptions:{onMutation:Y,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:ot,dataURLOptions:O,maskAttributeFn:I,maskTextFn:k,maskInputFn:U,recordCanvas:L,inlineImages:ee,sampling:E,slimDOMOptions:Bn,iframeManager:be,stylesheetManager:fe,canvasManager:$e,keepIframeSrcFn:R,processedNodeManager:Ht,ignoreCSSAttributes:q},mirror:ln}),fn=(te=!1)=>{if(!A)return;Ne({type:J.Meta,data:{href:window.location.href,width:RS(),height:AS()}},te),fe.reset(),Ye.init(),zo.forEach(ne=>ne.lock());let vt=KC(document,{mirror:ln,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskAllInputs:ot,maskAttributeFn:I,maskInputFn:U,maskTextFn:k,slimDOM:Bn,dataURLOptions:O,recordCanvas:L,inlineImages:ee,onSerialize:ne=>{CS(ne,ln)&&be.addIframe(ne),wS(ne,ln)&&fe.trackLinkElement(ne),nf(ne)&&Ye.addShadowRoot(ne.shadowRoot,document)},onIframeLoad:(ne,We)=>{be.attachIframe(ne,We),ne.contentWindow&&$e.addWindow(ne.contentWindow),Ye.observeAttachShadow(ne)},onStylesheetLoad:(ne,We)=>{fe.attachLinkElement(ne,We)},onBlockedImageLoad:(ne,We,{width:ue,height:ti})=>{Fn({adds:[],removes:[],texts:[],attributes:[{id:We.id,attributes:{style:{width:`${ue}px`,height:`${ti}px`}}}]})},keepIframeSrcFn:R,ignoreCSSAttributes:q});if(!vt)return console.warn("Failed to snapshot the document");Ne({type:J.FullSnapshot,data:{node:vt,initialOffset:bS(window)}}),zo.forEach(ne=>ne.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&fe.adoptStyleSheets(document.adoptedStyleSheets,ln.getId(document))};kc=fn;try{let te=[],vt=We=>oe(S0)({onMutation:Y,mutationCb:Fn,mousemoveCb:(ue,ti)=>Ne({type:J.IncrementalSnapshot,data:{source:ti,positions:ue}}),mouseInteractionCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.MouseInteraction,...ue}}),scrollCb:Zo,viewportResizeCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.ViewportResize,...ue}}),inputCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.Input,...ue}}),mediaInteractionCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.MediaInteraction,...ue}}),styleSheetRuleCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.StyleSheetRule,...ue}}),styleDeclarationCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.StyleDeclaration,...ue}}),canvasMutationCb:Ns,fontCb:ue=>Ne({type:J.IncrementalSnapshot,data:{source:z.Font,...ue}}),selectionCb:ue=>{Ne({type:J.IncrementalSnapshot,data:{source:z.Selection,...ue}})},customElementCb:ue=>{Ne({type:J.IncrementalSnapshot,data:{source:z.CustomElement,...ue}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:ot,inlineStylesheet:m,sampling:E,recordDOM:A,recordCanvas:L,inlineImages:ee,userTriggeredOnInput:F,collectFonts:re,doc:We,maskAttributeFn:I,maskInputFn:U,maskTextFn:k,keepIframeSrcFn:R,blockSelector:i,unblockSelector:s,slimDOMOptions:Bn,dataURLOptions:O,mirror:ln,iframeManager:be,stylesheetManager:fe,shadowDomManager:Ye,processedNodeManager:Ht,canvasManager:$e,ignoreCSSAttributes:q,plugins:ae?.filter(ue=>ue.observer)?.map(ue=>({observer:ue.observer,options:ue.options,callback:ti=>Ne({type:J.Plugin,data:{plugin:ue.name,payload:ti}})}))||[]},{});be.addLoadListener(We=>{try{te.push(vt(We.contentDocument))}catch(ue){console.warn(ue)}});let ne=()=>{fn(),te.push(vt(document))};return document.readyState==="interactive"||document.readyState==="complete"?ne():(te.push(mt("DOMContentLoaded",()=>{Ne({type:J.DomContentLoaded,data:{}}),P==="DOMContentLoaded"&&ne()})),te.push(mt("load",()=>{Ne({type:J.Load,data:{}}),P==="load"&&ne()},window))),()=>{te.forEach(We=>We()),Ht.destroy(),kc=void 0,s0()}}catch(te){console.warn(te)}}function T0(e){if(!kc)throw new Error("please take full snapshot after start recording");kc(e)}Dn.mirror=ln;Dn.takeFullSnapshot=T0;function y0(e,t){try{return e?e(t):new xc}catch{return console.warn("Unable to initialize CanvasManager"),new xc}}var iS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(iS||(iS={}));var I0=3,b0=5;function kf(e){return e>9999999999?e:e*1e3}function Jd(e){return e>9999999999?e/1e3:e}function Is(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Be(t,10,1e3)}}),t.category==="console")))}var A0="button,a";function US(e){return e.closest(A0)||e}function DS(e){let t=BS(e);return!t||!(t instanceof Element)?t:US(t)}function BS(e){return R0(e)?e.target:e}function R0(e){return typeof e=="object"&&!!e&&"target"in e}var cr;function v0(e){return cr||(cr=[],N0()),cr.push(e),()=>{let t=cr?cr.indexOf(e):-1;t>-1&&cr.splice(t,1)}}function N0(){ge(ye,"open",function(e){return function(...t){if(cr)try{cr.forEach(n=>n())}catch{}return e.apply(ye,t)}})}var C0=new Set([z.Mutation,z.StyleSheetRule,z.StyleDeclaration,z.AdoptedStyleSheet,z.CanvasMutation,z.Selection,z.MediaInteraction]);function w0(e,t,n){e.handleClick(t,n)}var mf=class{constructor(t,n,r=Is){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=v0(()=>{this._lastMutation=sS()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(k0(n,this._ignoreSelector)||!O0(t))return;let r={timestamp:Jd(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Jd(t)}registerScroll(t=Date.now()){this._lastScroll=Jd(t)}registerClick(t){let n=US(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=sS();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:ye.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:ye.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Hr(()=>this._checkClicks(),1e3)}},x0=["A","BUTTON","INPUT"];function k0(e,t){return!!(!x0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function O0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function sS(){return Date.now()/1e3}function M0(e,t){try{if(!L0(t))return;let{source:n}=t.data;if(C0.has(n)&&e.registerMutation(t.timestamp),n===z.Scroll&&e.registerScroll(t.timestamp),P0(t)){let{type:r,id:o}=t.data,i=Dn.mirror.getNode(o);i instanceof HTMLElement&&r===pt.Click&&e.registerClick(i)}}catch{}}function L0(e){return e.type===I0}function P0(e){return e.data.source===z.MouseInteraction}function An(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Of=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Of||{}),U0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function D0(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(U0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var B0=e=>t=>{if(!e.isEnabled())return;let n=F0(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&w0(e.clickDetector,n,DS(t.event)),Is(e,n)};function FS(e,t){let n=Dn.mirror.getId(e),r=n&&Dn.mirror.getNode(n),o=r&&Dn.mirror.getMeta(r),i=o&&G0(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===Of.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:D0(i.attributes)}}:{}}}function F0(e){let{target:t,message:n}=H0(e);return An({category:`ui.${e.name}`,...FS(t,n)})}function H0(e){let t=e.name==="click",n,r=null;try{r=t?DS(e.event):BS(e.event),n=Re(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function G0(e){return e.type===Of.Element}function $0(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=W0(t);n&&Is(e,n)}function W0(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||j0(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=Re(s,{maxStringLength:200})||"<unknown>",d=FS(s,u);return An({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function j0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var z0={resource:K0,paint:V0,navigation:J0};function Kd(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function q0(e){return e.map(Y0).filter(Boolean)}function Y0(e){let t=z0[e.entryType];return t?t(e):null}function Vo(e){return((Ee()||ye.performance.timeOrigin)+e)/1e3}function V0(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Vo(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function J0(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:m,type:_}=e;return o===0?null:{type:`${t}.${_}`,start:Vo(p),end:Vo(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function K0(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Vo(i),end:Vo(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function X0(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Mf(e,"largest-contentful-paint",n)}function Q0(e){return e.sources!==void 0}function Z0(e){let t=[],n=[];for(let r of e.entries)if(Q0(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=Dn.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return Mf(e,"cumulative-layout-shift",n,t)}function ew(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Mf(e,"interaction-to-next-paint",n)}function Mf(e,t,n,r){let o=e.value,i=e.rating,s=Vo(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>Dn.mirror.getId(a)):void 0,attributions:r}}}function tw(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Bt(o,n))}),r.push(Fr(Kd(X0,e)),Br(Kd(Z0,e)),os(Kd(ew,e))),()=>{r.forEach(o=>o())}}var W=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,nw='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function rw(){let e=new Blob([nw]);return URL.createObjectURL(e)}var aS=["log","warn","error"],bc="[Replay] ";function Xd(e,t="info"){dt({category:"console",data:{logger:"replay"},level:t,message:`${bc}${e}`},{level:t})}function ow(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return W?(aS.forEach(r=>{n[r]=(...o)=>{h[r](bc,...o),t&&Xd(o.join(""),Kn(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(bc,r),e?X(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Xd(r,"error")},n.infoTick=(...r)=>{h.log(bc,...r),t&&setTimeout(()=>Xd(r[0]),0)}):aS.forEach(r=>{n[r]=()=>{}}),n}var j=ow(),Ss=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Rf}.`)}},Oc=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Rf)throw new Ss;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?kf(t):null}},hf=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){W&&j.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){W&&j.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},_f=class{constructor(t){this._worker=new hf(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=kf(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Rf?Promise.reject(new Ss):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{W&&j.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},gf=class{constructor(t){this._fallback=new Oc,this._compression=new _f(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){W&&j.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){W&&j.exception(i,"Failed to add events when switching buffers.")}}};function iw({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=sw(t);if(n)return n}return W&&j.log("Using simple buffer"),new Oc}function sw(e){try{let t=e||aw();if(!t)return;W&&j.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new gf(n)}catch(t){W&&j.exception(t,"Failed to create compression worker")}}function aw(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?rw():""}function Lf(){try{return"sessionStorage"in ye&&!!ye.sessionStorage}catch{return!1}}function cw(e){uw(),e.session=void 0}function uw(){if(Lf())try{ye.sessionStorage.removeItem(bf)}catch{}}function HS(e){return e===void 0?!1:Math.random()<e}function Hc(e){if(Lf())try{ye.sessionStorage.setItem(bf,JSON.stringify(e))}catch{}}function GS(e){let t=Date.now(),n=e.id||le(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a,dirty:c}}function lw(e,t){return HS(e)?"session":t?"buffer":!1}function cS({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=lw(e,t),i=GS({sampled:o,previousSessionId:r});return n&&Hc(i),i}function dw(){if(!Lf())return null;try{let e=ye.sessionStorage.getItem(bf);if(!e)return null;let t=JSON.parse(e);return W&&j.infoTick("Loading existing session"),GS(t)}catch{return null}}function Sf(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function $S(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Sf(e.started,t,r)||Sf(e.lastActivity,n,r)}function WS(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!$S(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Qd({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&dw();return o?WS(o,{sessionIdleExpire:e,maxReplayDuration:t})?(W&&j.infoTick("Session in sessionStorage is expired, creating new one..."),cS(r,{previousSessionId:o.id})):o:(W&&j.infoTick("Creating new session"),cS(r,{previousSessionId:n}))}function fw(e){return e.type===J.Custom}function Pf(e,t,n){return zS(e,t)?(jS(e,t,n),!0):!1}function pw(e,t,n){return zS(e,t)?jS(e,t,n):Promise.resolve(null)}async function jS(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=mw(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof Ss,a=s?"addEventSizeExceeded":"addEvent",c=T();if(c){let u=s?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function zS(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=kf(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(W&&j.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function mw(e,t){try{if(typeof t=="function"&&fw(e))return t(e)}catch(n){return W&&j.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Uf(e){return!e.type}function Ef(e){return e.type==="transaction"}function hw(e){return e.type==="replay_event"}function uS(e){return e.type==="feedback"}function _w(e){return(t,n)=>{if(!e.isEnabled()||!Uf(t)&&!Ef(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(Ef(t)){gw(e,t);return}Sw(e,t)}}}function gw(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Sw(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Hr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function Ew(e){return t=>{!e.isEnabled()||!Uf(t)||Tw(e,t)}}function Tw(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=An({category:"replay.hydrate-error",data:{url:ct()}});Is(e,r)}}function yw(e){let t=T();t&&t.on("beforeAddBreadcrumb",n=>Iw(e,n))}function Iw(e,t){if(!e.isEnabled()||!qS(t))return;let n=bw(t);n&&Is(e,n)}function bw(e){return!qS(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?Aw(e):An(e)}function Aw(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return An(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Ec?(n=!0,`${o.slice(0,Ec)}\u2026`):o;if(typeof o=="object")try{let i=Be(o,7);return JSON.stringify(i).length>Ec?(n=!0,`${JSON.stringify(i,null,2).slice(0,Ec)}\u2026`):i}catch{}return o});return An({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function qS(e){return!!e.category}function Rw(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function YS(){let e=x().getPropagationContext().dsc;e&&delete e.replay_id;let t=K();if(t){let n=ke(t);delete n.replay_id}}function vw(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function Nw(e,t){return e.recordingMode!=="buffer"||t.message===Af||!t.exception||t.type?!1:HS(e.getOptions().errorSampleRate)}function Cw(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(hw(t))return delete t.breadcrumbs,t;if(!Uf(t)&&!Ef(t)&&!uS(t))return t;if(!e.checkAndHandleExpiredSession())return YS(),t;if(uS(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),vw(e,t),t;if(Rw(t,n)&&!e.getOptions()._experiments.captureExceptions)return W&&j.log("Ignoring error from rrweb internals",t),null;let o=Nw(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){let s=e.session;s.dirty=!0,e.getOptions().stickySession&&Hc(s)}return t},{id:"Replay"})}function Gc(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function ww(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function xw(e){return t=>{if(!e.isEnabled())return;let n=ww(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Gc(e,[n]),!1)))}}function kw(e,t){return W&&e.getOptions()._experiments.traceInternals?!1:Bi(t,T())}function VS(e,t){e.isEnabled()&&t!==null&&(kw(e,t.name)||e.addUpdate(()=>(Gc(e,[t]),!0)))}function $c(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=sc(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function JS(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function Mc(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function KS(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function Es(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ur(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=Ow(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function Tf(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function Ow(e){if(!e||typeof e!="string")return{body:e};let t=e.length>jg,n=Mw(e);if(t){let r=e.slice(0,jg);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Mw(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Lc(e,t){let n=Lw(e);return je(n,t)}function Lw(e,t=ye.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ye.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Pw(e,t,n){try{let r=await Dw(e,t,n),o=KS("resource.fetch",r);VS(n.replay,o)}catch(r){W&&j.exception(r,"Failed to capture fetch breadcrumb")}}function Uw(e,t){let{input:n,response:r}=t,o=n?Po(n):void 0,i=$c(o),s=r?JS(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function Dw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Lc(s,n.networkDetailAllowUrls)&&!Lc(s,n.networkDetailDenyUrls),f=l?Bw(n,t.input,u):Es(u),p=await Fw(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:p}}function Bw({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?$w(n,t):{};if(!e)return ur(o,r,void 0);let i=Po(n),[s,a]=$r(i,j),c=ur(o,r,s);return a?Mc(c,a):c}async function Fw(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Es(o);let i=r?XS(r.headers,n):{};if(!r||!t&&o!==void 0)return ur(i,o,void 0);let[s,a]=await Gw(r),c=Hw(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?Mc(c,a):c}function Hw(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?$c(e):n;return r?t?ur(o,i,e):ur(o,i,void 0):Es(i)}catch(i){return W&&j.exception(i,"Failed to serialize response body"),ur(o,n,void 0)}}async function Gw(e){let t=Ww(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await jw(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(W&&j.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(W&&j.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function XS(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function $w(e,t){return e.length===1&&typeof e[0]!="string"?lS(e[0],t):e.length===2?lS(e[1],t):{}}function lS(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?XS(n,t):Array.isArray(n)?{}:Tf(n,t):{}}function Ww(e){try{return e.clone()}catch(t){W&&j.exception(t,"Failed to clone response body")}}function jw(e){return new Promise((t,n)=>{let r=Hr(()=>n(new Error("Timeout while trying to read response body")),500);zw(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function zw(e){return await e.text()}async function qw(e,t,n){try{let r=Vw(e,t,n),o=KS("resource.xhr",r);VS(n.replay,o)}catch(r){W&&j.exception(r,"Failed to capture xhr breadcrumb")}}function Yw(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=$c(r),i=n.getResponseHeader("content-length")?JS(n.getResponseHeader("content-length")):Xw(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function Vw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Lc(c,n.networkDetailAllowUrls)||Lc(c,n.networkDetailDenyUrls)){let B=Es(l),E=Es(f);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:B,response:E}}let p=a[ft],m=p?Tf(p.request_headers,n.networkRequestHeaders):{},_=Tf(cs(a),n.networkResponseHeaders),[g,S]=n.networkCaptureBodies?$r(s,j):[void 0],[I,U]=n.networkCaptureBodies?Jw(a):[void 0],k=ur(m,l,g),$=ur(_,f,I);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S?Mc(k,S):k,response:U?Mc($,U):$}}function Jw(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Kw(e.response,e.responseType)}catch(n){t.push(n)}return W&&j.warn("Failed to get xhr response body",...t),[void 0]}function Kw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return W&&j.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return W&&j.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Xw(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return $c(n)}catch{return}}function Qw(e){let t=T();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>Zw(a,c,u))}catch{}}function Zw(e,t,n){if(t.data)try{ex(t)&&nx(n)&&(Yw(t,n),qw(t,n,e)),tx(t)&&rx(n)&&(Uw(t,n),Pw(t,n,e))}catch(r){W&&j.exception(r,"Error when enriching network breadcrumb")}}function ex(e){return e.category==="xhr"}function tx(e){return e.category==="fetch"}function nx(e){return e?.xhr}function rx(e){return e?.response}function ox(e){let t=T();as(B0(e)),Pn(xw(e)),yw(e),Qw(e);let n=Cw(e);xi(n),t&&(t.on("beforeSendEvent",Ew(e)),t.on("afterSendEvent",_w(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function ix(e){try{return Promise.all(Gc(e,[sx(ye.performance.memory)]))}catch{return[]}}function sx(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function ax(e,t,n){return pl(e,t,{...n,setTimeoutImpl:Hr})}var Ic=v.navigator;function cx(){return/iPhone|iPad|iPod/i.test(Ic?.userAgent??"")||/Macintosh/i.test(Ic?.userAgent??"")&&Ic?.maxTouchPoints&&Ic?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function ux(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){W&&j.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&M0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Pf(e,n,o))return!0;if(!o)return!1;let i=e.session;if(dx(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){let s=e.eventBuffer.getEarliestTimestamp();s&&(W&&j.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&Hc(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function lx(e){let t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function dx(e,t){!t||!e.session||e.session.segmentId!==0||Pf(e,lx(e),!1)}function fx(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function px(e,t,n,r){return Oe(Ei(e,jn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function mx({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function hx({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await Ri(e.getOptions(),r,i,t,e,ie());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function _x({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=mx({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=T(),f=x(),p=l?.getTransport(),m=l?.getDsn();if(!l||!p||!m||!i.sampled)return Promise.resolve({});let _={type:iC,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await hx({scope:f,client:l,replayId:t,event:_});if(!g)return l.recordDroppedEvent("event_processor","replay"),W&&j.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;let S=px(g,s,m,l.getOptions().tunnel),I;try{I=await p.send(S)}catch(k){let $=new Error(Af);try{$.cause=k}catch{}throw $}let U=Li({},I);if(Mi(U,"replay"))throw new Ts(U);if(typeof I.statusCode=="number"&&(I.statusCode<200||I.statusCode>=300))throw new Pc(I.statusCode);return I}var Pc=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},Ts=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}},Uc=class extends Error{constructor(){super("Session is too long, not sending replay")}};async function QS(e,t={count:0,interval:dC}){let{recordingData:n,onError:r}=e;if(n.length)try{return await _x(e),!0}catch(o){if(o instanceof Pc||o instanceof Ts)throw o;if(Ni("Replays",{_retryCount:t.count}),r&&r(o),t.count>=fC){let i=new Error(`${Af} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{Hr(async()=>{try{await QS(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var ZS="__THROTTLED",gx="__SKIPPED";function Sx(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?gx:ZS}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var yf=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:sC,sessionIdleExpire:aC},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=ax(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Sx((s,a)=>pw(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(pC,r),timeout:r,scrollTimeout:mC,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new mf(this,i)),W){let s=t._experiments;j.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{ye.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=An({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=An({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{$0(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){W&&j.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){W&&j.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",W&&j.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){W&&j.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){W&&j.log("Buffering is in progress, call `flush()` to save the replay");return}W&&j.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=Qd({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){W&&j.log("Buffering is in progress, call `flush()` to save the replay");return}W&&j.infoTick("Starting replay in buffer mode");let t=Qd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=Dn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:lC}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:ux(this),...cx(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{W&&j.log(`Stopping Replay${n?` triggered by ${n}`:""}`),YS(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,cw(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),W&&j.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),W&&j.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();W&&j.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Sf(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${ye.location.pathname}${ye.location.hash}${ye.location.search}`,n=`${ye.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===ZS){let o=An({category:"replay.throttled"});this.addUpdate(()=>!Pf(this,{type:b0,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||K(),n=t&&Z(t),o=(n&&M(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return M(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=iw({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=Qd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return WS(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{ye.document.addEventListener("visibilitychange",this._handleVisibilityChange),ye.addEventListener("blur",this._handleWindowBlur),ye.addEventListener("focus",this._handleWindowFocus),ye.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(ox(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=tw(this)}_removeListeners(){try{ye.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ye.removeEventListener("blur",this._handleWindowBlur),ye.removeEventListener("focus",this._handleWindowFocus),ye.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||$S(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){W&&j.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=q0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Gc(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){W&&j.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await ix(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Uc;let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await QS({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=T();if(r){let o;n instanceof Ts?o="ratelimit_backoff":n instanceof Uc?o="invalid":o="send_error",r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){W&&j.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){W&&j.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&W&&j.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Hc(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=fx(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=An({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function ls(e,t){return[...e,...t].join(",")}function Ex({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=ls(e,[".sentry-mask","[data-sentry-mask]"]),a=ls(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:ls(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:ls(r,[]),ignoreSelector:ls(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function Tx({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var dS='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',yx=["content-length","content-type","accept"],Ix=Symbol.for("sentry__originalRequestBody"),fS=!1,pS=!1;function bx(){if(typeof Request>"u"||pS)return;let e=Request;try{let t=function(n,r){let o=new e(n,r);return r?.body!=null&&(o[Ix]=r.body),o};t.prototype=e.prototype,v.Request=t,pS=!0}catch{}}var eE=(e=>new If(e)),If=class{constructor({flushMinDelay:t=cC,flushMaxDelay:n=uC,minReplayDuration:r=hC,maxReplayDuration:o=zg,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:S=[],networkCaptureBodies:I=!0,networkRequestHeaders:U=[],networkResponseHeaders:k=[],mask:$=[],maskAttributes:B=["title","placeholder","aria-label"],unmask:E=[],block:O=[],unblock:G=[],ignore:A=[],maskFn:L,beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:F,attachRawBodyFromRequest:re=!1}={}){this.name="Replay";let ee=Ex({mask:$,unmask:E,block:O,unblock:G,ignore:A});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(ae,R,q)=>Tx({maskAttributes:B,maskAllText:u,privacyOptions:ee,key:ae,value:R,el:q}),...ee,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ae=>{try{ae.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,_C),maxReplayDuration:Math.min(o,zg),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:m,slowClickIgnoreSelectors:_,networkDetailAllowUrls:g,networkDetailDenyUrls:S,networkCaptureBodies:I,networkRequestHeaders:mS(U),networkResponseHeaders:mS(k),beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:F,attachRawBodyFromRequest:re,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${dS}`:dS,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&rr())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return fS}set _isInitialized(t){fS=t}afterAllSetup(t){!rr()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&bx(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=Ax(this._initialOptions,t);this._replay=new yf({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function Ax(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=wt(n.replaysSessionSampleRate),i=wt(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ve(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function mS(e){return[...yx,...e.map(t=>t.toLowerCase())]}function tE(){return T()?.getIntegrationByName("Replay")}var Rx=Object.defineProperty,vx=(e,t,n)=>t in e?Rx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nE=(e,t,n)=>vx(e,typeof t!="symbol"?t+"":t,n),Bf=class{constructor(){nE(this,"idNodeMap",new Map),nE(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Nx(){return new Bf}function Cx(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Ff(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ff(e.parentNode,t,n,r+1)}function rE(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Cx(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var Jo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,oE={map:{},getId(){return console.error(Jo),-1},getNode(){return console.error(Jo),null},removeNodeFromMap(){console.error(Jo)},has(){return console.error(Jo),!1},reset(){console.error(Jo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(oE=new Proxy(oE,{get(e,t,n){return t==="map"&&console.error(Jo),Reflect.get(e,t,n)}}));function Gf(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){fE(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Gf(e,t,i||{},!0)}function $f(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function wx(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function qc(e,t,n,r,o){if(!e)return!1;let i=wx(e);if(!i)return!1;let s=rE(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Ff(i,s),c=-1;return a<0?!1:(r&&(c=Ff(i,rE(null,r))),a>-1&&c<0?!0:a<c)}var iE={};function dE(e){let t=iE[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return iE[e]=r.bind(window)}function jr(...e){return dE("requestAnimationFrame")(...e)}function fE(...e){return dE("setTimeout")(...e)}var Xo=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Xo||{}),jc;function xx(e){jc=e}var Df=e=>jc?(...n)=>{try{return e(...n)}catch(r){if(jc&&jc(r)===!0)return()=>{};throw r}}:e,Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(bs=0;bs<Ko.length;bs++)kx[Ko.charCodeAt(bs)]=bs;var bs,Ox=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Ko[t[n]>>2],o+=Ko[(t[n]&3)<<4|t[n+1]>>4],o+=Ko[(t[n+1]&15)<<2|t[n+2]>>6],o+=Ko[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},sE=new Map;function Mx(e,t){let n=sE.get(e);return n||(n=new Map,sE.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var pE=(e,t,n)=>{if(!e||!(hE(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=Mx(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function zc(e,t,n){if(e instanceof Array)return e.map(r=>zc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=Ox(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[zc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[zc(e.data,t,n),e.width,e.height]};if(hE(e,t)||typeof e=="object"){let r=e.constructor.name,o=pE(e,t,n);return{rr_type:r,index:o}}}}return e}var mE=(e,t,n)=>e.map(r=>zc(r,t,n)),hE=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Lx(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=$f(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return qc(this.canvas,n,r,o,!0)||fE(()=>{let l=mE(d,t,this);e(this.canvas,{type:Xo["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Gf(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Xo["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function Px(e){return e==="experimental-webgl"?"webgl":e}function aE(e,t,n,r,o){let i=[];try{let s=$f(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!qc(this,t,n,r,!0)){let d=Px(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function cE(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=$f(e,d,function(f){return function(...p){let m=f.apply(this,p);if(pE(m,a,this),"tagName"in this.canvas&&!qc(this.canvas,r,o,i,!0)){let _=mE(p,a,this),g={type:t,property:d,args:_};n(this.canvas,g)}return m}});c.push(l)}catch{let l=Gf(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function Ux(e,t,n,r,o,i){let s=[];return s.push(...cE(t.WebGLRenderingContext.prototype,Xo.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...cE(t.WebGL2RenderingContext.prototype,Xo.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var Dx='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Bx(){let e=new Blob([Dx]);return URL.createObjectURL(e)}var Hf=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&xx(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&Df(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Df(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=aE(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}jr(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(Bx());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:Xo["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=jr(n)};t=jr(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=aE(t,n,r,o,!1),s=Lx(this.processMutation.bind(this),t,n,r,o),a=Ux(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{qc(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let _=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(_))){if(this.snapshotInProgressMap.set(_,!0),!n&&["webgl","webgl2"].includes(m.__context)){let g=m.getContext(m.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(m).then(g=>{this.worker?.postMessage({id:_,bitmap:g,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[g])}).catch(g=>{Df(()=>{throw this.snapshotInProgressMap.delete(_),g})()})}}),!0)}startPendingCanvasMutationFlusher(){jr(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,jr(t)};jr(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),jr(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}Nx();var uE;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(uE||(uE={}));var lE={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Fx="ReplayCanvas",Wc=1280,Hx=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Wc):Wc,n?Math.min(n,Wc):Wc]},o,i,s=new Promise(a=>i=a);return{name:Fx,getOptions(){let{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{let l=new Hf({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return o=l,i(l),l},...lE[a]||lE.medium}},async snapshot(a,c){(o||await s).snapshot(a,c)}}}),_E=Hx;function gE(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Wf(e){try{return new URL(e,w.location.origin).href}catch{return}}function SE(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function jf(e){try{return new Headers(e)}catch{return}}var EE=new WeakMap,zf=new Map,As={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Yc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...As,...t},d=typeof i=="function"?i:m=>!0,l=m=>Gx(m,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(_=>{if(_.op==="http.client"){let g=zf.get(_.span_id);g&&(_.timestamp=g/1e3,zf.delete(_.span_id))}}),m)),o&&Xl(m=>{if(m.response){let _=EE.get(m.response);_&&m.endTimestamp&&zf.set(_,m.endTimestamp)}}),Or(m=>{let _=vl(m,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(m.response&&m.fetchData.__span&&EE.set(m.response,m.fetchData.__span),_){let g=Wf(m.fetchData.url),S=g?on(g).host:void 0;_.setAttributes({"http.url":g?jt(g):void 0,"server.address":S}),s&&TE(_),c?.(_,{headers:m.headers})}})),r&&Gr(m=>{let _=$x(m,d,l,f,p,u);_&&(s&&TE(_),c?.(_,{headers:jf(m.xhr.__sentry_xhr_v3__?.request_headers)}))})}function TE(e){let{url:t}=M(e).data;if(!t||typeof t!="string")return;let n=Bt("resource",({entries:r})=>{r.forEach(o=>{SE(o)&&o.name.endsWith(t)&&(e.setAttributes(ss(o)),setTimeout(n))})})}function Gx(e,t){let n=ct();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?je(r.toString(),t)||i&&je(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?je(e,t):r}}function $x(e,t,n,r,o,i){let s=e.xhr,a=s?.[ft];if(!s||s.__sentry_own_request__||!a)return;let{url:c,method:u}=a,d=xe()&&t(c);if(e.endTimestamp&&d){let S=s.__sentry_xhr_span_id__;if(!S)return;let I=r[S];I&&a.status_code!==void 0&&(gn(I,a.status_code),I.end(),i?.(I,{headers:jf(cs(s)),error:e.error}),delete r[S]);return}let l=Wf(c),f=l?on(l):on(c),p=jt(Di(c)),m=!!K(),_=d&&m?Et({name:`${u} ${p}`,attributes:{url:jt(c),type:"xhr","http.method":u,"http.url":l?jt(l):void 0,"server.address":f?.host,[H]:"auto.http.browser",[se]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new tt;s.__sentry_xhr_span_id__=_.spanContext().spanId,r[s.__sentry_xhr_span_id__]=_,n(c)&&Wx(s,xe()&&m?_:void 0,o);let g=T();return g&&g.emit("beforeOutgoingRequestSpan",_,e),_}function Wx(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=vr({span:t,propagateTraceparent:n});r&&jx(e,r,o,i)}function jx(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!gE(i))&&e.setRequestHeader("baggage",n)}}catch{}}function yE(){w.document?w.document.addEventListener("visibilitychange",()=>{let e=K();if(!e)return;let t=Z(e);if(w.document.hidden&&t){let n="cancelled",{op:r,status:o}=M(t);b&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):b&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var zx=3600,IE="sentry_previous_trace",qx="sentry.previous_trace";function bE(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?Jx():void 0;e.on("spanStart",s=>{if(Z(s)!==s)return;let a=x().getPropagationContext();o=Yx(o,s,a),r&&Vx(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=x(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(qf(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=qf(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[li]:o.sampleRate}})}function Yx(e,t,n){let r=M(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Nn])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=zx&&(b&&h.log(`Adding previous_trace \`${JSON.stringify(s)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:s,attributes:{[Tu]:"previous_trace"}}),t.setAttribute(qx,`${s.traceId}-${s.spanId}-${qf(s)?1:0}`)),i)}function Vx(e){try{w.sessionStorage.setItem(IE,JSON.stringify(e))}catch(t){b&&h.warn("Could not store previous trace in sessionStorage",t)}}function Jx(){try{let e=w.sessionStorage?.getItem(IE);return JSON.parse(e)}catch{return}}function qf(e){return e.traceFlags===1}var Kx="BrowserTracing",Xx={...oo,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...As},NE=((e={})=>{let t={name:void 0,source:void 0},n=w.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:m,traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:I,enableHTTPTimings:U,ignoreResourceSpans:k,ignorePerformanceApiSpans:$,instrumentPageLoad:B,instrumentNavigation:E,detectRedirects:O,linkPreviousTrace:G,consistentTraceSampling:A,enableReportPageLoaded:L,onRequestSpanStart:C,onRequestSpanEnd:P}={...Xx,...e},F,re,ee;function ae(R,q,N=!0){let Y=q.op==="pageload",de=q.name,ce=d?d(q):q,Ce=ce.attributes||{};if(de!==ce.name&&(Ce[ve]="custom",ce.attributes=Ce),!N){let it=Ct();Et({...ce,startTime:it}).end(it);return}t.name=ce.name,t.source=Ce[ve];let ot=ta(ce,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:Y,beforeSpanEnd:it=>{F?.(),Od(it,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:k,ignorePerformanceApiSpans:$}),RE(R,void 0);let ht=x(),dn=ht.getPropagationContext();ht.setPropagationContext({...dn,traceId:ot.spanContext().traceId,sampled:xt(ot),dsc:ke(it)}),Y&&(ee=void 0)},trimIdleSpanEndTimestamp:!L});Y&&L&&(ee=ot),RE(R,ot);function Bn(){n&&["interactive","complete"].includes(n.readyState)&&R.emit("idleSpanEnableAutoFinish",ot)}Y&&!L&&n&&(n.addEventListener("readystatechange",()=>{Bn()}),Bn())}return{name:Kx,setup(R){if(Si(),F=Cd({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:R}),r&&Fd(),o&&Md(),s&&v.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?xd():i&&wd(),a&&kd(),O&&n){let N=()=>{re=Q()};addEventListener("click",N,{capture:!0}),addEventListener("keydown",N,{capture:!0,passive:!0})}function q(){let N=Rs(R);N&&!M(N).timestamp&&(b&&h.log(`[Tracing] Finishing current active span with op: ${M(N).op}`),N.setAttribute($n,"cancelled"),N.end())}R.on("startNavigationSpan",(N,Y)=>{if(T()!==R)return;if(Y?.isRedirect){b&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ae(R,{op:"navigation.redirect",...N},!1);return}re=void 0,q(),ie().setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:xe()?void 0:Ze()});let de=x();de.setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:xe()?void 0:Ze()}),de.setSDKProcessingMetadata({normalizedRequest:void 0}),ae(R,{op:"navigation",...N,parentSpan:null,forceTransaction:!0})}),R.on("startPageLoadSpan",(N,Y={})=>{if(T()!==R)return;q();let de=Y.sentryTrace||AE("sentry-trace"),ce=Y.baggage||AE("baggage"),Ce=fi(de,ce),ot=x();ot.setPropagationContext(Ce),xe()||(ot.getPropagationContext().propagationSpanId=Ze()),ot.setSDKProcessingMetadata({normalizedRequest:ns()}),ae(R,{op:"pageload",...N})}),R.on("endPageloadSpan",()=>{L&&ee&&(ee.setAttribute($n,"reportPageLoaded"),ee.end())})},afterAllSetup(R){let q=ct();if(G!=="off"&&bE(R,{linkPreviousTrace:G,consistentTraceSampling:A}),w.location){if(B){let N=Ee();Yf(R,{name:w.location.pathname,startTime:N?N/1e3:void 0,attributes:{[ve]:"url",[H]:"auto.pageload.browser"}})}E&&Pn(({to:N,from:Y})=>{if(Y===void 0&&q?.indexOf(N)!==-1){q=void 0;return}q=void 0;let de=Rr(N),ce=Rs(R),Ce=ce&&O&&Zx(ce,re);Vf(R,{name:de?.pathname||w.location.pathname,attributes:{[ve]:"url",[H]:"auto.navigation.browser"}},{url:N,isRedirect:Ce})})}m&&yE(),a&&Qx(R,l,f,p,t),r&&Hd(),Yc(R,{traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,tracePropagationTargets:R.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:I,enableHTTPTimings:U,onRequestSpanStart:C,onRequestSpanEnd:P})}}});function Yf(e,t,n){e.emit("startPageLoadSpan",t,n),x().setTransactionName(t.name);let r=Rs(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Vf(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=x();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...ns(),url:r}}),Rs(e)}function AE(e){return w.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function Qx(e,t,n,r,o){let i=w.document,s,a=()=>{let c="ui.action.click",u=Rs(e);if(u){let d=M(u).op;if(["navigation","pageload"].includes(d)){b&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute($n,"interactionInterrupted"),s.end(),s=void 0),!o.name){b&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=ta({name:o.name,op:c,attributes:{[ve]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var CE="_sentry_idleSpan";function Rs(e){return e[CE]}function RE(e,t){Se(e,CE,t)}var vE=1.5;function Zx(e,t){let n=M(e),r=Ct(),o=n.start_timestamp;return!(r-o>vE||t&&r-t<=vE)}function wE(e=T()){e?.emit("endPageloadSpan")}function xE(e){let t=K();if(t===e)return;let n=x();e.end=new Proxy(e.end,{apply(r,o,i){return ut(n,t),Reflect.apply(r,o,i)}}),ut(n,e)}function Qo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function ek(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Qo(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function Jf(e){return Qo(e.getAllKeys())}function tk(e,t,n){return e(r=>Jf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),Qo(r.transaction)}))}function nk(e,t,n){return e(r=>Jf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),Qo(r.transaction)}))}function rk(e){return e(t=>Jf(t).then(n=>{let r=n[0];if(r!=null)return Qo(t.get(r)).then(o=>(t.delete(r),Qo(t.transaction).then(()=>o)))}))}function ok(e){let t;function n(){return t==null&&(t=ek(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await Wn(r);await tk(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await Wn(r);await nk(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await rk(n());if(r)return wu(r)}catch{}}}}function ik(e){return t=>{let n=e({...t,createStore:ok});return w.addEventListener("online",async r=>{await n.flush()}),n}}function kE(e=Do){return ik(al(e))}var OE=1e6,sk="window"in v&&v.window===v&&typeof importScripts>"u",lr=String(0),Vc=sk?"main":"worker",Jc=w.navigator,LE="",PE="",UE="",Kf=Jc?.userAgent||"",DE="",ak=Jc?.language||Jc?.languages?.[0]||"";function ck(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var ME=Jc?.userAgentData;ck(ME)&&ME.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(LE=e.platform||"",UE=e.architecture||"",DE=e.model||"",PE=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];Kf=`${t.brand} ${t.version}`}}).catch(e=>{});function uk(e){return!("thread_metadata"in e)}function lk(e){return uk(e)?mk(e):e}function dk(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&b&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function fk(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=dk(r),i=lk(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Q()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Q()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||wn,runtime:{name:"javascript",version:w.navigator.userAgent},os:{name:LE,version:PE,build_number:Kf},device:{locale:ak,model:DE,manufacturer:Kf,architecture:UE,is_emulator:!1},debug_meta:{images:$E(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||le(),trace_id:o,active_thread_id:lr,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function BE(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);let r=pk(e),o=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:le(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||le(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:$E(e.resources)},profile:r}}function FE(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};let t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};let n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function pk(e){let t=[];for(let a=0;a<e.frames.length;a++){let c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}let n=[];for(let a=0;a<e.stacks.length;a++){let c=e.stacks[a];if(!c)continue;let u=[],d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}let r=Ee(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=o-(r||o),s=[];for(let a=0;a<e.samples.length;a++){let c=e.samples[a];if(!c)continue;let u=(o+(c.timestamp-i))/1e3;s[a]={stack_id:c.stackId??0,thread_id:lr,timestamp:u}}return{frames:t,stacks:n,samples:s,thread_metadata:{[lr]:{name:Vc}}}}function Kc(e){return M(e).op==="pageload"}function mk(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[lr]:{name:Vc}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=Ee(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*OE).toFixed(0),stack_id:t,thread_id:lr};return}let l=e.stacks[u.stackId],f=[];for(;l;){f.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let p={elapsed_since_start_ns:((u.timestamp+c-i)*OE).toFixed(0),stack_id:n,thread_id:lr};r.stacks[n]=f,r.samples[d]=p,n++}),r}function HE(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function GE(e){let t=[];return kt(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function $E(e){let r=T()?.getOptions()?.stackParser;return r?Bu(r,e):[]}function WE(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(b&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(b&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function hk(e){return e.samples.length<2?(b&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(b&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var Xf=!1,Qf=3e4;function _k(e){return typeof e=="function"}function Xc(){let e=w.Profiler;if(!_k(e)){b&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(Qf/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{b&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),Xf=!0}}function Zf(e){if(Xf)return b&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return b&&h.log("[Profiling] Discarding profile because root span was not sampled."),!1;let n=T()?.getOptions();if(!n)return b&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return WE(r)?r?(r===!0?!0:Math.random()<r)?!0:(b&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(b&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(b&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function jE(e){if(Xf)return b&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return b&&h.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;let t=e.profileSessionSampleRate;return WE(t)?t?Math.random()<=t:(b&&h.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(b&&h.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function vs(e){return typeof e.profilesSampleRate<"u"}function zE(e,t,n,r){return hk(n)?fk(e,t,n,r):null}var zr=new Map;function qE(){return zr.size}function YE(e){let t=zr.get(e);return t&&zr.delete(e),t}function VE(e,t){if(zr.set(e,t),zr.size>30){let n=zr.keys().next().value;n!==void 0&&zr.delete(n)}}function JE(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":lr,"thread.name":Vc}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":lr,"thread.name":Vc}})),e}function ep(e){let t;Kc(e)&&(t=Q()*1e3);let n=Xc();if(!n)return;b&&h.log(`[Profiling] started profiling span: ${M(e).description}`);let r=le(),o=null;x().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(o){b&&h.log("[Profiling] profile for:",M(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(s&&(w.clearTimeout(s),s=void 0),b&&h.log(`[Profiling] stopped profiling of span: ${M(e).description}`),!u){b&&h.log(`[Profiling] profiler returned null profile for: ${M(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,VE(r,u)}).catch(u=>{b&&h.log("[Profiling] error while stopping profiler:",u)})}}let s=w.setTimeout(()=>{b&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",M(e).description),i()},Qf),a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}var gk=6e4,Sk=3e5,Qc=class{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){let n=t.getOptions().profileLifecycle,r=jE(t.getOptions());b&&h.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||b&&h.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=le(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){b&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){b&&h.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){b&&h.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){b&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){b&&h.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;let n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);let r=this._activeRootSpanIds.size;r===1&&(b&&h.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,b&&h.log("[Profiling] Started profiling with profiler ID:",this._profilerId),tn().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){b&&h.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{b&&h.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&tn().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){b&&h.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Z(n))return;if(!n.isRecording()){b&&h.log("[Profiling] Discarding profile because root span was not sampled.");return}let r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);let o=this._activeRootSpanIds.size;o===1&&(b&&h.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${o}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;let r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);let o=this._activeRootSpanIds.size;b&&h.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${o}).`),o===0&&(this._collectCurrentChunk().catch(i=>{b&&h.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,tn().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);let n=setTimeout(()=>this._onRootSpanTimeout(t),Sk);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let t=Xc();if(!t){b&&h.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{b&&h.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},gk))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(b&&h.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){let t=this._profiler;if(this._profiler=void 0,!!t)try{let n=await t.stop(),r=BE(n,this._client,this._profilerId),o=FE(r);if("reason"in o){b&&h.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),b&&h.log("[Profiling] Collected browser profile chunk.")}catch(n){b&&h.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){let n=this._client,r=jn(n.getSdkMetadata?.()),o=n.getDsn(),i=n.getOptions().tunnel,s=Oe({event_id:le(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&o&&{dsn:He(o)}},[[{type:"profile_chunk",platform:"javascript"},t]]);n.sendEnvelope(s).then(null,a=>{b&&h.error("Error while sending profile chunk envelope:",a)})}};var Ek="BrowserProfiling",Tk=(()=>({name:Ek,setup(e){let t=e.getOptions(),n=new Qc;if(!vs(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),vs(t)&&!t.profilesSampleRate){b&&h.log("[Profiling] Profiling disabled, no profiling options found.");return}let r=K(),o=r&&Z(r);if(vs(t)&&t.profileSessionSampleRate!==void 0&&b&&h.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),vs(t))o&&Kc(o)&&Zf(o)&&ep(o),e.on("spanStart",i=>{i===Z(i)&&Zf(i)&&ep(i)}),e.on("beforeEnvelope",i=>{if(!qE())return;let s=GE(i);if(!s.length)return;let a=[];for(let c of s){let u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){b&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){b&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;let f=YE(d);if(!f){b&&h.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}let p=zE(d,l,f,c);p&&a.push(p)}HE(i,a)});else{let i=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),i==="manual")n.initialize(e);else if(i==="trace"){if(!xe(t)){b&&h.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),o&&n.notifyRootSpanActive(o),w.setTimeout(()=>{let s=K(),a=s&&Z(s);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return JE(e)}})),KE=Tk;var XE=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Ot(e)}});function QE(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Tt(e,t.value),yt(e,t.value)}}}var ZE=()=>({name:"OpenFeature",processEvent(e,t,n){return Ot(e)}}),Zc=class{after(t,n){Tt(n.flagKey,n.value),yt(n.flagKey,n.value)}error(t,n,r){Tt(t.flagKey,t.defaultValue),yt(t.flagKey,t.defaultValue)}};var eT=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;ge(t,"isEnabled",yk)},processEvent(t,n,r){return Ot(t)}});function yk(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(Tt(n,r),yt(n,r)):b&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var tT=(({growthbookClass:e})=>Al({growthbookClass:e}));var nT=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{Tt(n.gate.name,n.gate.value),yt(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Ot(t)}});async function rT(){let e=T();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";let r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await yi(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var Ik="WebWorker",iT=({worker:e})=>({name:Ik,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>oT(t))},addWorker:t=>oT(t)});function oT(e){e.addEventListener("message",t=>{if(Ak(t.data)){if(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(b&&h.log("Sentry debugId web worker message received",t.data),w._sentryDebugIds={...t.data._sentryDebugIds,...w._sentryDebugIds}),t.data._sentryModuleMetadata&&(b&&h.log("Sentry module metadata web worker message received",t.data),w._sentryModuleMetadata={...t.data._sentryModuleMetadata,...w._sentryModuleMetadata}),t.data._sentryWasmImages){b&&h.log("Sentry WASM images web worker message received",t.data);let n=w._sentryWasmImages||[],r=t.data._sentryWasmImages.filter(o=>we(o)&&typeof o.code_file=="string"&&!n.some(i=>i.code_file===o.code_file));w._sentryWasmImages=[...n,...r]}t.data._sentryWorkerError&&(b&&h.log("Sentry worker rejection message received",t.data._sentryWorkerError),bk(t.data._sentryWorkerError))}})}function bk(e){let t=T();if(!t)return;let n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,i=at(o)?zd(o):Co(n,o,void 0,r,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),rn(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),b&&h.log("Captured worker unhandled rejection",o)}function sT({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0,_sentryModuleMetadata:e._sentryModuleMetadata??void 0}),e.addEventListener("unhandledrejection",t=>{let r={reason:jd(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),b&&h.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),b&&h.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function Ak(e){if(!we(e)||e._sentryMessage!==!0)return!1;let t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e,o="_sentryWasmImages"in e;return!(!t&&!n&&!r&&!o||t&&!(we(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(we(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!we(e._sentryWorkerError)||o&&(!Array.isArray(e._sentryWasmImages)||!e._sentryWasmImages.every(i=>we(i)&&typeof i.code_file=="string")))}export{aT as Sentry};
