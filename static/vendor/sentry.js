var JE=Object.defineProperty;var Kc=(e,t)=>{for(var n in t)JE(e,n,{get:t[n],enumerable:!0})};var YE={};Kc(YE,{BrowserClient:()=>Ro,MULTIPLEXED_TRANSPORT_EXTRA_KEY:()=>uo,OpenFeatureIntegrationHook:()=>Jc,SDK_VERSION:()=>_t,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>ie,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>H,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>An,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ve,Scope:()=>et,WINDOW:()=>w,addBreadcrumb:()=>dt,addEventProcessor:()=>vi,addIntegration:()=>oo,breadcrumbsIntegration:()=>ac,browserApiErrorsIntegration:()=>cc,browserProfilingIntegration:()=>DE,browserSessionIntegration:()=>uc,browserTracingIntegration:()=>mE,buildLaunchDarklyFlagUsedHandler:()=>FE,captureConsoleIntegration:()=>fl,captureEvent:()=>en,captureException:()=>X,captureFeedback:()=>Bi,captureMessage:()=>Ii,captureSession:()=>ro,chromeStackLineParser:()=>Pd,close:()=>Hu,consoleLoggingIntegration:()=>yl,contextLinesIntegration:()=>vg,continueTrace:()=>Nu,createConsolaReporter:()=>bl,createLangChainCallbackHandler:()=>Hl,createTransport:()=>ki,createUserFeedbackEnvelope:()=>cg,dedupeIntegration:()=>Di,defaultRequestInstrumentationOptions:()=>ys,defaultStackLineParsers:()=>Dd,defaultStackParser:()=>ic,diagnoseSdkConnectivity:()=>jE,endSession:()=>Ni,eventFiltersIntegration:()=>ca,eventFromException:()=>Ha,eventFromMessage:()=>Ga,exceptionFromError:()=>bo,extraErrorDataIntegration:()=>pl,featureFlagsIntegration:()=>Sl,feedbackAsyncIntegration:()=>k_,feedbackIntegration:()=>dd,feedbackSyncIntegration:()=>dd,flush:()=>Fu,forceLoad:()=>hg,functionToStringIntegration:()=>Pi,geckoStackLineParser:()=>Ud,getActiveSpan:()=>K,getClient:()=>T,getCurrentScope:()=>k,getDefaultIntegrations:()=>Hd,getFeedback:()=>g_,getGlobalScope:()=>Qt,getIsolationScope:()=>ue,getReplay:()=>$S,getRootSpan:()=>Z,getSpanDescendants:()=>Rn,getSpanStatusFromHttpCode:()=>Ls,getTraceData:()=>br,globalHandlersIntegration:()=>lc,graphqlClientIntegration:()=>xg,growthbookIntegration:()=>$E,httpClientIntegration:()=>yg,httpContextIntegration:()=>dc,inboundFiltersIntegration:()=>Ui,init:()=>mg,instrumentAnthropicAiClient:()=>Ll,instrumentGoogleGenAIClient:()=>Bl,instrumentLangGraph:()=>$l,instrumentOpenAiClient:()=>Ol,instrumentOutgoingRequests:()=>Wc,instrumentSupabaseClient:()=>pa,isEnabled:()=>Ri,isInitialized:()=>Gu,lastEventId:()=>Ai,launchDarklyIntegration:()=>BE,lazyLoadIntegration:()=>Fa,linkedErrorsIntegration:()=>fc,logger:()=>_a,makeBrowserOfflineTransport:()=>SE,makeFetchTransport:()=>Mo,makeMultiplexedTransport:()=>rl,metrics:()=>ga,moduleMetadataIntegration:()=>dl,onLoad:()=>_g,openFeatureIntegration:()=>HE,opera10StackLineParser:()=>ig,opera11StackLineParser:()=>sg,parameterize:()=>sa,registerSpanErrorInstrumentation:()=>mi,registerWebWorker:()=>VE,replayCanvasIntegration:()=>rE,replayIntegration:()=>GS,reportPageLoaded:()=>_E,reportingObserverIntegration:()=>Eg,rewriteFramesIntegration:()=>ml,sendFeedback:()=>rd,setActiveSpanInBrowser:()=>gE,setContext:()=>bi,setCurrentClient:()=>ia,setExtra:()=>Pu,setExtras:()=>Lu,setHttpStatus:()=>_n,setMeasurement:()=>_i,setTag:()=>Du,setTags:()=>Uu,setUser:()=>Bu,showReportDialog:()=>gg,spanToBaggageHeader:()=>yu,spanToJSON:()=>M,spanToTraceHeader:()=>fi,spotlightBrowserIntegration:()=>fg,startBrowserTracingNavigationSpan:()=>$f,startBrowserTracingPageLoadSpan:()=>Gf,startInactiveSpan:()=>Et,startNewTrace:()=>Xs,startSession:()=>no,startSpan:()=>qe,startSpanManual:()=>lt,statsigIntegration:()=>WE,supabaseIntegration:()=>hl,suppressTracing:()=>gi,thirdPartyErrorFilterIntegration:()=>gl,uiProfiler:()=>rg,unleashIntegration:()=>GE,updateSpanName:()=>Eu,webWorkerIntegration:()=>qE,winjsStackLineParser:()=>og,withActiveSpan:()=>Wn,withIsolationScope:()=>Ms,withScope:()=>De,zodErrorsIntegration:()=>_l});var y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var v=globalThis;var _t="10.34.0";function st(){return Dn(v),v}function Dn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||_t,t[_t]=t[_t]||{}}function Kt(e,t,n=v){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[_t]=r[_t]||{};return o[e]||(o[e]=t())}var cr=["debug","info","warn","error","log","assert","trace"],KE="Sentry Logger ",$r={};function Ye(e){if(!("console"in v))return e();let t=v.console,n={},r=Object.keys($r);r.forEach(o=>{let i=$r[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function XE(){Qc().enabled=!0}function QE(){Qc().enabled=!1}function Jf(){return Qc().enabled}function ZE(...e){Xc("log",...e)}function eT(...e){Xc("warn",...e)}function tT(...e){Xc("error",...e)}function Xc(e,...t){y&&Jf()&&Ye(()=>{v.console[e](`${KE}[${e}]:`,...t)})}function Qc(){return y?Kt("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:XE,disable:QE,isEnabled:Jf,log:ZE,warn:eT,error:tT};var Kf=/\(error: (.*)\)/,Xf=/captureMessage|captureException/;function vs(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=Kf.test(c)?c.replace(Kf,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return Qf(i.slice(o))}}function eu(e){return Array.isArray(e)?vs(...e):e}function Qf(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Rs(t).function||"")&&t.pop(),t.reverse(),Xf.test(Rs(t).function||"")&&(t.pop(),Xf.test(Rs(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Rs(t).filename,function:n.function||"?"}))}function Rs(e){return e[e.length-1]||{}}var Zc="<anonymous>";function gt(e){try{return!e||typeof e!="function"?Zc:e.name||Zc}catch{return Zc}}function Wr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function Ns(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}var Cs={},Zf={};function Je(e,t){Cs[e]=Cs[e]||[],Cs[e].push(t)}function Ke(e,t){if(!Zf[e]){Zf[e]=!0;try{t()}catch(n){y&&h.error(`Error while instrumenting ${e}`,n)}}}function Oe(e,t){let n=e&&Cs[e];if(n)for(let r of n)try{r(t)}catch(o){y&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}var tu=null;function Qo(e){let t="error";Je(t,e),Ke(t,nT)}function nT(){tu=v.onerror,v.onerror=function(e,t,n,r,o){return Oe("error",{column:r,error:o,line:n,msg:e,url:t}),tu?tu.apply(this,arguments):!1},v.onerror.__SENTRY_INSTRUMENTED__=!0}var nu=null;function Zo(e){let t="unhandledrejection";Je(t,e),Ke(t,rT)}function rT(){nu=v.onunhandledrejection,v.onunhandledrejection=function(e){return Oe("unhandledrejection",e),nu?nu.apply(this,arguments):!0},v.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var ep=Object.prototype.toString;function Xe(e){switch(ep.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Nt(e,Error)}}function jr(e,t){return ep.call(e)===`[object ${t}]`}function ei(e){return jr(e,"ErrorEvent")}function ws(e){return jr(e,"DOMError")}function ru(e){return jr(e,"DOMException")}function Fe(e){return jr(e,"String")}function In(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function at(e){return e===null||In(e)||typeof e!="object"&&typeof e!="function"}function Ue(e){return jr(e,"Object")}function ur(e){return typeof Event<"u"&&Nt(e,Event)}function ou(e){return typeof Element<"u"&&Nt(e,Element)}function iu(e){return jr(e,"RegExp")}function Gt(e){return!!(e?.then&&typeof e.then=="function")}function su(e){return Ue(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Nt(e,t){try{return e instanceof t}catch{return!1}}function ti(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function ni(e){return typeof Request<"u"&&Nt(e,Request)}var au=v,oT=80;function Re(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||oT;for(;n&&i++<r&&(u=iT(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function iT(e,t){let n=e,r=[];if(!n?.tagName)return"";if(au.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&Fe(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function ct(){try{return au.document.location.href}catch{return""}}function ri(e){if(!au.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function ge(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&xs(o,r);try{e[t]=o}catch{y&&h.log(`Failed to replace method "${t}" in object`,e)}}function Se(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{y&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function xs(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,Se(e,"__sentry_original__",t)}catch{}}function lr(e){return e.__sentry_original__}function ks(e){if(Xe(e))return{message:e.message,name:e.name,stack:e.stack,...np(e)};if(ur(e)){let t={type:e.type,target:tp(e.target),currentTarget:tp(e.currentTarget),...np(e)};return typeof CustomEvent<"u"&&Nt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function tp(e){try{return ou(e)?Re(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function np(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function cu(e){let t=Object.keys(ks(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}var zr;function dr(e){if(zr!==void 0)return zr?zr(e):e();let t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=v;return t in n&&typeof n[t]=="function"?(zr=n[t],zr(e)):(zr=null,e())}function St(){return dr(()=>Math.random())}function fr(){return dr(()=>Date.now())}function fn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function oi(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function pr(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{ti(o)?n.push(Ns(o)):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function qr(e,t,n=!1){return Fe(e)?iu(t)?t.test(e):Fe(t)?n?e===t:e.includes(t):!1:!1}function je(e,t=[],n=!1){return t.some(r=>qr(e,r,n))}function sT(){let e=v;return e.crypto||e.msCrypto}var uu;function aT(){return St()*16}function le(e=sT()){try{if(e?.randomUUID)return dr(()=>e.randomUUID()).replace(/-/g,"")}catch{}return uu||(uu="10000000100040008000"+1e11),uu.replace(/[018]/g,t=>(t^(aT()&15)>>t/4).toString(16))}function rp(e){return e.exception?.values?.[0]}function pn(e){let{message:t,event_id:n}=e;if(t)return t;let r=rp(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Vr(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Qe(e,t){let n=rp(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function lu(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>oi(s,0));let i=Math.min(r-1,o);t.context_line=oi(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>oi(s,0))}function Os(e){if(cT(e))return!0;try{Se(e,"__sentry_captured__",!0)}catch{}return!1}function cT(e){try{return e.__sentry_captured__}catch{}}var ip=1e3;function Ct(){return fr()/ip}function uT(){let{performance:e}=v;if(!e?.now||!e.timeOrigin)return Ct;let t=e.timeOrigin;return()=>(t+dr(()=>e.now()))/ip}var op;function Q(){return(op??(op=uT()))()}var du=null;function lT(){let{performance:e}=v;if(!e?.now)return;let t=3e5,n=dr(()=>e.now()),r=fr(),o=e.timeOrigin;if(typeof o=="number"&&Math.abs(o+n-r)<t)return o;let i=e.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<t?i:r-n}function Ee(){return du===null&&(du=lT()),du}function sp(e){let t=Q(),n={sid:le(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>dT(n)};return e&&bn(n,e),n}function bn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Q(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:le()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ap(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),bn(e,n)}function dT(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Bn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Bn(r[o],t[o],n-1));return r}function ze(){return le()}function Ze(){return le().substring(16)}var fu="_sentrySpan";function ut(e,t){t?Se(e,fu,t):delete e[fu]}function Xt(e){return e[fu]}var fT=100,et=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ze(),sampleRand:St()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,ut(t,Xt(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&bn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():Ue(n)?t:void 0,{tags:o,attributes:i,extra:s,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...o},this._attributes={...this._attributes,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ut(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ze(),sampleRand:St()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:fT;if(r<=0)return this;let o={timestamp:Ct(),...t,message:t.message?fn(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Xt(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Bn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture message!"),o;let i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||le();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(y&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function cp(){return Kt("defaultCurrentScope",()=>new et)}function up(){return Kt("defaultIsolationScope",()=>new et)}var pu=class{constructor(t,n){let r;t?r=t:r=new et;let o;n?o=n:o=new et,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return Gt(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Yr(){let e=st(),t=Dn(e);return t.stack=t.stack||new pu(cp(),up())}function pT(e){return Yr().withScope(e)}function mT(e,t){let n=Yr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function lp(e){return Yr().withScope(()=>e(Yr().getIsolationScope()))}function dp(){return{withIsolationScope:lp,withScope:pT,withSetScope:mT,withSetIsolationScope:(e,t)=>lp(t),getCurrentScope:()=>Yr().getScope(),getIsolationScope:()=>Yr().getIsolationScope()}}function $t(e){let t=Dn(e);return t.acs?t.acs:dp()}function k(){let e=st();return $t(e).getCurrentScope()}function ue(){let e=st();return $t(e).getIsolationScope()}function Qt(){return Kt("globalScope",()=>new et)}function De(...e){let t=st(),n=$t(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function Ms(...e){let t=st(),n=$t(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function T(){return k().getClient()}function ii(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Ze()};return r&&(i.parent_span_id=r),i}var ve="sentry.source",An="sentry.sample_rate",si="sentry.previous_trace_sample_rate",ie="sentry.op",H="sentry.origin",Fn="sentry.idle_span_finish_reason",mn="sentry.measurement_unit",hn="sentry.measurement_value",Jr="sentry.custom_span_name",Kr="sentry.profile_id",Wt="sentry.exclusive_time";var mu="http.request.method",hu="url.full",_u="sentry.link.type";function Ls(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}function _n(e,t){e.setAttribute("http.response.status_code",t);let n=Ls(t);n.message!=="unknown_error"&&e.setStatus(n)}var fp="_sentryScope",pp="_sentryIsolationScope";function hT(e){try{let t=v.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function _T(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function mp(e,t,n){e&&(Se(e,pp,hT(n)),Se(e,fp,t))}function mr(e){let t=e;return{scope:t[fp],isolationScope:_T(t[pp])}}var Ps="sentry-",gT=/^sentry-/,ST=8192;function Xr(e){let t=ET(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(gT)){let s=o.slice(Ps.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function Us(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Ps}${r}`]=o),n),{});return TT(t)}function ET(e){if(!(!e||!Fe(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=hp(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):hp(e)}function hp(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function TT(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>ST?(y&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var yT=/^o(\d+)\./,IT=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function bT(e){return e==="http"||e==="https"}function He(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function Ds(e){let t=IT.exec(e);if(!t){Ye(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return _p({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function _p(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function AT(e){if(!y)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?bT(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function RT(e){return e.match(yT)?.[1]}function Bs(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=RT(n)),r}function ai(e){let t=typeof e=="string"?Ds(e):_p(e);if(!(!t||!AT(t)))return t}function wt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var Fs=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function gp(e){if(!e)return;let t=e.match(Fs);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function ci(e,t){let n=gp(e),r=Xr(t);if(!n?.traceId)return{traceId:ze(),sampleRand:St()};let o=vT(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function ui(e=ze(),t=Ze(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function li(e=ze(),t=Ze(),n){return`00-${e}-${t}-${n?"01":"00"}`}function vT(e,t){let n=wt(t?.sample_rand);if(n!==void 0)return n;let r=wt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?St()*r:r+St()*(1-r):St()}function gu(e,t){let n=Bs(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var Gs=0,$s=1,Sp=!1;function Tp(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=M(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function di(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:M(e).parent_span_id,i=mr(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Ze():t;return{parent_span_id:o,span_id:s,trace_id:n}}function fi(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return ui(t,n,r)}function yp(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return li(t,n,r)}function Ws(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===$s,attributes:i,...o}))}function Zt(e){return typeof e=="number"?Ep(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ep(e.getTime()):Q()}function Ep(e){return e>9999999999?e/1e3:e}function M(e){if(wT(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(CT(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:Zt(o),timestamp:Zt(s)||void 0,status:js(a),op:r[ie],origin:r[H],links:Ws(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function CT(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function wT(e){return typeof e.getSpanJSON=="function"}function xt(e){let{traceFlags:t}=e.spanContext();return t===$s}function js(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"internal_error"}var hr="_sentryChildSpans",Su="_sentryRootSpan";function zs(e,t){let n=e[Su]||e;Se(t,Su,n),e[hr]?e[hr].add(t):Se(e,hr,new Set([t]))}function Ip(e,t){e[hr]&&e[hr].delete(t)}function Rn(e){let t=new Set;function n(r){if(!t.has(r)&&xt(r)){t.add(r);let o=r[hr]?Array.from(r[hr]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function Z(e){return e[Su]||e}function K(){let e=st(),t=$t(e);return t.getActiveSpan?t.getActiveSpan():Xt(k())}function pi(){Sp||(Ye(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Sp=!0)}function Eu(e,t){e.updateName(t),e.setAttributes({[ve]:"custom",[Jr]:t})}var bp=!1;function mi(){if(bp)return;function e(){let t=K(),n=t&&Z(t);if(n){let r="internal_error";y&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",bp=!0,Qo(e),Zo(e)}function we(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||T()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Ap(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function _r(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(xT(n)){if(qr(e.description,n))return y&&Ap(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?qr(e.description,n.name):!0,o=n.op?e.op&&qr(e.op,n.op):!0;if(r&&o)return y&&Ap(e),!0}return!1}function Rp(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function xT(e){return typeof e=="string"||e instanceof RegExp}var vn="production";var vp="_frozenDsc";function Qr(e,t){Se(e,vp,t)}function Tu(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||vn,release:n.release,public_key:r,trace_id:e,org_id:Bs(t)};return t.emit("createDsc",o),o}function gr(e,t){let n=t.getPropagationContext();return n.dsc||Tu(n.traceId,e)}function xe(e){let t=T();if(!t)return{};let n=Z(e),r=M(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[An]??o[si];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[vp];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&Xr(u);if(d)return a(d);let l=Tu(e.spanContext().traceId,t),f=o[ve],p=r.description;return f!=="url"&&p&&(l.transaction=p),we()&&(l.sampled=String(xt(n)),l.sample_rand=i?.get("sentry.sample_rand")??mr(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function yu(e){let t=xe(e);return Us(t)}var tt=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Ze()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Gs}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Be(e,t=100,n=1/0){try{return Iu("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function qs(e,t=3,n=100*1024){let r=Be(e,t);return LT(r)>n?qs(e,t-1,n):r}function Iu(e,t,n=1/0,r=1/0,o=PT()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=kT(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let p=u.toJSON();return Iu("",p,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,f=ks(t);for(let p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}let m=f[p];d[p]=Iu(p,m,c-1,r,o),l++}return s(t),d}function kT(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ti(t))return Ns(t);if(su(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${gt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=OT(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function OT(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function MT(e){return~-encodeURI(e).split(/%..|./).length}function LT(e){return MT(JSON.stringify(e))}function PT(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function ke(e,t=[]){return[e,t]}function bu(e,t){let[n,r]=e;return[n,[...r,t]]}function kt(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Zr(e,t){return kt(e,(n,r)=>t.includes(r))}function Vs(e){let t=Dn(v);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function UT(e){let t=Dn(v);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Hn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Vs(r),i]:r.push(typeof i=="string"?Vs(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Be(a))}o(c)}}return typeof r=="string"?r:DT(r)}function DT(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function Au(e){let t=typeof e=="string"?Vs(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(UT(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function Ru(e){return[{type:"span"},e]}function vu(e){let t=typeof e.data=="string"?Vs(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var BT={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Ys(e){return BT[e]}function Gn(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function hi(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:He(r)},...o&&{trace:o}}}function FT(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function Np(e,t,n,r){let o=Gn(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:He(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ke(i,[s])}function Cp(e,t,n,r){let o=Gn(n),i=e.type&&e.type!=="replay_event"?e.type:"event";FT(e,n?.sdk);let s=hi(e,o,r,t);return delete e.sdkProcessingMetadata,ke(s,[[{type:i},e]])}function wp(e,t){function n(p){return!!p.trace_id&&!!p.public_key}let r=xe(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:He(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!_r(M(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?p=>{let m=M(p),_=a(m);return _||(pi(),m)}:M,f=[];for(let p of u){let m=l(p);m&&f.push(Ru(m))}return ke(s,f)}function xp(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=M(e),{spanId:o}=e.spanContext(),i=xt(e),s=Z(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=M(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function kp(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >"}=M(e),{spanId:r}=e.spanContext(),i=Z(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function _i(e,t,n,r=K()){let o=r&&Z(r);o&&(y&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[hn]:t,[mn]:n}))}function Js(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[mn],i=r[hn];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Op=1e3,$n=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Ze(),this._startTime=t.startTimestamp||Q(),this._links=t.links,this._attributes={},this.setAttributes({[H]:"manual",[ie]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?$s:Gs}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Zt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ve,"custom"),this}end(t){this._endTime||(this._endTime=Zt(t),kp(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ie],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:js(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[H],profile_id:this._attributes[Kr],exclusive_time:this._attributes[Wt],measurements:Js(this._events),is_segment:this._isStandaloneSpan&&Z(this)===this||void 0,segment_id:this._isStandaloneSpan?Z(this).spanContext().spanId:void 0,links:Ws(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){y&&h.log("[Tracing] Adding an event to span:",t);let o=Mp(n)?n:r||Q(),i=Mp(n)?{}:n||{},s={name:t,time:Zt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=T();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Z(this)))return;if(this._isStandaloneSpan){this._sampled?GT(wp([this],t)):(y&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(mr(this).scope||k()).captureEvent(r)}_convertSpanToTransaction(){if(!Lp(M(this)))return;this._name||(y&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=mr(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=Rn(this).filter(d=>d!==this&&!HT(d)).map(d=>M(d)).filter(Lp),s=this._attributes[ve];delete this._attributes[Jr],i.forEach(d=>{delete d.data[Jr]});let a={contexts:{trace:Tp(this)},spans:i.length>Op?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Op):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:xe(this)},request:r,...s&&{transaction_info:{source:s}}},c=Js(this._events);return c&&Object.keys(c).length&&(y&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Mp(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Lp(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function HT(e){return e instanceof $n&&e.isStandaloneSpan()}function GT(e){let t=T();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Sr(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return $T(o,t,n,r)}function $T(e,t,n,r){return Gt(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function Pp(e,t,n){if(!we(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=wt(o);if(i===void 0)return y&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return y&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||y&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Ks="__SENTRY_SUPPRESS_TRACING__";function qe(e,t){let n=Si();if(n.startSpan)return n.startSpan(e,t);let r=wu(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return De(a,()=>Dp(i)(()=>{let u=k(),d=xu(u,i),f=e.onlyIfParent&&!d?new tt:Cu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ut(u,f),Sr(()=>t(f),()=>{let{status:p}=M(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})},()=>{f.end()})}))}function lt(e,t){let n=Si();if(n.startSpanManual)return n.startSpanManual(e,t);let r=wu(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return De(a,()=>Dp(i)(()=>{let u=k(),d=xu(u,i),f=e.onlyIfParent&&!d?new tt:Cu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ut(u,f),Sr(()=>t(f,()=>f.end()),()=>{let{status:p}=M(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})})}))}function Et(e){let t=Si();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=wu(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>De(e.scope,s):o!==void 0?s=>Wn(o,s):s=>s())(()=>{let s=k(),a=xu(s,o);return e.onlyIfParent&&!a?new tt:Cu({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var Nu=(e,t)=>{let n=st(),r=$t(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=T(),a=Xr(i);return s&&!gu(s,a?.org_id)?Xs(t):De(c=>{let u=ci(o,i);return c.setPropagationContext(u),ut(c,void 0),t()})};function Wn(e,t){let n=Si();return n.withActiveSpan?n.withActiveSpan(e,t):De(r=>(ut(r,e||void 0),t(r)))}function gi(e){let t=Si();return t.suppressTracing?t.suppressTracing(e):De(n=>{n.setSDKProcessingMetadata({[Ks]:!0});let r=e();return n.setSDKProcessingMetadata({[Ks]:void 0}),r})}function Xs(e){return De(t=>(t.setPropagationContext({traceId:ze(),sampleRand:St()}),y&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Wn(null,e)))}function Cu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!we()){let s=new tt;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...xe(s)};Qr(s,a)}return s}let o=ue(),i;if(e&&!n)i=WT(e,r,t),zs(e,i);else if(e){let s=xe(e),{traceId:a,spanId:c}=e.spanContext(),u=xt(e);i=Up({traceId:a,parentSpanId:c,...t},r,u),Qr(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=Up({traceId:s,parentSpanId:c,...t},r,u),a&&Qr(i,a)}return xp(i),mp(i,r,o),i}function wu(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=Zt(e.startTime),delete r.startTime,r}return n}function Si(){let e=st();return $t(e)}function Up(e,t,n){let r=T(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Ks]?[!1]:Pp(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:wt(u.dsc?.sample_rate)},u.sampleRand),p=new $n({...e,attributes:{[ve]:"custom",[An]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(y&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function WT(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Ks]?!1:xt(e),s=i?new $n({...n,parentSpanId:r,traceId:o,sampled:i}):new tt({traceId:o});zs(e,s);let a=T();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function xu(e,t){if(t)return t;if(t===null)return;let n=Xt(e);if(!n)return;let r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Z(n):n}function Dp(e){return e!==void 0?t=>Wn(e,t):t=>t()}var eo={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},jT="heartbeatFailed",zT="idleTimeout",qT="finalTimeout",VT="externalFinish";function Qs(e,t={}){let n=new Map,r=!1,o,i=VT,s=!t.disableAutoFinish,a=[],{idleTimeout:c=eo.idleTimeout,finalTimeout:u=eo.finalTimeout,childSpanTimeout:d=eo.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=T();if(!p||!we()){let E=new tt,x={sample_rate:"0",sampled:"false",...xe(E)};return Qr(E,x),E}let m=k(),_=K(),g=YT(e);g.end=new Proxy(g.end,{apply(E,x,G){if(l&&l(g),x instanceof tt)return;let[A,...L]=G,C=A||Q(),P=Zt(C),B=Rn(g).filter(N=>N!==g),re=M(g);if(!B.length||!f)return D(P),Reflect.apply(E,x,[P,...L]);let ee=p.getOptions().ignoreSpans,se=B?.reduce((N,V)=>{let de=M(V);return!de.timestamp||ee&&_r(de,ee)?N:N?Math.max(N,de.timestamp):de.timestamp},void 0),R=re.start_timestamp,q=Math.min(R?R+u/1e3:1/0,Math.max(R||-1/0,Math.min(P,se||1/0)));return D(q),Reflect.apply(E,x,[q,...L])}});function S(){o&&(clearTimeout(o),o=void 0)}function I(E){S(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=zT,g.end(E))},c)}function F(E){o=setTimeout(()=>{!r&&s&&(i=jT,g.end(E))},d)}function O(E){S(),n.set(E,!0);let x=Q();F(x+d/1e3)}function j(E){if(n.has(E)&&n.delete(E),n.size===0){let x=Q();I(x+c/1e3)}}function D(E){r=!0,n.clear(),a.forEach(B=>B()),ut(m,_);let x=M(g),{start_timestamp:G}=x;if(!G)return;x.data[Fn]||g.setAttribute(Fn,i);let L=x.status;(!L||L==="unknown")&&g.setStatus({code:1}),h.log(`[Tracing] Idle span "${x.op}" finished`);let C=Rn(g).filter(B=>B!==g),P=0;C.forEach(B=>{B.isRecording()&&(B.setStatus({code:2,message:"cancelled"}),B.end(E),y&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(B,void 0,2)));let re=M(B),{timestamp:ee=0,start_timestamp:se=0}=re,R=se<=E,q=(u+c)/1e3,N=ee-se<=q;if(y){let V=JSON.stringify(B,void 0,2);R?N||h.log("[Tracing] Discarding span since it finished after idle span final timeout",V):h.log("[Tracing] Discarding span since it happened after idle span was finished",V)}(!N||!R)&&(Ip(g,B),P++)}),P>0&&g.setAttribute("sentry.idle_span_discarded_spans",P)}return a.push(p.on("spanStart",E=>{if(r||E===g||M(E).timestamp||E instanceof $n&&E.isStandaloneSpan())return;Rn(g).includes(E)&&O(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||j(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===g&&(s=!0,I(),n.size&&F())})),t.disableAutoFinish||I(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=qT,g.end())},u),g}function YT(e){let t=Et(e);return ut(k(),t),y&&h.log("[Tracing] Started span is an idle span"),t}var ku=0,Bp=1,Fp=2;function jn(e){return new Ei(t=>{t(e)})}function Er(e){return new Ei((t,n)=>{n(e)})}var Ei=class e{constructor(t){this._state=ku,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===ku)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Bp&&n[1](this._value),this._state===Fp&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===ku){if(Gt(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(Bp,i)},o=i=>{n(Fp,i)};try{t(r,o)}catch(i){o(i)}}};function Hp(e,t,n,r=0){try{let o=Ou(t,n,e,r);return Gt(o)?o:jn(o)}catch(o){return Er(o)}}function Ou(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return y&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),Gt(i)?i.then(s=>Ou(s,t,n,r+1)):Ou(i,t,n,r+1)}var Tr,Gp,$p,zn;function Zs(e){let t=v._sentryDebugIds,n=v._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(zn&&r.length===Gp&&o.length===$p)return zn;Gp=r.length,$p=o.length,zn={},Tr||(Tr={});let i=(s,a)=>{for(let c of s){let u=a[c],d=Tr?.[c];if(d&&zn&&u)zn[d[0]]=u,Tr&&(Tr[c]=[d[0],u]);else if(u){let l=e(c);for(let f=l.length-1;f>=0;f--){let m=l[f]?.filename;if(m&&zn&&Tr){zn[m]=u,Tr[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),zn}function Mu(e,t){let n=Zs(e);if(!n)return[];let r=[];for(let o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function jp(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;JT(e,t),r&&QT(e,r),ZT(e,n),KT(e,o),XT(e,i)}function Wp(e,t){let{extra:n,tags:r,attributes:o,user:i,contexts:s,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:m,span:_}=t;Ti(e,"extra",n),Ti(e,"tags",r),Ti(e,"attributes",o),Ti(e,"user",i),Ti(e,"contexts",s),e.sdkProcessingMetadata=Bn(e.sdkProcessingMetadata,c,2),a&&(e.level=a),m&&(e.transactionName=m),_&&(e.span=_),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function Ti(e,t,n){e[t]=Bn(e[t],n,1)}function to(e,t){let n=Qt().getScopeData();return e&&Wp(n,e.getScopeData()),t&&Wp(n,t.getScopeData()),n}function JT(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function KT(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function XT(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function QT(e,t){e.contexts={trace:di(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:xe(t),...e.sdkProcessingMetadata};let n=Z(t),r=M(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ZT(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function yi(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||le(),timestamp:t.timestamp||Ct()},u=n.integrations||e.integrations.map(g=>g.name);ey(c,e),ry(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&ty(c,e.stackParser);let d=iy(r,n.captureContext);n.mechanism&&Qe(c,n.mechanism);let l=o?o.getEventProcessors():[],f=to(i,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),jp(c,f);let m=[...l,...f.eventProcessors];return Hp(m,c,n).then(g=>(g&&ny(g),typeof s=="number"&&s>0?oy(g,s,a):g))}function ey(e,t){let{environment:n,release:r,dist:o,maxValueLength:i}=t;e.environment=e.environment||n||vn,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&i&&(s.url=fn(s.url,i)),i&&e.exception?.values?.forEach(a=>{a.value&&(a.value=fn(a.value,i))})}function ty(e,t){let n=Zs(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function ny(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function ry(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function oy(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Be(o.data,t,n)}}))},...e.user&&{user:Be(e.user,t,n)},...e.contexts&&{contexts:Be(e.contexts,t,n)},...e.extra&&{extra:Be(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Be(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Be(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Be(e.contexts.flags,3,n)),r}function iy(e,t){if(!t)return e;let n=e?e.clone():new et;return n.update(t),n}function zp(e){if(e)return sy(e)?{captureContext:e}:cy(e)?{captureContext:e}:e}function sy(e){return e instanceof et||typeof e=="function"}var ay=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function cy(e){return Object.keys(e).some(t=>ay.includes(t))}function X(e,t){return k().captureException(e,zp(t))}function Ii(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return k().captureMessage(e,n,r)}function en(e,t){return k().captureEvent(e,t)}function bi(e,t){ue().setContext(e,t)}function Lu(e){ue().setExtras(e)}function Pu(e,t){ue().setExtra(e,t)}function Uu(e){ue().setTags(e)}function Du(e,t){ue().setTag(e,t)}function Bu(e){ue().setUser(e)}function Ai(){return ue().lastEventId()}async function Fu(e){let t=T();return t?t.flush(e):(y&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Hu(e){let t=T();return t?t.close(e):(y&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Gu(){return!!T()}function Ri(){let e=T();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function vi(e){ue().addEventProcessor(e)}function no(e){let t=ue(),n=k(),{userAgent:r}=v.navigator||{},o=sp({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&bn(i,{status:"exited"}),Ni(),t.setSession(o),o}function Ni(){let e=ue(),n=k().getSession()||e.getSession();n&&ap(n),qp(),e.setSession()}function qp(){let e=ue(),t=T(),n=e.getSession();n&&t&&t.captureSession(n)}function ro(e=!1){if(e){Ni();return}qp()}var uy="7";function Vp(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function ly(e){return`${Vp(e)}${e.projectId}/envelope/`}function dy(e,t){let n={sentry_version:uy};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Ci(e,t,n){return t||`${ly(e)}?${dy(e,n)}`}function $u(e,t){let n=ai(e);if(!n)return"";let r=`${Vp(n)}embed/error-page/`,o=`dsn=${He(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var Wu=[];function fy(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function ju(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return fy(r)}function Yp(e,t){let n={};return t.forEach(r=>{r&&qu(e,r,n)}),n}function zu(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function qu(e,t,n){if(n[t.name]){y&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!Wu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),Wu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}y&&h.log(`Integration installed: ${t.name}`)}function oo(e){let t=T();if(!t){y&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function py(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function my(e,t){let{value:n,unit:r}=py(e)?e:{value:e,unit:void 0},o=hy(n),i=r&&typeof r=="string"?{unit:r}:{};if(o)return{...o,...i};if(!t||t==="skip-undefined"&&n===void 0)return;let s="";try{s=JSON.stringify(n)??""}catch{}return{value:s,type:"string",...i}}function io(e,t=!1){let n={};for(let[r,o]of Object.entries(e??{})){let i=my(o,t);i&&(n[r]=i)}return n}function hy(e){let t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function ea(e,t){return t?De(t,()=>{let n=K(),r=n?di(n):ii(t);return[n?xe(n):gr(e,t),r]}):[void 0,void 0]}var Jp={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function _y(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Kp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=He(r)),ke(o,[_y(e)])}var gy=100;function gn(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function Xp(e,t){let n=Vu(),r=Qp(e);r===void 0?n.set(e,[t]):r.length>=gy?(so(e,r),n.set(e,[t])):n.set(e,[...r,t])}function qn(e,t=k(),n=Xp){let r=t?.getClient()??T();if(!r){y&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){y&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=ea(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=to(ue(),t);gn(u,"user.id",d,!1),gn(u,"user.email",l,!1),gn(u,"user.name",f,!1),gn(u,"sentry.release",o),gn(u,"sentry.environment",i);let{name:m,version:_}=r.getSdkMetadata()?.sdk??{};gn(u,"sentry.sdk.name",m),gn(u,"sentry.sdk.version",_);let g=r.getIntegrationByName("Replay"),S=g?.getReplayId(!0);gn(u,"sentry.replay_id",S),S&&g?.getRecordingMode()==="buffer"&&gn(u,"sentry._internal.replay_is_buffering",!0);let I=e.message;if(In(I)){let{__sentry_template_string__:L,__sentry_template_values__:C=[]}=I;C?.length&&(u["sentry.message.template"]=L),C.forEach((P,B)=>{u[`sentry.message.parameter.${B}`]=P})}let F=Xt(t);gn(u,"sentry.trace.parent_span_id",F?.spanContext().spanId);let O={...e,attributes:u};r.emit("beforeCaptureLog",O);let j=a?Ye(()=>a(O)):O;if(!j){r.recordDroppedEvent("before_send","log_item",1),y&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:D,message:E,attributes:x={},severityNumber:G}=j,A={timestamp:Q(),level:D,body:E,trace_id:c?.trace_id,severity_number:G??Jp[D],attributes:{...io(p),...io(x,!0)}};n(r,A),r.emit("afterCaptureLog",j)}function so(e,t){let n=t??Qp(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Kp(n,r._metadata,r.tunnel,e.getDsn());Vu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function Qp(e){return Vu().get(e)}function Vu(){return Kt("clientToLogBufferMap",()=>new WeakMap)}function Sy(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function Zp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=He(r)),ke(o,[Sy(e)])}var Ey=1e3;function Nn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function em(e,t){let n=Ju(),r=tm(e);r===void 0?n.set(e,[t]):r.length>=Ey?(ao(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Ty(e,t,n){let{release:r,environment:o}=t.getOptions(),i={...e.attributes};Nn(i,"user.id",n.id,!1),Nn(i,"user.email",n.email,!1),Nn(i,"user.name",n.username,!1),Nn(i,"sentry.release",r),Nn(i,"sentry.environment",o);let{name:s,version:a}=t.getSdkMetadata()?.sdk??{};Nn(i,"sentry.sdk.name",s),Nn(i,"sentry.sdk.version",a);let c=t.getIntegrationByName("Replay"),u=c?.getReplayId(!0);return Nn(i,"sentry.replay_id",u),u&&c?.getRecordingMode()==="buffer"&&Nn(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function yy(e,t,n,r){let[,o]=ea(t,n),i=Xt(n),s=i?i.spanContext().traceId:o?.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:Q(),trace_id:s??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...io(r),...io(e.attributes,"skip-undefined")}}}function Yu(e,t){let n=t?.scope??k(),r=t?.captureSerializedMetric??em,o=n?.getClient()??T();if(!o){y&&h.warn("No client available to capture metric.");return}let{_experiments:i,enableMetrics:s,beforeSendMetric:a}=o.getOptions();if(!(s??i?.enableMetrics??!0)){y&&h.warn("metrics option not enabled, metric will not be captured.");return}let{user:u,attributes:d}=to(ue(),n),l=Ty(e,o,u);o.emit("processMetric",l);let f=a||i?.beforeSendMetric,p=f?f(l):l;if(!p){y&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let m=yy(p,o,n,d);y&&h.log("[Metric]",m),r(o,m),o.emit("afterCaptureMetric",p)}function ao(e,t){let n=t??tm(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Zp(n,r._metadata,r.tunnel,e.getDsn());Ju().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function tm(e){return Ju().get(e)}function Ju(){return Kt("clientToMetricBufferMap",()=>new WeakMap)}var co=Symbol.for("SentryBufferFullError");function yr(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return Er(co);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return jn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}var nm=60*1e3;function ta(e,t=fr()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?nm:r-t}function rm(e,t){return e[t]||e.all||0}function wi(e,t,n=fr()){return rm(e,t)>n}function xi(e,{statusCode:t,headers:n},r=fr()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(let p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else s?o.all=r+ta(s,r):t===429&&(o.all=r+60*1e3);return o}var Ku=64;function ki(e,t,n=yr(e.bufferSize||Ku)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(kt(s,(l,f)=>{let p=Ys(f);wi(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});let c=ke(s[0],a),u=l=>{if(Zr(c,["client_report"])){y&&h.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}kt(c,(f,p)=>{e.recordDroppedEvent(l,Ys(p))})},d=()=>t({body:Hn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&y&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=xi(r,l),l),l=>{throw u("network_error"),y&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===co)return y&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}function om(e,t,n){let r=[{type:"client_report"},{timestamp:n||Ct(),discarded_events:e}];return ke(t?{dsn:t}:{},[r])}function na(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function im(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Kr],exclusive_time:s?.[Wt],measurements:e.measurements,is_segment:!0}}function sm(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Kr]:e.profile_id},...e.exclusive_time&&{[Wt]:e.exclusive_time}}}},measurements:e.measurements}}var am="Not capturing exception because it's already been captured.",cm="Discarded session because of missing or non-string release",mm=Symbol.for("SentryInternalError"),hm=Symbol.for("SentryDoNotSendEventError"),Iy=5e3;function ra(e){return{message:e,[mm]:!0}}function Xu(e){return{message:e,[hm]:!0}}function um(e){return!!e&&typeof e=="object"&&mm in e}function lm(e){return!!e&&typeof e=="object"&&hm in e}function dm(e,t,n,r,o){let i=0,s,a=!1;e.on(n,()=>{i=0,clearTimeout(s),a=!1}),e.on(t,c=>{i+=r(c),i>=8e5?o(e):a||(a=!0,s=setTimeout(()=>{o(e)},Iy))}),e.on("flush",()=>{o(e)})}var Oi=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=yr(t.transportOptions?.bufferSize??Ku),t.dsn?this._dsn=ai(t.dsn):y&&h.warn("No DSN provided, client will not send events."),this._dsn){let r=Ci(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&dm(this,"afterCaptureLog","flushLogs",vy,so),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&dm(this,"afterCaptureMetric","flushMetrics",Ry,ao)}captureException(t,n,r){let o=le();if(Os(t))return y&&h.log(am),o;let i={event_id:o,...n};return this._process(()=>this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r)).then(s=>s),"error"),i.event_id}captureMessage(t,n,r,o){let i={event_id:le(),...r},s=In(t)?t:String(t),a=at(t),c=a?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(()=>c.then(u=>this._captureEvent(u,i,o)),a?"unknown":"error"),i.event_id}captureEvent(t,n,r){let o=le();if(n?.originalException&&Os(n.originalException))return y&&h.log(am),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope,u=fm(t.type);return this._process(()=>this._captureEvent(t,i,a||r,c),u),i.event_id}captureSession(t){this.sendSession(t),bn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];qu(this,t,this._integrations),n||zu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Cp(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=bu(r,vu(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=vn}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){y&&h.warn(cm);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){y&&h.warn(cm);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=Np(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;y&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return y&&h.error("Error while sending envelope:",n),{}}return y&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=Yp(this,t),zu(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0,r=!1;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(bn(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),yi(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:ii(r),...a.contexts};let c=gr(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=k(),o=ue()){return y&&Qu(t)&&h.log(`Captured error event \`${na(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{y&&(lm(i)?h.log(i.message):um(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=_m(t),c=Qu(t),d=`before send for type \`${t.type||"error"}\``,l=typeof s>"u"?void 0:wt(s);if(c&&typeof l=="number"&&St()>l)return this.recordDroppedEvent("sample_rate","error"),Er(Xu(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let f=fm(t.type);return this._prepareEvent(t,n,r,o).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),Xu("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;let _=Ay(this,i,p,n);return by(_,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){let S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw Xu(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,p),a){let g=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=p.spans?p.spans.length:0,I=g-S;I>0&&this.recordDroppedEvent("before_send","span",I)}let _=p.transaction_info;if(a&&_&&p.transaction!==t.transaction){let g="custom";p.transaction_info={..._,source:g}}return this.sendEvent(p,n),p}).then(null,p=>{throw lm(p)||um(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),ra(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===co&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){y&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){y&&h.log("No outcomes to send");return}if(!this._dsn){y&&h.log("No dsn provided, will not send outcomes");return}y&&h.log("Sending outcomes:",t);let n=om(t,this._options.tunnel&&He(this._dsn));this.sendEnvelope(n)}};function fm(e){return e==="replay_event"?"replay":e||"error"}function by(e,t){let n=`${t} must return \`null\` or a valid event.`;if(Gt(e))return e.then(r=>{if(!Ue(r)&&r!==null)throw ra(n);return r},r=>{throw ra(`${t} rejected with ${r}`)});if(!Ue(e)&&e!==null)throw ra(n);return e}function Ay(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(Qu(c)&&o)return o(c,r);if(_m(c)){if(s||a){let u=im(c);if(a?.length&&_r(u,a))return null;if(s){let d=s(u);d?c=Bn(n,sm(d)):pi()}if(c.spans){let d=[],l=c.spans;for(let p of l){if(a?.length&&_r(p,a)){Rp(l,p);continue}if(s){let m=s(p);m?d.push(m):(pi(),d.push(p))}else d.push(p)}let f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function Qu(e){return e.type===void 0}function _m(e){return e.type==="transaction"}function Ry(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+gm(e.attributes)}function vy(e){let t=0;return e.message&&(t+=e.message.length*2),t+gm(e.attributes)}function gm(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*pm(n[0]):at(n)?t+=pm(n):t+=100}),t}function pm(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Ny(e){return Xe(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function oa(e){return Ny(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function Zu(e,t){t.debug===!0&&(y?h.enable():Ye(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),k().update(t.initialScope);let r=new e(t);return ia(r),r.init(),r}function ia(e){k().setClient(e)}var el=100,tl=5e3,Cy=36e5;function nl(e){function t(...n){y&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=tl,s;function a(l,f,p){return Zr(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let f=await o.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,Cy))}async function d(l,f=!1){if(!f&&Zr(l,["replay_event","replay_recording"]))return await o.push(l),c(el),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let p=await r.send(l),m=el;if(p){if(p.headers?.["retry-after"])m=ta(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])m=6e4;else if((p.statusCode||0)>=400)return p}return c(m),i=tl,p}catch(p){if(await a(l,p,i))return f?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=tl,c(el)),r.flush(l))}}}var uo="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function Sm(e,t){let n;return kt(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function wy(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=Sm(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function xy(e,t){return ke(t?{...e[0],dsn:t}:e[0],e[1])}function rl(e,t){return n=>{let r=e(n),o=new Map,i=t||(u=>{let d=u.getEvent();return d?.extra?.[uo]&&Array.isArray(d.extra[uo])?d.extra[uo]:[]});function s(u,d){let l=d?`${u}:${d}`:u,f=o.get(l);if(!f){let p=Ds(u);if(!p)return;let m=Ci(p,n.tunnel);f=d?wy(e,d)({...n,url:m}):e({...n,url:m}),o.set(l,f)}return[u,f]}async function a(u){function d(m){let _=m?.length?m:["event"];return Sm(u,_)}let l=i({envelope:u,getEvent:d}).map(m=>typeof m=="string"?s(m,void 0):s(m.dsn,m.release)).filter(m=>!!m),f=l.length?l:[["",r]];return(await Promise.all(f.map(([m,_])=>_.send(xy(u,m)))))[0]}async function c(u){let d=[...o.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}var ky="thismessage:/";function lo(e){return"isRelative"in e}function Ir(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?ky:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function ol(e){if(lo(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function tn(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Mi(e){return e.split(/[?#]/,1)[0]}function Li(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return My(e,n)||Oy(e,r)}function Oy(e,t){return t?Em(e)===Em(t):!1}function My(e,t){let n=Ir(e);return!n||lo(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Em(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function sa(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var il=sa;function sl(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function al(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:_t})),version:_t}),e._metadata=o}function br(e={}){let t=e.client||T();if(!Ri()||!t)return{};let n=st(),r=$t(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||k(),i=e.span||K(),s=i?fi(i):Ly(o),a=i?xe(i):gr(t,o),c=Us(a);if(!Fs.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};return e.propagateTraceparent&&(d.traceparent=i?yp(i):Py(o)),d}function Ly(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return ui(t,r,n)}function Py(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return li(t,r,n)}function cl(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var Uy=100;function dt(e,t){let n=T(),r=ue();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Uy}=n.getOptions();if(i<=0)return;let a={timestamp:Ct(),...e},c=o?Ye(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var Tm,Dy="FunctionToString",ym=new WeakMap,By=(()=>({name:Dy,setupOnce(){Tm=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=lr(this),n=ym.has(T())&&t!==void 0?t:this;return Tm.apply(n,e)}}catch{}},setup(e){ym.set(e,!0)}})),Pi=By;var Fy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Hy="EventFilters",ca=(e={})=>{let t;return{name:Hy,setup(n){let r=n.getOptions();t=Im(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=Im(e,i)}return Gy(n,t)?null:n}}},Ui=((e={})=>({...ca(e),name:"InboundFilters"}));function Im(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Fy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Gy(e,t){if(e.type){if(e.type==="transaction"&&Wy(e,t.ignoreTransactions))return y&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${pn(e)}`),!0}else{if($y(e,t.ignoreErrors))return y&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${pn(e)}`),!0;if(Vy(e))return y&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${pn(e)}`),!0;if(jy(e,t.denyUrls))return y&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${pn(e)}.
Url: ${aa(e)}`),!0;if(!zy(e,t.allowUrls))return y&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${pn(e)}.
Url: ${aa(e)}`),!0}return!1}function $y(e,t){return t?.length?na(e).some(n=>je(n,t)):!1}function Wy(e,t){if(!t?.length)return!1;let n=e.transaction;return n?je(n,t):!1}function jy(e,t){if(!t?.length)return!1;let n=aa(e);return n?je(n,t):!1}function zy(e,t){if(!t?.length)return!0;let n=aa(e);return n?je(n,t):!0}function qy(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function aa(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?qy(n):null}catch{return y&&h.error(`Cannot extract url for event ${pn(e)}`),null}}function Vy(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function ll(e,t,n,r,o,i){if(!o.exception?.values||!i||!Nt(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=ul(e,t,r,i.originalException,n,o.exception.values,s,0))}function ul(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Nt(r[o],Error)){bm(s,a);let u=e(t,r[o]),d=c.length;Am(u,o,d,a),c=ul(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Nt(u,Error)){bm(s,a);let l=e(t,u),f=c.length;Am(l,`errors[${d}]`,f,a),c=ul(e,t,n,u,o,[l,...c],l,f)}}),c}function bm(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Am(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var vm=new Map,Rm=new Set;function Yy(e){if(v._sentryModuleMetadata)for(let t of Object.keys(v._sentryModuleMetadata)){let n=v._sentryModuleMetadata[t];if(Rm.has(t))continue;Rm.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){vm.set(o.filename,n);break}}}function Jy(e,t){return Yy(e),vm.get(t)}function ua(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=Jy(e,r.filename);o&&(r.module_metadata=o)})})}function la(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var dl=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{kt(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(la(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;ua(n,t)})}});function Ar(e){let t="console";Je(t,e),Ke(t,Ky)}function Ky(){"console"in v&&cr.forEach(function(e){e in v.console&&ge(v.console,e,function(t){return $r[e]=t,function(...n){Oe("console",{args:n,level:e}),$r[e]?.apply(v.console,n)}})})}function Vn(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var Xy="CaptureConsole",Qy=((e={})=>{let t=e.levels||cr,n=e.handled??!0;return{name:Xy,setup(r){"console"in v&&Ar(({args:o,level:i})=>{T()!==r||!t.includes(i)||Zy(o,i,n)})}}}),fl=Qy;function Zy(e,t,n){let r=Vn(t),o=new Error,i={level:Vn(t),extra:{arguments:e}};De(s=>{if(s.addEventProcessor(u=>(u.logger="console",Qe(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){let u=`Assertion failed: ${pr(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),s.captureMessage(u,r,{captureContext:i,syntheticException:o})}return}let a=e.find(u=>u instanceof Error);if(a){X(a,i);return}let c=pr(e," ");s.captureMessage(c,r,{captureContext:i,syntheticException:o})})}var eI="Dedupe",tI=(()=>{let e;return{name:eI,processEvent(t){if(t.type)return t;try{if(nI(t,e))return y&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),Di=tI;function nI(e,t){return t?!!(rI(e,t)||oI(e,t)):!1}function rI(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!wm(e,t)||!Cm(e,t))}function oI(e,t){let n=Nm(t),r=Nm(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!wm(e,t)||!Cm(e,t))}function Cm(e,t){let n=Wr(e),r=Wr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function wm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Nm(e){return e.exception?.values?.[0]}var iI="ExtraErrorData",sI=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:iI,processEvent(r,o,i){let{maxValueLength:s}=i.getOptions();return aI(r,o,t,n,s)}}}),pl=sI;function aI(e,t={},n,r,o){if(!t.originalException||!Xe(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=xm(t.originalException,r,o);if(s){let a={...e.contexts},c=Be(s,n);return Ue(c)&&(Se(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function xm(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=Xe(s)||typeof s=="string"?n?fn(`${s}`,n):`${s}`:s}if(t&&e.cause!==void 0)if(Xe(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:xm(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=Xe(a)?a.toString():a}}return o}catch(r){y&&h.error("Unable to extract extra data from the Error object:",r)}return null}function cI(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var uI=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function lI(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=uI.exec(t);return n?n.slice(1):[]}function km(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=cI(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Om(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Mm(e,t){e=km(e).slice(1),t=km(t).slice(1);let n=Om(e.split("/")),r=Om(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function Lm(e,t){let n=lI(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var dI="RewriteFrames",ml=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in v&&!!v.window,o=e.iteratee||fI({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:dI,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function fI({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Mm(t,s):Lm(s);r.filename=`${n}${a}`}return r}}var pI=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],mI=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],hI={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Um=["select","insert","upsert","update","delete"];function da(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function fa(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function _I(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function gI(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&hI[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Pm(e,t=!1){return new Proxy(e,{apply(n,r,o){return qe({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[H]:"auto.db.supabase",[ie]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),X(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),X(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function SI(e){let t=e.auth;if(!(!t||fa(e.auth))){for(let n of pI){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Pm(r))}for(let n of mI){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Pm(r,!0))}da(e.auth)}}function EI(e){fa(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return yI(i),o}}),da(e.prototype.from))}function TI(e){fa(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=Um,i=n,s=_I(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[p,m]of i.url.searchParams.entries())u.push(gI(p,m));let d=Object.create(null);if(Ue(i.body))for(let[p,m]of Object.entries(i.body))d[p]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[H]:"auto.db.supabase",[ie]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),qe({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(m=>{if(p&&(m&&typeof m=="object"&&"status"in m&&_n(p,m.status||500),p.end()),m.error){let S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);let I={};u.length&&(I.query=u),Object.keys(d).length&&(I.body=d),X(S,F=>(F.addEventProcessor(O=>(Qe(O,{handled:!1,type:"auto.db.supabase.postgres"}),O)),F.setContext("supabase",I),F))}let _={type:"supabase",category:`db.${s}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(_.data=g),dt(_),m},m=>{throw p&&(_n(p,500),p.end()),m}).then(...r))}}),da(e.prototype.then))}function yI(e){for(let t of Um)fa(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return y&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),TI(s),i}}),da(e.prototype[t]))}var pa=e=>{if(!e){y&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;EI(t),SI(e)},II="Supabase",bI=(e=>({setupOnce(){pa(e)},name:II})),hl=e=>bI(e.supabaseClient);var AI=10,RI="ZodErrors";function vI(e){return Xe(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function NI(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function CI(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function wI(e){let t=new Set;for(let r of e.issues){let o=CI(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${fn(n.join(", "),100)}`}function xI(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!vI(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(NI);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:wI(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var kI=((e={})=>{let t=e.limit??AI;return{name:RI,processEvent(n,r){return xI(t,e.saveZodIssuesAsAttachment,n,r)}}}),_l=kI;var gl=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{kt(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(la(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;ua(r,n)})},processEvent(t){let n=MI(t,e.ignoreSentryInternalFrames);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function OI(e,t){if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes(PI))return!1;if(e.pre_context){let n=e.pre_context.length;for(let r=0;r<n;r++)if(e.pre_context[r]?.includes(LI))return!0}return!1}function MI(e,t){let n=Wr(e);if(n)return n.filter((r,o)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!OI(r,o)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(o=>o.startsWith(Dm)).map(o=>o.slice(Dm.length)):[])}var Dm="_sentryBundlerPluginAppKey:",LI="Attempt to invoke user-land function",PI="fn.apply(this, wrappedArguments)";var Bm=100,Fm=10,ma="flag.evaluation.";function Ot(e){let n=k().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function Tt(e,t,n=Bm){let r=k().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;UI(o,e,t,n)}function UI(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){y&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function yt(e,t,n=Fm){if(typeof t!="boolean")return;let r=K();if(!r)return;let o=M(r).data;if(`${ma}${e}`in o){r.setAttribute(`${ma}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith(ma)).length<n&&r.setAttribute(`${ma}${e}`,t)}var Sl=()=>({name:"FeatureFlags",processEvent(e,t,n){return Ot(e)},addFeatureFlag(e,t){Tt(e,t),yt(e,t)}});var El=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&ge(t,"isOn",Hm),typeof t.getFeatureValue=="function"&&ge(t,"getFeatureValue",Hm)},processEvent(t,n,r){return Ot(t)}});function Hm(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(Tt(n,r),yt(n,r)),r}}function Tl(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=we()&&t(s);if(e.endTimestamp&&a){let p=e.fetchData.__span;if(!p)return;let m=r[p];m&&(FI(m,e),DI(m,e,o),delete r[p]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!K(),l=a&&d?Et(GI(s,i,c)):new tt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let p=e.args[0],m=e.args[1]||{},_=BI(p,m,we()&&d?l:void 0,u);_&&(e.args[1]=m,m.headers=_)}let f=T();if(f){let p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function DI(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function BI(e,t,n,r){let o=br({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(ni(e)?e.headers:void 0);if(c)if(HI(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?ha(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&ha(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(_=>ha(_)):ha(l));s&&!p&&f.push(s);let m={...c,"sentry-trace":u??i,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function FI(e,t){if(t.response){_n(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function ha(e){return e.split(",").some(t=>t.trim().startsWith(Ps))}function HI(e){return typeof Headers<"u"&&Nt(e,Headers)}function GI(e,t,n){let r=Ir(e);return{name:r?`${t} ${ol(r)}`:t,attributes:$I(e,r,t,n)}}function $I(e,t,n,r){let o={url:e,type:"fetch","http.method":n,[H]:r,[ie]:"http.client"};return t&&(lo(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function Bi(e,t={},n=k()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||T();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var _a={};Kc(_a,{debug:()=>jI,error:()=>VI,fatal:()=>YI,fmt:()=>il,info:()=>zI,trace:()=>WI,warn:()=>qI});function fo(e,t,n,r,o){qn({level:e,message:t,attributes:n,severityNumber:o},r)}function WI(e,t,{scope:n}={}){fo("trace",e,t,n)}function jI(e,t,{scope:n}={}){fo("debug",e,t,n)}function zI(e,t,{scope:n}={}){fo("info",e,t,n)}function qI(e,t,{scope:n}={}){fo("warn",e,t,n)}function VI(e,t,{scope:n}={}){fo("error",e,t,n)}function YI(e,t,{scope:n}={}){fo("fatal",e,t,n)}function Fi(e,t,n){return"util"in v&&typeof v.util.format=="function"?v.util.format(...e):JI(e,t,n)}function JI(e,t,n){return e.map(r=>at(r)?String(r):JSON.stringify(Be(r,t,n))).join(" ")}function Gm(e){return/%[sdifocO]/.test(e)}function $m(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var KI="ConsoleLogs",Wm={[H]:"auto.log.console"},XI=((e={})=>{let t=e.levels||cr;return{name:KI,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){y&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Ar(({args:s,level:a})=>{if(T()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let p=u.length>0?`Assertion failed: ${Fi(u,o,i)}`:"Assertion failed";qn({level:"error",message:p,attributes:Wm})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!Gm(s[0]),f={...Wm,...l?$m(c,u):{}};qn({level:d?"info":a,message:Fi(s,o,i),severityNumber:d?10:void 0,attributes:f})})}}}),yl=XI;var ga={};Kc(ga,{count:()=>QI,distribution:()=>eb,gauge:()=>ZI});function Il(e,t,n,r){Yu({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function QI(e,t=1,n){Il("counter",e,t,n)}function ZI(e,t,n){Il("gauge",e,t,n)}function eb(e,t,n){Il("distribution",e,t,n)}var tb=["trace","debug","info","warn","error","fatal"];function bl(e={}){let t=new Set(e.levels??tb),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||T();if(!l)return;let f=ob(o,i);if(!t.has(f))return;let{normalizeDepth:p=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),_=[];s&&_.push(s),a&&a.length>0&&_.push(Fi(a,p,m));let g=_.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),qn({level:f,message:g,attributes:d})}}}var nb={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},rb={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function ob(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=nb[e];if(n)return n}if(typeof t=="number"){let n=rb[t];if(n)return n}return"info"}var jm="gen_ai.prompt",Yn="gen_ai.system",Me="gen_ai.request.model",po="gen_ai.request.stream",Jn="gen_ai.request.temperature",mo="gen_ai.request.max_tokens",Kn="gen_ai.request.frequency_penalty",ho="gen_ai.request.presence_penalty",Xn="gen_ai.request.top_p",Sa="gen_ai.request.top_k",zm="gen_ai.request.encoding_format",qm="gen_ai.request.dimensions",It="gen_ai.response.finish_reasons",nt="gen_ai.response.model",jt="gen_ai.response.id",Vm="gen_ai.response.stop_reason",Mt="gen_ai.usage.input_tokens",Lt="gen_ai.usage.output_tokens",Pt="gen_ai.usage.total_tokens",bt="gen_ai.operation.name",nn="gen_ai.request.messages.original_length",rn="gen_ai.request.messages",Le="gen_ai.response.text",Qn="gen_ai.request.available_tools",Rr="gen_ai.response.streaming",Ge="gen_ai.response.tool_calls",Al="gen_ai.agent.name",Ym="gen_ai.pipeline.name",Hi="gen_ai.conversation.id",Jm="gen_ai.usage.cache_creation_input_tokens",Km="gen_ai.usage.cache_read_input_tokens";var Xm="gen_ai.invoke_agent";var Rl="openai.response.id",vl="openai.response.model",Nl="openai.response.timestamp",Qm="openai.usage.completion_tokens",Zm="openai.usage.prompt_tokens",Gi={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings",CONVERSATIONS:"conversations"},Cl="anthropic.response.timestamp";var Ta=e=>new TextEncoder().encode(e).length,ya=e=>Ta(JSON.stringify(e));function xl(e,t){if(Ta(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){let i=Math.floor((n+r)/2),s=e.slice(0,i);Ta(s)<=t?(o=s,n=i+1):r=i-1}return o}function ib(e){return typeof e=="string"?e:"text"in e?e.text:""}function eh(e,t){return typeof e=="string"?t:{...e,text:t}}function sb(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function ab(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function $i(e){return!e||typeof e!="object"?!1:cb(e)||nh(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function cb(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&$i(e.source)}function nh(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function rh(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function ub(e,t){let n={...e,content:""},r=ya(n),o=t-r;if(o<=0)return[];let i=xl(e.content,o);return[{...e,content:i}]}function lb(e,t){let{parts:n}=e,r=n.map(a=>eh(a,"")),o=ya({...e,parts:r}),i=t-o;if(i<=0)return[];let s=[];for(let a of n){let c=ib(a),u=Ta(c);if(u<=i)s.push(a),i-=u;else if(s.length===0){let d=xl(c,i);d&&s.push(eh(a,d));break}else break}return s.length<=0?[]:[{...e,parts:s}]}function db(e,t){return!e||typeof e!="object"?[]:sb(e)?ub(e,t):rh(e)?lb(e,t):[]}var th="[Filtered]",fb=["image_url","data","content","b64_json","result","uri"];function Ea(e){let t={...e};$i(t.source)&&(t.source=Ea(t.source)),nh(e)&&(t.inlineData={...e.inlineData,data:th});for(let n of fb)typeof t[n]=="string"&&(t[n]=th);return t}function wl(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(ab(n)?r={...n,content:wl(n.content)}:"content"in n&&$i(n.content)&&(r={...n,content:Ea(n.content)}),rh(n)&&(r={...r??n,parts:wl(n.parts)}),$i(r)?r=Ea(r):$i(n)&&(r=Ea(n))),r??n})}function pb(e,t){if(!Array.isArray(e)||e.length===0)return e;let n=wl(e);if(ya(n)<=t)return n;let o=n.map(ya),i=0,s=n.length;for(let a=n.length-1;a>=0;a--){let c=o[a];if(c&&i+c>t)break;c&&(i+=c),s=a}if(s===n.length){let a=n[n.length-1];return db(a,t)}return n.slice(s)}function Zn(e){return pb(e,2e4)}function oh(e){return xl(e,2e4)}function vr(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function _o(e){return`gen_ai.${vr(e)}`}function Ia(e,t){return e?`${e}.${t}`:t}function Wi(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Mt]:t}),n!==void 0&&e.setAttributes({[Lt]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[Pt]:i})}}function ba(e){if(typeof e=="string")return oh(e);if(Array.isArray(e)){let t=Zn(e);return JSON.stringify(t)}return JSON.stringify(e)}var ih=["responses.create","chat.completions.create","embeddings.create","conversations.create"],mb=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],sh=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...mb];function Aa(e){return e.includes("chat.completions")?Gi.CHAT:e.includes("responses")?Gi.RESPONSES:e.includes("embeddings")?Gi.EMBEDDINGS:e.includes("conversations")?Gi.CONVERSATIONS:e.split(".").pop()||"unknown"}function kl(e){return`gen_ai.${Aa(e)}`}function ah(e){return ih.includes(e)}function ch(e,t){return e?`${e}.${t}`:t}function uh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function lh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function dh(e){if(e===null||typeof e!="object"||!("object"in e))return!1;let t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function fh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function ph(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function mh(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function hh(e,t,n){if(Ra(e,t.id,t.model,t.created),t.usage&&ji(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[It]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[Ge]:JSON.stringify(o)})}}}function _h(e,t,n){if(Ra(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[It]:JSON.stringify([t.status])}),t.usage&&ji(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[Ge]:JSON.stringify(o)})}}}function gh(e,t){e.setAttributes({[vl]:t.model,[nt]:t.model}),t.usage&&ji(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function Sh(e,t){let{id:n,created_at:r}=t;e.setAttributes({[Rl]:n,[jt]:n,[Hi]:n}),r&&e.setAttributes({[Nl]:new Date(r*1e3).toISOString()})}function ji(e,t,n,r){t!==void 0&&e.setAttributes({[Zm]:t,[Mt]:t}),n!==void 0&&e.setAttributes({[Qm]:n,[Lt]:n}),r!==void 0&&e.setAttributes({[Pt]:r})}function Ra(e,t,n,r){e.setAttributes({[Rl]:t,[jt]:t}),e.setAttributes({[vl]:n,[nt]:n}),e.setAttributes({[Nl]:new Date(r*1e3).toISOString()})}function hb(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function Eh(e){let t={[Me]:e.model??"unknown"};"temperature"in e&&(t[Jn]=e.temperature),"top_p"in e&&(t[Xn]=e.top_p),"frequency_penalty"in e&&(t[Kn]=e.frequency_penalty),"presence_penalty"in e&&(t[ho]=e.presence_penalty),"stream"in e&&(t[po]=e.stream),"encoding_format"in e&&(t[zm]=e.encoding_format),"dimensions"in e&&(t[qm]=e.dimensions);let n=hb(e);return n&&(t[Hi]=n),t}function _b(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function gb(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&_b(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function Sb(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),X(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!sh.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*Th(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)mh(o)?gb(o,r,n):ph(o)&&Sb(o,r,n,t),yield o}finally{Ra(t,r.responseId,r.responseModel,r.responseTimestamp),ji(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Rr]:!0}),r.finishReasons.length&&t.setAttributes({[It]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Le]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[Ge]:JSON.stringify(i)}),t.end()}}function Eb(e){let t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],o=[...t,...r];return o.length>0?JSON.stringify(o):void 0}function Tb(e,t){let n={[Yn]:"openai",[bt]:Aa(t),[H]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Eb(r);o&&(n[Qn]=o),Object.assign(n,Eh(r))}else n[Me]="unknown";return n}function yb(e,t,n){if(!t||typeof t!="object")return;let r=t;if(uh(r)){if(hh(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Le]:JSON.stringify(o)})}}else lh(r)?(_h(e,r,n),n&&r.output_text&&e.setAttributes({[Le]:r.output_text})):dh(r)?gh(e,r):fh(r)&&Sh(e,r)}function yh(e,t){let n="input"in t?t.input:"messages"in t?t.messages:void 0,r=Array.isArray(n)?n.length:void 0;if(n&&r!==0){let o=ba(n);e.setAttribute(rn,o),r&&e.setAttribute(nn,r)}}function Ib(e,t,n,r){return async function(...i){let s=Tb(i,t),a=s[Me]||"unknown",c=Aa(t),u=i[0];return u&&typeof u=="object"&&u.stream===!0?lt({name:`${c} ${a} stream-response`,op:kl(t),attributes:s},async l=>{try{r.recordInputs&&u&&yh(l,u);let f=await e.apply(n,i);return Th(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:2,message:"internal_error"}),X(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):qe({name:`${c} ${a}`,op:kl(t),attributes:s},async l=>{try{r.recordInputs&&u&&yh(l,u);let f=await e.apply(n,i);return yb(l,f,r.recordOutputs),f}catch(f){throw X(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function Ih(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=ch(t,String(o));return typeof i=="function"&&ah(s)?Ib(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Ih(i,s,n):i}})}function Ol(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Ih(e,"",r)}function bb(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"internal_error"}),X(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function Ab(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function Rb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function vb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function Nb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function bh(e,t,n,r){!(e&&typeof e=="object")||bb(e,r)||(Ab(e,t),Rb(e,t),vb(e,t,n),Nb(e,t))}function Cb(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[jt]:e.responseId}),e.responseModel&&t.setAttributes({[nt]:e.responseModel}),Wi(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Rr]:!0}),e.finishReasons.length>0&&t.setAttributes({[It]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Le]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[Ge]:JSON.stringify(e.toolCalls)}),t.end())}async function*Ah(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)bh(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[jt]:r.responseId}),r.responseModel&&t.setAttributes({[nt]:r.responseModel}),Wi(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Rr]:!0}),r.finishReasons.length>0&&t.setAttributes({[It]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Le]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[Ge]:JSON.stringify(r.toolCalls)}),t.end()}}function Rh(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{bh(o,r,n,t)}),e.on("message",()=>{Cb(r,t,n)}),e.on("error",o=>{X(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var vh=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Nh(e){return vh.includes(e)}function Ch(e,t){let n=Array.isArray(t)?t.length:void 0;n!==0&&e.setAttributes({[rn]:ba(t),[nn]:n})}function wh(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),X(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function xh(e){let{system:t,messages:n,input:r}=e,o=typeof t=="string"?[{role:"system",content:e.system}]:[],i=Array.isArray(r)?r:r!=null?[r]:void 0,s=Array.isArray(n)?n:n!=null?[n]:[],a=i??s;return[...o,...a]}function wb(e,t){let n={[Yn]:"anthropic",[bt]:vr(t),[H]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Qn]=JSON.stringify(r.tools)),n[Me]=r.model??"unknown","temperature"in r&&(n[Jn]=r.temperature),"top_p"in r&&(n[Xn]=r.top_p),"stream"in r&&(n[po]=r.stream),"top_k"in r&&(n[Sa]=r.top_k),"frequency_penalty"in r&&(n[Kn]=r.frequency_penalty),"max_tokens"in r&&(n[mo]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[Me]=e[0]:n[Me]="unknown";return n}function Ml(e,t){let n=xh(t);Ch(e,n),"prompt"in t&&e.setAttributes({[jm]:JSON.stringify(t.prompt)})}function xb(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Le]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[Ge]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Le]:t.completion}),"input_tokens"in t&&e.setAttributes({[Le]:JSON.stringify(t.input_tokens)})}function kb(e,t){"id"in t&&"model"in t&&(e.setAttributes({[jt]:t.id,[nt]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Cl]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Cl]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Wi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function Ob(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){wh(e,t);return}n&&xb(e,t),kb(e,t)}}function kh(e,t,n){throw X(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function Mb(e,t,n,r,o,i,s,a,c,u,d){let l=o[Me]??"unknown",f={name:`${i} ${l} stream-response`,op:_o(s),attributes:o};return u&&!d?lt(f,async p=>{try{c.recordInputs&&a&&Ml(p,a);let m=await e.apply(n,r);return Ah(m,p,c.recordOutputs??!1)}catch(m){return kh(m,p,s)}}):lt(f,p=>{try{c.recordInputs&&a&&Ml(p,a);let m=t.apply(n,r);return Rh(m,p,c.recordOutputs??!1)}catch(m){return kh(m,p,s)}})}function Lb(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=wb(s,t),c=a[Me]??"unknown",u=vr(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?Mb(e,o,n,s,a,u,t,d,r,l,f):qe({name:`${u} ${c}`,op:_o(t),attributes:a},p=>(r.recordInputs&&d&&Ml(p,d),Sr(()=>o.apply(n,s),m=>{X(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>Ob(p,m,r.recordOutputs))))}})}function Oh(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=Ia(t,String(o));return typeof i=="function"&&Nh(s)?Lb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Oh(i,s,n):i}})}function Ll(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Oh(e,"",r)}var Pl=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Mh="google_genai",Ul="chats.create",Lh="chat";function Pb(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),X(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function Ub(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function Db(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Bb(e,t,n,r){!e||Pb(e,r)||(Ub(e,t),Db(e,t,n))}async function*Ph(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)Bb(o,r,n,t),yield o}finally{let o={[Rr]:!0};r.responseId&&(o[jt]=r.responseId),r.responseModel&&(o[nt]=r.responseModel),r.promptTokens!==void 0&&(o[Mt]=r.promptTokens),r.completionTokens!==void 0&&(o[Lt]=r.completionTokens),r.totalTokens!==void 0&&(o[Pt]=r.totalTokens),r.finishReasons.length&&(o[It]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Le]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[Ge]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Uh(e){if(Pl.includes(e))return!0;let t=e.split(".").pop();return Pl.includes(t)}function Dh(e){return e.includes("Stream")}function go(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>go(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function Bh(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Fb(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Jn]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Xn]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Sa]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[mo]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Kn]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[ho]=e.presencePenalty),t}function Hb(e,t,n){let r={[Yn]:Mh,[bt]:vr(e),[H]:"auto.ai.google_genai"};if(t){if(r[Me]=Bh(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,Fb(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.flatMap(s=>s.functionDeclarations);r[Qn]=JSON.stringify(i)}}}else r[Me]=Bh({},n);return r}function Fh(e,t){let n=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...go(t.config.systemInstruction,"system")),"history"in t&&n.push(...go(t.history,"user")),"contents"in t&&n.push(...go(t.contents,"user")),"message"in t&&n.push(...go(t.message,"user")),Array.isArray(n)&&n.length&&e.setAttributes({[nn]:n.length,[rn]:JSON.stringify(Zn(n))})}function Gb(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(nt,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Mt]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Lt]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Pt]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Le]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[Ge]:JSON.stringify(r)})}}}function Hh(e,t,n,r){let o=t===Ul;return new Proxy(e,{apply(i,s,a){let c=a[0],u=Hb(t,c,n),d=u[Me]??"unknown",l=vr(t);return Dh(t)?lt({name:`${l} ${d} stream-response`,op:_o(t),attributes:u},async f=>{try{r.recordInputs&&c&&Fh(f,c);let p=await i.apply(n,a);return Ph(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:2,message:"internal_error"}),X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):qe({name:o?`${l} ${d} create`:`${l} ${d}`,op:_o(t),attributes:u},f=>(r.recordInputs&&c&&Fh(f,c),Sr(()=>i.apply(n,a),p=>{X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{o||Gb(f,p,r.recordOutputs)})))}})}function Dl(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=Ia(t,String(o));if(typeof s=="function"&&Uh(a)){if(a===Ul){let c=Hh(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?Dl(l,Lh,n):l}}return Hh(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?Dl(s,a,n):s}})}function Bl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Dl(e,"",r)}var Nr="auto.ai.langchain",Gh={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"};var on=(e,t,n)=>{n!=null&&(e[t]=n)},Ut=(e,t,n)=>{let r=Number(n);Number.isNaN(r)||(e[t]=r)};function At(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function zi(e){let t=e.toLowerCase();return Gh[t]??t}function $h(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function Fl(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function qi(e){return e.map(t=>{let n=t._getType;if(typeof n=="function"){let o=n.call(t);return{role:zi(o),content:At(t.content)}}let r=t.constructor?.name;if(r)return{role:zi($h(r)),content:At(t.content)};if(t.type){let o=String(t.type).toLowerCase();return{role:zi(o),content:At(t.content)}}if(t.role)return{role:zi(String(t.role)),content:At(t.content)};if(t.lc===1&&t.kwargs){let o=t.id,i=Array.isArray(o)&&o.length>0?o[o.length-1]:"",s=typeof i=="string"?$h(i):"user";return{role:zi(s),content:At(t.kwargs?.content)}}return{role:"user",content:At(t.content)}})}function $b(e,t,n){let r={},o="kwargs"in e?e.kwargs:void 0,i=t?.temperature??n?.ls_temperature??o?.temperature;Ut(r,Jn,i);let s=t?.max_tokens??n?.ls_max_tokens??o?.max_tokens;Ut(r,mo,s);let a=t?.top_p??o?.top_p;Ut(r,Xn,a);let c=t?.frequency_penalty;Ut(r,Kn,c);let u=t?.presence_penalty;return Ut(r,ho,u),t&&"stream"in t&&on(r,po,!!t.stream),r}function Wh(e,t,n,r,o,i){return{[Yn]:At(e??"langchain"),[bt]:n,[Me]:At(t),[H]:Nr,...$b(r,o,i)}}function jh(e,t,n,r,o){let i=o?.ls_provider,s=r?.model??o?.ls_model_name??"unknown",a=Wh(i,s,"pipeline",e,r,o);if(n&&Array.isArray(t)&&t.length>0){on(a,nn,t.length);let c=t.map(u=>({role:"user",content:u}));on(a,rn,At(c))}return a}function zh(e,t,n,r,o){let i=o?.ls_provider??e.id?.[2],s=r?.model??o?.ls_model_name??"unknown",a=Wh(i,s,"chat",e,r,o);if(n&&Array.isArray(t)&&t.length>0){let c=qi(t.flat());on(a,nn,c.length);let u=Zn(c);on(a,rn,At(u))}return a}function Wb(e,t){let n=[],r=e.flat();for(let o of r){let i=o.message?.content;if(Array.isArray(i))for(let s of i){let a=s;a.type==="tool_use"&&n.push(a)}}n.length>0&&on(t,Ge,At(n))}function jb(e,t){if(!e)return;let n=e.tokenUsage,r=e.usage;if(n)Ut(t,Mt,n.promptTokens),Ut(t,Lt,n.completionTokens),Ut(t,Pt,n.totalTokens);else if(r){Ut(t,Mt,r.input_tokens),Ut(t,Lt,r.output_tokens);let o=Number(r.input_tokens),i=Number(r.output_tokens),s=(Number.isNaN(o)?0:o)+(Number.isNaN(i)?0:i);s>0&&Ut(t,Pt,s),r.cache_creation_input_tokens!==void 0&&Ut(t,Jm,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&Ut(t,Km,r.cache_read_input_tokens)}}function qh(e,t){if(!e)return;let n={};if(Array.isArray(e.generations)){let u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&on(n,It,At(u)),Wb(e.generations,n),t){let d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&on(n,Le,At(d))}}jb(e.llmOutput,n);let r=e.llmOutput,i=e.generations?.[0]?.[0]?.message,s=r?.model_name??r?.model??i?.response_metadata?.model_name;s&&on(n,nt,s);let a=r?.id??i?.id;a&&on(n,jt,a);let c=r?.stop_reason??i?.response_metadata?.finish_reason;return c&&on(n,Vm,At(c)),n}function Hl(e={}){let t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,o=s=>{let a=r.get(s);a?.isRecording()&&(a.end(),r.delete(s))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(s,a,c,u,d,l,f,p){let m=Fl(l),_=jh(s,a,t,m,f),g=_[Me],S=_[bt];lt({name:`${S} ${g}`,op:"gen_ai.pipeline",attributes:{..._,[ie]:"gen_ai.pipeline"}},I=>(r.set(c,I),I))},handleChatModelStart(s,a,c,u,d,l,f,p){let m=Fl(l),_=zh(s,a,t,m,f),g=_[Me],S=_[bt];lt({name:`${S} ${g}`,op:"gen_ai.chat",attributes:{..._,[ie]:"gen_ai.chat"}},I=>(r.set(c,I),I))},handleLLMEnd(s,a,c,u,d){let l=r.get(a);if(l?.isRecording()){let f=qh(s,n);f&&l.setAttributes(f),o(a)}},handleLLMError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"llm_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Nr}.llm_error_handler`}})},handleChainStart(s,a,c,u){let d=s.name||"unknown_chain",l={[H]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),lt({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[ie]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(s)}),o(a))},handleChainError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"chain_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Nr}.chain_error_handler`}})},handleToolStart(s,a,c,u){let d=s.name||"unknown_tool",l={[H]:Nr,"gen_ai.tool.name":d};t&&(l["gen_ai.tool.input"]=a),lt({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[ie]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(s)}),o(a))},handleToolError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"tool_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Nr}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}var Gl="auto.ai.langgraph";function zb(e){if(!e||e.length===0)return null;let t=[];for(let n of e)if(n&&typeof n=="object"){let r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function qb(e){let t=e,n=0,r=0,o=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){let i=t.usage_metadata;return typeof i.input_tokens=="number"&&(n=i.input_tokens),typeof i.output_tokens=="number"&&(r=i.output_tokens),typeof i.total_tokens=="number"&&(o=i.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:o}}if(t.response_metadata&&typeof t.response_metadata=="object"){let i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){let s=i.tokenUsage;typeof s.promptTokens=="number"&&(n=s.promptTokens),typeof s.completionTokens=="number"&&(r=s.completionTokens),typeof s.totalTokens=="number"&&(o=s.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:o}}function Vb(e,t){let n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){let r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(nt,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(It,[r.finish_reason])}}function Vh(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;let t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function Yh(e,t,n){let o=n?.messages;if(!o||!Array.isArray(o))return;let i=t?.length??0,s=o.length>i?o.slice(i):[];if(s.length===0)return;let a=zb(s);a&&e.setAttribute(Ge,JSON.stringify(a));let c=qi(s);e.setAttribute(Le,JSON.stringify(c));let u=0,d=0,l=0;for(let f of s){let p=qb(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,Vb(e,f)}u>0&&e.setAttribute(Mt,u),d>0&&e.setAttribute(Lt,d),l>0&&e.setAttribute(Pt,l)}function Jh(e,t){return new Proxy(e,{apply(n,r,o){return qe({op:"gen_ai.create_agent",name:"create_agent",attributes:{[H]:Gl,[ie]:"gen_ai.create_agent",[bt]:"create_agent"}},i=>{try{let s=Reflect.apply(n,r,o),a=o.length>0?o[0]:{};a?.name&&typeof a.name=="string"&&(i.setAttribute(Al,a.name),i.updateName(`create_agent ${a.name}`));let c=s.invoke;return c&&typeof c=="function"&&(s.invoke=Yb(c.bind(s),s,a,t)),s}catch(s){throw i.setStatus({code:2,message:"internal_error"}),X(s,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),s}})}})}function Yb(e,t,n,r){return new Proxy(e,{apply(o,i,s){return qe({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[H]:Gl,[ie]:Xm,[bt]:"invoke_agent"}},async a=>{try{let c=n?.name;c&&typeof c=="string"&&(a.setAttribute(Ym,c),a.setAttribute(Al,c),a.updateName(`invoke_agent ${c}`));let l=(s.length>1?s[1]:void 0)?.configurable?.thread_id;l&&typeof l=="string"&&a.setAttribute(Hi,l);let f=Vh(t);f&&a.setAttribute(Qn,JSON.stringify(f));let p=r.recordInputs,m=r.recordOutputs,_=s.length>0?s[0].messages??[]:[];if(_&&p){let S=qi(_),I=Zn(S);a.setAttributes({[rn]:JSON.stringify(I),[nn]:S.length})}let g=await Reflect.apply(o,i,s);return m&&Yh(a,_??null,g),g}catch(c){throw a.setStatus({code:2,message:"internal_error"}),X(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function $l(e,t){let n=t||{};return e.compile=Jh(e.compile.bind(e),n),e}function va(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var So=v;function Wl(){return"history"in So&&!!So.history}function Jb(){if(!("fetch"in So))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Vi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Yi(){if(typeof EdgeRuntime=="string")return!0;if(!Jb())return!1;if(Vi(So.fetch))return!0;let e=!1,t=So.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Vi(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){y&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function jl(){return"ReportingObserver"in So}function Cr(e,t){let n="fetch";Je(n,e),Ke(n,()=>Xh(void 0,t))}function zl(e){let t="fetch-body-resolved";Je(t,e),Ke(t,()=>Xh(Xb))}function Xh(e,t=!1){t&&!Yi()||ge(v,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=Qb(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:Q()*1e3,virtualError:o,headers:Zb(r)};return e||Oe("fetch",{...a}),n.apply(v,r).then(async c=>(e?e(c):Oe("fetch",{...a,endTimestamp:Q()*1e3,response:c}),c),c=>{Oe("fetch",{...a,endTimestamp:Q()*1e3,error:c}),Xe(c)&&c.stack===void 0&&(c.stack=o.stack,Se(c,"framesToPop",1));let d=T()?.getOptions().enhanceFetchErrorMessages??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let p=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${p})`:Se(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function Kb(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function Xb(e){let t;try{t=e.clone()}catch{return}Kb(t,()=>{Oe("fetch-body-resolved",{endTimestamp:Q()*1e3,response:e})})}function Na(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Kh(e){return typeof e=="string"?e:e?Na(e,"url")?e.url:e.toString?e.toString():"":""}function Qb(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Kh(n),method:Na(r,"method")?String(r.method).toUpperCase():ni(n)&&Na(n,"method")?String(n.method).toUpperCase():"GET"}}let t=e[0];return{url:Kh(t),method:Na(t,"method")?String(t.method).toUpperCase():"GET"}}function Zb(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(ni(t))return new Headers(t.headers)}catch{}}function ql(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Vl(){return"npm"}function Qh(){return!ql()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function er(){return typeof window<"u"&&(!Qh()||eA())}function eA(){return v.process?.type==="renderer"}var an=v,pe=an.document,Ji=an.navigator,h_="Report a Bug",tA="Cancel",nA="Send Bug Report",rA="Confirm",oA="Report a Bug",iA="your.email@example.org",sA="Email",aA="What's the bug? What did you expect?",cA="Description",uA="Your Name",lA="Name",dA="Thank you for your report!",fA="(required)",pA="Add a screenshot",mA="Remove screenshot",hA="Highlight",_A="Hide",gA="Remove",SA="widget",EA="api",TA=5e3,rd=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=T();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&k().setTags(e.tags);let r=Bi({source:EA,url:ct(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},ka=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function yA(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ji.userAgent)||/Macintosh/i.test(Ji.userAgent)&&Ji.maxTouchPoints&&Ji.maxTouchPoints>1||!isSecureContext)}function Ca(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function IA(e){let t=pe.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Dt(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var Eo=20,bA="http://www.w3.org/2000/svg";function AA(){let e=a=>an.document.createElementNS(bA,a),t=Dt(e("svg"),{width:`${Eo}`,height:`${Eo}`,viewBox:`0 0 ${Eo} ${Eo}`,fill:"var(--actor-color, var(--foreground))"}),n=Dt(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Dt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=Dt(e("clipPath"),{id:"clip0_57_80"}),s=Dt(e("rect"),{width:`${Eo}`,height:`${Eo}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function RA({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=pe.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||h_,o.appendChild(AA()),e){let s=pe.createElement("span");s.appendChild(pe.createTextNode(e)),o.appendChild(s)}let i=IA(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var __="rgba(88, 74, 192, 1)",vA={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:__,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Zh={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:__,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function e_(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function NA({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=pe.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${e_(e==="dark"?{...Zh,...t}:{...vA,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${e_({...Zh,...t})}
  }
}`:""}
`,r&&o.setAttribute("nonce",r),o}var Da=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:m,scriptNonce:_,colorScheme:g="system",themeLight:S={},themeDark:I={},addScreenshotButtonLabel:F=pA,cancelButtonLabel:O=tA,confirmButtonLabel:j=rA,emailLabel:D=sA,emailPlaceholder:E=iA,formTitle:x=oA,isRequiredLabel:G=fA,messageLabel:A=cA,messagePlaceholder:L=aA,nameLabel:C=lA,namePlaceholder:P=uA,removeScreenshotButtonLabel:B=mA,submitButtonLabel:re=nA,successMessageText:ee=dA,triggerLabel:se=h_,triggerAriaLabel:R="",highlightToolText:q=hA,hideToolText:N=_A,removeHighlightText:V=gA,onFormOpen:de,onFormClose:ae,onSubmitSuccess:Ce,onSubmitError:ot,onFormSubmitted:Pn}={})=>{let it={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:m,scriptNonce:_,colorScheme:g,themeDark:I,themeLight:S,triggerLabel:se,triggerAriaLabel:R,cancelButtonLabel:O,submitButtonLabel:re,confirmButtonLabel:j,formTitle:x,emailLabel:D,emailPlaceholder:E,messageLabel:A,messagePlaceholder:L,nameLabel:C,namePlaceholder:P,successMessageText:ee,isRequiredLabel:G,addScreenshotButtonLabel:F,removeScreenshotButtonLabel:B,highlightToolText:q,hideToolText:N,removeHighlightText:V,onFormClose:ae,onFormOpen:de,onSubmitError:ot,onSubmitSuccess:Ce,onFormSubmitted:Pn},ht=null,ln=[],Un=fe=>{if(!ht){let be=pe.createElement("div");be.id=String(fe.id),pe.body.appendChild(be),ht=be.attachShadow({mode:"open"}),ht.appendChild(NA(fe))}return ht},Jo=async fe=>{let be=fe.enableScreenshot&&yA(),Ht,$e;try{Ht=(t?t():await e("feedbackModalIntegration",_))(),oo(Ht)}catch{throw ka&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let dn=be?n?n():await e("feedbackScreenshotIntegration",_):void 0;dn&&($e=dn(),oo($e))}catch{ka&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let Ve=Ht.createDialog({options:{...fe,onFormClose:()=>{Ve?.close(),fe.onFormClose?.()},onFormSubmitted:()=>{Ve?.close(),fe.onFormSubmitted?.()}},screenshotIntegration:$e,sendFeedback:rd,shadow:Un(fe)});return Ve},As=(fe,be={})=>{let Ht=Ca(it,be),$e=typeof fe=="string"?pe.querySelector(fe):typeof fe.addEventListener=="function"?fe:null;if(!$e)throw ka&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ve=null,dn=async()=>{Ve||(Ve=await Jo({...Ht,onFormSubmitted:()=>{Ve?.removeFromDom(),Ht.onFormSubmitted?.()}})),Ve.appendToDom(),Ve.open()};$e.addEventListener("click",dn);let te=()=>{ln=ln.filter(vt=>vt!==te),Ve?.removeFromDom(),Ve=null,$e.removeEventListener("click",dn)};return ln.push(te),te},Ko=(fe={})=>{let be=Ca(it,fe),Ht=Un(be),$e=RA({triggerLabel:be.triggerLabel,triggerAriaLabel:be.triggerAriaLabel,shadow:Ht,styleNonce:m});return As($e.el,{...be,onFormOpen(){$e.hide()},onFormClose(){$e.show()},onFormSubmitted(){$e.show()}}),$e};return{name:"Feedback",setupOnce(){!er()||!it.autoInject||(pe.readyState==="loading"?pe.addEventListener("DOMContentLoaded",()=>Ko().appendToDom()):Ko().appendToDom())},attachTo:As,createWidget(fe={}){let be=Ko(Ca(it,fe));return be.appendToDom(),be},async createForm(fe={}){return Jo(Ca(it,fe))},remove(){ht&&(ht.parentElement?.remove(),ht=null),ln.forEach(fe=>fe()),ln=[]}}});function g_(){return T()?.getIntegrationByName("Feedback")}var Ba,he,S_,wr,t_,E_,Zl,Ki={},od=[],CA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,id=Array.isArray;function nr(e,t){for(var n in t)e[n]=t[n];return e}function T_(e){var t=e.parentNode;t&&t.removeChild(e)}function Y(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?Ba.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return Oa(e,s,r,o,null)}function Oa(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++S_,__i:-1,__u:0};return o==null&&he.vnode!=null&&he.vnode(i),i}function Xi(e){return e.children}function Ma(e,t){this.props=e,this.context=t}function yo(e,t){if(t==null)return e.__?yo(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?yo(e):null}function wA(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=nr({},o)).__v=o.__v+1,he.vnode&&he.vnode(r),sd(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??yo(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&y_(r),r}function y_(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return y_(e)}}function n_(e){(!e.__d&&(e.__d=!0)&&wr.push(e)&&!Ua.__r++||t_!==he.debounceRendering)&&((t_=he.debounceRendering)||E_)(Ua)}function Ua(){var e,t,n,r=[],o=[];for(wr.sort(Zl);e=wr.shift();)e.__d&&(n=wr.length,t=wA(e,r,o)||t,n===0||wr.length>n?(ed(r,t,o),o.length=r.length=0,t=void 0,wr.sort(Zl)):t&&he.__c&&he.__c(t,od));t&&ed(r,t,o),Ua.__r=0}function I_(e,t,n,r,o,i,s,a,c,u,d){var l,f,p,m,_,g=r&&r.__k||od,S=t.length;for(n.__d=c,xA(n,t,g),c=n.__d,l=0;l<S;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Ki:g[p.__i]||Ki,p.__i=l,sd(e,p,f,o,i,s,a,c,u,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&ad(f.ref,null,p),d.push(p.ref,p.__c||m,p)),_==null&&m!=null&&(_=m),65536&p.__u||f.__k===p.__k?c=b_(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:m&&(c=m.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=_}function xA(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Oa(null,o,null,null,o):id(o)?Oa(Xi,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Oa(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=kA(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=yo(i)),td(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=yo(i)),td(i,i))}function b_(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=b_(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function kA(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function r_(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||CA.test(t)?n:n+"px"}function wa(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||r_(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||r_(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?i_:o_,i)):e.removeEventListener(t,i?i_:o_,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function o_(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(he.event?he.event(e):e)}}function i_(e){if(this.l)return this.l[e.type+!0](he.event?he.event(e):e)}function sd(e,t,n,r,o,i,s,a,c,u){var d,l,f,p,m,_,g,S,I,F,O,j,D,E,x,G=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=he.__b)&&d(t);e:if(typeof G=="function")try{if(S=t.props,I=(d=G.contextType)&&r[d.__c],F=d?I?I.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in G&&G.prototype.render?t.__c=l=new G(S,F):(t.__c=l=new Ma(S,F),l.constructor=G,l.render=MA),I&&I.sub(l),l.props=S,l.state||(l.state={}),l.context=F,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),G.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=nr({},l.__s)),nr(l.__s,G.getDerivedStateFromProps(S,l.__s))),p=l.props,m=l.state,l.__v=t,f)G.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(G.getDerivedStateFromProps==null&&S!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(S,F),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(S,l.__s,F)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=S,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(A){A&&(A.__=t)}),O=0;O<l._sb.length;O++)l.__h.push(l._sb[O]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(S,l.__s,F),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,m,_)})}if(l.context=F,l.props=S,l.__P=e,l.__e=!1,j=he.__r,D=0,"prototype"in G&&G.prototype.render){for(l.state=l.__s,l.__d=!1,j&&j(t),d=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,j&&j(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++D<25);l.state=l.__s,l.getChildContext!=null&&(r=nr(nr({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(_=l.getSnapshotBeforeUpdate(p,m)),I_(e,id(x=d!=null&&d.type===Xi&&d.key==null?d.props.children:d)?x:[x],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(A){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),he.__e(A,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=OA(n.__e,t,n,r,o,i,s,c,u);(d=he.diffed)&&d(t)}function ed(e,t,n){for(var r=0;r<n.length;r++)ad(n[r],n[++r],n[++r]);he.__c&&he.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){he.__e(i,o.__v)}})}function OA(e,t,n,r,o,i,s,a,c){var u,d,l,f,p,m,_,g=n.props,S=t.props,I=t.type;if(I==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!I&&(I?p.localName===I:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(I===null)return document.createTextNode(S);e=o?document.createElementNS("http://www.w3.org/2000/svg",I):document.createElement(I,S.is&&S),i=null,a=!1}if(I===null)g===S||a&&e.data===S||(e.data=S);else{if(i=i&&Ba.call(e.childNodes),g=n.props||Ki,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in S||wa(e,u,null,p,o));for(u in S)p=S[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?m=p:u=="checked"?_=p:u==="key"||a&&typeof p!="function"||g[u]===p||wa(e,u,p,g[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),I_(e,id(f)?f:[f],t,n,r,o&&I!=="foreignObject",i,s,i?i[0]:n.__k&&yo(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&T_(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||I==="progress"&&!m||I==="option"&&m!==g[u])&&wa(e,u,m,g[u],!1),u="checked",_!==void 0&&_!==e[u]&&wa(e,u,_,g[u],!1))}return e}function ad(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){he.__e(r,n)}}function td(e,t,n){var r,o;if(he.unmount&&he.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ad(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){he.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&td(r[o],t,n||typeof e.type!="function");n||e.__e==null||T_(e.__e),e.__=e.__e=e.__d=void 0}function MA(e,t,n){return this.constructor(e,n)}function LA(e,t,n){var r,o,i,s;he.__&&he.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],sd(t,e=t.__k=Y(Xi,null,[e]),o||Ki,Ki,t.ownerSVGElement!==void 0,o?null:t.firstChild?Ba.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,ed(i,e,s)}Ba=od.slice,he={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},S_=0,Ma.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=nr({},this.state),typeof e=="function"&&(e=e(nr({},n),this.props)),e&&nr(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),n_(this))},Ma.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),n_(this))},Ma.prototype.render=Xi,wr=[],E_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Zl=function(e,t){return e.__v.__b-t.__v.__b},Ua.__r=0;var Cn,me,Yl,s_,Io=0,A_=[],La=[],Ae=he,a_=Ae.__b,c_=Ae.__r,u_=Ae.diffed,l_=Ae.__c,d_=Ae.unmount,f_=Ae.__;function kr(e,t){Ae.__h&&Ae.__h(me,e,Io||t),Io=0;var n=me.__H||(me.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:La}),n.__[e]}function xr(e){return Io=1,R_(N_,e)}function R_(e,t,n){var r=kr(Cn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):N_(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=me,!me.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};me.u=!0;var i=me.shouldComponentUpdate,s=me.componentWillUpdate;me.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},me.shouldComponentUpdate=o}return r.__N||r.__}function PA(e,t){var n=kr(Cn++,3);!Ae.__s&&cd(n.__H,t)&&(n.__=e,n.i=t,me.__H.__h.push(n))}function v_(e,t){var n=kr(Cn++,4);!Ae.__s&&cd(n.__H,t)&&(n.__=e,n.i=t,me.__h.push(n))}function UA(e){return Io=5,Qi(function(){return{current:e}},[])}function DA(e,t,n){Io=6,v_(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Qi(e,t){var n=kr(Cn++,7);return cd(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function To(e,t){return Io=8,Qi(function(){return e},t)}function BA(e){var t=me.context[e.__c],n=kr(Cn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(me)),t.props.value):e.__}function FA(e,t){Ae.useDebugValue&&Ae.useDebugValue(t?t(e):e)}function HA(e){var t=kr(Cn++,10),n=xr();return t.__=e,me.componentDidCatch||(me.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function GA(){var e=kr(Cn++,11);if(!e.__){for(var t=me.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function $A(){for(var e;e=A_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Pa),e.__H.__h.forEach(nd),e.__H.__h=[]}catch(t){e.__H.__h=[],Ae.__e(t,e.__v)}}Ae.__b=function(e){me=null,a_&&a_(e)},Ae.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),f_&&f_(e,t)},Ae.__r=function(e){c_&&c_(e),Cn=0;var t=(me=e.__c).__H;t&&(Yl===me?(t.__h=[],me.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=La,n.__N=n.i=void 0})):(t.__h.forEach(Pa),t.__h.forEach(nd),t.__h=[],Cn=0)),Yl=me},Ae.diffed=function(e){u_&&u_(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(A_.push(t)!==1&&s_===Ae.requestAnimationFrame||((s_=Ae.requestAnimationFrame)||WA)($A)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==La&&(n.__=n.__V),n.i=void 0,n.__V=La})),Yl=me=null},Ae.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Pa),n.__h=n.__h.filter(function(r){return!r.__||nd(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ae.__e(r,n.__v)}}),l_&&l_(e,t)},Ae.unmount=function(e){d_&&d_(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Pa(r)}catch(o){t=o}}),n.__H=void 0,t&&Ae.__e(t,n.__v))};var p_=typeof requestAnimationFrame=="function";function WA(e){var t,n=function(){clearTimeout(r),p_&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);p_&&(t=requestAnimationFrame(n))}function Pa(e){var t=me,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),me=t}function nd(e){var t=me;e.__c=e.__(),me=t}function cd(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function N_(e,t){return typeof t=="function"?t(e):t}var jA=Object.defineProperty({__proto__:null,useCallback:To,useContext:BA,useDebugValue:FA,useEffect:PA,useErrorBoundary:HA,useId:GA,useImperativeHandle:DA,useLayoutEffect:v_,useMemo:Qi,useReducer:R_,useRef:UA,useState:xr},Symbol.toStringTag,{value:"Module"}),zA="http://www.w3.org/2000/svg";function qA(){let e=r=>pe.createElementNS(zA,r),t=Dt(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Dt(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function VA({options:e}){let t=Qi(()=>({__html:qA().outerHTML}),[]);return Y("h2",{class:"dialog__header"},Y("span",{class:"dialog__title"},e.formTitle),e.showBranding?Y("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function YA(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function Jl(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function JA({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:m,emailPlaceholder:_,isEmailRequired:g,isNameRequired:S,messageLabel:I,messagePlaceholder:F,nameLabel:O,namePlaceholder:j,submitButtonLabel:D,isRequiredLabel:E}=e,[x,G]=xr(!1),[A,L]=xr(null),[C,P]=xr(!1),B=u?.input,[re,ee]=xr(null),se=To(N=>{ee(N),P(!1)},[]),R=To(N=>{let V=YA(N,{emailLabel:m,isEmailRequired:g,isNameRequired:S,messageLabel:I,nameLabel:O});return V.length>0?L(`Please enter in the following required fields: ${V.join(", ")}`):L(null),V.length===0},[m,g,S,I,O]),q=To(async N=>{G(!0);try{if(N.preventDefault(),!(N.target instanceof HTMLFormElement))return;let V=new FormData(N.target),de=await(u&&C?u.value():void 0),ae={name:Jl(V,"name"),email:Jl(V,"email"),message:Jl(V,"message"),attachments:de?[de]:void 0};if(!R(ae))return;try{let Ce=await o({name:ae.name,email:ae.email,message:ae.message,source:SA,tags:d},{attachments:ae.attachments});i(ae,Ce)}catch(Ce){ka&&h.error(Ce),L(Ce),s(Ce)}}finally{G(!1)}},[u&&C,i,s]);return Y("form",{class:"form",onSubmit:q},B&&C?Y(B,{onError:se}):null,Y("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:x},Y("div",{class:"form__top"},A?Y("div",{class:"form__error-container"},A):null,c?Y("label",{for:"name",class:"form__label"},Y(Kl,{label:O,isRequiredLabel:E,isRequired:S}),Y("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:j,required:S,type:"text"})):Y("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?Y("label",{for:"email",class:"form__label"},Y(Kl,{label:m,isRequiredLabel:E,isRequired:g}),Y("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:_,required:g,type:"email"})):Y("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Y("label",{for:"message",class:"form__label"},Y(Kl,{label:I,isRequiredLabel:E,isRequired:!0}),Y("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:F,required:!0,rows:5})),B?Y("label",{for:"screenshot",class:"form__label"},Y("button",{class:"btn btn--default",disabled:x,type:"button",onClick:()=>{ee(null),P(N=>!N)}},C?f:l),re?Y("div",{class:"form__error-container"},re.message):null):null),Y("div",{class:"btn-group"},Y("button",{class:"btn btn--primary",disabled:x,type:"submit"},D),Y("button",{class:"btn btn--default",disabled:x,type:"button",onClick:r},p))))}function Kl({label:e,isRequired:t,isRequiredLabel:n}){return Y("span",{class:"form__label__text"},e,t&&Y("span",{class:"form__label__text--required"},n))}var xa=16,m_=17,KA="http://www.w3.org/2000/svg";function XA(){let e=c=>an.document.createElementNS(KA,c),t=Dt(e("svg"),{width:`${xa}`,height:`${m_}`,viewBox:`0 0 ${xa} ${m_}`,fill:"inherit"}),n=Dt(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Dt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Dt(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=Dt(e("clipPath"),{id:"clip0_57_156"}),a=Dt(e("rect"),{width:`${xa}`,height:`${xa}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function QA({open:e,onFormSubmitted:t,...n}){let r=n.options,o=Qi(()=>({__html:XA().outerHTML}),[]),[i,s]=xr(null),a=To(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=To((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},TA))},[t]);return Y(Xi,null,i?Y("div",{class:"success__position",onClick:a},Y("div",{class:"success__content"},r.successMessageText,Y("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):Y("dialog",{class:"dialog",onClick:r.onFormClose,open:e},Y("div",{class:"dialog__position"},Y("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},Y(VA,{options:r}),Y(JA,{...n,onSubmitSuccess:c})))))}var ZA=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,eR=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,tR=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,nR=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,rR=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function oR(e){let t=pe.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${ZA}
${eR}
${tR}
${nR}
${rR}
`,e&&t.setAttribute("nonce",e),t}function iR(){let e=k().getUser(),t=ue().getUser(),n=Qt().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var C_=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=iR(),a=pe.createElement("div"),c=oR(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),pe.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),T()?.emit("openFeedbackWidget"),u=pe.body.style.overflow,pe.body.style.overflow="hidden"},close(){f(!1),pe.body.style.overflow=u}},l=t?.createInput({h:Y,hooks:jA,dialog:d,options:e}),f=p=>{LA(Y(QA,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&s?.[i.name]||""),defaultEmail:String(i&&s?.[i.email]||""),onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,_)=>{f(!1),e.onSubmitSuccess?.(m,_)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function sR({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function aR(e){let t=pe.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function cR({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function uR({hooks:e}){function t(){let[n,r]=e.useState(an.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(an.devicePixelRatio)},i=matchMedia(`(resolution: ${an.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await Ji.mediaDevices.getDisplayMedia({video:{width:an.innerWidth*a,height:an.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=pe.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(s)},[])}}function lR(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function tr(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function Xl(e,t){tr(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function Ql(e,t,n){tr(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{lR(i,o,t)})})}function dR({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=uR({hooks:t}),s=cR({h:e}),a=sR({h:e}),c={__html:aR(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[f,p]=t.useState("highlight"),[m,_]=t.useState([]),g=t.useRef(null),S=t.useRef(null),I=t.useRef(null),F=t.useRef(null),[O,j]=t.useState(1),D=t.useMemo(()=>{let C=pe.getElementById(o.id);if(!C)return"white";let P=getComputedStyle(C);return P.getPropertyValue("--button-primary-background")||P.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let C=()=>{let P=g.current;P&&(tr(l.canvas,{alpha:!1},B=>{let re=Math.min(P.clientWidth/B.width,P.clientHeight/B.height);j(re)}),(P.clientHeight===0||P.clientWidth===0)&&setTimeout(C,0))};return C(),an.addEventListener("resize",C),()=>{an.removeEventListener("resize",C)}},[l]);let E=t.useCallback((C,P)=>{tr(C,{alpha:!0},(B,re)=>{re.scale(P,P),B.width=l.canvas.width,B.height=l.canvas.height})},[l]);t.useEffect(()=>{E(S.current,l.dpi),Xl(S.current,l.canvas)},[l]),t.useEffect(()=>{E(I.current,l.dpi),tr(I.current,{alpha:!0},(C,P)=>{P.clearRect(0,0,C.width,C.height)}),Ql(I.current,D,m)},[m,D]),t.useEffect(()=>{E(n,l.dpi),Xl(n,l.canvas),tr(pe.createElement("canvas"),{alpha:!0},(C,P)=>{P.scale(l.dpi,l.dpi),C.width=l.canvas.width,C.height=l.canvas.height,Ql(C,D,m),Xl(n,C)})},[m,l,D]);let x=C=>{if(!f||!F.current)return;let P=F.current.getBoundingClientRect(),B={type:f,x:C.offsetX/O,y:C.offsetY/O},re=(R,q)=>{let N=(q.clientX-P.x)/O,V=(q.clientY-P.y)/O;return{type:R.type,x:Math.min(R.x,N),y:Math.min(R.y,V),w:Math.abs(N-R.x),h:Math.abs(V-R.y)}},ee=R=>{tr(I.current,{alpha:!0},(q,N)=>{N.clearRect(0,0,q.width,q.height)}),Ql(I.current,D,[...m,re(B,R)])},se=R=>{let q=re(B,R);q.w*O>=1&&q.h*O>=1&&_(N=>[...N,q]),pe.removeEventListener("mousemove",ee),pe.removeEventListener("mouseup",se)};pe.addEventListener("mousemove",ee),pe.addEventListener("mouseup",se)},G=t.useCallback(C=>P=>{P.preventDefault(),P.stopPropagation(),_(B=>{let re=[...B];return re.splice(C,1),re})},[]),A={width:`${l.canvas.width*O}px`,height:`${l.canvas.height*O}px`},L=C=>{C.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:S,id:"background",style:A}),e("canvas",{ref:I,id:"foreground",style:A}),e("div",{ref:F,onMouseDown:x,style:A},m.map((C,P)=>e("div",{key:P,class:"editor__rect",style:{top:`${C.y*O}px`,left:`${C.x*O}px`,width:`${C.w*O}px`,height:`${C.h*O}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:G(P),onMouseDown:L,onMouseUp:L,type:"button"},e(a,null))))))),e(s,{options:o,action:f,setAction:p}))};return function({onError:f}){let[p,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((_,g)=>{tr(pe.createElement("canvas"),{alpha:!1},(S,I)=>{I.scale(g,g),S.width=_.videoWidth,S.height=_.videoHeight,I.drawImage(_,0,0,S.width,S.height),m({canvas:S,dpi:g})}),n.width=_.videoWidth,n.height=_.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(_=>{u.display="block",f(_)},[])}),p?e(d,{screenshot:p}):e("div",null)}}var w_=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=pe.createElement("canvas");return{input:dR({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var w=v,ud=0;function ld(){return ud>0}function fR(){ud++,setTimeout(()=>{ud--})}function Or(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(lr(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>Or(s,t));return e.apply(this,i)}catch(i){throw fR(),De(s=>{s.addEventProcessor(a=>(t.mechanism&&(Vr(a,void 0,void 0),Qe(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),X(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}xs(r,e),Se(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Zi(){let e=ct(),{referrer:t}=w.document||{},{userAgent:n}=w.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var pR={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},x_=w;async function Fa(e,t){let n=pR[e],r=x_.Sentry=x_.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=mR(n),s=w.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,f)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",f)}),c=w.document.currentScript,u=w.document.body||w.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function mR(e){let n=T()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${_t}/${e}.min.js`,n).toString()}var k_=Da({lazyLoadIntegration:Fa});var dd=Da({getModalIntegration:()=>C_,getScreenshotIntegration:()=>w_});function bo(e,t){let n=md(e,t),r={type:ER(t),value:TR(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function hR(e,t,n,r){let i=T()?.getOptions().normalizeDepth,s=bR(t),a={__serialized__:qs(t,i)};if(s)return{exception:{values:[bo(e,s)]},extra:a};let c={exception:{values:[{type:ur(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:yR(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=md(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function fd(e,t){return{exception:{values:[bo(e,t)]}}}function md(e,t){let n=t.stacktrace||t.stack||"",r=gR(t),o=SR(t);try{return e(n,r,o)}catch{}return[]}var _R=/Minified React error #\d+;/i;function gR(e){return e&&_R.test(e.message)?1:0}function SR(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function O_(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function ER(e){let t=e?.name;return!t&&O_(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function TR(e){let t=e?.message;return O_(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?oa(t.error):oa(e):"No error message"}function Ha(e,t,n,r){let o=n?.syntheticException||void 0,i=Ao(e,t,o,r);return Qe(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),jn(i)}function Ga(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=pd(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),jn(s)}function Ao(e,t,n,r,o){let i;if(ei(t)&&t.error)return fd(e,t.error);if(ws(t)||ru(t)){let s=t;if("stack"in t)i=fd(e,t);else{let a=s.name||(ws(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=pd(e,c,n,r),Vr(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Xe(t)?fd(e,t):Ue(t)||ur(t)?(i=hR(e,t,n,o),Qe(i,{synthetic:!0}),i):(i=pd(e,t,n,r),Vr(i,`${t}`,void 0),Qe(i,{synthetic:!0}),i)}function pd(e,t,n,r){let o={};if(r&&n){let i=md(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),Qe(o,{synthetic:!0})}if(In(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function yR(e,{isUnhandledRejection:t}){let n=cu(e),r=t?"promise rejection":"exception";return ei(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:ur(e)?`Event \`${IR(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function IR(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function bR(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var Ro=class extends Oi{constructor(t){let n=AR(t),r=w.SENTRY_SDK_SOURCE||Vl();al(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;w.document&&(i||s||u)&&w.document.addEventListener("visibilitychange",()=>{w.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&so(this),u&&ao(this))}),o&&this.on("beforeSendSession",sl)}eventFromException(t,n){return Ha(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Ga(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function AR(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:w.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var zt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var U=v;var RR=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Sn=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=RR(t.value,n),e(t)))}};var wn=(e=!0)=>{let t=U.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var qt=()=>wn()?.activationStart??0;function Vt(e,t,n){U.document&&U.addEventListener(e,t,n)}function Mr(e,t,n){U.document&&U.removeEventListener(e,t,n)}var vo=-1,M_=new Set,vR=()=>U.document?.visibilityState==="hidden"&&!U.document?.prerendering?0:1/0,$a=e=>{if(NR(e)&&vo>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(let t of M_)t();isFinite(vo)||(vo=e.type==="visibilitychange"?e.timeStamp:0,Mr("prerenderingchange",$a,!0))}},En=()=>{if(U.document&&vo<0){let e=qt();vo=(U.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??vR(),Vt("visibilitychange",$a,!0),Vt("pagehide",$a,!0),Vt("prerenderingchange",$a,!0)}return{get firstHiddenTime(){return vo},onHidden(e){M_.add(e)}}};function NR(e){return e.type==="pagehide"||U.document?.visibilityState==="hidden"}var L_=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var Tn=(e,t=-1)=>{let n=wn(),r="navigate";return n&&(U.document?.prerendering||qt()>0?r="prerender":U.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:L_(),navigationType:r}};var hd=new WeakMap;function No(e,t){try{return hd.get(e)||hd.set(e,new t),hd.get(e)}catch{return new t}}var Wa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Yt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var Co=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var rr=e=>{U.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var CR=[1800,3e3],P_=(e,t={})=>{rr(()=>{let n=En(),r=Tn("FCP"),o,s=Yt("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-qt(),0),r.entries.push(c),o(!0)))});s&&(o=Sn(e,r,CR,t.reportAllChanges))})};var wR=[.1,.25],U_=(e,t={})=>{P_(Co(()=>{let n=Tn("CLS",0),r,o=En(),i=No(t,Wa),s=c=>{for(let u of c)i._processEntry(u);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,r())},a=Yt("layout-shift",s);a&&(r=Sn(e,n,wR,t.reportAllChanges),o.onHidden(()=>{s(a.takeRecords()),r(!0)}),U?.setTimeout?.(r))}))};var D_=0,_d=1/0,ja=0,xR=e=>{e.forEach(t=>{t.interactionId&&(_d=Math.min(_d,t.interactionId),ja=Math.max(ja,t.interactionId),D_=ja?(ja-_d)/7+1:0)})},gd,Sd=()=>gd?D_:performance.interactionCount||0,B_=()=>{"interactionCount"in performance||gd||(gd=Yt("event",xR,{type:"event",buffered:!0,durationThreshold:0}))};var Ed=10,F_=0,kR=()=>Sd()-F_,za=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){F_=Sd(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(kR()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Ed||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>Ed){let o=this._longestInteractionList.splice(Ed);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var qa=e=>{let t=U.requestIdleCallback||U.setTimeout;U.document?.visibilityState==="hidden"?e():(e=Co(e),Vt("visibilitychange",e,{once:!0,capture:!0}),Vt("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),Mr("visibilitychange",e,{capture:!0}),Mr("pagehide",e,{capture:!0})}))};var OR=[200,500],MR=40,H_=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;let n=En();rr(()=>{B_();let r=Tn("INP"),o,i=No(t,za),s=c=>{qa(()=>{for(let d of c)i._processEntry(d);let u=i._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,o())})},a=Yt("event",s,{durationThreshold:t.durationThreshold??MR});o=Sn(e,r,OR,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{s(a.takeRecords()),o(!0)}))})};var Va=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var LR=[2500,4e3],G_=(e,t={})=>{rr(()=>{let n=En(),r=Tn("LCP"),o,i=No(t,Va),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-qt(),0),r.entries=[u],o())},a=Yt("largest-contentful-paint",s);if(a){o=Sn(e,r,LR,t.reportAllChanges);let c=Co(()=>{s(a.takeRecords()),a.disconnect(),o(!0)}),u=d=>{d.isTrusted&&(qa(c),Mr(d.type,u,{capture:!0}))};for(let d of["keydown","click","visibilitychange"])Vt(d,u,{capture:!0})}})};var PR=[800,1800],Td=e=>{U.document?.prerendering?rr(()=>Td(e)):U.document?.readyState!=="complete"?addEventListener("load",()=>Td(e),!0):setTimeout(e)},$_=(e,t={})=>{let n=Tn("TTFB"),r=Sn(e,n,PR,t.reportAllChanges);Td(()=>{let o=wn();o&&(n.value=Math.max(o.responseStart-qt(),0),n.entries=[o],r(!0))})};var es={},Ya={},W_,j_,z_,q_;function Lr(e,t=!1){return Ja("cls",e,UR,W_,t)}function Pr(e,t=!1){return Ja("lcp",e,DR,j_,t)}function yd(e){return Ja("ttfb",e,BR,z_)}function ts(e){return Ja("inp",e,FR,q_)}function Bt(e,t){return V_(e,t),Ya[e]||(HR(e),Ya[e]=!0),Y_(e,t)}function ns(e,t){let n=es[e];if(n?.length)for(let r of n)try{r(t)}catch(o){zt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}function UR(){return U_(e=>{ns("cls",{metric:e}),W_=e},{reportAllChanges:!0})}function DR(){return G_(e=>{ns("lcp",{metric:e}),j_=e},{reportAllChanges:!0})}function BR(){return $_(e=>{ns("ttfb",{metric:e}),z_=e})}function FR(){return H_(e=>{ns("inp",{metric:e}),q_=e})}function Ja(e,t,n,r,o=!1){V_(e,t);let i;return Ya[e]||(i=n(),Ya[e]=!0),r&&t({metric:r}),Y_(e,t,o?i:void 0)}function HR(e){let t={};e==="event"&&(t.durationThreshold=0),Yt(e,n=>{ns(e,{entries:n})},t)}function V_(e,t){es[e]=es[e]||[],es[e].push(t)}function Y_(e,t,n){return()=>{n&&n();let r=es[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function J_(e){return"duration"in e}var K_=e=>{let t=n=>{(n.type==="pagehide"||U.document?.visibilityState==="hidden")&&e(n)};Vt("visibilitychange",t,{capture:!0,once:!0}),Vt("pagehide",t,{capture:!0,once:!0})};function Ka(e){return typeof e=="number"&&isFinite(e)}function xn(e,t,n,{...r}){let o=M(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Wn(e,()=>{let i=Et({startTime:t,...r});return i&&i.end(n),i})}function wo(e){let t=T();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=k(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let _={release:s,environment:a,user:p||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":U.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return Et({name:n,attributes:_,startTime:i,experimental:{standalone:!0}})}function kn(){return U.addEventListener&&U.performance}function _e(e){return e/1e3}function X_(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function Xa(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Qa(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}K_(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function Q_(e){let t=0,n;if(!Xa("layout-shift"))return;let r=Lr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Qa(e,(o,i)=>{GR(t,n,i,o),r()})}function GR(e,t,n,r){zt&&h.log(`Sending CLS span (${e})`);let o=t?_e((Ee()||0)+t.startTime):Q(),i=k().getScopeData().transactionName,s=t?Re(t.sources[0]?.node):"Layout shift",a={[H]:"auto.http.browser.cls",[ie]:"ui.webvital.cls",[Wt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=Re(u.node)});let c=wo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[mn]:"",[hn]:e}),c.end(o))}function Z_(e){let t=0,n;if(!Xa("largest-contentful-paint"))return;let r=Pr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Qa(e,(o,i)=>{$R(t,n,i,o),r()})}function $R(e,t,n,r){zt&&h.log(`Sending LCP span (${e})`);let o=_e((Ee()||0)+(t?.startTime||0)),i=k().getScopeData().transactionName,s=t?Re(t.element):"Largest contentful paint",a={[H]:"auto.http.browser.lcp",[ie]:"ui.webvital.lcp",[Wt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Re(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=wo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[mn]:"millisecond",[hn]:e}),c.end(o))}function Jt(e){return e&&((Ee()||performance.timeOrigin)+e)/1e3}function rs(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=X_(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Ee()||kn()?.timeOrigin?WR({...t,"http.request.redirect_start":Jt(e.redirectStart),"http.request.redirect_end":Jt(e.redirectEnd),"http.request.worker_start":Jt(e.workerStart),"http.request.fetch_start":Jt(e.fetchStart),"http.request.domain_lookup_start":Jt(e.domainLookupStart),"http.request.domain_lookup_end":Jt(e.domainLookupEnd),"http.request.connect_start":Jt(e.connectStart),"http.request.secure_connection_start":Jt(e.secureConnectionStart),"http.request.connection_end":Jt(e.connectEnd),"http.request.request_start":Jt(e.requestStart),"http.request.response_start":Jt(e.responseStart),"http.request.response_end":Jt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function WR(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var jR=2147483647,eg=0,cn={},Rt,ec;function Id({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=kn();if(r&&Ee()){r.mark&&U.performance.mark("sentry-tracing-init");let o=t?Z_(n):qR(),i=VR(),s=e?Q_(n):zR();return()=>{o?.(),i(),s?.()}}return()=>{}}function bd(){Bt("longtask",({entries:e})=>{let t=K();if(!t)return;let{op:n,start_timestamp:r}=M(t);for(let o of e){let i=_e(Ee()+o.startTime),s=_e(o.duration);n==="navigation"&&r&&i<r||xn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[H]:"auto.ui.browser.metrics"}})}})}function Ad(){new PerformanceObserver(t=>{let n=K();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=_e(Ee()+r.startTime),{start_timestamp:i,op:s}=M(n);if(s==="navigation"&&i&&o<i)continue;let a=_e(r.duration),c={[H]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),m!==-1&&(c["browser.script.source_char_position"]=m),xn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Rd(){Bt("event",({entries:e})=>{let t=K();if(t){for(let n of e)if(n.name==="click"){let r=_e(Ee()+n.startTime),o=_e(n.duration),i={name:Re(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[H]:"auto.ui.browser.metrics"}},s=ri(n.target);s&&(i.attributes["ui.component_name"]=s),xn(t,r,r+o,i)}}})}function zR(){return Lr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(cn.cls={value:e.value,unit:""},ec=t)},!0)}function qR(){return Pr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(cn.lcp={value:e.value,unit:"millisecond"},Rt=t)},!0)}function VR(){return yd(({metric:e})=>{e.entries[e.entries.length-1]&&(cn.ttfb={value:e.value,unit:"millisecond"})})}function vd(e,t){let n=kn(),r=Ee();if(!n?.getEntries||!r)return;let o=_e(r),i=n.getEntries(),{op:s,start_timestamp:a}=M(e);i.slice(eg).forEach(c=>{let u=_e(c.startTime),d=_e(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{XR(e,c,o);break}case"mark":case"paint":case"measure":{JR(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=En(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(cn.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(cn.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{ev(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),eg=Math.max(i.length-1,0),tv(e),s==="pageload"&&(ov(cn),t.recordClsOnPageloadSpan||delete cn.cls,t.recordLcpOnPageloadSpan||delete cn.lcp,Object.entries(cn).forEach(([c,u])=>{_i(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",qt()),nv(e,t)),Rt=void 0,ec=void 0,cn={}}function YR(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function JR(e,t,n,r,o,i){if(YR(t)||["mark","measure"].includes(t.entryType)&&je(t.name,i))return;let s=wn(!1),a=_e(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[H]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),KR(l,t),c<=d&&xn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function KR(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&at(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(at(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function XR(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Za(e,t,r,n)}),Za(e,t,"secureConnection",n,"TLS/SSL"),Za(e,t,"fetch",n,"cache"),Za(e,t,"domainLookup",n,"DNS"),ZR(e,t,n)}function Za(e,t,n,r,o=n){let i=QR(n),s=t[i],a=t[`${n}Start`];!a||!s||xn(e,r+_e(a),r+_e(s),{op:`browser.${o}`,name:t.name,attributes:{[H]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function QR(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function ZR(e,t,n){let r=n+_e(t.requestStart),o=n+_e(t.responseEnd),i=n+_e(t.responseStart);t.responseEnd&&(xn(e,r,o,{op:"browser.request",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}),xn(e,i,o,{op:"browser.response",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}))}function ev(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[H]:"auto.resource.browser.metrics"},u=tn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(U.location.origin),rv(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...rs(t)},l=i+r,f=l+o;xn(e,l,f,{name:n.replace(U.location.origin,""),op:a,attributes:d})}function tv(e){let t=U.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ka(n.rtt)&&(cn["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ka(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Ka(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function nv(e,t){Rt&&t.recordLcpOnPageloadSpan&&(Rt.element&&e.setAttribute("lcp.element",Re(Rt.element)),Rt.id&&e.setAttribute("lcp.id",Rt.id),Rt.url&&e.setAttribute("lcp.url",Rt.url.trim().slice(0,200)),Rt.loadTime!=null&&e.setAttribute("lcp.loadTime",Rt.loadTime),Rt.renderTime!=null&&e.setAttribute("lcp.renderTime",Rt.renderTime),e.setAttribute("lcp.size",Rt.size)),ec?.sources&&t.recordClsOnPageloadSpan&&ec.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Re(n.node)))}function rv(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<jR||typeof i=="string")&&(t[o]=i)})}function ov(e){let t=wn(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Nd(){return kn()&&Ee()?Bt("element",iv):()=>{}}var iv=({entries:e})=>{let t=K(),n=t?Z(t):void 0,r=n?M(n).description:k().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[_e(c),"load-time"]:a?[_e(a),"render-time"]:[Q(),"entry-emission"],l=s==="image-paint"?_e(Math.max(0,(a??0)-(c??0))):0,f={[H]:"auto.ui.browser.elementtiming",[ie]:"ui.elementtiming",[ve]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};qe({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})};var sv=1e3,tg,Cd,wd;function os(e){Je("dom",e),Ke("dom",av)}function av(){if(!U.document)return;let e=Oe.bind(null,"dom"),t=ng(e,!0);U.document.addEventListener("click",t,!1),U.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=U[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(ge(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=ng(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),ge(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function cv(e){if(e.type!==Cd)return!1;try{if(!e.target||e.target._sentryId!==wd)return!1}catch{}return!0}function uv(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ng(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=lv(n);if(uv(n.type,r))return;Se(n,"_sentryCaptured",!0),r&&!r._sentryId&&Se(r,"_sentryId",le());let o=n.type==="keypress"?"input":n.type;cv(n)||(e({event:n,name:o,global:t}),Cd=n.type,wd=r?r._sentryId:void 0),clearTimeout(tg),tg=U.setTimeout(()=>{wd=void 0,Cd=void 0},sv)}}function lv(e){try{return e.target}catch{return null}}var tc;function On(e){let t="history";Je(t,e),Ke(t,dv)}function dv(){if(U.addEventListener("popstate",()=>{let t=U.location.href,n=tc;if(tc=t,n===t)return;Oe("history",{from:n,to:t})}),!Wl())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=tc,i=fv(String(r));if(tc=i,o===i)return t.apply(this,n);Oe("history",{from:o,to:i})}return t.apply(this,n)}}ge(U.history,"pushState",e),ge(U.history,"replaceState",e)}function fv(e){try{return new URL(e,U.location.origin).toString()}catch{return e}}var nc={};function xo(e){let t=nc[e];if(t)return t;let n=U[e];if(Vi(n))return nc[e]=n.bind(U);let r=U.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){zt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(nc[e]=n.bind(U))}function xd(e){nc[e]=void 0}function Ur(...e){return xo("setTimeout")(...e)}var ft="__sentry_xhr_v3__";function Dr(e){Je("xhr",e),Ke("xhr",pv)}function pv(){if(!U.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=Q()*1e3,s=Fe(r[0])?r[0].toUpperCase():void 0,a=mv(r[1]);if(!s||!a)return t.apply(n,r);n[ft]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[ft];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:Q()*1e3,startTimestamp:i,xhr:n,virtualError:o};Oe("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[f,p]=l,m=d[ft];return m&&Fe(f)&&Fe(p)&&(m.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[ft];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:Q()*1e3,xhr:n};return Oe("xhr",i),t.apply(n,r)}})}function mv(e){if(Fe(e))return e;try{return e.toString()}catch{}}var hv=Symbol.for("sentry__originalRequestBody");function rc(e){return new URLSearchParams(e).toString()}function Br(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[rc(e)];if(!e)return[void 0]}catch(n){return zt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return zt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function ko(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){let n=e[0][hv];return n!==void 0?n:void 0}}function is(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return zt&&h.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}var kd=[],oc=new Map,Oo=new Map,_v=60;function Md(){if(kn()&&Ee()){let t=gv();return()=>{t()}}return()=>{}}var Od={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function gv(){return ts(Sv)}var Sv=({metric:e})=>{if(e.value==null)return;let t=_e(e.value);if(t>_v)return;let n=e.entries.find(m=>m.duration===e.value&&Od[m.name]);if(!n)return;let{interactionId:r}=n,o=Od[n.name],i=_e(Ee()+n.startTime),s=K(),a=s?Z(s):void 0,c=r!=null?oc.get(r):void 0,u=c?.span||a,d=u?M(u).description:k().getScopeData().transactionName,l=c?.elementName||Re(n.target),f={[H]:"auto.http.browser.inp",[ie]:`ui.interaction.${o}`,[Wt]:n.duration},p=wo({name:l,transaction:d,attributes:f,startTime:i});p&&(p.addEvent("inp",{[mn]:"millisecond",[hn]:e.value}),p.end(i+t))};function Ld(){let e=Object.keys(Od);er()&&e.forEach(o=>{U.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){let i=o.target;if(!i)return;let s=Re(i),a=Math.round(o.timeStamp);if(Oo.set(a,s),Oo.size>50){let c=Oo.keys().next().value;c!==void 0&&Oo.delete(c)}}function n(o){let i=Math.round(o.startTime),s=Oo.get(i);if(!s)for(let a=-5;a<=5;a++){let c=Oo.get(i+a);if(c){s=c;break}}return s||"<unknown>"}let r=({entries:o})=>{let i=K(),s=i&&Z(i);o.forEach(a=>{if(!J_(a))return;let c=a.interactionId;if(c==null||oc.has(c))return;let u=a.target?Re(a.target):n(a);if(kd.length>10){let d=kd.shift();oc.delete(d)}kd.push(c),oc.set(c,{span:s,elementName:u})})};Bt("event",r),Bt("first-input",r)}var Ev=40;function Mo(e,t=xo("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw xd("fetch"),c}finally{n-=s,r--}}return ki(e,o,yr(e.bufferSize||Ev))}var b=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Tv(){let e=T();if(!e){b&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){b&&h.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function yv(){let e=T();if(!e){b&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){b&&h.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}var rg={startProfiler:Tv,stopProfiler:yv};var Iv=10,bv=20,Av=30,Rv=40,vv=50;function Lo(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var Nv=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Cv=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,wv=/\((\S*)(?::(\d+))(?::(\d+))\)/,xv=/at (.+?) ?\(data:(.+?),/,kv=e=>{let t=e.match(xv);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=Nv.exec(e);if(n){let[,o,i,s]=n;return Lo(o,"?",+i,+s)}let r=Cv.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=wv.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=ag(r[1]||"?",r[2]);return Lo(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Pd=[Av,kv],Ov=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Mv=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Lv=e=>{let t=Ov.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=Mv.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=ag(o,r),Lo(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ud=[vv,Lv],Pv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Uv=e=>{let t=Pv.exec(e);return t?Lo(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},og=[Rv,Uv],Dv=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Bv=e=>{let t=Dv.exec(e);return t?Lo(t[2],t[3]||"?",+t[1]):void 0},ig=[Iv,Bv],Fv=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Hv=e=>{let t=Fv.exec(e);return t?Lo(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},sg=[bv,Hv],Dd=[Pd,Ud],ic=vs(...Dd),ag=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function cg(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:He(r)}},i=Gv(e);return ke(o,[i])}function Gv(e){return[{type:"user_report"},e]}var sc=1024,$v="Breadcrumbs",Wv=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:$v,setup(n){t.console&&Ar(qv(n)),t.dom&&os(zv(n,t.dom)),t.xhr&&Dr(Vv(n)),t.fetch&&Cr(Yv(n)),t.history&&On(Jv(n)),t.sentry&&n.on("beforeSendEvent",jv(n))}}}),ac=Wv;function jv(e){return function(n){T()===e&&dt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:pn(n)},{event:n})}}function zv(e,t){return function(r){if(T()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>sc&&(b&&h.warn(`\`dom.maxStringLength\` cannot exceed ${sc}, but a value of ${a} was configured. Sentry will use ${sc} instead.`),a=sc),typeof s=="string"&&(s=[s]);try{let u=r.event,d=Kv(u)?u.target:u;o=Re(d,{keyAttrs:s,maxStringLength:a}),i=ri(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),dt(c,{event:r.event,name:r.name,global:r.global})}}function qv(e){return function(n){if(T()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Vn(n.level),message:pr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${pr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;dt(r,{input:n.args,level:n.level})}}function Vv(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[ft];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f={category:"xhr",data:d,type:"http",level:va(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),dt(f,l)}}function Yv(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),dt(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:va(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),dt(c,a)}}}function Jv(e){return function(n){if(T()!==e)return;let r=n.from,o=n.to,i=tn(w.location.href),s=r?tn(r):void 0,a=tn(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),dt({category:"navigation",data:{from:r,to:o}})}}function Kv(e){return!!e&&!!e.target}var Xv=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Qv="BrowserApiErrors",Zv=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Qv,setupOnce(){t.setTimeout&&ge(w,"setTimeout",ug),t.setInterval&&ge(w,"setInterval",ug),t.requestAnimationFrame&&ge(w,"requestAnimationFrame",eN),t.XMLHttpRequest&&"XMLHttpRequest"in w&&ge(XMLHttpRequest.prototype,"send",tN);let n=t.eventTarget;n&&(Array.isArray(n)?n:Xv).forEach(o=>nN(o,t))}}}),cc=Zv;function ug(e){return function(...t){let n=t[0];return t[0]=Or(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${gt(e)}`}}),e.apply(this,t)}}function eN(e){return function(t){return e.apply(this,[Or(t,{mechanism:{data:{handler:gt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function tN(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ge(n,o,function(i){let s={mechanism:{data:{handler:gt(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=lr(i);return a&&(s.mechanism.data.handler=gt(a)),Or(i,s)})}),e.apply(this,t)}}function nN(e,t){let r=w[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(ge(r,"addEventListener",function(o){return function(i,s,a){try{rN(s)&&(s.handleEvent=Or(s.handleEvent,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&oN(this,i,s),o.apply(this,[i,Or(s,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),ge(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function rN(e){return typeof e.handleEvent=="function"}function oN(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var uc=()=>({name:"BrowserSession",setupOnce(){if(typeof w.document>"u"){b&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}no({ignoreDuration:!0}),ro(),On(({from:e,to:t})=>{e!==void 0&&e!==t&&(no({ignoreDuration:!0}),ro())})}});var iN="GlobalHandlers",sN=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:iN,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(aN(n),lg("onerror")),t.onunhandledrejection&&(cN(n),lg("onunhandledrejection"))}}}),lc=sN;function aN(e){Qo(t=>{let{stackParser:n,attachStacktrace:r}=dg();if(T()!==e||ld())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=uN(Ao(n,c||o,void 0,r,!1),i,s,a);u.level="error",en(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function cN(e){Zo(t=>{let{stackParser:n,attachStacktrace:r}=dg();if(T()!==e||ld())return;let o=Bd(t),i=at(o)?Fd(o):Ao(n,o,void 0,r,!0);i.level="error",en(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Bd(e){if(at(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Fd(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function uN(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=lN(t)??ct();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function lg(e){b&&h.log(`Global Handler attached: ${e}`)}function dg(){return T()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function lN(e){if(!(!Fe(e)||e.length===0)){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e}}var dc=()=>({name:"HttpContext",preprocessEvent(e){if(!w.navigator&&!w.location&&!w.document)return;let t=Zi(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var dN="cause",fN=5,pN="LinkedErrors",mN=((e={})=>{let t=e.limit||fN,n=e.key||dN;return{name:pN,preprocessEvent(r,o,i){let s=i.getOptions();ll(bo,s.stackParser,n,t,r,o)}}}),fc=mN;var hN="SpotlightBrowser",_N=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:hN,setup:()=>{b&&h.log("Using Sidecar URL",t)},processEvent:n=>SN(n)?null:n,afterAllSetup:n=>{gN(n,t)}}});function gN(e,t){let n=xo("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Hn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var fg=_N;function SN(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function pg(){return EN()?(b&&Ye(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function EN(){if(typeof w.window>"u")return!1;let e=w;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=ct(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(w===w.top&&r.some(i=>n.startsWith(`${i}://`)))}function Hd(e){return[Ui(),Pi(),cc(),ac(),lc(),fc(),Di(),dc(),uc()]}function mg(e={}){let t=!e.skipBrowserExtensionCheck&&pg(),n=e.defaultIntegrations==null?Hd():e.defaultIntegrations,r={...e,enabled:t?!1:e.enabled,stackParser:eu(e.stackParser||ic),integrations:ju({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||Mo};return Zu(Ro,r)}function hg(){}function _g(e){e()}function gg(e={}){let t=w.document,n=t?.head||t?.body;if(!n){b&&h.error("[showReportDialog] Global document not defined");return}let r=k(),i=T()?.getDsn();if(!i){b&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Ai()},a=w.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=$u(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{w.removeEventListener("message",d)}};w.addEventListener("message",d)}n.appendChild(a)}var TN=v,yN="ReportingObserver",Sg=new WeakMap,IN=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(Sg.has(T()))for(let o of r)De(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Ii(`${s}: ${a}`)})}return{name:yN,setupOnce(){if(!jl())return;new TN.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Sg.set(r,!0)}}}),Eg=IN;var bN="HttpClient",AN=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:bN,setup(n){ON(n,t),MN(n,t)}}}),yg=AN;function RN(e,t,n,r,o){if(bg(e,n.status,n.url)){let i=LN(t,r),s,a,c,u;Rg()&&([s,c]=Tg("Cookie",i),[a,u]=Tg("Set-Cookie",n));let d=Ag({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});en(d)}}function Tg(e,t){let n=CN(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=Ig(o))}catch{}return[n,r]}function vN(e,t,n,r,o){if(bg(e,t.status,t.responseURL)){let i,s,a;if(Rg()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=Ig(u))}catch{}try{a=wN(t)}catch{}i=r}let c=Ag({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});en(c)}}function NN(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Ig(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function CN(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function wN(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function xN(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function kN(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function ON(e,t){Yi()&&Cr(n=>{if(T()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&RN(t,a,r,c,i||s)},!1)}function MN(e,t){"XMLHttpRequest"in v&&Dr(n=>{if(T()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[ft];if(!s)return;let{method:a,request_headers:c}=s;try{vN(t,i,a,c,r||o)}catch(u){b&&h.warn("Error while extracting response event form XHR response",u)}})}function bg(e,t,n){return kN(e.failedRequestStatusCodes,t)&&xN(e.failedRequestTargets,n)&&!Li(n,T())}function Ag(e){let t=T(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:NN(e.responseHeaders)}}};return Qe(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function LN(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Rg(){let e=T();return e?!!e.getOptions().sendDefaultPii:!1}var Gd=v,PN=7,UN="ContextLines",DN=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:PN;return{name:UN,processEvent(n){return BN(n,t)}}}),vg=DN;function BN(e,t){let n=Gd.document,r=Gd.location&&Mi(Gd.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>FN(u,s,r,t)))}),e}function FN(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||lu(t,e,r),e}var HN="GraphQLClient",GN=(e=>({name:HN,setup(t){$N(t,e),WN(t,e)}}));function $N(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=M(n).data||{};if(!(i[ie]==="http.client"))return;let c=i[hu]||i["http.url"],u=i[mu]||i["http.method"];if(!Fe(c)||!Fe(u))return;let{endpoints:d}=t,l=je(c,d),f=Cg(r);if(l&&f){let p=wg(f);if(p){let m=Ng(p);n.updateName(`${u} ${c} (${m})`),mc(p)&&n.setAttribute("graphql.document",p.query),hc(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function WN(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,f=je(d,l),p=Cg(r);if(f&&s&&p){let m=wg(p);if(!s.graphql&&m){let _=Ng(m);s["graphql.operation"]=_,mc(m)&&(s["graphql.document"]=m.query),hc(m)&&(s["graphql.persisted_query.hash.sha256"]=m.extensions.persistedQuery.sha256Hash,s["graphql.persisted_query.version"]=m.extensions.persistedQuery.version)}}}})}function Ng(e){if(hc(e))return`persisted ${e.operationName}`;if(mc(e)){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=jN(t);return r?`${o} ${r}`:`${o}`}return"unknown"}function Cg(e){let t="xhr"in e,n;if(t){let r=e.xhr[ft];n=r&&Br(r.body)[0]}else{let r=ko(e.input);n=Br(r)[0]}return n}function jN(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function pc(e){return typeof e=="object"&&e!==null}function mc(e){return pc(e)&&typeof e.query=="string"}function hc(e){return pc(e)&&typeof e.operationName=="string"&&pc(e.extensions)&&pc(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function wg(e){try{let t=JSON.parse(e);return mc(t)||hc(t)?t:void 0}catch{return}}var xg=GN;var ye=v,gf="sentryReplaySession",zN="replay_event",Sf="Unable to send Replay",qN=3e5,VN=9e5,YN=5e3,JN=5500,KN=6e4,XN=5e3,QN=3,kg=15e4,_c=5e3,ZN=3e3,eC=300,Ef=2e7,tC=4999,nC=5e4,Og=36e5,rC=Object.defineProperty,oC=(e,t,n)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mg=(e,t,n)=>oC(e,typeof t!="symbol"?t+"":t,n),Pe=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Pe||{});function iC(e){return e.nodeType===e.ELEMENT_NODE}function cs(e){return e?.host?.shadowRoot===e}function us(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function sC(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function aC(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function yc(e){try{let t=e.rules||e.cssRules;return t?sC(Array.from(t,nS).join("")):null}catch{return null}}function cC(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function nS(e){let t;if(lC(e))try{t=yc(e.styleSheet)||aC(e)}catch{}else if(dC(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=cC(e)),r&&(n=uC(n)),r||o)return n}return t||e.cssText}function uC(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function lC(e){return"styleSheet"in e}function dC(e){return"selectorText"in e}var Ic=class{constructor(){Mg(this,"idNodeMap",new Map),Mg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function fC(){return new Ic}function Mc({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function ds({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function $o(e){return e.toLowerCase()}function Vd(e){return e.toUpperCase()}var Lg="__rrweb_original__";function pC(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=Lg in i?i[Lg]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function Tf(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?$o(t):null}function bc(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function rS(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var Pg={};function oS(e){let t=Pg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Pg[e]=r.bind(window)}function Yd(...e){return oS("setTimeout")(...e)}function iS(...e){return oS("clearTimeout")(...e)}function sS(e){try{return e.contentDocument}catch{}}var mC=1,hC=new RegExp("[^a-z0-9-_:]"),fs=-2;function yf(){return mC++}function _C(e){if(e instanceof HTMLFormElement)return"form";let t=$o(e.tagName);return hC.test(t)?"div":t}function gC(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Po,Ug,SC=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,EC=/^(?:[a-z+]+:)?\/\//i,TC=/^www\..*/i,yC=/^(data:)([^,]*),(.*)/i;function IC(e,t){if(!e||t.size===0)return e;try{let n=e.split(";"),r=[];for(let o of n){if(o=o.trim(),!o)continue;let i=o.indexOf(":");if(i===-1){r.push(o);continue}let s=o.slice(0,i).trim();t.has(s)||r.push(o)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function Ac(e,t){return(e||"").replace(SC,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(EC.test(c)||TC.test(c))return`url(${u}${c}${u})`;if(yC.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${gC(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}var bC=/^[^ \t\n\r\u000c]+/,AC=/^[, \t\n\r\u000c]+/;function RC(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(AC),!(n>=t.length);){let i=r(bC);if(i.slice(-1)===",")i=Bo(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=Bo(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var Dg=new WeakMap;function Bo(e,t){return!t||t.trim()===""?t:Lc(e,t)}function vC(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Lc(e,t){let n=Dg.get(e);if(n||(n=e.createElement("a"),Dg.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function aS(e,t,n,r,o,i,s){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Bo(e,r);if(n==="xlink:href"&&r[0]!=="#")return Bo(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Bo(e,r);if(n==="srcset")return RC(e,r);if(n==="style"){let a=Ac(r,Lc(e));return s&&s.size>0&&(a=IC(a,s)),a}else if(t==="object"&&n==="data")return Bo(e,r);return typeof i=="function"?i(n,r,o):r}function cS(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function NC(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function CC(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Fr(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Fr(e.parentNode,t,n,r+1)}function Fo(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(CC(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Wo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Fr(s,Fo(r,o)),c<0)return!0;a=Fr(s,Fo(t,n),c>=0?c:1/0)}else{if(a=Fr(s,Fo(t,n)),a<0)return!1;c=Fr(s,Fo(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function wC(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=Yd(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{iS(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return Yd(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function xC(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=Yd(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{iS(i),r=!0,t()})}function kC(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:m={},maskTextFn:_,maskInputFn:g,dataURLOptions:S={},inlineImages:I,recordCanvas:F,keepIframeSrcFn:O,newlyAddedElement:j=!1,ignoreCSSAttributes:D}=t,E=OC(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Pe.Document,childNodes:[],compatMode:e.compatMode}:{type:Pe.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Pe.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return LC(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:m,maskInputFn:g,dataURLOptions:S,inlineImages:I,recordCanvas:F,keepIframeSrcFn:O,newlyAddedElement:j,rootId:E,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:D});case e.TEXT_NODE:return MC(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:_,maskInputOptions:m,maskInputFn:g,rootId:E});case e.CDATA_SECTION_NODE:return{type:Pe.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Pe.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function OC(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function MC(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,f=e.textContent,p=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,_=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=yc(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}f=Ac(f,Lc(t.doc))}m&&(f="SCRIPT_PLACEHOLDER");let g=Wo(e,r,i,o,s,n);if(!p&&!m&&!_&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),_&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){let S=Mc({type:null,tagName:l,maskInputOptions:c});f=ds({isMasked:Wo(e,r,i,o,s,S),element:e,value:f,maskInputFn:u})}return{type:Pe.Text,textContent:f||"",isStyle:p,rootId:d}}function LC(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:_,maskTextClass:g,unmaskTextClass:S,maskTextSelector:I,unmaskTextSelector:F,ignoreCSSAttributes:O}=t,j=NC(e,r,o,i),D=_C(e),E={},x=e.attributes.length;for(let A=0;A<x;A++){let L=e.attributes[A];L.name&&!cS(D,L.name,L.value)&&(E[L.name]=aS(n,D,$o(L.name),L.value,e,c,O))}if(D==="link"&&s){let A=Array.from(n.styleSheets).find(C=>C.href===e.href),L=null;A&&(L=yc(A)),L&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=Ac(L,A.href))}if(D==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let A=yc(e.sheet);A&&(E._cssText=Ac(A,Lc(n)))}if(D==="input"||D==="textarea"||D==="select"||D==="option"){let A=e,L=Tf(A),C=bc(A,Vd(D),L),P=A.checked;if(L!=="submit"&&L!=="button"&&C){let B=Wo(A,g,I,S,F,Mc({type:L,tagName:Vd(D),maskInputOptions:a}));E.value=ds({isMasked:B,element:A,value:C,maskInputFn:u})}P&&(E.checked=P)}if(D==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),D==="canvas"&&f){if(e.__context==="2d")pC(e)||(E.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let A=e.toDataURL(d.type,d.quality),L=n.createElement("canvas");L.width=e.width,L.height=e.height;let C=L.toDataURL(d.type,d.quality);A!==C&&(E.rr_dataURL=A)}}if(D==="img"&&l){Po||(Po=n.createElement("canvas"),Ug=Po.getContext("2d"));let A=e,L=A.currentSrc||A.getAttribute("src")||"<unknown-src>",C=A.crossOrigin,P=()=>{A.removeEventListener("load",P);try{Po.width=A.naturalWidth,Po.height=A.naturalHeight,Ug.drawImage(A,0,0),E.rr_dataURL=Po.toDataURL(d.type,d.quality)}catch(B){if(A.crossOrigin!=="anonymous"){A.crossOrigin="anonymous",A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P);return}else console.warn(`Cannot inline img src=${L}! Error: ${B}`)}A.crossOrigin==="anonymous"&&(C?E.crossOrigin=C:A.removeAttribute("crossorigin"))};A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P)}if((D==="audio"||D==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),j){let{width:A,height:L}=e.getBoundingClientRect();E={class:E.class,rr_width:`${A}px`,rr_height:`${L}px`}}D==="iframe"&&!p(E.src)&&(!j&&!sS(e)&&(E.rr_src=E.src),delete E.src);let G;try{customElements.get(D)&&(G=!0)}catch{}return{type:Pe.Element,tagName:D,attributes:E,childNodes:[],isSVG:vC(e)||void 0,needBlock:j,rootId:_,isCustom:G}}function Te(e){return e==null?"":e.toLowerCase()}function PC(e,t){if(t.comment&&e.type===Pe.Comment)return!0;if(e.type===Pe.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&rS(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Te(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Te(e.attributes.name)==="application-name"||Te(e.attributes.rel)==="icon"||Te(e.attributes.rel)==="apple-touch-icon"||Te(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Te(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Te(e.attributes.property).match(/^(og|twitter|fb):/)||Te(e.attributes.name).match(/^(og|twitter):/)||Te(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Te(e.attributes.name)==="robots"||Te(e.attributes.name)==="googlebot"||Te(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Te(e.attributes.name)==="author"||Te(e.attributes.name)==="generator"||Te(e.attributes.name)==="framework"||Te(e.attributes.name)==="publisher"||Te(e.attributes.name)==="progid"||Te(e.attributes.property).match(/^article:/)||Te(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Te(e.attributes.name)==="google-site-verification"||Te(e.attributes.name)==="yandex-verification"||Te(e.attributes.name)==="csrf-token"||Te(e.attributes.name)==="p:domain_verify"||Te(e.attributes.name)==="verify-v1"||Te(e.attributes.name)==="verification"||Te(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ho(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:m={},maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:F={},inlineImages:O=!1,recordCanvas:j=!1,onSerialize:D,onIframeLoad:E,iframeLoadTimeout:x=5e3,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:L=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:P=!1,ignoreCSSAttributes:B}=t,{preserveWhiteSpace:re=!0}=t,ee=kC(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,dataURLOptions:F,inlineImages:O,recordCanvas:j,keepIframeSrcFn:C,newlyAddedElement:P,ignoreCSSAttributes:B});if(!ee)return console.warn(e,"not serialized"),null;let se;r.hasNode(e)?se=r.getId(e):PC(ee,I)||!re&&ee.type===Pe.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?se=fs:se=yf();let R=Object.assign(ee,{id:se});if(r.add(e,R),se===fs)return null;D&&D(e);let q=!f;if(R.type===Pe.Element){q=q&&!R.needBlock;let N=e.shadowRoot;N&&us(N)&&(R.isShadowHost=!0)}if((R.type===Pe.Document||R.type===Pe.Element)&&q){I.headWhitespace&&R.type===Pe.Element&&R.tagName==="head"&&(re=!1);let N={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:F,inlineImages:O,recordCanvas:j,preserveWhiteSpace:re,onSerialize:D,onIframeLoad:E,iframeLoadTimeout:x,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:B},V=e.childNodes?Array.from(e.childNodes):[];for(let de of V){let ae=Ho(de,N);ae&&R.childNodes.push(ae)}if(iC(e)&&e.shadowRoot)for(let de of Array.from(e.shadowRoot.childNodes)){let ae=Ho(de,N);ae&&(us(e.shadowRoot)&&(ae.isShadow=!0),R.childNodes.push(ae))}}if(e.parentNode&&cs(e.parentNode)&&us(e.parentNode)&&(R.isShadow=!0),R.type===Pe.Element&&R.tagName==="iframe"&&!R.needBlock&&wC(e,()=>{let N=sS(e);if(N&&E){let V=Ho(N,{doc:N,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:F,inlineImages:O,recordCanvas:j,preserveWhiteSpace:re,onSerialize:D,onIframeLoad:E,iframeLoadTimeout:x,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:B});V&&E(e,V)}},x),R.type===Pe.Element&&R.tagName==="img"&&!e.complete&&R.needBlock){let N=e,V=()=>{if(N.isConnected&&!N.complete&&G)try{let de=N.getBoundingClientRect();de.width>0&&de.height>0&&G(N,R,de)}catch{}N.removeEventListener("load",V)};N.isConnected&&N.addEventListener("load",V)}return R.type===Pe.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&rS(R.attributes.href)==="css")&&xC(e,()=>{if(A){let N=Ho(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I,dataURLOptions:F,inlineImages:O,recordCanvas:j,preserveWhiteSpace:re,onSerialize:D,onIframeLoad:E,iframeLoadTimeout:x,onStylesheetLoad:A,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:B});N&&A(e,N)}},L),R.type===Pe.Element&&delete R.needBlock,R}function UC(e,t){let{mirror:n=new Ic,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:m=!1,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOM:I=!1,dataURLOptions:F,preserveWhiteSpace:O,onSerialize:j,onIframeLoad:D,iframeLoadTimeout:E,onBlockedImageLoad:x,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:C=new Set([])}=t||{};return Ho(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:I===!0||I==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:I==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:I===!1?{}:I,dataURLOptions:F,inlineImages:f,recordCanvas:p,preserveWhiteSpace:O,onSerialize:j,onIframeLoad:D,iframeLoadTimeout:E,onBlockedImageLoad:x,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:L,newlyAddedElement:!1,ignoreCSSAttributes:C})}function mt(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var Uo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Bg={map:{},getId(){return console.error(Uo),-1},getNode(){return console.error(Uo),null},removeNodeFromMap(){console.error(Uo)},has(){return console.error(Uo),!1},reset(){console.error(Uo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Bg=new Proxy(Bg,{get(e,t,n){return t==="map"&&console.error(Uo),Reflect.get(e,t,n)}}));function ps(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&($C(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Pc(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function uS(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){Pc(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>uS(e,t,i||{},!0)}function If(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Rc=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Rc=()=>new Date().getTime());function lS(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function dS(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function fS(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pS(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ft(e,t,n,r,o){if(!e)return!1;let i=pS(e);if(!i)return!1;let s=Fo(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Fr(i,s),c=-1;return a<0?!1:(r&&(c=Fr(i,Fo(null,r))),a>-1&&c<0?!0:a<c)}function DC(e,t){return t.getId(e)!==-1}function $d(e,t){return t.getId(e)===fs}function mS(e,t){if(cs(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?mS(e.parentNode,t):!0:!0}function Jd(e){return!!e.changedTouches}function BC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function hS(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function _S(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Kd(e){return!!e?.shadowRoot}var Xd=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function gS(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function FC(e){let t=e,n;for(;n=gS(t);)t=n;return t}function HC(e){let t=e.ownerDocument;if(!t)return!1;let n=FC(e);return t.contains(n)}function SS(e){let t=e.ownerDocument;return t?t.contains(e)||HC(e):!1}var Fg={};function bf(e){let t=Fg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Fg[e]=r.bind(window)}function GC(...e){return bf("requestAnimationFrame")(...e)}function Pc(...e){return bf("setTimeout")(...e)}function $C(...e){return bf("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),z=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(z||{}),pt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(pt||{}),Mn=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Mn||{}),Do=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Do||{});function Af(e){try{return e.contentDocument}catch{}}function WC(e){try{return e.contentWindow}catch{}}function Hg(e){return"__ln"in e}var Qd=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Hg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Hg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Gg=(e,t)=>`${e}@${t}`,Zd=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new Qd,o=c=>{let u=c,d=fs;for(;d===fs;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!SS(c))return;let u=cs(c.parentNode)?this.mirror.getId(gS(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=Ho(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{hS(f,this.mirror)&&!Ft(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),_S(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Kd(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ft(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:m,height:_})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${m}px`,height:`${_}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)$g(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Wg(this.droppedSet,c)&&!$g(this.removes,c,this.mirror)||Wg(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=p.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!$d(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Wo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,pS(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=Tf(n),a=n.tagName;o=bc(n,a,s);let c=Mc({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Wo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=ds({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!Af(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!cS(n.tagName,r)&&(i.attributes[r]=aS(this.doc,$o(n.tagName),$o(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=cs(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ft(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||$d(n,this.mirror)||!DC(n,this.mirror)||(this.addedSet.has(n)?(ef(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||mS(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Gg(r,o)]?ef(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:cs(t.target)&&us(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if($d(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Gg(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ft(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),Kd(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function ef(e,t){e.delete(t),t.childNodes?.forEach(n=>ef(e,n))}function $g(e,t,n){return e.length===0?!1:jC(e,t,n)}function jC(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function Wg(e,t){return e.size===0?!1:ES(e,t)}function ES(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:ES(e,n):!1}var ls;function zC(e){ls=e}function qC(){ls=void 0}var oe=e=>ls?(...n)=>{try{return e(...n)}catch(r){if(ls&&ls(r)===!0)return()=>{};throw r}}:e,Go=[];function Ss(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function TS(e,t){let n=new Zd;Go.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(oe(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function VC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=ps(oe(l=>{let f=Date.now()-a;e(s.map(p=>(p.timeOffset-=f,p)),l),s=[],a=null}),i),u=oe(ps(oe(l=>{let f=Ss(l),{clientX:p,clientY:m}=Jd(l)?l.changedTouches[0]:l;a||(a=Rc()),s.push({x:p,y:m,id:r.getId(f),timeOffset:Rc()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?z.Drag:l instanceof MouseEvent?z.MouseMove:z.TouchMove)}),o,{trailing:!1})),d=[mt("mousemove",u,n),mt("touchmove",u,n),mt("drag",u,n)];return oe(()=>{d.forEach(l=>l())})}function YC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>f=>{let p=Ss(f);if(Ft(p,r,o,i,!0))return;let m=null,_=l;if("pointerType"in f){switch(f.pointerType){case"mouse":m=Mn.Mouse;break;case"touch":m=Mn.Touch;break;case"pen":m=Mn.Pen;break}m===Mn.Touch?pt[l]===pt.MouseDown?_="TouchStart":pt[l]===pt.MouseUp&&(_="TouchEnd"):Mn.Pen}else Jd(f)&&(m=Mn.Touch);m!==null?(u=m,(_.startsWith("Touch")&&m===Mn.Touch||_.startsWith("Mouse")&&m===Mn.Mouse)&&(m=null)):pt[l]===pt.Click&&(m=u,u=null);let g=Jd(f)?f.changedTouches[0]:f;if(!g)return;let S=n.getId(p),{clientX:I,clientY:F}=g;oe(e)({type:pt[_],id:S,x:I,y:F,...m!==null&&{pointerType:m}})};return Object.keys(pt).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=$o(l),p=d(l);if(window.PointerEvent)switch(pt[l]){case pt.MouseDown:case pt.MouseUp:f=f.replace("mouse","pointer");break;case pt.TouchStart:case pt.TouchEnd:return}c.push(mt(f,p,t))}),oe(()=>{c.forEach(l=>l())})}function yS({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=oe(ps(oe(c=>{let u=Ss(c);if(!u||Ft(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=lS(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return mt("scroll",a,t)}function JC({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=oe(ps(oe(()=>{let i=dS(),s=fS();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return mt("resize",o,t)}var KC=["INPUT","TEXTAREA","SELECT"],jg=new WeakMap;function XC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:_}){function g(E){let x=Ss(E),G=E.isTrusted,A=x&&Vd(x.tagName);if(A==="OPTION"&&(x=x.parentElement),!x||!A||KC.indexOf(A)<0||Ft(x,r,o,i,!0))return;let L=x;if(L.classList.contains(s)||a&&L.matches(a))return;let C=Tf(x),P=bc(L,A,C),B=!1,re=Mc({maskInputOptions:c,tagName:A,type:C}),ee=Wo(x,f,m,p,_,re);(C==="radio"||C==="checkbox")&&(B=x.checked),P=ds({isMasked:ee,element:x,value:P,maskInputFn:u}),S(x,l?{text:P,isChecked:B,userTriggered:G}:{text:P,isChecked:B});let se=x.name;C==="radio"&&se&&B&&t.querySelectorAll(`input[type="radio"][name="${se}"]`).forEach(R=>{if(R!==x){let q=ds({isMasked:ee,element:R,value:bc(R,A,C),maskInputFn:u});S(R,l?{text:q,isChecked:!B,userTriggered:!1}:{text:q,isChecked:!B})}})}function S(E,x){let G=jg.get(E);if(!G||G.text!==x.text||G.isChecked!==x.isChecked){jg.set(E,x);let A=n.getId(E);oe(e)({...x,id:A})}}let F=(d.input==="last"?["change"]:["input","change"]).map(E=>mt(E,oe(g),t)),O=t.defaultView;if(!O)return()=>{F.forEach(E=>E())};let j=O.Object.getOwnPropertyDescriptor(O.HTMLInputElement.prototype,"value"),D=[[O.HTMLInputElement.prototype,"value"],[O.HTMLInputElement.prototype,"checked"],[O.HTMLSelectElement.prototype,"value"],[O.HTMLTextAreaElement.prototype,"value"],[O.HTMLSelectElement.prototype,"selectedIndex"],[O.HTMLOptionElement.prototype,"selected"]];return j&&j.set&&F.push(...D.map(E=>uS(E[0],E[1],{set(){oe(g)({target:this,isTrusted:!1})}},!1,O))),oe(()=>{F.forEach(E=>E())})}function vc(e){let t=[];function n(r,o){if(gc("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||gc("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||gc("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||gc("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function or(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function QC({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:oe((d,l,f)=>{let[p,m]=f,{id:_,styleId:g}=or(l,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,adds:[{rule:p,index:m}]}),d.apply(l,f)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=or(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,removes:[{index:p}]}),d.apply(l,f)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=or(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=or(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replaceSync:p}),d.apply(l,f)})}));let c={};Sc("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Sc("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Sc("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Sc("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:oe((f,p,m)=>{let[_,g]=m,{id:S,styleId:I}=or(p.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||I&&I!==-1)&&e({id:S,styleId:I,adds:[{rule:_,index:[...vc(p),g||0]}]}),f.apply(p,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:oe((f,p,m)=>{let[_]=m,{id:g,styleId:S}=or(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||S&&S!==-1)&&e({id:g,styleId:S,removes:[{index:[...vc(p),_]}]}),f.apply(p,m)})})}),oe(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function IS({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),oe(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function ZC({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:oe((a,c,u)=>{let[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);let{id:p,styleId:m}=or(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:d,value:l,priority:f},index:vc(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:oe((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:f}=or(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:vc(c.parentRule)}),a.apply(c,u)})}),oe(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function e0({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=oe(u=>ps(oe(d=>{let l=Ss(d);if(!l||Ft(l,t,n,r,!0))return;let{currentTime:f,volume:p,muted:m,playbackRate:_}=l;e({type:u,id:o.getId(l),currentTime:f,volume:p,muted:m,playbackRate:_})}),i.media||500)),c=[mt("play",a(Do.Play),s),mt("pause",a(Do.Pause),s),mt("seeked",a(Do.Seeked),s),mt("volumechange",a(Do.VolumeChange),s),mt("ratechange",a(Do.RateChange),s)];return oe(()=>{c.forEach(u=>u())})}function t0({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=If(t.fonts,"add",function(a){return function(c){return Pc(oe(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),oe(()=>{r.forEach(a=>a())})}function n0(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=oe(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){let p=u.getRangeAt(f),{startContainer:m,startOffset:_,endContainer:g,endOffset:S}=p;Ft(m,r,o,i,!0)||Ft(g,r,o,i,!0)||d.push({start:n.getId(m),startOffset:_,end:n.getId(g),endOffset:S})}s({ranges:d})});return c(),mt("selectionchange",c)}function r0({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:If(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function o0(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=TS(e,e.doc));let o=VC(e),i=YC(e),s=yS(e),a=JC(e,{win:n}),c=XC(e),u=e0(e),d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=QC(e,{win:n}),l=IS(e,e.doc),f=ZC(e,{win:n}),e.collectFonts&&(p=t0(e)));let m=n0(e),_=r0(e),g=[];for(let S of e.plugins)g.push(S.observer(S.callback,n,S.options));return oe(()=>{Go.forEach(S=>S.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),f(),p(),m(),_(),g.forEach(S=>S())})}function gc(e){return typeof window[e]<"u"}function Sc(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var ms=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},tf=class{constructor(){this.crossOriginIframeMirror=new ms(yf),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},nf=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ms(yf),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ms(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=Af(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:z.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case z.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.Drag:case z.TouchMove:case z.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case z.ViewportResize:return!1;case z.MediaInteraction:case z.MouseInteraction:case z.Scroll:case z.CanvasMutation:case z.Input:return this.replaceIds(n.data,t,["id"]),n;case z.StyleSheetRule:case z.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case z.Font:return n;case z.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case z.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Pe.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},rf=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},of=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!us(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=TS({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(yS({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Pc(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(IS({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=Af(t),r=WC(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(If(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&SS(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},zg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ss=0;ss<zg.length;ss++)i0[zg.charCodeAt(ss)]=ss;var ss,Nc=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},sf=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Xd,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:nS(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},af=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,GC(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Ne,Cc;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var un=fC();function Ln(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,maskAllInputs:_,maskInputOptions:g,slimDOMOptions:S,maskAttributeFn:I,maskInputFn:F,maskTextFn:O,maxCanvasSize:j=null,packFn:D,sampling:E={},dataURLOptions:x={},mousemoveWait:G,recordDOM:A=!0,recordCanvas:L=!1,recordCrossOriginIframes:C=!1,recordAfter:P=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:B=!1,collectFonts:re=!1,inlineImages:ee=!1,plugins:se,keepIframeSrcFn:R=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:N,onMutation:V,getCanvasManager:de}=e;zC(N);let ae=C?window.parent===window:!0,Ce=!1;if(!ae)try{window.parent.document&&(Ce=!1)}catch{Ce=!0}if(ae&&!t)throw new Error("emit function is required");if(!ae&&!Ce)return()=>{};G!==void 0&&E.mousemove===void 0&&(E.mousemove=G),un.reset();let ot=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Pn=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};BC();let it,ht=0,ln=te=>{for(let vt of se||[])vt.eventProcessor&&(te=vt.eventProcessor(te));return D&&!Ce&&(te=D(te)),te};Ne=(te,vt)=>{let ne=te;if(ne.timestamp=Rc(),Go[0]?.isFrozen()&&ne.type!==J.FullSnapshot&&!(ne.type===J.IncrementalSnapshot&&ne.data.source===z.Mutation)&&Go.forEach(We=>We.unfreeze()),ae)t?.(ln(ne),vt);else if(Ce){let We={type:"rrweb",event:ln(ne),origin:window.location.origin,isCheckout:vt};window.parent.postMessage(We,"*")}if(ne.type===J.FullSnapshot)it=ne,ht=0;else if(ne.type===J.IncrementalSnapshot){if(ne.data.source===z.Mutation&&ne.data.isAttachIframe)return;ht++;let We=r&&ht>=r,ce=n&&it&&ne.timestamp-it.timestamp>n;(We||ce)&&dn(!0)}};let Un=te=>{Ne({type:J.IncrementalSnapshot,data:{source:z.Mutation,...te}})},Jo=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.Scroll,...te}}),As=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...te}}),Ko=te=>Ne({type:J.IncrementalSnapshot,data:{source:z.AdoptedStyleSheet,...te}}),fe=new sf({mutationCb:Un,adoptedStyleSheetCb:Ko}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new tf:new nf({mirror:un,mutationCb:Un,stylesheetManager:fe,recordCrossOriginIframes:C,wrappedEmit:Ne});for(let te of se||[])te.getMirror&&te.getMirror({nodeMirror:un,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});let Ht=new af,$e=a0(de,{mirror:un,win:window,mutationCb:te=>Ne({type:J.IncrementalSnapshot,data:{source:z.CanvasMutation,...te}}),recordCanvas:L,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:j,sampling:E.canvas,dataURLOptions:x,errorHandler:N}),Ve=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new rf:new of({mutationCb:Un,scrollCb:Jo,bypassOptions:{onMutation:V,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:ot,dataURLOptions:x,maskAttributeFn:I,maskTextFn:O,maskInputFn:F,recordCanvas:L,inlineImages:ee,sampling:E,slimDOMOptions:Pn,iframeManager:be,stylesheetManager:fe,canvasManager:$e,keepIframeSrcFn:R,processedNodeManager:Ht,ignoreCSSAttributes:q},mirror:un}),dn=(te=!1)=>{if(!A)return;Ne({type:J.Meta,data:{href:window.location.href,width:fS(),height:dS()}},te),fe.reset(),Ve.init(),Go.forEach(ne=>ne.lock());let vt=UC(document,{mirror:un,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskAllInputs:ot,maskAttributeFn:I,maskInputFn:F,maskTextFn:O,slimDOM:Pn,dataURLOptions:x,recordCanvas:L,inlineImages:ee,onSerialize:ne=>{hS(ne,un)&&be.addIframe(ne),_S(ne,un)&&fe.trackLinkElement(ne),Kd(ne)&&Ve.addShadowRoot(ne.shadowRoot,document)},onIframeLoad:(ne,We)=>{be.attachIframe(ne,We),ne.contentWindow&&$e.addWindow(ne.contentWindow),Ve.observeAttachShadow(ne)},onStylesheetLoad:(ne,We)=>{fe.attachLinkElement(ne,We)},onBlockedImageLoad:(ne,We,{width:ce,height:Xo})=>{Un({adds:[],removes:[],texts:[],attributes:[{id:We.id,attributes:{style:{width:`${ce}px`,height:`${Xo}px`}}}]})},keepIframeSrcFn:R,ignoreCSSAttributes:q});if(!vt)return console.warn("Failed to snapshot the document");Ne({type:J.FullSnapshot,data:{node:vt,initialOffset:lS(window)}}),Go.forEach(ne=>ne.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&fe.adoptStyleSheets(document.adoptedStyleSheets,un.getId(document))};Cc=dn;try{let te=[],vt=We=>oe(o0)({onMutation:V,mutationCb:Un,mousemoveCb:(ce,Xo)=>Ne({type:J.IncrementalSnapshot,data:{source:Xo,positions:ce}}),mouseInteractionCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.MouseInteraction,...ce}}),scrollCb:Jo,viewportResizeCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.ViewportResize,...ce}}),inputCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.Input,...ce}}),mediaInteractionCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.MediaInteraction,...ce}}),styleSheetRuleCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.StyleSheetRule,...ce}}),styleDeclarationCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.StyleDeclaration,...ce}}),canvasMutationCb:As,fontCb:ce=>Ne({type:J.IncrementalSnapshot,data:{source:z.Font,...ce}}),selectionCb:ce=>{Ne({type:J.IncrementalSnapshot,data:{source:z.Selection,...ce}})},customElementCb:ce=>{Ne({type:J.IncrementalSnapshot,data:{source:z.CustomElement,...ce}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:ot,inlineStylesheet:m,sampling:E,recordDOM:A,recordCanvas:L,inlineImages:ee,userTriggeredOnInput:B,collectFonts:re,doc:We,maskAttributeFn:I,maskInputFn:F,maskTextFn:O,keepIframeSrcFn:R,blockSelector:i,unblockSelector:s,slimDOMOptions:Pn,dataURLOptions:x,mirror:un,iframeManager:be,stylesheetManager:fe,shadowDomManager:Ve,processedNodeManager:Ht,canvasManager:$e,ignoreCSSAttributes:q,plugins:se?.filter(ce=>ce.observer)?.map(ce=>({observer:ce.observer,options:ce.options,callback:Xo=>Ne({type:J.Plugin,data:{plugin:ce.name,payload:Xo}})}))||[]},{});be.addLoadListener(We=>{try{te.push(vt(We.contentDocument))}catch(ce){console.warn(ce)}});let ne=()=>{dn(),te.push(vt(document))};return document.readyState==="interactive"||document.readyState==="complete"?ne():(te.push(mt("DOMContentLoaded",()=>{Ne({type:J.DomContentLoaded,data:{}}),P==="DOMContentLoaded"&&ne()})),te.push(mt("load",()=>{Ne({type:J.Load,data:{}}),P==="load"&&ne()},window))),()=>{te.forEach(We=>We()),Ht.destroy(),Cc=void 0,qC()}}catch(te){console.warn(te)}}function s0(e){if(!Cc)throw new Error("please take full snapshot after start recording");Cc(e)}Ln.mirror=un;Ln.takeFullSnapshot=s0;function a0(e,t){try{return e?e(t):new Nc}catch{return console.warn("Unable to initialize CanvasManager"),new Nc}}var qg;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(qg||(qg={}));var c0=3,u0=5;function Rf(e){return e>9999999999?e:e*1e3}function Wd(e){return e>9999999999?e/1e3:e}function Es(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Be(t,10,1e3)}}),t.category==="console")))}var l0="button,a";function bS(e){return e.closest(l0)||e}function AS(e){let t=RS(e);return!t||!(t instanceof Element)?t:bS(t)}function RS(e){return d0(e)?e.target:e}function d0(e){return typeof e=="object"&&!!e&&"target"in e}var ir;function f0(e){return ir||(ir=[],p0()),ir.push(e),()=>{let t=ir?ir.indexOf(e):-1;t>-1&&ir.splice(t,1)}}function p0(){ge(ye,"open",function(e){return function(...t){if(ir)try{ir.forEach(n=>n())}catch{}return e.apply(ye,t)}})}var m0=new Set([z.Mutation,z.StyleSheetRule,z.StyleDeclaration,z.AdoptedStyleSheet,z.CanvasMutation,z.Selection,z.MediaInteraction]);function h0(e,t,n){e.handleClick(t,n)}var cf=class{constructor(t,n,r=Es){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=f0(()=>{this._lastMutation=Vg()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(g0(n,this._ignoreSelector)||!S0(t))return;let r={timestamp:Wd(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Wd(t)}registerScroll(t=Date.now()){this._lastScroll=Wd(t)}registerClick(t){let n=bS(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Vg();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:ye.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:ye.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Ur(()=>this._checkClicks(),1e3)}},_0=["A","BUTTON","INPUT"];function g0(e,t){return!!(!_0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function S0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Vg(){return Date.now()/1e3}function E0(e,t){try{if(!T0(t))return;let{source:n}=t.data;if(m0.has(n)&&e.registerMutation(t.timestamp),n===z.Scroll&&e.registerScroll(t.timestamp),y0(t)){let{type:r,id:o}=t.data,i=Ln.mirror.getNode(o);i instanceof HTMLElement&&r===pt.Click&&e.registerClick(i)}}catch{}}function T0(e){return e.type===c0}function y0(e){return e.data.source===z.MouseInteraction}function yn(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var vf=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(vf||{}),I0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function b0(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(I0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var A0=e=>t=>{if(!e.isEnabled())return;let n=R0(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&h0(e.clickDetector,n,AS(t.event)),Es(e,n)};function vS(e,t){let n=Ln.mirror.getId(e),r=n&&Ln.mirror.getNode(n),o=r&&Ln.mirror.getMeta(r),i=o&&N0(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===vf.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:b0(i.attributes)}}:{}}}function R0(e){let{target:t,message:n}=v0(e);return yn({category:`ui.${e.name}`,...vS(t,n)})}function v0(e){let t=e.name==="click",n,r=null;try{r=t?AS(e.event):RS(e.event),n=Re(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function N0(e){return e.type===vf.Element}function C0(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=w0(t);n&&Es(e,n)}function w0(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||x0(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=Re(s,{maxStringLength:200})||"<unknown>",d=vS(s,u);return yn({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function x0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var k0={resource:U0,paint:L0,navigation:P0};function jd(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function O0(e){return e.map(M0).filter(Boolean)}function M0(e){let t=k0[e.entryType];return t?t(e):null}function jo(e){return((Ee()||ye.performance.timeOrigin)+e)/1e3}function L0(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=jo(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function P0(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:m,type:_}=e;return o===0?null:{type:`${t}.${_}`,start:jo(p),end:jo(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function U0(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:jo(i),end:jo(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function D0(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Nf(e,"largest-contentful-paint",n)}function B0(e){return e.sources!==void 0}function F0(e){let t=[],n=[];for(let r of e.entries)if(B0(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=Ln.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return Nf(e,"cumulative-layout-shift",n,t)}function H0(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Nf(e,"interaction-to-next-paint",n)}function Nf(e,t,n,r){let o=e.value,i=e.rating,s=jo(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>Ln.mirror.getId(a)):void 0,attributions:r}}}function G0(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Bt(o,n))}),r.push(Pr(jd(D0,e)),Lr(jd(F0,e)),ts(jd(H0,e))),()=>{r.forEach(o=>o())}}var $=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$0='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function W0(){let e=new Blob([$0]);return URL.createObjectURL(e)}var Yg=["log","warn","error"],Tc="[Replay] ";function zd(e,t="info"){dt({category:"console",data:{logger:"replay"},level:t,message:`${Tc}${e}`},{level:t})}function j0(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return $?(Yg.forEach(r=>{n[r]=(...o)=>{h[r](Tc,...o),t&&zd(o.join(""),Vn(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(Tc,r),e?X(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&zd(r,"error")},n.infoTick=(...r)=>{h.log(Tc,...r),t&&setTimeout(()=>zd(r[0]),0)}):Yg.forEach(r=>{n[r]=()=>{}}),n}var W=j0(),hs=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Ef}.`)}},wc=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Ef)throw new hs;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?Rf(t):null}},uf=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){$&&W.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){$&&W.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},lf=class{constructor(t){this._worker=new uf(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=Rf(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Ef?Promise.reject(new hs):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{$&&W.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},df=class{constructor(t){this._fallback=new wc,this._compression=new lf(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){$&&W.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){$&&W.exception(i,"Failed to add events when switching buffers.")}}};function z0({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=q0(t);if(n)return n}return $&&W.log("Using simple buffer"),new wc}function q0(e){try{let t=e||V0();if(!t)return;$&&W.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new df(n)}catch(t){$&&W.exception(t,"Failed to create compression worker")}}function V0(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?W0():""}function Cf(){try{return"sessionStorage"in ye&&!!ye.sessionStorage}catch{return!1}}function Y0(e){J0(),e.session=void 0}function J0(){if(Cf())try{ye.sessionStorage.removeItem(gf)}catch{}}function NS(e){return e===void 0?!1:Math.random()<e}function Uc(e){if(Cf())try{ye.sessionStorage.setItem(gf,JSON.stringify(e))}catch{}}function CS(e){let t=Date.now(),n=e.id||le(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a,dirty:c}}function K0(e,t){return NS(e)?"session":t?"buffer":!1}function Jg({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=K0(e,t),i=CS({sampled:o,previousSessionId:r});return n&&Uc(i),i}function X0(){if(!Cf())return null;try{let e=ye.sessionStorage.getItem(gf);if(!e)return null;let t=JSON.parse(e);return $&&W.infoTick("Loading existing session"),CS(t)}catch{return null}}function ff(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function wS(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return ff(e.started,t,r)||ff(e.lastActivity,n,r)}function xS(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!wS(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function qd({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&X0();return o?xS(o,{sessionIdleExpire:e,maxReplayDuration:t})?($&&W.infoTick("Session in sessionStorage is expired, creating new one..."),Jg(r,{previousSessionId:o.id})):o:($&&W.infoTick("Creating new session"),Jg(r,{previousSessionId:n}))}function Q0(e){return e.type===J.Custom}function wf(e,t,n){return OS(e,t)?(kS(e,t,n),!0):!1}function Z0(e,t,n){return OS(e,t)?kS(e,t,n):Promise.resolve(null)}async function kS(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=ew(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof hs,a=s?"addEventSizeExceeded":"addEvent",c=T();if(c){let u=s?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function OS(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=Rf(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?($&&W.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function ew(e,t){try{if(typeof t=="function"&&Q0(e))return t(e)}catch(n){return $&&W.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function xf(e){return!e.type}function pf(e){return e.type==="transaction"}function tw(e){return e.type==="replay_event"}function Kg(e){return e.type==="feedback"}function nw(e){return(t,n)=>{if(!e.isEnabled()||!xf(t)&&!pf(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(pf(t)){rw(e,t);return}ow(e,t)}}}function rw(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function ow(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Ur(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function iw(e){return t=>{!e.isEnabled()||!xf(t)||sw(e,t)}}function sw(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=yn({category:"replay.hydrate-error",data:{url:ct()}});Es(e,r)}}function aw(e){let t=T();t&&t.on("beforeAddBreadcrumb",n=>cw(e,n))}function cw(e,t){if(!e.isEnabled()||!MS(t))return;let n=uw(t);n&&Es(e,n)}function uw(e){return!MS(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?lw(e):yn(e)}function lw(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return yn(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>_c?(n=!0,`${o.slice(0,_c)}\u2026`):o;if(typeof o=="object")try{let i=Be(o,7);return JSON.stringify(i).length>_c?(n=!0,`${JSON.stringify(i,null,2).slice(0,_c)}\u2026`):i}catch{}return o});return yn({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function MS(e){return!!e.category}function dw(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function LS(){let e=k().getPropagationContext().dsc;e&&delete e.replay_id;let t=K();if(t){let n=xe(t);delete n.replay_id}}function fw(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function pw(e,t){return e.recordingMode!=="buffer"||t.message===Sf||!t.exception||t.type?!1:NS(e.getOptions().errorSampleRate)}function mw(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(tw(t))return delete t.breadcrumbs,t;if(!xf(t)&&!pf(t)&&!Kg(t))return t;if(!e.checkAndHandleExpiredSession())return LS(),t;if(Kg(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),fw(e,t),t;if(dw(t,n)&&!e.getOptions()._experiments.captureExceptions)return $&&W.log("Ignoring error from rrweb internals",t),null;let o=pw(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){let s=e.session;s.dirty=!0,e.getOptions().stickySession&&Uc(s)}return t},{id:"Replay"})}function Dc(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function hw(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function _w(e){return t=>{if(!e.isEnabled())return;let n=hw(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Dc(e,[n]),!1)))}}function gw(e,t){return $&&e.getOptions()._experiments.traceInternals?!1:Li(t,T())}function PS(e,t){e.isEnabled()&&t!==null&&(gw(e,t.name)||e.addUpdate(()=>(Dc(e,[t]),!0)))}function Bc(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=rc(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function US(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function xc(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function DS(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function _s(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function sr(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=Sw(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function mf(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function Sw(e){if(!e||typeof e!="string")return{body:e};let t=e.length>kg,n=Ew(e);if(t){let r=e.slice(0,kg);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Ew(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function kc(e,t){let n=Tw(e);return je(n,t)}function Tw(e,t=ye.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ye.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function yw(e,t,n){try{let r=await bw(e,t,n),o=DS("resource.fetch",r);PS(n.replay,o)}catch(r){$&&W.exception(r,"Failed to capture fetch breadcrumb")}}function Iw(e,t){let{input:n,response:r}=t,o=n?ko(n):void 0,i=Bc(o),s=r?US(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function bw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=kc(s,n.networkDetailAllowUrls)&&!kc(s,n.networkDetailDenyUrls),f=l?Aw(n,t.input,u):_s(u),p=await Rw(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:p}}function Aw({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?Cw(n,t):{};if(!e)return sr(o,r,void 0);let i=ko(n),[s,a]=Br(i,W),c=sr(o,r,s);return a?xc(c,a):c}async function Rw(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return _s(o);let i=r?BS(r.headers,n):{};if(!r||!t&&o!==void 0)return sr(i,o,void 0);let[s,a]=await Nw(r),c=vw(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?xc(c,a):c}function vw(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?Bc(e):n;return r?t?sr(o,i,e):sr(o,i,void 0):_s(i)}catch(i){return $&&W.exception(i,"Failed to serialize response body"),sr(o,n,void 0)}}async function Nw(e){let t=ww(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await xw(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?($&&W.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):($&&W.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function BS(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function Cw(e,t){return e.length===1&&typeof e[0]!="string"?Xg(e[0],t):e.length===2?Xg(e[1],t):{}}function Xg(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?BS(n,t):Array.isArray(n)?{}:mf(n,t):{}}function ww(e){try{return e.clone()}catch(t){$&&W.exception(t,"Failed to clone response body")}}function xw(e){return new Promise((t,n)=>{let r=Ur(()=>n(new Error("Timeout while trying to read response body")),500);kw(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function kw(e){return await e.text()}async function Ow(e,t,n){try{let r=Lw(e,t,n),o=DS("resource.xhr",r);PS(n.replay,o)}catch(r){$&&W.exception(r,"Failed to capture xhr breadcrumb")}}function Mw(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=Bc(r),i=n.getResponseHeader("content-length")?US(n.getResponseHeader("content-length")):Dw(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function Lw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!kc(c,n.networkDetailAllowUrls)||kc(c,n.networkDetailDenyUrls)){let D=_s(l),E=_s(f);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:D,response:E}}let p=a[ft],m=p?mf(p.request_headers,n.networkRequestHeaders):{},_=mf(is(a),n.networkResponseHeaders),[g,S]=n.networkCaptureBodies?Br(s,W):[void 0],[I,F]=n.networkCaptureBodies?Pw(a):[void 0],O=sr(m,l,g),j=sr(_,f,I);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S?xc(O,S):O,response:F?xc(j,F):j}}function Pw(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Uw(e.response,e.responseType)}catch(n){t.push(n)}return $&&W.warn("Failed to get xhr response body",...t),[void 0]}function Uw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return $&&W.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return $&&W.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Dw(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Bc(n)}catch{return}}function Bw(e){let t=T();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>Fw(a,c,u))}catch{}}function Fw(e,t,n){if(t.data)try{Hw(t)&&$w(n)&&(Mw(t,n),Ow(t,n,e)),Gw(t)&&Ww(n)&&(Iw(t,n),yw(t,n,e))}catch(r){$&&W.exception(r,"Error when enriching network breadcrumb")}}function Hw(e){return e.category==="xhr"}function Gw(e){return e.category==="fetch"}function $w(e){return e?.xhr}function Ww(e){return e?.response}function jw(e){let t=T();os(A0(e)),On(_w(e)),aw(e),Bw(e);let n=mw(e);vi(n),t&&(t.on("beforeSendEvent",iw(e)),t.on("afterSendEvent",nw(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function zw(e){try{return Promise.all(Dc(e,[qw(ye.performance.memory)]))}catch{return[]}}function qw(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Vw(e,t,n){return cl(e,t,{...n,setTimeoutImpl:Ur})}var Ec=v.navigator;function Yw(){return/iPhone|iPad|iPod/i.test(Ec?.userAgent??"")||/Macintosh/i.test(Ec?.userAgent??"")&&Ec?.maxTouchPoints&&Ec?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Jw(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){$&&W.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&E0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!wf(e,n,o))return!0;if(!o)return!1;let i=e.session;if(Xw(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){let s=e.eventBuffer.getEarliestTimestamp();s&&($&&W.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&Uc(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Kw(e){let t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Xw(e,t){!t||!e.session||e.session.segmentId!==0||wf(e,Kw(e),!1)}function Qw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Zw(e,t,n,r){return ke(hi(e,Gn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function ex({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function tx({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await yi(e.getOptions(),r,i,t,e,ue());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function nx({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=ex({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=T(),f=k(),p=l?.getTransport(),m=l?.getDsn();if(!l||!p||!m||!i.sampled)return Promise.resolve({});let _={type:zN,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await tx({scope:f,client:l,replayId:t,event:_});if(!g)return l.recordDroppedEvent("event_processor","replay"),$&&W.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;let S=Zw(g,s,m,l.getOptions().tunnel),I;try{I=await p.send(S)}catch(O){let j=new Error(Sf);try{j.cause=O}catch{}throw j}if(typeof I.statusCode=="number"&&(I.statusCode<200||I.statusCode>=300))throw new Oc(I.statusCode);let F=xi({},I);if(wi(F,"replay"))throw new gs(F);return I}var Oc=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},gs=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function FS(e,t={count:0,interval:XN}){let{recordingData:n,onError:r}=e;if(n.length)try{return await nx(e),!0}catch(o){if(o instanceof Oc||o instanceof gs)throw o;if(bi("Replays",{_retryCount:t.count}),r&&r(o),t.count>=QN){let i=new Error(`${Sf} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{Ur(async()=>{try{await FS(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var HS="__THROTTLED",rx="__SKIPPED";function ox(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?rx:HS}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var hf=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:qN,sessionIdleExpire:VN},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Vw(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=ox((s,a)=>Z0(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(ZN,r),timeout:r,scrollTimeout:eC,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new cf(this,i)),$){let s=t._experiments;W.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{ye.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=yn({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=yn({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{C0(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){$&&W.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){$&&W.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",$&&W.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){$&&W.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){$&&W.log("Buffering is in progress, call `flush()` to save the replay");return}$&&W.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=qd({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){$&&W.log("Buffering is in progress, call `flush()` to save the replay");return}$&&W.infoTick("Starting replay in buffer mode");let t=qd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=Ln({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:KN}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Jw(this),...Yw(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{$&&W.log(`Stopping Replay${n?` triggered by ${n}`:""}`),LS(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,Y0(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),$&&W.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),$&&W.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();$&&W.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&ff(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${ye.location.pathname}${ye.location.hash}${ye.location.search}`,n=`${ye.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===HS){let o=yn({category:"replay.throttled"});this.addUpdate(()=>!wf(this,{type:u0,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||K(),n=t&&Z(t),o=(n&&M(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return M(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=z0({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=qd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return xS(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{ye.document.addEventListener("visibilitychange",this._handleVisibilityChange),ye.addEventListener("blur",this._handleWindowBlur),ye.addEventListener("focus",this._handleWindowFocus),ye.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(jw(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=G0(this)}_removeListeners(){try{ye.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ye.removeEventListener("blur",this._handleWindowBlur),ye.removeEventListener("focus",this._handleWindowFocus),ye.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||wS(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){$&&W.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=O0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Dc(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){$&&W.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await zw(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await FS({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=T();if(r){let o=n instanceof gs?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){$&&W.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){$&&W.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&$&&W.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Uc(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=Qw(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=yn({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function as(e,t){return[...e,...t].join(",")}function ix({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=as(e,[".sentry-mask","[data-sentry-mask]"]),a=as(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:as(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:as(r,[]),ignoreSelector:as(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function sx({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var Qg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ax=["content-length","content-type","accept"],cx=Symbol.for("sentry__originalRequestBody"),Zg=!1,eS=!1;function ux(){if(typeof Request>"u"||eS)return;let e=Request;try{let t=function(n,r){let o=new e(n,r);return r?.body!=null&&(o[cx]=r.body),o};t.prototype=e.prototype,v.Request=t,eS=!0}catch{}}var GS=(e=>new _f(e)),_f=class{constructor({flushMinDelay:t=YN,flushMaxDelay:n=JN,minReplayDuration:r=tC,maxReplayDuration:o=Og,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:S=[],networkCaptureBodies:I=!0,networkRequestHeaders:F=[],networkResponseHeaders:O=[],mask:j=[],maskAttributes:D=["title","placeholder","aria-label"],unmask:E=[],block:x=[],unblock:G=[],ignore:A=[],maskFn:L,beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:B,attachRawBodyFromRequest:re=!1}={}){this.name="Replay";let ee=ix({mask:j,unmask:E,block:x,unblock:G,ignore:A});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(se,R,q)=>sx({maskAttributes:D,maskAllText:u,privacyOptions:ee,key:se,value:R,el:q}),...ee,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:se=>{try{se.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,nC),maxReplayDuration:Math.min(o,Og),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:m,slowClickIgnoreSelectors:_,networkDetailAllowUrls:g,networkDetailDenyUrls:S,networkCaptureBodies:I,networkRequestHeaders:tS(F),networkResponseHeaders:tS(O),beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:B,attachRawBodyFromRequest:re,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Qg}`:Qg,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&er())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Zg}set _isInitialized(t){Zg=t}afterAllSetup(t){!er()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&ux(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=lx(this._initialOptions,t);this._replay=new hf({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function lx(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=wt(n.replaysSessionSampleRate),i=wt(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ye(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function tS(e){return[...ax,...e.map(t=>t.toLowerCase())]}function $S(){return T()?.getIntegrationByName("Replay")}var dx=Object.defineProperty,fx=(e,t,n)=>t in e?dx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WS=(e,t,n)=>fx(e,typeof t!="symbol"?t+"":t,n),Of=class{constructor(){WS(this,"idNodeMap",new Map),WS(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function px(){return new Of}function mx(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Mf(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Mf(e.parentNode,t,n,r+1)}function jS(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(mx(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var zo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,zS={map:{},getId(){return console.error(zo),-1},getNode(){return console.error(zo),null},removeNodeFromMap(){console.error(zo)},has(){return console.error(zo),!1},reset(){console.error(zo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(zS=new Proxy(zS,{get(e,t,n){return t==="map"&&console.error(zo),Reflect.get(e,t,n)}}));function Pf(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){ZS(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Pf(e,t,i||{},!0)}function Uf(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function hx(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function $c(e,t,n,r,o){if(!e)return!1;let i=hx(e);if(!i)return!1;let s=jS(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Mf(i,s),c=-1;return a<0?!1:(r&&(c=Mf(i,jS(null,r))),a>-1&&c<0?!0:a<c)}var qS={};function QS(e){let t=qS[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return qS[e]=r.bind(window)}function Hr(...e){return QS("requestAnimationFrame")(...e)}function ZS(...e){return QS("setTimeout")(...e)}var Vo=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Vo||{}),Hc;function _x(e){Hc=e}var kf=e=>Hc?(...n)=>{try{return e(...n)}catch(r){if(Hc&&Hc(r)===!0)return()=>{};throw r}}:e,qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Ts=0;Ts<qo.length;Ts++)gx[qo.charCodeAt(Ts)]=Ts;var Ts,Sx=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=qo[t[n]>>2],o+=qo[(t[n]&3)<<4|t[n+1]>>4],o+=qo[(t[n+1]&15)<<2|t[n+2]>>6],o+=qo[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},VS=new Map;function Ex(e,t){let n=VS.get(e);return n||(n=new Map,VS.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var eE=(e,t,n)=>{if(!e||!(nE(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=Ex(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Gc(e,t,n){if(e instanceof Array)return e.map(r=>Gc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=Sx(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Gc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Gc(e.data,t,n),e.width,e.height]};if(nE(e,t)||typeof e=="object"){let r=e.constructor.name,o=eE(e,t,n);return{rr_type:r,index:o}}}}return e}var tE=(e,t,n)=>e.map(r=>Gc(r,t,n)),nE=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Tx(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=Uf(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return $c(this.canvas,n,r,o,!0)||ZS(()=>{let l=tE(d,t,this);e(this.canvas,{type:Vo["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Pf(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Vo["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function yx(e){return e==="experimental-webgl"?"webgl":e}function YS(e,t,n,r,o){let i=[];try{let s=Uf(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!$c(this,t,n,r,!0)){let d=yx(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function JS(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=Uf(e,d,function(f){return function(...p){let m=f.apply(this,p);if(eE(m,a,this),"tagName"in this.canvas&&!$c(this.canvas,r,o,i,!0)){let _=tE(p,a,this),g={type:t,property:d,args:_};n(this.canvas,g)}return m}});c.push(l)}catch{let l=Pf(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function Ix(e,t,n,r,o,i){let s=[];return s.push(...JS(t.WebGLRenderingContext.prototype,Vo.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...JS(t.WebGL2RenderingContext.prototype,Vo.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var bx='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Ax(){let e=new Blob([bx]);return URL.createObjectURL(e)}var Lf=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&_x(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&kf(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}kf(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=YS(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}Hr(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(Ax());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:Vo["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=Hr(n)};t=Hr(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=YS(t,n,r,o,!1),s=Tx(this.processMutation.bind(this),t,n,r,o),a=Ix(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{$c(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let _=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(_))){if(this.snapshotInProgressMap.set(_,!0),!n&&["webgl","webgl2"].includes(m.__context)){let g=m.getContext(m.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(m).then(g=>{this.worker?.postMessage({id:_,bitmap:g,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[g])}).catch(g=>{kf(()=>{throw this.snapshotInProgressMap.delete(_),g})()})}}),!0)}startPendingCanvasMutationFlusher(){Hr(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,Hr(t)};Hr(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Hr(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}px();var KS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(KS||(KS={}));var XS={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Rx="ReplayCanvas",Fc=1280,vx=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Fc):Fc,n?Math.min(n,Fc):Fc]},o,i,s=new Promise(a=>i=a);return{name:Rx,getOptions(){let{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{let l=new Lf({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return o=l,i(l),l},...XS[a]||XS.medium}},async snapshot(a,c){(o||await s).snapshot(a,c)}}}),rE=vx;function oE(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Df(e){try{return new URL(e,w.location.origin).href}catch{return}}function iE(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Bf(e){try{return new Headers(e)}catch{return}}var sE=new WeakMap,Ff=new Map,ys={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Wc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...ys,...t},d=typeof i=="function"?i:m=>!0,l=m=>Nx(m,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(_=>{if(_.op==="http.client"){let g=Ff.get(_.span_id);g&&(_.timestamp=g/1e3,Ff.delete(_.span_id))}}),m)),o&&zl(m=>{if(m.response){let _=sE.get(m.response);_&&m.endTimestamp&&Ff.set(_,m.endTimestamp)}}),Cr(m=>{let _=Tl(m,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(m.response&&m.fetchData.__span&&sE.set(m.response,m.fetchData.__span),_){let g=Df(m.fetchData.url),S=g?tn(g).host:void 0;_.setAttributes({"http.url":g,"server.address":S}),s&&aE(_),c?.(_,{headers:m.headers})}})),r&&Dr(m=>{let _=Cx(m,d,l,f,p,u);_&&(s&&aE(_),c?.(_,{headers:Bf(m.xhr.__sentry_xhr_v3__?.request_headers)}))})}function aE(e){let{url:t}=M(e).data;if(!t||typeof t!="string")return;let n=Bt("resource",({entries:r})=>{r.forEach(o=>{iE(o)&&o.name.endsWith(t)&&(e.setAttributes(rs(o)),setTimeout(n))})})}function Nx(e,t){let n=ct();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?je(r.toString(),t)||i&&je(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?je(e,t):r}}function Cx(e,t,n,r,o,i){let s=e.xhr,a=s?.[ft];if(!s||s.__sentry_own_request__||!a)return;let{url:c,method:u}=a,d=we()&&t(c);if(e.endTimestamp&&d){let S=s.__sentry_xhr_span_id__;if(!S)return;let I=r[S];I&&a.status_code!==void 0&&(_n(I,a.status_code),I.end(),i?.(I,{headers:Bf(is(s)),error:e.error}),delete r[S]);return}let l=Df(c),f=l?tn(l):tn(c),p=Mi(c),m=!!K(),_=d&&m?Et({name:`${u} ${p}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":f?.host,[H]:"auto.http.browser",[ie]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new tt;s.__sentry_xhr_span_id__=_.spanContext().spanId,r[s.__sentry_xhr_span_id__]=_,n(c)&&wx(s,we()&&m?_:void 0,o);let g=T();return g&&g.emit("beforeOutgoingRequestSpan",_,e),_}function wx(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=br({span:t,propagateTraceparent:n});r&&xx(e,r,o,i)}function xx(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!oE(i))&&e.setRequestHeader("baggage",n)}}catch{}}function cE(){w.document?w.document.addEventListener("visibilitychange",()=>{let e=K();if(!e)return;let t=Z(e);if(w.document.hidden&&t){let n="cancelled",{op:r,status:o}=M(t);b&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):b&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var kx=3600,uE="sentry_previous_trace",Ox="sentry.previous_trace";function lE(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?Px():void 0;e.on("spanStart",s=>{if(Z(s)!==s)return;let a=k().getPropagationContext();o=Mx(o,s,a),r&&Lx(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=k(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(Hf(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=Hf(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[si]:o.sampleRate}})}function Mx(e,t,n){let r=M(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[An])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=kx&&(b&&h.log(`Adding previous_trace \`${JSON.stringify(s)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:s,attributes:{[_u]:"previous_trace"}}),t.setAttribute(Ox,`${s.traceId}-${s.spanId}-${Hf(s)?1:0}`)),i)}function Lx(e){try{w.sessionStorage.setItem(uE,JSON.stringify(e))}catch(t){b&&h.warn("Could not store previous trace in sessionStorage",t)}}function Px(){try{let e=w.sessionStorage?.getItem(uE);return JSON.parse(e)}catch{return}}function Hf(e){return e.traceFlags===1}var Ux="BrowserTracing",Dx={...eo,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...ys},mE=((e={})=>{let t={name:void 0,source:void 0},n=w.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:m,traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:I,enableHTTPTimings:F,ignoreResourceSpans:O,ignorePerformanceApiSpans:j,instrumentPageLoad:D,instrumentNavigation:E,detectRedirects:x,linkPreviousTrace:G,consistentTraceSampling:A,enableReportPageLoaded:L,onRequestSpanStart:C,onRequestSpanEnd:P}={...Dx,...e},B,re,ee;function se(R,q,N=!0){let V=q.op==="pageload",de=q.name,ae=d?d(q):q,Ce=ae.attributes||{};if(de!==ae.name&&(Ce[ve]="custom",ae.attributes=Ce),!N){let it=Ct();Et({...ae,startTime:it}).end(it);return}t.name=ae.name,t.source=Ce[ve];let ot=Qs(ae,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:V,beforeSpanEnd:it=>{B?.(),vd(it,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:O,ignorePerformanceApiSpans:j}),fE(R,void 0);let ht=k(),ln=ht.getPropagationContext();ht.setPropagationContext({...ln,traceId:ot.spanContext().traceId,sampled:xt(ot),dsc:xe(it)}),V&&(ee=void 0)},trimIdleSpanEndTimestamp:!L});V&&L&&(ee=ot),fE(R,ot);function Pn(){n&&["interactive","complete"].includes(n.readyState)&&R.emit("idleSpanEnableAutoFinish",ot)}V&&!L&&n&&(n.addEventListener("readystatechange",()=>{Pn()}),Pn())}return{name:Ux,setup(R){if(mi(),B=Id({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:R}),r&&Md(),o&&Nd(),s&&v.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Ad():i&&bd(),a&&Rd(),x&&n){let N=()=>{re=Q()};addEventListener("click",N,{capture:!0}),addEventListener("keydown",N,{capture:!0,passive:!0})}function q(){let N=Is(R);N&&!M(N).timestamp&&(b&&h.log(`[Tracing] Finishing current active span with op: ${M(N).op}`),N.setAttribute(Fn,"cancelled"),N.end())}R.on("startNavigationSpan",(N,V)=>{if(T()!==R)return;if(V?.isRedirect){b&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),se(R,{op:"navigation.redirect",...N},!1);return}re=void 0,q(),ue().setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Ze()});let de=k();de.setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Ze()}),de.setSDKProcessingMetadata({normalizedRequest:void 0}),se(R,{op:"navigation",...N,parentSpan:null,forceTransaction:!0})}),R.on("startPageLoadSpan",(N,V={})=>{if(T()!==R)return;q();let de=V.sentryTrace||dE("sentry-trace"),ae=V.baggage||dE("baggage"),Ce=ci(de,ae),ot=k();ot.setPropagationContext(Ce),we()||(ot.getPropagationContext().propagationSpanId=Ze()),ot.setSDKProcessingMetadata({normalizedRequest:Zi()}),se(R,{op:"pageload",...N})}),R.on("endPageloadSpan",()=>{L&&ee&&(ee.setAttribute(Fn,"reportPageLoaded"),ee.end())})},afterAllSetup(R){let q=ct();if(G!=="off"&&lE(R,{linkPreviousTrace:G,consistentTraceSampling:A}),w.location){if(D){let N=Ee();Gf(R,{name:w.location.pathname,startTime:N?N/1e3:void 0,attributes:{[ve]:"url",[H]:"auto.pageload.browser"}})}E&&On(({to:N,from:V})=>{if(V===void 0&&q?.indexOf(N)!==-1){q=void 0;return}q=void 0;let de=Ir(N),ae=Is(R),Ce=ae&&x&&Fx(ae,re);$f(R,{name:de?.pathname||w.location.pathname,attributes:{[ve]:"url",[H]:"auto.navigation.browser"}},{url:N,isRedirect:Ce})})}m&&cE(),a&&Bx(R,l,f,p,t),r&&Ld(),Wc(R,{traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,tracePropagationTargets:R.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:I,enableHTTPTimings:F,onRequestSpanStart:C,onRequestSpanEnd:P})}}});function Gf(e,t,n){e.emit("startPageLoadSpan",t,n),k().setTransactionName(t.name);let r=Is(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function $f(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=k();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...Zi(),url:r}}),Is(e)}function dE(e){return w.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function Bx(e,t,n,r,o){let i=w.document,s,a=()=>{let c="ui.action.click",u=Is(e);if(u){let d=M(u).op;if(["navigation","pageload"].includes(d)){b&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(Fn,"interactionInterrupted"),s.end(),s=void 0),!o.name){b&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=Qs({name:o.name,op:c,attributes:{[ve]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var hE="_sentry_idleSpan";function Is(e){return e[hE]}function fE(e,t){Se(e,hE,t)}var pE=1.5;function Fx(e,t){let n=M(e),r=Ct(),o=n.start_timestamp;return!(r-o>pE||t&&r-t<=pE)}function _E(e=T()){e?.emit("endPageloadSpan")}function gE(e){let t=K();if(t===e)return;let n=k();e.end=new Proxy(e.end,{apply(r,o,i){return ut(n,t),Reflect.apply(r,o,i)}}),ut(n,e)}function Yo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Hx(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Yo(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function Wf(e){return Yo(e.getAllKeys())}function Gx(e,t,n){return e(r=>Wf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),Yo(r.transaction)}))}function $x(e,t,n){return e(r=>Wf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),Yo(r.transaction)}))}function Wx(e){return e(t=>Wf(t).then(n=>{let r=n[0];if(r!=null)return Yo(t.get(r)).then(o=>(t.delete(r),Yo(t.transaction).then(()=>o)))}))}function jx(e){let t;function n(){return t==null&&(t=Hx(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await Hn(r);await Gx(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await Hn(r);await $x(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await Wx(n());if(r)return Au(r)}catch{}}}}function zx(e){return t=>{let n=e({...t,createStore:jx});return w.addEventListener("online",async r=>{await n.flush()}),n}}function SE(e=Mo){return zx(nl(e))}var EE=1e6,qx="window"in v&&v.window===v&&typeof importScripts>"u",ar=String(0),jc=qx?"main":"worker",zc=w.navigator,yE="",IE="",bE="",jf=zc?.userAgent||"",AE="",Vx=zc?.language||zc?.languages?.[0]||"";function Yx(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var TE=zc?.userAgentData;Yx(TE)&&TE.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(yE=e.platform||"",bE=e.architecture||"",AE=e.model||"",IE=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];jf=`${t.brand} ${t.version}`}}).catch(e=>{});function Jx(e){return!("thread_metadata"in e)}function Kx(e){return Jx(e)?ek(e):e}function Xx(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&b&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function Qx(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=Xx(r),i=Kx(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Q()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Q()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||vn,runtime:{name:"javascript",version:w.navigator.userAgent},os:{name:yE,version:IE,build_number:jf},device:{locale:Vx,model:AE,manufacturer:jf,architecture:bE,is_emulator:!1},debug_meta:{images:wE(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||le(),trace_id:o,active_thread_id:ar,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function RE(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);let r=Zx(e),o=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:le(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||le(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:wE(e.resources)},profile:r}}function vE(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};let t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};let n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function Zx(e){let t=[];for(let a=0;a<e.frames.length;a++){let c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}let n=[];for(let a=0;a<e.stacks.length;a++){let c=e.stacks[a];if(!c)continue;let u=[],d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}let r=Ee(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=o-(r||o),s=[];for(let a=0;a<e.samples.length;a++){let c=e.samples[a];if(!c)continue;let u=(o+(c.timestamp-i))/1e3;s[a]={stack_id:c.stackId??0,thread_id:ar,timestamp:u}}return{frames:t,stacks:n,samples:s,thread_metadata:{[ar]:{name:jc}}}}function qc(e){return M(e).op==="pageload"}function ek(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[ar]:{name:jc}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=Ee(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*EE).toFixed(0),stack_id:t,thread_id:ar};return}let l=e.stacks[u.stackId],f=[];for(;l;){f.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let p={elapsed_since_start_ns:((u.timestamp+c-i)*EE).toFixed(0),stack_id:n,thread_id:ar};r.stacks[n]=f,r.samples[d]=p,n++}),r}function NE(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function CE(e){let t=[];return kt(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function wE(e){let r=T()?.getOptions()?.stackParser;return r?Mu(r,e):[]}function xE(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(b&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(b&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function tk(e){return e.samples.length<2?(b&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(b&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var zf=!1,qf=3e4;function nk(e){return typeof e=="function"}function Vc(){let e=w.Profiler;if(!nk(e)){b&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(qf/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{b&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),zf=!0}}function Vf(e){if(zf)return b&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return b&&h.log("[Profiling] Discarding profile because root span was not sampled."),!1;let n=T()?.getOptions();if(!n)return b&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return xE(r)?r?(r===!0?!0:Math.random()<r)?!0:(b&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(b&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(b&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function kE(e){if(zf)return b&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return b&&h.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;let t=e.profileSessionSampleRate;return xE(t)?t?Math.random()<=t:(b&&h.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(b&&h.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function bs(e){return typeof e.profilesSampleRate<"u"}function OE(e,t,n,r){return tk(n)?Qx(e,t,n,r):null}var Gr=new Map;function ME(){return Gr.size}function LE(e){let t=Gr.get(e);return t&&Gr.delete(e),t}function PE(e,t){if(Gr.set(e,t),Gr.size>30){let n=Gr.keys().next().value;n!==void 0&&Gr.delete(n)}}function UE(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":ar,"thread.name":jc}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":ar,"thread.name":jc}})),e}function Yf(e){let t;qc(e)&&(t=Q()*1e3);let n=Vc();if(!n)return;b&&h.log(`[Profiling] started profiling span: ${M(e).description}`);let r=le(),o=null;k().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(o){b&&h.log("[Profiling] profile for:",M(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(s&&(w.clearTimeout(s),s=void 0),b&&h.log(`[Profiling] stopped profiling of span: ${M(e).description}`),!u){b&&h.log(`[Profiling] profiler returned null profile for: ${M(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,PE(r,u)}).catch(u=>{b&&h.log("[Profiling] error while stopping profiler:",u)})}}let s=w.setTimeout(()=>{b&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",M(e).description),i()},qf),a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}var rk=6e4,ok=3e5,Yc=class{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){let n=t.getOptions().profileLifecycle,r=kE(t.getOptions());b&&h.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||b&&h.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=le(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){b&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){b&&h.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){b&&h.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){b&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){b&&h.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;let n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);let r=this._activeRootSpanIds.size;r===1&&(b&&h.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,b&&h.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Qt().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){b&&h.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{b&&h.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Qt().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){b&&h.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Z(n))return;if(!n.isRecording()){b&&h.log("[Profiling] Discarding profile because root span was not sampled.");return}let r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);let o=this._activeRootSpanIds.size;o===1&&(b&&h.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${o}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;let r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);let o=this._activeRootSpanIds.size;b&&h.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${o}).`),o===0&&(this._collectCurrentChunk().catch(i=>{b&&h.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Qt().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);let n=setTimeout(()=>this._onRootSpanTimeout(t),ok);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let t=Vc();if(!t){b&&h.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{b&&h.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},rk))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(b&&h.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){let t=this._profiler;if(this._profiler=void 0,!!t)try{let n=await t.stop(),r=RE(n,this._client,this._profilerId),o=vE(r);if("reason"in o){b&&h.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),b&&h.log("[Profiling] Collected browser profile chunk.")}catch(n){b&&h.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){let n=this._client,r=Gn(n.getSdkMetadata?.()),o=n.getDsn(),i=n.getOptions().tunnel,s=ke({event_id:le(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&o&&{dsn:He(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(s).then(null,a=>{b&&h.error("Error while sending profile chunk envelope:",a)})}};var ik="BrowserProfiling",sk=(()=>({name:ik,setup(e){let t=e.getOptions(),n=new Yc;if(!bs(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),bs(t)&&!t.profilesSampleRate){b&&h.log("[Profiling] Profiling disabled, no profiling options found.");return}let r=K(),o=r&&Z(r);if(bs(t)&&t.profileSessionSampleRate!==void 0&&b&&h.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),bs(t))o&&qc(o)&&Vf(o)&&Yf(o),e.on("spanStart",i=>{i===Z(i)&&Vf(i)&&Yf(i)}),e.on("beforeEnvelope",i=>{if(!ME())return;let s=CE(i);if(!s.length)return;let a=[];for(let c of s){let u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){b&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){b&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;let f=LE(d);if(!f){b&&h.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}let p=OE(d,l,f,c);p&&a.push(p)}NE(i,a)});else{let i=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),i==="manual")n.initialize(e);else if(i==="trace"){if(!we(t)){b&&h.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),o&&n.notifyRootSpanActive(o),w.setTimeout(()=>{let s=K(),a=s&&Z(s);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return UE(e)}})),DE=sk;var BE=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Ot(e)}});function FE(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Tt(e,t.value),yt(e,t.value)}}}var HE=()=>({name:"OpenFeature",processEvent(e,t,n){return Ot(e)}}),Jc=class{after(t,n){Tt(n.flagKey,n.value),yt(n.flagKey,n.value)}error(t,n,r){Tt(t.flagKey,t.defaultValue),yt(t.flagKey,t.defaultValue)}};var GE=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;ge(t,"isEnabled",ak)},processEvent(t,n,r){return Ot(t)}});function ak(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(Tt(n,r),yt(n,r)):b&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var $E=(({growthbookClass:e})=>El({growthbookClass:e}));var WE=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{Tt(n.gate.name,n.gate.value),yt(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Ot(t)}});async function jE(){let e=T();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";let r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await gi(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var ck="WebWorker",qE=({worker:e})=>({name:ck,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>zE(t))},addWorker:t=>zE(t)});function zE(e){e.addEventListener("message",t=>{lk(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(b&&h.log("Sentry debugId web worker message received",t.data),w._sentryDebugIds={...t.data._sentryDebugIds,...w._sentryDebugIds}),t.data._sentryModuleMetadata&&(b&&h.log("Sentry module metadata web worker message received",t.data),w._sentryModuleMetadata={...t.data._sentryModuleMetadata,...w._sentryModuleMetadata}),t.data._sentryWorkerError&&(b&&h.log("Sentry worker rejection message received",t.data._sentryWorkerError),uk(t.data._sentryWorkerError)))})}function uk(e){let t=T();if(!t)return;let n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,i=at(o)?Fd(o):Ao(n,o,void 0,r,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),en(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),b&&h.log("Captured worker unhandled rejection",o)}function VE({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0,_sentryModuleMetadata:e._sentryModuleMetadata??void 0}),e.addEventListener("unhandledrejection",t=>{let r={reason:Bd(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),b&&h.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),b&&h.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function lk(e){if(!Ue(e)||e._sentryMessage!==!0)return!1;let t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e;return!(!t&&!n&&!r||t&&!(Ue(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(Ue(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!Ue(e._sentryWorkerError))}export{YE as Sentry};
