var PS=Object.defineProperty;var Ec=(e,t)=>{for(var n in t)PS(e,n,{get:t[n],enumerable:!0})};var LS={};Ec(LS,{BrowserClient:()=>ro,OpenFeatureIntegrationHook:()=>Sc,SDK_VERSION:()=>ct,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>Te,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>q,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>ln,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ve,Scope:()=>Je,WINDOW:()=>k,addBreadcrumb:()=>rt,addEventProcessor:()=>ei,addIntegration:()=>Br,breadcrumbsIntegration:()=>La,browserApiErrorsIntegration:()=>Pa,browserProfilingIntegration:()=>bS,browserSessionIntegration:()=>Da,browserTracingIntegration:()=>Z_,buildLaunchDarklyFlagUsedHandler:()=>AS,captureConsoleIntegration:()=>Pu,captureEvent:()=>mn,captureException:()=>ae,captureFeedback:()=>fi,captureMessage:()=>Un,captureSession:()=>Ur,chromeStackLineParser:()=>Jl,close:()=>lu,consoleLoggingIntegration:()=>zu,contextLinesIntegration:()=>fg,continueTrace:()=>Xc,createConsolaReporter:()=>qu,createTransport:()=>si,createUserFeedbackEnvelope:()=>Jh,dedupeIntegration:()=>di,defaultRequestInstrumentationOptions:()=>qi,defaultStackLineParsers:()=>Xl,defaultStackParser:()=>Oa,diagnoseSdkConnectivity:()=>xS,endSession:()=>ti,eventFiltersIntegration:()=>Ps,eventFromException:()=>fa,eventFromMessage:()=>pa,exceptionFromError:()=>no,extraErrorDataIntegration:()=>Du,featureFlagsIntegration:()=>$u,feedbackAsyncIntegration:()=>yh,feedbackIntegration:()=>Rl,feedbackSyncIntegration:()=>Rl,flush:()=>uu,forceLoad:()=>tg,functionToStringIntegration:()=>ui,geckoStackLineParser:()=>Kl,getActiveSpan:()=>X,getClient:()=>T,getCurrentScope:()=>x,getDefaultIntegrations:()=>Ql,getFeedback:()=>sh,getGlobalScope:()=>ft,getIsolationScope:()=>se,getReplay:()=>C_,getRootSpan:()=>Z,getSpanDescendants:()=>dn,getSpanStatusFromHttpCode:()=>ss,getTraceData:()=>ar,globalHandlersIntegration:()=>Ua,graphqlClientIntegration:()=>gg,growthbookIntegration:()=>wS,httpClientIntegration:()=>ag,httpContextIntegration:()=>Ba,inboundFiltersIntegration:()=>li,init:()=>eg,instrumentAnthropicAiClient:()=>Qu,instrumentGoogleGenAIClient:()=>nl,instrumentOpenAiClient:()=>Ku,instrumentOutgoingRequests:()=>fc,instrumentSupabaseClient:()=>Hs,isEnabled:()=>Zo,isInitialized:()=>du,lastEventId:()=>Qo,launchDarklyIntegration:()=>vS,lazyLoadIntegration:()=>da,linkedErrorsIntegration:()=>Fa,logger:()=>Ws,makeBrowserOfflineTransport:()=>rS,makeFetchTransport:()=>fo,makeMultiplexedTransport:()=>Ru,metrics:()=>zs,moduleMetadataIntegration:()=>Lu,onLoad:()=>ng,openFeatureIntegration:()=>RS,opera10StackLineParser:()=>qh,opera11StackLineParser:()=>Yh,parameterize:()=>Ms,registerSpanErrorInstrumentation:()=>zo,registerWebWorker:()=>MS,replayCanvasIntegration:()=>G_,replayIntegration:()=>R_,reportPageLoaded:()=>tS,reportingObserverIntegration:()=>ig,rewriteFramesIntegration:()=>Uu,sendFeedback:()=>Sl,setActiveSpanInBrowser:()=>nS,setContext:()=>Xo,setCurrentClient:()=>ks,setExtra:()=>iu,setExtras:()=>ou,setHttpStatus:()=>Zt,setMeasurement:()=>qo,setTag:()=>au,setTags:()=>su,setUser:()=>cu,showReportDialog:()=>rg,spanToBaggageHeader:()=>jc,spanToJSON:()=>L,spanToTraceHeader:()=>Go,spotlightBrowserIntegration:()=>IS,startBrowserTracingNavigationSpan:()=>ef,startBrowserTracingPageLoadSpan:()=>Zd,startInactiveSpan:()=>mt,startNewTrace:()=>vs,startSession:()=>Dr,startSpan:()=>pt,startSpanManual:()=>en,statsigIntegration:()=>NS,supabaseIntegration:()=>Bu,suppressTracing:()=>Yo,thirdPartyErrorFilterIntegration:()=>Hu,unleashIntegration:()=>CS,updateSpanName:()=>Wc,webWorkerIntegration:()=>OS,winjsStackLineParser:()=>jh,withActiveSpan:()=>Ln,withIsolationScope:()=>is,withScope:()=>Le,zodErrorsIntegration:()=>Fu});var E=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var v=globalThis;var ct="10.22.0";function tt(){return Cn(v),v}function Cn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ct,t[ct]=t[ct]||{}}function Ht(e,t,n=v){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[ct]=r[ct]||{};return o[e]||(o[e]=t())}var Jn=["debug","info","warn","error","log","assert","trace"],DS="Sentry Logger ",Ar={};function We(e){if(!("console"in v))return e();let t=v.console,n={},r=Object.keys(Ar);r.forEach(o=>{let i=Ar[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function US(){Tc().enabled=!0}function BS(){Tc().enabled=!1}function cf(){return Tc().enabled}function FS(...e){yc("log",...e)}function HS(...e){yc("warn",...e)}function $S(...e){yc("error",...e)}function yc(e,...t){E&&cf()&&We(()=>{v.console[e](`${DS}[${e}]:`,...t)})}function Tc(){return E?Ht("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:US,disable:BS,isEnabled:cf,log:FS,warn:HS,error:$S};var uf=/\(error: (.*)\)/,lf=/captureMessage|captureException/;function Xi(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=uf.test(c)?c.replace(uf,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return df(i.slice(o))}}function Ic(e){return Array.isArray(e)?Xi(...e):e}function df(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Ki(t).function||"")&&t.pop(),t.reverse(),lf.test(Ki(t).function||"")&&(t.pop(),lf.test(Ki(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Ki(t).filename,function:n.function||"?"}))}function Ki(e){return e[e.length-1]||{}}var bc="<anonymous>";function ut(e){try{return!e||typeof e!="function"?bc:e.name||bc}catch{return bc}}function Rr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var Qi={},ff={};function ze(e,t){Qi[e]=Qi[e]||[],Qi[e].push(t)}function je(e,t){if(!ff[e]){ff[e]=!0;try{t()}catch(n){E&&h.error(`Error while instrumenting ${e}`,n)}}}function xe(e,t){let n=e&&Qi[e];if(n)for(let r of n)try{r(t)}catch(o){E&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ut(r)}
Error:`,o)}}var vc=null;function ko(e){let t="error";ze(t,e),je(t,GS)}function GS(){vc=v.onerror,v.onerror=function(e,t,n,r,o){return xe("error",{column:r,error:o,line:n,msg:e,url:t}),vc?vc.apply(this,arguments):!1},v.onerror.__SENTRY_INSTRUMENTED__=!0}var Ac=null;function Oo(e){let t="unhandledrejection";ze(t,e),je(t,WS)}function WS(){Ac=v.onunhandledrejection,v.onunhandledrejection=function(e){return xe("unhandledrejection",e),Ac?Ac.apply(this,arguments):!0},v.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var pf=Object.prototype.toString;function lt(e){switch(pf.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return bt(e,Error)}}function Cr(e,t){return pf.call(e)===`[object ${t}]`}function Zi(e){return Cr(e,"ErrorEvent")}function es(e){return Cr(e,"DOMError")}function Rc(e){return Cr(e,"DOMException")}function De(e){return Cr(e,"String")}function wn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Tt(e){return e===null||wn(e)||typeof e!="object"&&typeof e!="function"}function qe(e){return Cr(e,"Object")}function Kn(e){return typeof Event<"u"&&bt(e,Event)}function Cc(e){return typeof Element<"u"&&bt(e,Element)}function wc(e){return Cr(e,"RegExp")}function Ot(e){return!!(e?.then&&typeof e.then=="function")}function Nc(e){return qe(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function bt(e,t){try{return e instanceof t}catch{return!1}}function Mo(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function ts(e){return typeof Request<"u"&&bt(e,Request)}var xc=v,zS=80;function ke(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||zS;for(;n&&i++<r&&(u=jS(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function jS(e,t){let n=e,r=[];if(!n?.tagName)return"";if(xc.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&De(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function nt(){try{return xc.document.location.href}catch{return""}}function Lo(e){if(!xc.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Mt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Po(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Xn(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{Mo(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function wr(e,t,n=!1){return De(e)?wc(t)?t.test(e):De(t)?n?e===t:e.includes(t):!1:!1}function He(e,t=[],n=!1){return t.some(r=>wr(e,r,n))}function he(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&ns(o,r);try{e[t]=o}catch{E&&h.log(`Failed to replace method "${t}" in object`,e)}}function ye(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{E&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function ns(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,ye(e,"__sentry_original__",t)}catch{}}function Qn(e){return e.__sentry_original__}function rs(e){if(lt(e))return{message:e.message,name:e.name,stack:e.stack,...hf(e)};if(Kn(e)){let t={type:e.type,target:mf(e.target),currentTarget:mf(e.currentTarget),...hf(e)};return typeof CustomEvent<"u"&&bt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function mf(e){try{return Cc(e)?ke(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function hf(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function kc(e,t=40){let n=Object.keys(rs(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Mt(r,t);for(let o=n.length;o>0;o--){let i=n.slice(0,o).join(", ");if(!(i.length>t))return o===n.length?i:Mt(i,t)}return""}function qS(){let e=v;return e.crypto||e.msCrypto}var Oc;function YS(){return Math.random()*16}function ce(e=qS()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Oc||(Oc="10000000100040008000"+1e11),Oc.replace(/[018]/g,t=>(t^(YS()&15)>>t/4).toString(16))}function gf(e){return e.exception?.values?.[0]}function Kt(e){let{message:t,event_id:n}=e;if(t)return t;let r=gf(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Nr(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Ye(e,t){let n=gf(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function Mc(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Po(s,0));let i=Math.min(r-1,o);t.context_line=Po(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Po(s,0))}function os(e){if(VS(e))return!0;try{ye(e,"__sentry_captured__",!0)}catch{}return!1}function VS(e){try{return e.__sentry_captured__}catch{}}var Sf=1e3;function It(){return Date.now()/Sf}function JS(){let{performance:e}=v;if(!e?.now||!e.timeOrigin)return It;let t=e.timeOrigin;return()=>(t+e.now())/Sf}var _f;function Q(){return(_f??(_f=JS()))()}var Lc;function KS(){let{performance:e}=v;if(!e?.now)return[void 0,"none"];let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing?.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?[e.timeOrigin,"timeOrigin"]:[s,"navigationStart"]:[r,"dateNow"]}function ge(){return Lc||(Lc=KS()),Lc[0]}function Ef(e){let t=Q(),n={sid:ce(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>XS(n)};return e&&un(n,e),n}function un(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Q(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ce()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function yf(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),un(e,n)}function XS(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Nn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Nn(r[o],t[o],n-1));return r}function $e(){return ce()}function Ve(){return ce().substring(16)}var Pc="_sentrySpan";function dt(e,t){t?ye(e,Pc,t):delete e[Pc]}function $t(e){return e[Pc]}var QS=100,Je=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:$e(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,dt(t,$t(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&un(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():qe(n)?t:void 0,{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,dt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:$e(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:QS;if(r<=0)return this;let o={timestamp:It(),...t,message:t.message?Mt(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:$t(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Nn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||ce();if(!this._client)return E&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||ce();if(!this._client)return E&&h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||ce();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(E&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Tf(){return Ht("defaultCurrentScope",()=>new Je)}function bf(){return Ht("defaultIsolationScope",()=>new Je)}var Dc=class{constructor(t,n){let r;t?r=t:r=new Je;let o;n?o=n:o=new Je,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return Ot(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function xr(){let e=tt(),t=Cn(e);return t.stack=t.stack||new Dc(Tf(),bf())}function ZS(e){return xr().withScope(e)}function eE(e,t){let n=xr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function If(e){return xr().withScope(()=>e(xr().getIsolationScope()))}function vf(){return{withIsolationScope:If,withScope:ZS,withSetScope:eE,withSetIsolationScope:(e,t)=>If(t),getCurrentScope:()=>xr().getScope(),getIsolationScope:()=>xr().getIsolationScope()}}function Lt(e){let t=Cn(e);return t.acs?t.acs:vf()}function x(){let e=tt();return Lt(e).getCurrentScope()}function se(){let e=tt();return Lt(e).getIsolationScope()}function ft(){return Ht("globalScope",()=>new Je)}function Le(...e){let t=tt(),n=Lt(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function is(...e){let t=tt(),n=Lt(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function T(){return x().getClient()}function Do(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Ve()};return r&&(i.parent_span_id=r),i}var ve="sentry.source",ln="sentry.sample_rate",Uo="sentry.previous_trace_sample_rate",Te="sentry.op",q="sentry.origin",xn="sentry.idle_span_finish_reason",Xt="sentry.measurement_unit",Qt="sentry.measurement_value",kr="sentry.custom_span_name",Or="sentry.profile_id",Pt="sentry.exclusive_time";var Uc="http.request.method",Bc="url.full",Fc="sentry.link.type";function ss(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function Zt(e,t){e.setAttribute("http.response.status_code",t);let n=ss(t);n.message!=="unknown_error"&&e.setStatus(n)}var Af="_sentryScope",Rf="_sentryIsolationScope";function tE(e){try{let t=v.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function nE(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Cf(e,t,n){e&&(ye(e,Rf,tE(n)),ye(e,Af,t))}function Zn(e){let t=e;return{scope:t[Af],isolationScope:nE(t[Rf])}}var as="sentry-",rE=/^sentry-/,oE=8192;function Mr(e){let t=iE(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(rE)){let s=o.slice(as.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function cs(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${as}${r}`]=o),n),{});return sE(t)}function iE(e){if(!(!e||!De(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=wf(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):wf(e)}function wf(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function sE(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>oE?(E&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var aE=/^o(\d+)\./,cE=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function uE(e){return e==="http"||e==="https"}function Ue(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function us(e){let t=cE.exec(e);if(!t){We(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return Nf({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Nf(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function lE(e){if(!E)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?uE(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function dE(e){return e.match(aE)?.[1]}function ls(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=dE(n)),r}function Bo(e){let t=typeof e=="string"?us(e):Nf(e);if(!(!t||!lE(t)))return t}function vt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var ds=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function xf(e){if(!e)return;let t=e.match(ds);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Fo(e,t){let n=xf(e),r=Mr(t);if(!n?.traceId)return{traceId:$e(),sampleRand:Math.random()};let o=fE(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function Ho(e=$e(),t=Ve(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function fs(e=$e(),t=Ve(),n){return`00-${e}-${t}-${n?"01":"00"}`}function fE(e,t){let n=vt(t?.sample_rand);if(n!==void 0)return n;let r=vt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function Hc(e,t){let n=ls(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var ps=0,ms=1,kf=!1;function Mf(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=L(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function $o(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:L(e).parent_span_id,i=Zn(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Ve():t;return{parent_span_id:o,span_id:s,trace_id:n}}function Go(e){let{traceId:t,spanId:n}=e.spanContext(),r=At(e);return Ho(t,n,r)}function Lf(e){let{traceId:t,spanId:n}=e.spanContext(),r=At(e);return fs(t,n,r)}function hs(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===ms,attributes:i,...o}))}function Gt(e){return typeof e=="number"?Of(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Of(e.getTime()):Q()}function Of(e){return e>9999999999?e/1e3:e}function L(e){if(hE(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(mE(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:Gt(o),timestamp:Gt(s)||void 0,status:gs(a),op:r[Te],origin:r[q],links:hs(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function mE(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function hE(e){return typeof e.getSpanJSON=="function"}function At(e){let{traceFlags:t}=e.spanContext();return t===ms}function gs(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"unknown_error"}var er="_sentryChildSpans",$c="_sentryRootSpan";function _s(e,t){let n=e[$c]||e;ye(t,$c,n),e[er]?e[er].add(t):ye(e,er,new Set([t]))}function Pf(e,t){e[er]&&e[er].delete(t)}function dn(e){let t=new Set;function n(r){if(!t.has(r)&&At(r)){t.add(r);let o=r[er]?Array.from(r[er]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function Z(e){return e[$c]||e}function X(){let e=tt(),t=Lt(e);return t.getActiveSpan?t.getActiveSpan():$t(x())}function Wo(){kf||(We(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),kf=!0)}function Wc(e,t){e.updateName(t),e.setAttributes({[ve]:"custom",[kr]:t})}var Df=!1;function zo(){if(Df)return;function e(){let t=X(),n=t&&Z(t);if(n){let r="internal_error";E&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",Df=!0,ko(e),Oo(e)}function Ce(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||T()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Uf(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function tr(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(gE(n)){if(wr(e.description,n))return E&&Uf(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?wr(e.description,n.name):!0,o=n.op?e.op&&wr(e.op,n.op):!0;if(r&&o)return E&&Uf(e),!0}return!1}function Bf(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function gE(e){return typeof e=="string"||e instanceof RegExp}var fn="production";var Ff="_frozenDsc";function Lr(e,t){ye(e,Ff,t)}function zc(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||fn,release:n.release,public_key:r,trace_id:e,org_id:ls(t)};return t.emit("createDsc",o),o}function nr(e,t){let n=t.getPropagationContext();return n.dsc||zc(n.traceId,e)}function we(e){let t=T();if(!t)return{};let n=Z(e),r=L(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[ln]??o[Uo];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[Ff];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&Mr(u);if(d)return a(d);let l=zc(e.spanContext().traceId,t),p=o[ve],f=r.description;return p!=="url"&&f&&(l.transaction=f),Ce()&&(l.sampled=String(At(n)),l.sample_rand=i?.get("sentry.sample_rand")??Zn(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function jc(e){let t=we(e);return cs(t)}var Ke=class{constructor(t={}){this._traceId=t.traceId||$e(),this._spanId=t.spanId||Ve()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:ps}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Pe(e,t=100,n=1/0){try{return qc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ss(e,t=3,n=100*1024){let r=Pe(e,t);return yE(r)>n?Ss(e,t-1,n):r}function qc(e,t,n=1/0,r=1/0,o=TE()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=_E(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let f=u.toJSON();return qc("",f,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,p=rs(t);for(let f in p){if(!Object.prototype.hasOwnProperty.call(p,f))continue;if(l>=r){d[f]="[MaxProperties ~]";break}let m=p[f];d[f]=qc(f,m,c-1,r,o),l++}return s(t),d}function _E(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Mo(t))return"[VueViewModel]";if(Nc(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${ut(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=SE(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function SE(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function EE(e){return~-encodeURI(e).split(/%..|./).length}function yE(e){return EE(JSON.stringify(e))}function TE(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function Ne(e,t=[]){return[e,t]}function Yc(e,t){let[n,r]=e;return[n,[...r,t]]}function Rt(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function ys(e,t){return Rt(e,(n,r)=>t.includes(r))}function Es(e){let t=Cn(v);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function bE(e){let t=Cn(v);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function kn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Es(r),i]:r.push(typeof i=="string"?Es(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Pe(a))}o(c)}}return typeof r=="string"?r:IE(r)}function IE(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function Vc(e){let t=typeof e=="string"?Es(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(bE(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function Jc(e){return[{type:"span"},e]}function Kc(e){let t=typeof e.data=="string"?Es(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var vE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Ts(e){return vE[e]}function On(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function jo(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ue(r)},...o&&{trace:o}}}function AE(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function Hf(e,t,n,r){let o=On(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Ue(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Ne(i,[s])}function $f(e,t,n,r){let o=On(n),i=e.type&&e.type!=="replay_event"?e.type:"event";AE(e,n?.sdk);let s=jo(e,o,r,t);return delete e.sdkProcessingMetadata,Ne(s,[[{type:i},e]])}function Gf(e,t){function n(f){return!!f.trace_id&&!!f.public_key}let r=we(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Ue(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(f=>!tr(L(f),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?f=>{let m=L(f),g=a(m);return g||(Wo(),m)}:L,p=[];for(let f of u){let m=l(f);m&&p.push(Jc(m))}return Ne(s,p)}function Wf(e){if(!E)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=L(e),{spanId:o}=e.spanContext(),i=At(e),s=Z(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=L(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function zf(e){if(!E)return;let{description:t="< unknown name >",op:n="< unknown op >"}=L(e),{spanId:r}=e.spanContext(),i=Z(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function qo(e,t,n,r=X()){let o=r&&Z(r);o&&(E&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Qt]:t,[Xt]:n}))}function bs(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Xt],i=r[Qt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var jf=1e3,Mn=class{constructor(t={}){this._traceId=t.traceId||$e(),this._spanId=t.spanId||Ve(),this._startTime=t.startTimestamp||Q(),this._links=t.links,this._attributes={},this.setAttributes({[q]:"manual",[Te]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?ms:ps}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Gt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ve,"custom"),this}end(t){this._endTime||(this._endTime=Gt(t),zf(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Te],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:gs(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[q],profile_id:this._attributes[Or],exclusive_time:this._attributes[Pt],measurements:bs(this._events),is_segment:this._isStandaloneSpan&&Z(this)===this||void 0,segment_id:this._isStandaloneSpan?Z(this).spanContext().spanId:void 0,links:hs(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){E&&h.log("[Tracing] Adding an event to span:",t);let o=qf(n)?n:r||Q(),i=qf(n)?{}:n||{},s={name:t,time:Gt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=T();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Z(this)))return;if(this._isStandaloneSpan){this._sampled?CE(Gf([this],t)):(E&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(Zn(this).scope||x()).captureEvent(r)}_convertSpanToTransaction(){if(!Yf(L(this)))return;this._name||(E&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=Zn(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=dn(this).filter(d=>d!==this&&!RE(d)).map(d=>L(d)).filter(Yf),s=this._attributes[ve];delete this._attributes[kr],i.forEach(d=>{delete d.data[kr]});let a={contexts:{trace:Mf(this)},spans:i.length>jf?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,jf):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:we(this)},request:r,...s&&{transaction_info:{source:s}}},c=bs(this._events);return c&&Object.keys(c).length&&(E&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function qf(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Yf(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function RE(e){return e instanceof Mn&&e.isStandaloneSpan()}function CE(e){let t=T();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function rr(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return wE(o,t,n,r)}function wE(e,t,n,r){return Ot(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function Vf(e,t,n){if(!Ce(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=vt(o);if(i===void 0)return E&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return E&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||E&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Is="__SENTRY_SUPPRESS_TRACING__";function pt(e,t){let n=Vo();if(n.startSpan)return n.startSpan(e,t);let r=Zc(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Le(a,()=>Kf(i)(()=>{let u=x(),d=eu(u,i),p=e.onlyIfParent&&!d?new Ke:Qc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return dt(u,p),rr(()=>t(p),()=>{let{status:f}=L(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})},()=>{p.end()})}))}function en(e,t){let n=Vo();if(n.startSpanManual)return n.startSpanManual(e,t);let r=Zc(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Le(a,()=>Kf(i)(()=>{let u=x(),d=eu(u,i),p=e.onlyIfParent&&!d?new Ke:Qc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return dt(u,p),rr(()=>t(p,()=>p.end()),()=>{let{status:f}=L(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})})}))}function mt(e){let t=Vo();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=Zc(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>Le(e.scope,s):o!==void 0?s=>Ln(o,s):s=>s())(()=>{let s=x(),a=eu(s,o);return e.onlyIfParent&&!a?new Ke:Qc({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var Xc=(e,t)=>{let n=tt(),r=Lt(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=T(),a=Mr(i);return s&&!Hc(s,a?.org_id)?vs(t):Le(c=>{let u=Fo(o,i);return c.setPropagationContext(u),t()})};function Ln(e,t){let n=Vo();return n.withActiveSpan?n.withActiveSpan(e,t):Le(r=>(dt(r,e||void 0),t(r)))}function Yo(e){let t=Vo();return t.suppressTracing?t.suppressTracing(e):Le(n=>{n.setSDKProcessingMetadata({[Is]:!0});let r=e();return n.setSDKProcessingMetadata({[Is]:void 0}),r})}function vs(e){return Le(t=>(t.setPropagationContext({traceId:$e(),sampleRand:Math.random()}),E&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Ln(null,e)))}function Qc({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Ce()){let s=new Ke;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...we(s)};Lr(s,a)}return s}let o=se(),i;if(e&&!n)i=NE(e,r,t),_s(e,i);else if(e){let s=we(e),{traceId:a,spanId:c}=e.spanContext(),u=At(e);i=Jf({traceId:a,parentSpanId:c,...t},r,u),Lr(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=Jf({traceId:s,parentSpanId:c,...t},r,u),a&&Lr(i,a)}return Wf(i),Cf(i,r,o),i}function Zc(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=Gt(e.startTime),delete r.startTime,r}return n}function Vo(){let e=tt();return Lt(e)}function Jf(e,t,n){let r=T(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,p]=t.getScopeData().sdkProcessingMetadata[Is]?[!1]:Vf(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:vt(u.dsc?.sample_rate)},u.sampleRand),f=new Mn({...e,attributes:{[ve]:"custom",[ln]:l!==void 0&&p?l:void 0,...c},sampled:d});return!d&&r&&(E&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function NE(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Is]?!1:At(e),s=i?new Mn({...n,parentSpanId:r,traceId:o,sampled:i}):new Ke({traceId:o});_s(e,s);let a=T();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function eu(e,t){if(t)return t;if(t===null)return;let n=$t(e);if(!n)return;let r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Z(n):n}function Kf(e){return e!==void 0?t=>Ln(e,t):t=>t()}var Pr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},xE="heartbeatFailed",kE="idleTimeout",OE="finalTimeout",ME="externalFinish";function As(e,t={}){let n=new Map,r=!1,o,i=ME,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Pr.idleTimeout,finalTimeout:u=Pr.finalTimeout,childSpanTimeout:d=Pr.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:p=!0}=t,f=T();if(!f||!Ce()){let b=new Ke,C={sample_rate:"0",sampled:"false",...we(b)};return Lr(b,C),b}let m=x(),g=X(),_=LE(e);_.end=new Proxy(_.end,{apply(b,C,I){if(l&&l(_),C instanceof Ke)return;let[O,...$]=I,w=O||Q(),M=Gt(w),Y=dn(_).filter(P=>P!==_),ee=L(_);if(!Y.length||!p)return N(M),Reflect.apply(b,C,[M,...$]);let te=f.getOptions().ignoreSpans,G=Y?.reduce((P,K)=>{let le=L(K);return!le.timestamp||te&&tr(le,te)?P:P?Math.max(P,le.timestamp):le.timestamp},void 0),B=ee.start_timestamp,F=Math.min(B?B+u/1e3:1/0,Math.max(B||-1/0,Math.min(M,G||1/0)));return N(F),Reflect.apply(b,C,[F,...$])}});function S(){o&&(clearTimeout(o),o=void 0)}function y(b){S(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=kE,_.end(b))},c)}function D(b){o=setTimeout(()=>{!r&&s&&(i=xE,_.end(b))},d)}function R(b){S(),n.set(b,!0);let C=Q();D(C+d/1e3)}function U(b){if(n.has(b)&&n.delete(b),n.size===0){let C=Q();y(C+c/1e3)}}function N(b){r=!0,n.clear(),a.forEach(M=>M()),dt(m,g);let C=L(_),{start_timestamp:I}=C;if(!I)return;C.data[xn]||_.setAttribute(xn,i),h.log(`[Tracing] Idle span "${C.op}" finished`);let $=dn(_).filter(M=>M!==_),w=0;$.forEach(M=>{M.isRecording()&&(M.setStatus({code:2,message:"cancelled"}),M.end(b),E&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(M,void 0,2)));let Y=L(M),{timestamp:ee=0,start_timestamp:te=0}=Y,G=te<=b,B=(u+c)/1e3,F=ee-te<=B;if(E){let P=JSON.stringify(M,void 0,2);G?F||h.log("[Tracing] Discarding span since it finished after idle span final timeout",P):h.log("[Tracing] Discarding span since it happened after idle span was finished",P)}(!F||!G)&&(Pf(_,M),w++)}),w>0&&_.setAttribute("sentry.idle_span_discarded_spans",w)}return a.push(f.on("spanStart",b=>{if(r||b===_||L(b).timestamp||b instanceof Mn&&b.isStandaloneSpan())return;dn(_).includes(b)&&R(b.spanContext().spanId)})),a.push(f.on("spanEnd",b=>{r||U(b.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",b=>{b===_&&(s=!0,y(),n.size&&D())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(_.setStatus({code:2,message:"deadline_exceeded"}),i=OE,_.end())},u),_}function LE(e){let t=mt(e);return dt(x(),t),E&&h.log("[Tracing] Started span is an idle span"),t}var tu=0,Xf=1,Qf=2;function Pn(e){return new Jo(t=>{t(e)})}function or(e){return new Jo((t,n)=>{n(e)})}var Jo=class e{constructor(t){this._state=tu,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===tu)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Xf&&n[1](this._value),this._state===Qf&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===tu){if(Ot(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(Xf,i)},o=i=>{n(Qf,i)};try{t(r,o)}catch(i){o(i)}}};function Zf(e,t,n,r=0){try{let o=nu(t,n,e,r);return Ot(o)?o:Pn(o)}catch(o){return or(o)}}function nu(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return E&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),Ot(i)?i.then(s=>nu(s,t,n,r+1)):nu(i,t,n,r+1)}function ep(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;PE(e,t),r&&BE(e,r),FE(e,n),DE(e,o),UE(e,i)}function pn(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:p,transactionName:f,span:m}=t;Rs(e,"extra",n),Rs(e,"tags",r),Rs(e,"user",o),Rs(e,"contexts",i),e.sdkProcessingMetadata=Nn(e.sdkProcessingMetadata,a,2),s&&(e.level=s),f&&(e.transactionName=f),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...p}}function Rs(e,t,n){e[t]=Nn(e[t],n,1)}function PE(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function DE(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function UE(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function BE(e,t){e.contexts={trace:$o(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:we(t),...e.sdkProcessingMetadata};let n=Z(t),r=L(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function FE(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}var ir,tp,np,Dn;function Cs(e){let t=v._sentryDebugIds,n=v._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Dn&&r.length===tp&&o.length===np)return Dn;tp=r.length,np=o.length,Dn={},ir||(ir={});let i=(s,a)=>{for(let c of s){let u=a[c],d=ir?.[c];if(d&&Dn&&u)Dn[d[0]]=u,ir&&(ir[c]=[d[0],u]);else if(u){let l=e(c);for(let p=l.length-1;p>=0;p--){let m=l[p]?.filename;if(m&&Dn&&ir){Dn[m]=u,ir[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),Dn}function ru(e,t){let n=Cs(e);if(!n)return[];let r=[];for(let o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function Ko(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ce(),timestamp:t.timestamp||It()},u=n.integrations||e.integrations.map(_=>_.name);HE(c,e),WE(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&$E(c,e.stackParser);let d=jE(r,n.captureContext);n.mechanism&&Ye(c,n.mechanism);let l=o?o.getEventProcessors():[],p=ft().getScopeData();if(i){let _=i.getScopeData();pn(p,_)}if(d){let _=d.getScopeData();pn(p,_)}let f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),ep(c,p);let m=[...l,...p.eventProcessors];return Zf(m,c,n).then(_=>(_&&GE(_),typeof s=="number"&&s>0?zE(_,s,a):_))}function HE(e,t){let{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||fn,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&(s.url=Mt(s.url,i))}function $E(e,t){let n=Cs(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function GE(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function WE(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function zE(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Pe(o.data,t,n)}}))},...e.user&&{user:Pe(e.user,t,n)},...e.contexts&&{contexts:Pe(e.contexts,t,n)},...e.extra&&{extra:Pe(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Pe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Pe(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Pe(e.contexts.flags,3,n)),r}function jE(e,t){if(!t)return e;let n=e?e.clone():new Je;return n.update(t),n}function rp(e){if(e)return qE(e)?{captureContext:e}:VE(e)?{captureContext:e}:e}function qE(e){return e instanceof Je||typeof e=="function"}var YE=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function VE(e){return Object.keys(e).some(t=>YE.includes(t))}function ae(e,t){return x().captureException(e,rp(t))}function Un(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return x().captureMessage(e,n,r)}function mn(e,t){return x().captureEvent(e,t)}function Xo(e,t){se().setContext(e,t)}function ou(e){se().setExtras(e)}function iu(e,t){se().setExtra(e,t)}function su(e){se().setTags(e)}function au(e,t){se().setTag(e,t)}function cu(e){se().setUser(e)}function Qo(){return se().lastEventId()}async function uu(e){let t=T();return t?t.flush(e):(E&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function lu(e){let t=T();return t?t.close(e):(E&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function du(){return!!T()}function Zo(){let e=T();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function ei(e){se().addEventProcessor(e)}function Dr(e){let t=se(),n=x(),{userAgent:r}=v.navigator||{},o=Ef({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&un(i,{status:"exited"}),ti(),t.setSession(o),o}function ti(){let e=se(),n=x().getSession()||e.getSession();n&&yf(n),op(),e.setSession()}function op(){let e=se(),t=T(),n=e.getSession();n&&t&&t.captureSession(n)}function Ur(e=!1){if(e){ti();return}op()}var JE="7";function ip(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function KE(e){return`${ip(e)}${e.projectId}/envelope/`}function XE(e,t){let n={sentry_version:JE};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function ni(e,t,n){return t||`${KE(e)}?${XE(e,n)}`}function fu(e,t){let n=Bo(e);if(!n)return"";let r=`${ip(n)}embed/error-page/`,o=`dsn=${Ue(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var sp=[];function QE(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function pu(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return QE(r)}function ap(e,t){let n={};return t.forEach(r=>{r&&hu(e,r,n)}),n}function mu(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function hu(e,t,n){if(n[t.name]){E&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,sp.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),sp.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}E&&h.log(`Integration installed: ${t.name}`)}function Br(e){let t=T();if(!t){E&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function ws(e,t){return t?Le(t,()=>{let n=X(),r=n?$o(n):Do(t);return[n?we(n):nr(e,t),r]}):[void 0,void 0]}var cp={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function ZE(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function up(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Ue(r)),Ne(o,[ZE(e)])}var ey=100;function ty(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function tn(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function lp(e,t){let n=gu(),r=dp(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=ey&&Fr(e,r))}function Bn(e,t=x(),n=lp){let r=t?.getClient()??T();if(!r){E&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){E&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=ws(r,t),u={...e.attributes},{user:{id:d,email:l,username:p}}=ny(t);tn(u,"user.id",d,!1),tn(u,"user.email",l,!1),tn(u,"user.name",p,!1),tn(u,"sentry.release",o),tn(u,"sentry.environment",i);let{name:f,version:m}=r.getSdkMetadata()?.sdk??{};tn(u,"sentry.sdk.name",f),tn(u,"sentry.sdk.version",m);let g=r.getIntegrationByName("Replay"),_=g?.getReplayId(!0);tn(u,"sentry.replay_id",_),_&&g?.getRecordingMode()==="buffer"&&tn(u,"sentry._internal.replay_is_buffering",!0);let S=e.message;if(wn(S)){let{__sentry_template_string__:O,__sentry_template_values__:$=[]}=S;$?.length&&(u["sentry.message.template"]=O),$.forEach((w,M)=>{u[`sentry.message.parameter.${M}`]=w})}let y=$t(t);tn(u,"sentry.trace.parent_span_id",y?.spanContext().spanId);let D={...e,attributes:u};r.emit("beforeCaptureLog",D);let R=a?We(()=>a(D)):D;if(!R){r.recordDroppedEvent("before_send","log_item",1),E&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:U,message:N,attributes:b={},severityNumber:C}=R,I={timestamp:Q(),level:U,body:N,trace_id:c?.trace_id,severity_number:C??cp[U],attributes:Object.keys(b).reduce((O,$)=>(O[$]=ty(b[$]),O),{})};n(r,I),r.emit("afterCaptureLog",R)}function Fr(e,t){let n=t??dp(e)??[];if(n.length===0)return;let r=e.getOptions(),o=up(n,r._metadata,r.tunnel,e.getDsn());gu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function dp(e){return gu().get(e)}function ny(e){let t=ft().getScopeData();return pn(t,se().getScopeData()),pn(t,e.getScopeData()),t}function gu(){return Ht("clientToLogBufferMap",()=>new WeakMap)}function ry(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function fp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Ue(r)),Ne(o,[ry(e)])}var oy=100;function iy(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function hn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function pp(e,t){let n=Su(),r=mp(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=oy&&Hr(e,r))}function _u(e,t){let n=t?.scope??x(),r=t?.captureSerializedMetric??pp,o=n?.getClient()??T();if(!o){E&&h.warn("No client available to capture metric.");return}let{release:i,environment:s,_experiments:a}=o.getOptions();if(!a?.enableMetrics){E&&h.warn("metrics option not enabled, metric will not be captured.");return}let[,c]=ws(o,n),u={...e.attributes},{user:{id:d,email:l,username:p}}=sy(n);hn(u,"user.id",d,!1),hn(u,"user.email",l,!1),hn(u,"user.name",p,!1),hn(u,"sentry.release",i),hn(u,"sentry.environment",s);let{name:f,version:m}=o.getSdkMetadata()?.sdk??{};hn(u,"sentry.sdk.name",f),hn(u,"sentry.sdk.version",m);let g=o.getIntegrationByName("Replay"),_=g?.getReplayId(!0);hn(u,"sentry.replay_id",_),_&&g?.getRecordingMode()==="buffer"&&hn(u,"sentry._internal.replay_is_buffering",!0);let S={...e,attributes:u},y=a?.beforeSendMetric?a.beforeSendMetric(S):S;if(!y){E&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let D={};for(let C in y.attributes)y.attributes[C]!==void 0&&(D[C]=iy(y.attributes[C]));let R=$t(n),U=R?R.spanContext().traceId:c?.trace_id,N=R?R.spanContext().spanId:void 0,b={timestamp:Q(),trace_id:U,span_id:N,name:y.name,type:y.type,unit:y.unit,value:y.value,attributes:D};E&&h.log("[Metric]",b),r(o,b),o.emit("afterCaptureMetric",S)}function Hr(e,t){let n=t??mp(e)??[];if(n.length===0)return;let r=e.getOptions(),o=fp(n,r._metadata,r.tunnel,e.getDsn());Su().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function mp(e){return Su().get(e)}function sy(e){let t=ft().getScopeData();return pn(t,se().getScopeData()),pn(t,e.getScopeData()),t}function Su(){return Ht("clientToMetricBufferMap",()=>new WeakMap)}function hp(e,t,n){let r=[{type:"client_report"},{timestamp:n||It(),discarded_events:e}];return Ne(t?{dsn:t}:{},[r])}function Ns(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function gp(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Or],exclusive_time:s?.[Pt],measurements:e.measurements,is_segment:!0}}function _p(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Or]:e.profile_id},...e.exclusive_time&&{[Pt]:e.exclusive_time}}}},measurements:e.measurements}}var Sp="Not capturing exception because it's already been captured.",Ep="Discarded session because of missing or non-string release",vp=Symbol.for("SentryInternalError"),Ap=Symbol.for("SentryDoNotSendEventError"),ay=5e3;function xs(e){return{message:e,[vp]:!0}}function Eu(e){return{message:e,[Ap]:!0}}function yp(e){return!!e&&typeof e=="object"&&vp in e}function Tp(e){return!!e&&typeof e=="object"&&Ap in e}function bp(e,t,n,r,o){let i=0,s;e.on(n,()=>{i=0,clearTimeout(s)}),e.on(t,a=>{i+=r(a),i>=8e5?o(e):(clearTimeout(s),s=setTimeout(()=>{o(e)},ay))}),e.on("flush",()=>{o(e)})}var ri=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Bo(t.dsn):E&&h.warn("No DSN provided, client will not send events."),this._dsn){let n=ni(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}this._options.enableLogs&&bp(this,"afterCaptureLog","flushLogs",dy,Fr),this._options._experiments?.enableMetrics&&bp(this,"afterCaptureMetric","flushMetrics",ly,Hr)}captureException(t,n,r){let o=ce();if(os(t))return E&&h.log(Sp),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:ce(),...r},s=wn(t)?t:String(t),a=Tt(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=ce();if(n?.originalException&&os(n.originalException))return E&&h.log(Sp),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),un(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];hu(this,t,this._integrations),n||mu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=$f(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=Yc(r,Kc(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=fn}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){E&&h.warn(Ep);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){E&&h.warn(Ep);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=Hf(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;E&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return E&&h.error("Error while sending envelope:",n),{}}return E&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=ap(this,t),mu(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(un(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Ko(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Do(r),...a.contexts};let c=nr(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=x(),o=se()){return E&&yu(t)&&h.log(`Captured error event \`${Ns(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{E&&(Tp(i)?h.log(i.message):yp(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=Rp(t),c=yu(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof s>"u"?void 0:vt(s);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),or(Eu(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let p=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",p),Eu("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return f;let g=uy(this,i,f,n);return cy(g,d)}).then(f=>{if(f===null){if(this.recordDroppedEvent("before_send",p),a){let S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw Eu(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,f),a){let _=f.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=f.spans?f.spans.length:0,y=_-S;y>0&&this.recordDroppedEvent("before_send","span",y)}let g=f.transaction_info;if(a&&g&&f.transaction!==t.transaction){let _="custom";f.transaction_info={...g,source:_}}return this.sendEvent(f,n),f}).then(null,f=>{throw Tp(f)||yp(f)?f:(this.captureException(f,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:f}),xs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){E&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){E&&h.log("No outcomes to send");return}if(!this._dsn){E&&h.log("No dsn provided, will not send outcomes");return}E&&h.log("Sending outcomes:",t);let n=hp(t,this._options.tunnel&&Ue(this._dsn));this.sendEnvelope(n)}};function cy(e,t){let n=`${t} must return \`null\` or a valid event.`;if(Ot(e))return e.then(r=>{if(!qe(r)&&r!==null)throw xs(n);return r},r=>{throw xs(`${t} rejected with ${r}`)});if(!qe(e)&&e!==null)throw xs(n);return e}function uy(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(yu(c)&&o)return o(c,r);if(Rp(c)){if(s||a){let u=gp(c);if(a?.length&&tr(u,a))return null;if(s){let d=s(u);d?c=Nn(n,_p(d)):Wo()}if(c.spans){let d=[],l=c.spans;for(let f of l){if(a?.length&&tr(f,a)){Bf(l,f);continue}if(s){let m=s(f);m?d.push(m):(Wo(),d.push(f))}else d.push(f)}let p=c.spans.length-d.length;p&&e.recordDroppedEvent("before_send","span",p),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function yu(e){return e.type===void 0}function Rp(e){return e.type==="transaction"}function ly(e){let t=0;return e.name&&(t+=e.name.length*2),typeof e.value=="string"?t+=e.value.length*2:t+=8,t+Cp(e.attributes)}function dy(e){let t=0;return e.message&&(t+=e.message.length*2),t+Cp(e.attributes)}function Cp(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Ip(n[0]):Tt(n)?t+=Ip(n):t+=100}),t}function Ip(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Tu(e,t){t.debug===!0&&(E?h.enable():We(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),x().update(t.initialScope);let r=new e(t);return ks(r),r.init(),r}function ks(e){x().setClient(e)}var bu=Symbol.for("SentryBufferFullError");function wp(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return or(bu);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return Pn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}function Os(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Np(e,t){return e[t]||e.all||0}function oi(e,t,n=Date.now()){return Np(e,t)>n}function ii(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),p=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+p;else for(let f of u.split(";"))f==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[f]=r+p):o[f]=r+p}else s?o.all=r+Os(s,r):t===429&&(o.all=r+60*1e3);return o}var fy=64;function si(e,t,n=wp(e.bufferSize||fy)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(Rt(s,(l,p)=>{let f=Ts(p);oi(r,f)?e.recordDroppedEvent("ratelimit_backoff",f):a.push(l)}),a.length===0)return Promise.resolve({});let c=Ne(s[0],a),u=l=>{Rt(c,(p,f)=>{e.recordDroppedEvent(l,Ts(f))})},d=()=>t({body:kn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&E&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=ii(r,l),l),l=>{throw u("network_error"),E&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===bu)return E&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}var Iu=100,vu=5e3,py=36e5;function Au(e){function t(...n){E&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=vu,s;function a(l,p,f){return ys(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,p,f):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let p=await o.shift();p&&(t("Attempting to send previously queued event"),p[0].sent_at=new Date().toISOString(),d(p,!0).catch(f=>{t("Failed to retry sending",f)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,py))}async function d(l,p=!1){if(!p&&ys(l,["replay_event","replay_recording"]))return await o.push(l),c(Iu),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let f=await r.send(l),m=Iu;if(f){if(f.headers?.["retry-after"])m=Os(f.headers["retry-after"]);else if(f.headers?.["x-sentry-rate-limits"])m=6e4;else if((f.statusCode||0)>=400)return f}return c(m),i=vu,f}catch(f){if(await a(l,f,i))return p?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",f),{};throw f}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=vu,c(Iu)),r.flush(l))}}}function xp(e,t){let n;return Rt(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function my(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=xp(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function hy(e,t){return Ne(t?{...e[0],dsn:t}:e[0],e[1])}function Ru(e,t){return n=>{let r=e(n),o=new Map;function i(c,u){let d=u?`${c}:${u}`:c,l=o.get(d);if(!l){let p=us(c);if(!p)return;let f=ni(p,n.tunnel);l=u?my(e,u)({...n,url:f}):e({...n,url:f}),o.set(d,l)}return[c,l]}async function s(c){function u(f){let m=f?.length?f:["event"];return xp(c,m)}let d=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f),l=d.length?d:[["",r]];return(await Promise.all(l.map(([f,m])=>m.send(hy(c,f)))))[0]}async function a(c){let u=[...o.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:s,flush:a}}}var gy="thismessage:/";function $r(e){return"isRelative"in e}function sr(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?gy:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function Cu(e){if($r(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Wt(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function ai(e){return e.split(/[?#]/,1)[0]}function ci(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return Sy(e,n)||_y(e,r)}function _y(e,t){return t?kp(e)===kp(t):!1}function Sy(e,t){let n=sr(e);return!n||$r(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function kp(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Ms(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var wu=Ms;function Nu(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function xu(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:ct})),version:ct}),e._metadata=o}function ar(e={}){let t=e.client||T();if(!Zo()||!t)return{};let n=tt(),r=Lt(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||x(),i=e.span||X(),s=i?Go(i):Ey(o),a=i?we(i):nr(t,o),c=cs(a);if(!ds.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};if(e.propagateTraceparent){let l=i?Lf(i):yy(o);l&&(d.traceparent=l)}return d}function Ey(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Ho(t,r,n)}function yy(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return fs(t,r,n)}function ku(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var Ty=100;function rt(e,t){let n=T(),r=se();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Ty}=n.getOptions();if(i<=0)return;let a={timestamp:It(),...e},c=o?We(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var Op,by="FunctionToString",Mp=new WeakMap,Iy=(()=>({name:by,setupOnce(){Op=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Qn(this),n=Mp.has(T())&&t!==void 0?t:this;return Op.apply(n,e)}}catch{}},setup(e){Mp.set(e,!0)}})),ui=Iy;var vy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ay="EventFilters",Ps=(e={})=>{let t;return{name:Ay,setup(n){let r=n.getOptions();t=Lp(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=Lp(e,i)}return Ry(n,t)?null:n}}},li=((e={})=>({...Ps(e),name:"InboundFilters"}));function Lp(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:vy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Ry(e,t){if(e.type){if(e.type==="transaction"&&wy(e,t.ignoreTransactions))return E&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Kt(e)}`),!0}else{if(Cy(e,t.ignoreErrors))return E&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Kt(e)}`),!0;if(Oy(e))return E&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Kt(e)}`),!0;if(Ny(e,t.denyUrls))return E&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Kt(e)}.
Url: ${Ls(e)}`),!0;if(!xy(e,t.allowUrls))return E&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Kt(e)}.
Url: ${Ls(e)}`),!0}return!1}function Cy(e,t){return t?.length?Ns(e).some(n=>He(n,t)):!1}function wy(e,t){if(!t?.length)return!1;let n=e.transaction;return n?He(n,t):!1}function Ny(e,t){if(!t?.length)return!1;let n=Ls(e);return n?He(n,t):!1}function xy(e,t){if(!t?.length)return!0;let n=Ls(e);return n?He(n,t):!0}function ky(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ls(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?ky(n):null}catch{return E&&h.error(`Cannot extract url for event ${Kt(e)}`),null}}function Oy(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function Mu(e,t,n,r,o,i){if(!o.exception?.values||!i||!bt(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Ou(e,t,r,i.originalException,n,o.exception.values,s,0))}function Ou(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(bt(r[o],Error)){Pp(s,a);let u=e(t,r[o]),d=c.length;Dp(u,o,d,a),c=Ou(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(bt(u,Error)){Pp(s,a);let l=e(t,u),p=c.length;Dp(l,`errors[${d}]`,p,a),c=Ou(e,t,n,u,o,[l,...c],l,p)}}),c}function Pp(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Dp(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var Bp=new Map,Up=new Set;function My(e){if(v._sentryModuleMetadata)for(let t of Object.keys(v._sentryModuleMetadata)){let n=v._sentryModuleMetadata[t];if(Up.has(t))continue;Up.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){Bp.set(o.filename,n);break}}}function Ly(e,t){return My(e),Bp.get(t)}function Ds(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=Ly(e,r.filename);o&&(r.module_metadata=o)})})}function Us(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var Lu=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Rt(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(Us(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;Ds(n,t)})}});function cr(e){let t="console";ze(t,e),je(t,Py)}function Py(){"console"in v&&Jn.forEach(function(e){e in v.console&&he(v.console,e,function(t){return Ar[e]=t,function(...n){xe("console",{args:n,level:e}),Ar[e]?.apply(v.console,n)}})})}function ur(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var Dy="CaptureConsole",Uy=((e={})=>{let t=e.levels||Jn,n=e.handled??!0;return{name:Dy,setup(r){"console"in v&&cr(({args:o,level:i})=>{T()!==r||!t.includes(i)||By(o,i,n)})}}}),Pu=Uy;function By(e,t,n){let r={level:ur(t),extra:{arguments:e}};Le(o=>{if(o.addEventProcessor(a=>(a.logger="console",Ye(a,{handled:n,type:"auto.core.capture_console"}),a)),t==="assert"){if(!e[0]){let a=`Assertion failed: ${Xn(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),Un(a,r)}return}let i=e.find(a=>a instanceof Error);if(i){ae(i,r);return}let s=Xn(e," ");Un(s,r)})}var Fy="Dedupe",Hy=(()=>{let e;return{name:Fy,processEvent(t){if(t.type)return t;try{if($y(t,e))return E&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),di=Hy;function $y(e,t){return t?!!(Gy(e,t)||Wy(e,t)):!1}function Gy(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!$p(e,t)||!Hp(e,t))}function Wy(e,t){let n=Fp(t),r=Fp(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!$p(e,t)||!Hp(e,t))}function Hp(e,t){let n=Rr(e),r=Rr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function $p(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Fp(e){return e.exception?.values?.[0]}var zy="ExtraErrorData",jy=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:zy,processEvent(r,o,i){let{maxValueLength:s=250}=i.getOptions();return qy(r,o,t,n,s)}}}),Du=jy;function qy(e,t={},n,r,o){if(!t.originalException||!lt(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=Gp(t.originalException,r,o);if(s){let a={...e.contexts},c=Pe(s,n);return qe(c)&&(ye(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function Gp(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=lt(s)||typeof s=="string"?Mt(`${s}`,n):s}if(t&&e.cause!==void 0)if(lt(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:Gp(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=lt(a)?a.toString():a}}return o}catch(r){E&&h.error("Unable to extract extra data from the Error object:",r)}return null}function Yy(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var Vy=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Jy(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Vy.exec(t);return n?n.slice(1):[]}function Wp(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=Yy(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function zp(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function jp(e,t){e=Wp(e).slice(1),t=Wp(t).slice(1);let n=zp(e.split("/")),r=zp(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function qp(e,t){let n=Jy(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var Ky="RewriteFrames",Uu=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in v&&!!v.window,o=e.iteratee||Xy({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:Ky,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function Xy({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?jp(t,s):qp(s);r.filename=`${n}${a}`}return r}}var Qy=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Zy=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],eT={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Vp=["select","insert","upsert","update","delete"];function Bs(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Fs(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function tT(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function nT(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&eT[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Yp(e,t=!1){return new Proxy(e,{apply(n,r,o){return pt({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[q]:"auto.db.supabase",[Te]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),ae(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),ae(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function rT(e){let t=e.auth;if(!(!t||Fs(e.auth))){for(let n of Qy){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Yp(r))}for(let n of Zy){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Yp(r,!0))}Bs(e.auth)}}function oT(e){Fs(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return sT(i),o}}),Bs(e.prototype.from))}function iT(e){Fs(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=Vp,i=n,s=tT(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[f,m]of i.url.searchParams.entries())u.push(nT(f,m));let d=Object.create(null);if(qe(i.body))for(let[f,m]of Object.entries(i.body))d[f]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,p={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[q]:"auto.db.supabase",[Te]:"db"};return u.length&&(p["db.query"]=u),Object.keys(d).length&&(p["db.body"]=d),pt({name:l,attributes:p},f=>Reflect.apply(t,n,[]).then(m=>{if(f&&(m&&typeof m=="object"&&"status"in m&&Zt(f,m.status||500),f.end()),m.error){let S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);let y={};u.length&&(y.query=u),Object.keys(d).length&&(y.body=d),ae(S,D=>(D.addEventProcessor(R=>(Ye(R,{handled:!1,type:"auto.db.supabase.postgres"}),R)),D.setContext("supabase",y),D))}let g={type:"supabase",category:`db.${s}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(g.data=_),rt(g),m},m=>{throw f&&(Zt(f,500),f.end()),m}).then(...r))}}),Bs(e.prototype.then))}function sT(e){for(let t of Vp)Fs(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return E&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),iT(s),i}}),Bs(e.prototype[t]))}var Hs=e=>{if(!e){E&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;oT(t),rT(e)},aT="Supabase",cT=(e=>({setupOnce(){Hs(e)},name:aT})),Bu=e=>cT(e.supabaseClient);var uT=10,lT="ZodErrors";function dT(e){return lt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function fT(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function pT(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function mT(e){let t=new Set;for(let r of e.issues){let o=pT(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Mt(n.join(", "),100)}`}function hT(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!dT(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(fT);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:mT(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var gT=((e={})=>{let t=e.limit??uT;return{name:lT,processEvent(n,r){return hT(t,e.saveZodIssuesAsAttachment,n,r)}}}),Fu=gT;var Hu=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{Rt(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(Us(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;Ds(r,n)})},processEvent(t){let n=_T(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function _T(e){let t=Rr(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Jp)).map(r=>r.slice(Jp.length)):[])}var Jp="_sentryBundlerPluginAppKey:";var Kp=100,Xp=10,$s="flag.evaluation.";function Ct(e){let n=x().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function ht(e,t,n=Kp){let r=x().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;ST(o,e,t,n)}function ST(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){E&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function gt(e,t,n=Xp){if(typeof t!="boolean")return;let r=X();if(!r)return;let o=L(r).data;if(`${$s}${e}`in o){r.setAttribute(`${$s}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith($s)).length<n&&r.setAttribute(`${$s}${e}`,t)}var $u=()=>({name:"FeatureFlags",processEvent(e,t,n){return Ct(e)},addFeatureFlag(e,t){ht(e,t),gt(e,t)}});var Gu=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&he(t,"isOn",Qp),typeof t.getFeatureValue=="function"&&he(t,"getFeatureValue",Qp)},processEvent(t,n,r){return Ct(t)}});function Qp(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(ht(n,r),gt(n,r)),r}}function Wu(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=Ce()&&t(s);if(e.endTimestamp&&a){let f=e.fetchData.__span;if(!f)return;let m=r[f];m&&(TT(m,e),ET(m,e,o),delete r[f]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!X(),l=a&&d?mt(IT(s,i,c)):new Ke;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let f=e.args[0],m=e.args[1]||{},g=yT(f,m,Ce()&&d?l:void 0,u);g&&(e.args[1]=m,m.headers=g)}let p=T();if(p){let f={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};p.emit("beforeOutgoingRequestSpan",l,f)}return l}function ET(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function yT(e,t,n,r){let o=ar({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(ts(e)?e.headers:void 0);if(c)if(bT(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?Gs(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&Gs(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,p=l?Array.isArray(l)?[...l]:[l]:[],f=l&&(Array.isArray(l)?l.find(g=>Gs(g)):Gs(l));s&&!f&&p.push(s);let m={...c,"sentry-trace":u??i,baggage:p.length>0?p.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function TT(e,t){if(t.response){Zt(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function Gs(e){return e.split(",").some(t=>t.trim().startsWith(as))}function bT(e){return typeof Headers<"u"&&bt(e,Headers)}function IT(e,t,n){let r=sr(e);return{name:r?`${t} ${Cu(r)}`:t,attributes:vT(e,r,t,n)}}function vT(e,t,n,r){let o={url:e,type:"fetch","http.method":n,[q]:r,[Te]:"http.client"};return t&&($r(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function fi(e,t={},n=x()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||T();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var Ws={};Ec(Ws,{debug:()=>RT,error:()=>NT,fatal:()=>xT,fmt:()=>wu,info:()=>CT,trace:()=>AT,warn:()=>wT});function Gr(e,t,n,r,o){Bn({level:e,message:t,attributes:n,severityNumber:o},r)}function AT(e,t,{scope:n}={}){Gr("trace",e,t,n)}function RT(e,t,{scope:n}={}){Gr("debug",e,t,n)}function CT(e,t,{scope:n}={}){Gr("info",e,t,n)}function wT(e,t,{scope:n}={}){Gr("warn",e,t,n)}function NT(e,t,{scope:n}={}){Gr("error",e,t,n)}function xT(e,t,{scope:n}={}){Gr("fatal",e,t,n)}function pi(e,t,n){return"util"in v&&typeof v.util.format=="function"?v.util.format(...e):kT(e,t,n)}function kT(e,t,n){return e.map(r=>Tt(r)?String(r):JSON.stringify(Pe(r,t,n))).join(" ")}function Zp(e){return/%[sdifocO]/.test(e)}function em(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var OT="ConsoleLogs",tm={[q]:"auto.log.console"},MT=((e={})=>{let t=e.levels||Jn;return{name:OT,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){E&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}cr(({args:s,level:a})=>{if(T()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let f=u.length>0?`Assertion failed: ${pi(u,o,i)}`:"Assertion failed";Bn({level:"error",message:f,attributes:tm})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!Zp(s[0]),p={...tm,...l?em(c,u):{}};Bn({level:d?"info":a,message:pi(s,o,i),severityNumber:d?10:void 0,attributes:p})})}}}),zu=MT;var zs={};Ec(zs,{count:()=>LT,distribution:()=>DT,gauge:()=>PT});function ju(e,t,n,r){_u({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function LT(e,t=1,n){ju("counter",e,t,n)}function PT(e,t,n){ju("gauge",e,t,n)}function DT(e,t,n){ju("distribution",e,t,n)}var UT=["trace","debug","info","warn","error","fatal"];function qu(e={}){let t=new Set(e.levels??UT),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||T();if(!l)return;let p=HT(o,i);if(!t.has(p))return;let{normalizeDepth:f=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),g=[];s&&g.push(s),a&&a.length>0&&g.push(pi(a,f,m));let _=g.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),Bn({level:p,message:_,attributes:d})}}}var BT={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},FT={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function HT(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=BT[e];if(n)return n}if(typeof t=="number"){let n=FT[t];if(n)return n}return"info"}var nm="gen_ai.prompt",Wr="gen_ai.system",_t="gen_ai.request.model",js="gen_ai.request.stream",zr="gen_ai.request.temperature",qs="gen_ai.request.max_tokens",jr="gen_ai.request.frequency_penalty",Ys="gen_ai.request.presence_penalty",qr="gen_ai.request.top_p",Vs="gen_ai.request.top_k",nn="gen_ai.response.finish_reasons",gn="gen_ai.response.model",_n="gen_ai.response.id";var Fn="gen_ai.usage.input_tokens",Hn="gen_ai.usage.output_tokens",$n="gen_ai.usage.total_tokens",Yr="gen_ai.operation.name",rn="gen_ai.request.messages",Xe="gen_ai.response.text",Vr="gen_ai.request.available_tools",lr="gen_ai.response.streaming",St="gen_ai.response.tool_calls";var rm="openai.response.id",om="openai.response.model",im="openai.response.timestamp",sm="openai.usage.completion_tokens",am="openai.usage.prompt_tokens",Yu={CHAT:"chat",RESPONSES:"responses"},Vu="anthropic.response.timestamp";var Js=e=>new TextEncoder().encode(e).length,Ks=e=>Js(JSON.stringify(e));function um(e,t){if(Js(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){let i=Math.floor((n+r)/2),s=e.slice(0,i);Js(s)<=t?(o=s,n=i+1):r=i-1}return o}function $T(e){return typeof e=="string"?e:e.text}function cm(e,t){return typeof e=="string"?t:{...e,text:t}}function GT(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function WT(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function zT(e,t){let n={...e,content:""},r=Ks(n),o=t-r;if(o<=0)return[];let i=um(e.content,o);return[{...e,content:i}]}function jT(e,t){let{parts:n}=e,r=n.map(a=>cm(a,"")),o=Ks({...e,parts:r}),i=t-o;if(i<=0)return[];let s=[];for(let a of n){let c=$T(a),u=Js(c);if(u<=i)s.push(a),i-=u;else if(s.length===0){let d=um(c,i);d&&s.push(cm(a,d));break}else break}return s.length>0?[{...e,parts:s}]:[]}function qT(e,t){return!e||typeof e!="object"?[]:GT(e)?zT(e,t):WT(e)?jT(e,t):[]}function YT(e,t){if(!Array.isArray(e)||e.length===0||Ks(e)<=t)return e;let r=e.map(Ks),o=0,i=e.length;for(let s=e.length-1;s>=0;s--){let a=r[s];if(a&&o+a>t)break;a&&(o+=a),i=s}if(i===e.length){let s=e[e.length-1];return qT(s,t)}return e.slice(i)}function lm(e){return YT(e,2e4)}function dr(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Jr(e){return`gen_ai.${dr(e)}`}function Xs(e,t){return e?`${e}.${t}`:t}function mi(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Fn]:t}),n!==void 0&&e.setAttributes({[Hn]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[$n]:i})}}function on(e){if(typeof e=="string")return e;if(Array.isArray(e)){let t=lm(e);return JSON.stringify(t)}return JSON.stringify(e)}var dm="OpenAI",fm=["responses.create","chat.completions.create"],VT=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],pm=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...VT];function Qs(e){return e.includes("chat.completions")?Yu.CHAT:e.includes("responses")?Yu.RESPONSES:e.split(".").pop()||"unknown"}function Ju(e){return`gen_ai.${Qs(e)}`}function mm(e){return fm.includes(e)}function hm(e,t){return e?`${e}.${t}`:t}function gm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function _m(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function Sm(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function Em(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function hi(e,t,n,r){t!==void 0&&e.setAttributes({[am]:t,[Fn]:t}),n!==void 0&&e.setAttributes({[sm]:n,[Hn]:n}),r!==void 0&&e.setAttributes({[$n]:r})}function gi(e,t,n,r){e.setAttributes({[rm]:t,[_n]:t}),e.setAttributes({[om]:n,[gn]:n}),e.setAttributes({[im]:new Date(r*1e3).toISOString()})}function JT(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function KT(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&JT(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function XT(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),ae(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!pm.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*ym(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)Em(o)?KT(o,r,n):Sm(o)&&XT(o,r,n,t),yield o}finally{gi(t,r.responseId,r.responseModel,r.responseTimestamp),hi(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[lr]:!0}),r.finishReasons.length&&t.setAttributes({[nn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Xe]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[St]:JSON.stringify(i)}),t.end()}}function QT(e,t){let n={[Wr]:"openai",[Yr]:Qs(t),[q]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Array.isArray(r.tools)?r.tools:[],s=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...s];a.length>0&&(n[Vr]=JSON.stringify(a))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];n[_t]=r.model??"unknown","temperature"in r&&(n[zr]=r.temperature),"top_p"in r&&(n[qr]=r.top_p),"frequency_penalty"in r&&(n[jr]=r.frequency_penalty),"presence_penalty"in r&&(n[Ys]=r.presence_penalty),"stream"in r&&(n[js]=r.stream)}else n[_t]="unknown";return n}function ZT(e,t,n){if(gi(e,t.id,t.model,t.created),t.usage&&hi(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[nn]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[St]:JSON.stringify(o)})}}}function eb(e,t,n){if(gi(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[nn]:JSON.stringify([t.status])}),t.usage&&hi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[St]:JSON.stringify(o)})}}}function tb(e,t,n){if(!t||typeof t!="object")return;let r=t;if(gm(r)){if(ZT(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Xe]:JSON.stringify(o)})}}else _m(r)&&(eb(e,r,n),n&&r.output_text&&e.setAttributes({[Xe]:r.output_text}))}function Tm(e,t){if("messages"in t){let n=on(t.messages);e.setAttributes({[rn]:n})}if("input"in t){let n=on(t.input);e.setAttributes({[rn]:n})}}function nb(){let t=x().getClient(),n=t?.getIntegrationByName(dm),r=n?!!t?.getOptions().sendDefaultPii:!1;return{recordInputs:n?.options?.recordInputs??r,recordOutputs:n?.options?.recordOutputs??r}}function rb(e,t,n,r){return async function(...i){let s=r||nb(),a=QT(i,t),c=a[_t]||"unknown",u=Qs(t),d=i[0];return d&&typeof d=="object"&&d.stream===!0?en({name:`${u} ${c} stream-response`,op:Ju(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&Tm(p,i[0]);let f=await e.apply(n,i);return ym(f,p,s.recordOutputs??!1)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ae(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),p.end(),f}}):pt({name:`${u} ${c}`,op:Ju(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&Tm(p,i[0]);let f=await e.apply(n,i);return tb(p,f,s.recordOutputs),f}catch(f){throw ae(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function bm(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=hm(t,String(o));return typeof i=="function"&&mm(s)?rb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?bm(i,s,n):i}})}function Ku(e,t){return bm(e,"",t)}function ob(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"unknown_error"}),ae(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function ib(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function sb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function ab(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function cb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function Im(e,t,n,r){!(e&&typeof e=="object")||ob(e,r)||(ib(e,t),sb(e,t),ab(e,t,n),cb(e,t))}function ub(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[_n]:e.responseId}),e.responseModel&&t.setAttributes({[gn]:e.responseModel}),mi(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[lr]:!0}),e.finishReasons.length>0&&t.setAttributes({[nn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Xe]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[St]:JSON.stringify(e.toolCalls)}),t.end())}async function*vm(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)Im(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[_n]:r.responseId}),r.responseModel&&t.setAttributes({[gn]:r.responseModel}),mi(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[lr]:!0}),r.finishReasons.length>0&&t.setAttributes({[nn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Xe]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[St]:JSON.stringify(r.toolCalls)}),t.end()}}function Am(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{Im(o,r,n,t)}),e.on("message",()=>{ub(r,t,n)}),e.on("error",o=>{ae(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var Rm=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Cm(e){return Rm.includes(e)}function wm(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"unknown_error"}),ae(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function lb(e,t){let n={[Wr]:"anthropic",[Yr]:dr(t),[q]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Vr]=JSON.stringify(r.tools)),n[_t]=r.model??"unknown","temperature"in r&&(n[zr]=r.temperature),"top_p"in r&&(n[qr]=r.top_p),"stream"in r&&(n[js]=r.stream),"top_k"in r&&(n[Vs]=r.top_k),"frequency_penalty"in r&&(n[jr]=r.frequency_penalty),"max_tokens"in r&&(n[qs]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[_t]=e[0]:n[_t]="unknown";return n}function Xu(e,t){if("messages"in t){let n=on(t.messages);e.setAttributes({[rn]:n})}if("input"in t){let n=on(t.input);e.setAttributes({[rn]:n})}"prompt"in t&&e.setAttributes({[nm]:JSON.stringify(t.prompt)})}function db(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Xe]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[St]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Xe]:t.completion}),"input_tokens"in t&&e.setAttributes({[Xe]:JSON.stringify(t.input_tokens)})}function fb(e,t){"id"in t&&"model"in t&&(e.setAttributes({[_n]:t.id,[gn]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Vu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Vu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&mi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function pb(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){wm(e,t);return}n&&db(e,t),fb(e,t)}}function Nm(e,t,n){throw ae(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function mb(e,t,n,r,o,i,s,a,c,u,d){let l=o[_t]??"unknown",p={name:`${i} ${l} stream-response`,op:Jr(s),attributes:o};return u&&!d?en(p,async f=>{try{c.recordInputs&&a&&Xu(f,a);let m=await e.apply(n,r);return vm(m,f,c.recordOutputs??!1)}catch(m){return Nm(m,f,s)}}):en(p,f=>{try{c.recordInputs&&a&&Xu(f,a);let m=t.apply(n,r);return Am(m,f,c.recordOutputs??!1)}catch(m){return Nm(m,f,s)}})}function hb(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=lb(s,t),c=a[_t]??"unknown",u=dr(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream,p=t==="messages.stream";return l||p?mb(e,o,n,s,a,u,t,d,r,l,p):pt({name:`${u} ${c}`,op:Jr(t),attributes:a},f=>(r.recordInputs&&d&&Xu(f,d),rr(()=>o.apply(n,s),m=>{ae(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>pb(f,m,r.recordOutputs))))}})}function xm(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=Xs(t,String(o));return typeof i=="function"&&Cm(s)?hb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?xm(i,s,n):i}})}function Qu(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return xm(e,"",r)}var Zu=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],km="google_genai",el="chats.create",Om="chat";function gb(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),ae(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function _b(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function Sb(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Eb(e,t,n,r){!e||gb(e,r)||(_b(e,t),Sb(e,t,n))}async function*Mm(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)Eb(o,r,n,t),yield o}finally{let o={[lr]:!0};r.responseId&&(o[_n]=r.responseId),r.responseModel&&(o[gn]=r.responseModel),r.promptTokens!==void 0&&(o[Fn]=r.promptTokens),r.completionTokens!==void 0&&(o[Hn]=r.completionTokens),r.totalTokens!==void 0&&(o[$n]=r.totalTokens),r.finishReasons.length&&(o[nn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Xe]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[St]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Lm(e){if(Zu.includes(e))return!0;let t=e.split(".").pop();return Zu.includes(t)}function Pm(e){return e.includes("Stream")||e.endsWith("generateContentStream")||e.endsWith("sendMessageStream")}function Dm(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function yb(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[zr]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[qr]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Vs]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[qs]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[jr]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Ys]=e.presencePenalty),t}function Tb(e,t,n){let r={[Wr]:km,[Yr]:dr(e),[q]:"auto.ai.google_genai"};if(t){if(r[_t]=Dm(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,yb(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.map(s=>s.functionDeclarations);r[Vr]=JSON.stringify(i)}}}else r[_t]=Dm({},n);return r}function Um(e,t){if("contents"in t){let n=t.contents,r=on(n);e.setAttributes({[rn]:r})}if("message"in t){let n=t.message,r=on(n);e.setAttributes({[rn]:r})}if("history"in t){let n=t.history,r=on(n);e.setAttributes({[rn]:r})}}function bb(e,t,n){if(!(!t||typeof t!="object")){if(t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Fn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Hn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[$n]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Xe]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[St]:JSON.stringify(r)})}}}function Bm(e,t,n,r){let o=t===el;return new Proxy(e,{apply(i,s,a){let c=a[0],u=Tb(t,c,n),d=u[_t]??"unknown",l=dr(t);return Pm(t)?en({name:`${l} ${d} stream-response`,op:Jr(t),attributes:u},async p=>{try{r.recordInputs&&c&&Um(p,c);let f=await i.apply(n,a);return Mm(f,p,!!r.recordOutputs)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ae(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),p.end(),f}}):pt({name:o?`${l} ${d} create`:`${l} ${d}`,op:Jr(t),attributes:u},p=>(r.recordInputs&&c&&Um(p,c),rr(()=>i.apply(n,a),f=>{ae(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},f=>{o||bb(p,f,r.recordOutputs)})))}})}function tl(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=Xs(t,String(o));if(typeof s=="function"&&Lm(a)){if(a===el){let c=Bm(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?tl(l,Om,n):l}}return Bm(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?tl(s,a,n):s}})}function nl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return tl(e,"",r)}function Zs(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var Kr=v;function rl(){return"history"in Kr&&!!Kr.history}function Ib(){if(!("fetch"in Kr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function _i(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Si(){if(typeof EdgeRuntime=="string")return!0;if(!Ib())return!1;if(_i(Kr.fetch))return!0;let e=!1,t=Kr.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=_i(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){E&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function ol(){return"ReportingObserver"in Kr}function fr(e,t){let n="fetch";ze(n,e),je(n,()=>Hm(void 0,t))}function sl(e){let t="fetch-body-resolved";ze(t,e),je(t,()=>Hm(Ab))}function Hm(e,t=!1){t&&!Si()||he(v,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=Rb(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:Q()*1e3,virtualError:o,headers:Cb(r)};return e||xe("fetch",{...a}),n.apply(v,r).then(async c=>(e?e(c):xe("fetch",{...a,endTimestamp:Q()*1e3,response:c}),c),c=>{if(xe("fetch",{...a,endTimestamp:Q()*1e3,error:c}),lt(c)&&c.stack===void 0&&(c.stack=o.stack,ye(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function vb(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function Ab(e){let t;try{t=e.clone()}catch{return}vb(t,()=>{xe("fetch-body-resolved",{endTimestamp:Q()*1e3,response:e})})}function il(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Fm(e){return typeof e=="string"?e:e?il(e,"url")?e.url:e.toString?e.toString():"":""}function Rb(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Fm(n),method:il(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Fm(t),method:il(t,"method")?String(t.method).toUpperCase():"GET"}}function Cb(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(ts(t))return new Headers(t.headers)}catch{}}function al(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function cl(){return"npm"}function $m(){return!al()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Xr(){return typeof window<"u"&&(!$m()||wb())}function wb(){return v.process?.type==="renderer"}var jt=v,de=jt.document,Ei=jt.navigator,oh="Report a Bug",Nb="Cancel",xb="Send Bug Report",kb="Confirm",Ob="Report a Bug",Mb="your.email@example.org",Lb="Email",Pb="What's the bug? What did you expect?",Db="Description",Ub="Your Name",Bb="Name",Fb="Thank you for your report!",Hb="(required)",$b="Add a screenshot",Gb="Remove screenshot",Wb="Highlight",zb="Hide",jb="Remove",qb="widget",Yb="api",Vb=5e3,Sl=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=T();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&x().setTags(e.tags);let r=fi({source:Yb,url:nt(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},ra=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Jb(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ei.userAgent)||/Macintosh/i.test(Ei.userAgent)&&Ei.maxTouchPoints&&Ei.maxTouchPoints>1||!isSecureContext)}function ea(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Kb(e){let t=de.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function wt(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var Qr=20,Xb="http://www.w3.org/2000/svg";function Qb(){let e=a=>jt.document.createElementNS(Xb,a),t=wt(e("svg"),{width:`${Qr}`,height:`${Qr}`,viewBox:`0 0 ${Qr} ${Qr}`,fill:"var(--actor-color, var(--foreground))"}),n=wt(e("g"),{clipPath:"url(#clip0_57_80)"}),r=wt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=wt(e("clipPath"),{id:"clip0_57_80"}),s=wt(e("rect"),{width:`${Qr}`,height:`${Qr}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function Zb({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=de.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||oh,o.appendChild(Qb()),e){let s=de.createElement("span");s.appendChild(de.createTextNode(e)),o.appendChild(s)}let i=Kb(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var ih="rgba(88, 74, 192, 1)",eI={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ih,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Gm={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ih,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Wm(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function tI({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=de.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Wm(e==="dark"?{...Gm,...t}:{...eI,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Wm({...Gm,...t})}
  }
}`:""}
}
`,r&&o.setAttribute("nonce",r),o}var ua=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:p={email:"email",name:"username"},tags:f,styleNonce:m,scriptNonce:g,colorScheme:_="system",themeLight:S={},themeDark:y={},addScreenshotButtonLabel:D=$b,cancelButtonLabel:R=Nb,confirmButtonLabel:U=kb,emailLabel:N=Lb,emailPlaceholder:b=Mb,formTitle:C=Ob,isRequiredLabel:I=Hb,messageLabel:O=Db,messagePlaceholder:$=Pb,nameLabel:w=Bb,namePlaceholder:M=Ub,removeScreenshotButtonLabel:Y=Gb,submitButtonLabel:ee=xb,successMessageText:te=Fb,triggerLabel:G=oh,triggerAriaLabel:B="",highlightToolText:F=Wb,hideToolText:P=zb,removeHighlightText:K=jb,onFormOpen:le,onFormClose:Ee,onSubmitSuccess:Re,onSubmitError:Ze,onFormSubmitted:An}={})=>{let et={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:p,tags:f,styleNonce:m,scriptNonce:g,colorScheme:_,themeDark:y,themeLight:S,triggerLabel:G,triggerAriaLabel:B,cancelButtonLabel:R,submitButtonLabel:ee,confirmButtonLabel:U,formTitle:C,emailLabel:N,emailPlaceholder:b,messageLabel:O,messagePlaceholder:$,nameLabel:w,namePlaceholder:M,successMessageText:te,isRequiredLabel:I,addScreenshotButtonLabel:D,removeScreenshotButtonLabel:Y,highlightToolText:F,hideToolText:P,removeHighlightText:K,onFormClose:Ee,onFormOpen:le,onSubmitError:Ze,onSubmitSuccess:Re,onFormSubmitted:An},at=null,Vt=[],Rn=ue=>{if(!at){let be=de.createElement("div");be.id=String(ue.id),de.body.appendChild(be),at=be.attachShadow({mode:"open"}),at.appendChild(tI(ue))}return at},wo=async ue=>{let be=ue.enableScreenshot&&Jb(),kt,Be;try{kt=(t?t():await e("feedbackModalIntegration",g))(),Br(kt)}catch{throw ra&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let Jt=be?n?n():await e("feedbackScreenshotIntegration",g):void 0;Jt&&(Be=Jt(),Br(Be))}catch{ra&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let Ge=kt.createDialog({options:{...ue,onFormClose:()=>{Ge?.close(),ue.onFormClose?.()},onFormSubmitted:()=>{Ge?.close(),ue.onFormSubmitted?.()}},screenshotIntegration:Be,sendFeedback:Sl,shadow:Rn(ue)});return Ge},Ji=(ue,be={})=>{let kt=ea(et,be),Be=typeof ue=="string"?de.querySelector(ue):typeof ue.addEventListener=="function"?ue:null;if(!Be)throw ra&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ge=null,Jt=async()=>{Ge||(Ge=await wo({...kt,onFormSubmitted:()=>{Ge?.removeFromDom(),kt.onFormSubmitted?.()}})),Ge.appendToDom(),Ge.open()};Be.addEventListener("click",Jt);let ne=()=>{Vt=Vt.filter(yt=>yt!==ne),Ge?.removeFromDom(),Ge=null,Be.removeEventListener("click",Jt)};return Vt.push(ne),ne},No=(ue={})=>{let be=ea(et,ue),kt=Rn(be),Be=Zb({triggerLabel:be.triggerLabel,triggerAriaLabel:be.triggerAriaLabel,shadow:kt,styleNonce:m});return Ji(Be.el,{...be,onFormOpen(){Be.hide()},onFormClose(){Be.show()},onFormSubmitted(){Be.show()}}),Be};return{name:"Feedback",setupOnce(){!Xr()||!et.autoInject||(de.readyState==="loading"?de.addEventListener("DOMContentLoaded",()=>No().appendToDom()):No().appendToDom())},attachTo:Ji,createWidget(ue={}){let be=No(ea(et,ue));return be.appendToDom(),be},async createForm(ue={}){return wo(ea(et,ue))},remove(){at&&(at.parentElement?.remove(),at=null),Vt.forEach(ue=>ue()),Vt=[]}}});function sh(){return T()?.getIntegrationByName("Feedback")}var la,pe,ah,pr,zm,ch,ml,yi={},El=[],nI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,yl=Array.isArray;function Wn(e,t){for(var n in t)e[n]=t[n];return e}function uh(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?la.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return oa(e,s,r,o,null)}function oa(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++ah,__i:-1,__u:0};return o==null&&pe.vnode!=null&&pe.vnode(i),i}function Ti(e){return e.children}function ia(e,t){this.props=e,this.context=t}function eo(e,t){if(t==null)return e.__?eo(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?eo(e):null}function rI(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=Wn({},o)).__v=o.__v+1,pe.vnode&&pe.vnode(r),Tl(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??eo(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&lh(r),r}function lh(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return lh(e)}}function jm(e){(!e.__d&&(e.__d=!0)&&pr.push(e)&&!ca.__r++||zm!==pe.debounceRendering)&&((zm=pe.debounceRendering)||ch)(ca)}function ca(){var e,t,n,r=[],o=[];for(pr.sort(ml);e=pr.shift();)e.__d&&(n=pr.length,t=rI(e,r,o)||t,n===0||pr.length>n?(hl(r,t,o),o.length=r.length=0,t=void 0,pr.sort(ml)):t&&pe.__c&&pe.__c(t,El));t&&hl(r,t,o),ca.__r=0}function dh(e,t,n,r,o,i,s,a,c,u,d){var l,p,f,m,g,_=r&&r.__k||El,S=t.length;for(n.__d=c,oI(n,t,_),c=n.__d,l=0;l<S;l++)(f=n.__k[l])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?yi:_[f.__i]||yi,f.__i=l,Tl(e,f,p,o,i,s,a,c,u,d),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&bl(p.ref,null,f),d.push(f.ref,f.__c||m,f)),g==null&&m!=null&&(g=m),65536&f.__u||p.__k===f.__k?c=fh(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:m&&(c=m.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=g}function oI(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?oa(null,o,null,null,o):yl(o)?oa(Ti,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?oa(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=iI(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=eo(i)),gl(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=eo(i)),gl(i,i))}function fh(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=fh(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function iI(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function qm(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||nI.test(t)?n:n+"px"}function ta(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||qm(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||qm(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Vm:Ym,i)):e.removeEventListener(t,i?Vm:Ym,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Ym(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(pe.event?pe.event(e):e)}}function Vm(e){if(this.l)return this.l[e.type+!0](pe.event?pe.event(e):e)}function Tl(e,t,n,r,o,i,s,a,c,u){var d,l,p,f,m,g,_,S,y,D,R,U,N,b,C,I=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=pe.__b)&&d(t);e:if(typeof I=="function")try{if(S=t.props,y=(d=I.contextType)&&r[d.__c],D=d?y?y.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in I&&I.prototype.render?t.__c=l=new I(S,D):(t.__c=l=new ia(S,D),l.constructor=I,l.render=aI),y&&y.sub(l),l.props=S,l.state||(l.state={}),l.context=D,l.__n=r,p=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),I.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Wn({},l.__s)),Wn(l.__s,I.getDerivedStateFromProps(S,l.__s))),f=l.props,m=l.state,l.__v=t,p)I.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(I.getDerivedStateFromProps==null&&S!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(S,D),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(S,l.__s,D)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=S,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(O){O&&(O.__=t)}),R=0;R<l._sb.length;R++)l.__h.push(l._sb[R]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(S,l.__s,D),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,m,g)})}if(l.context=D,l.props=S,l.__P=e,l.__e=!1,U=pe.__r,N=0,"prototype"in I&&I.prototype.render){for(l.state=l.__s,l.__d=!1,U&&U(t),d=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,U&&U(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(r=Wn(Wn({},r),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(g=l.getSnapshotBeforeUpdate(f,m)),dh(e,yl(C=d!=null&&d.type===Ti&&d.key==null?d.props.children:d)?C:[C],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),_&&(l.__E=l.__=null)}catch(O){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),pe.__e(O,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=sI(n.__e,t,n,r,o,i,s,c,u);(d=pe.diffed)&&d(t)}function hl(e,t,n){for(var r=0;r<n.length;r++)bl(n[r],n[++r],n[++r]);pe.__c&&pe.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){pe.__e(i,o.__v)}})}function sI(e,t,n,r,o,i,s,a,c){var u,d,l,p,f,m,g,_=n.props,S=t.props,y=t.type;if(y==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((f=i[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){e=f,i[u]=null;break}}if(e==null){if(y===null)return document.createTextNode(S);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,S.is&&S),i=null,a=!1}if(y===null)_===S||a&&e.data===S||(e.data=S);else{if(i=i&&la.call(e.childNodes),_=n.props||yi,!a&&i!=null)for(_={},u=0;u<e.attributes.length;u++)_[(f=e.attributes[u]).name]=f.value;for(u in _)f=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=f:u==="key"||u in S||ta(e,u,null,f,o));for(u in S)f=S[u],u=="children"?p=f:u=="dangerouslySetInnerHTML"?d=f:u=="value"?m=f:u=="checked"?g=f:u==="key"||a&&typeof f!="function"||_[u]===f||ta(e,u,f,_[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),dh(e,yl(p)?p:[p],t,n,r,o&&y!=="foreignObject",i,s,i?i[0]:n.__k&&eo(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&uh(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||y==="progress"&&!m||y==="option"&&m!==_[u])&&ta(e,u,m,_[u],!1),u="checked",g!==void 0&&g!==e[u]&&ta(e,u,g,_[u],!1))}return e}function bl(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){pe.__e(r,n)}}function gl(e,t,n){var r,o;if(pe.unmount&&pe.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||bl(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){pe.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&gl(r[o],t,n||typeof e.type!="function");n||e.__e==null||uh(e.__e),e.__=e.__e=e.__d=void 0}function aI(e,t,n){return this.constructor(e,n)}function cI(e,t,n){var r,o,i,s;pe.__&&pe.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],Tl(t,e=t.__k=V(Ti,null,[e]),o||yi,yi,t.ownerSVGElement!==void 0,o?null:t.firstChild?la.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,hl(i,e,s)}la=El.slice,pe={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},ah=0,ia.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wn({},this.state),typeof e=="function"&&(e=e(Wn({},n),this.props)),e&&Wn(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),jm(this))},ia.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),jm(this))},ia.prototype.render=Ti,pr=[],ch=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ml=function(e,t){return e.__v.__b-t.__v.__b},ca.__r=0;var Sn,fe,ul,Jm,to=0,ph=[],sa=[],Ie=pe,Km=Ie.__b,Xm=Ie.__r,Qm=Ie.diffed,Zm=Ie.__c,eh=Ie.unmount,th=Ie.__;function hr(e,t){Ie.__h&&Ie.__h(fe,e,to||t),to=0;var n=fe.__H||(fe.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:sa}),n.__[e]}function mr(e){return to=1,mh(gh,e)}function mh(e,t,n){var r=hr(Sn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):gh(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=fe,!fe.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};fe.u=!0;var i=fe.shouldComponentUpdate,s=fe.componentWillUpdate;fe.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},fe.shouldComponentUpdate=o}return r.__N||r.__}function uI(e,t){var n=hr(Sn++,3);!Ie.__s&&Il(n.__H,t)&&(n.__=e,n.i=t,fe.__H.__h.push(n))}function hh(e,t){var n=hr(Sn++,4);!Ie.__s&&Il(n.__H,t)&&(n.__=e,n.i=t,fe.__h.push(n))}function lI(e){return to=5,bi(function(){return{current:e}},[])}function dI(e,t,n){to=6,hh(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function bi(e,t){var n=hr(Sn++,7);return Il(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Zr(e,t){return to=8,bi(function(){return e},t)}function fI(e){var t=fe.context[e.__c],n=hr(Sn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(fe)),t.props.value):e.__}function pI(e,t){Ie.useDebugValue&&Ie.useDebugValue(t?t(e):e)}function mI(e){var t=hr(Sn++,10),n=mr();return t.__=e,fe.componentDidCatch||(fe.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function hI(){var e=hr(Sn++,11);if(!e.__){for(var t=fe.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function gI(){for(var e;e=ph.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(aa),e.__H.__h.forEach(_l),e.__H.__h=[]}catch(t){e.__H.__h=[],Ie.__e(t,e.__v)}}Ie.__b=function(e){fe=null,Km&&Km(e)},Ie.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),th&&th(e,t)},Ie.__r=function(e){Xm&&Xm(e),Sn=0;var t=(fe=e.__c).__H;t&&(ul===fe?(t.__h=[],fe.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=sa,n.__N=n.i=void 0})):(t.__h.forEach(aa),t.__h.forEach(_l),t.__h=[],Sn=0)),ul=fe},Ie.diffed=function(e){Qm&&Qm(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ph.push(t)!==1&&Jm===Ie.requestAnimationFrame||((Jm=Ie.requestAnimationFrame)||_I)(gI)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==sa&&(n.__=n.__V),n.i=void 0,n.__V=sa})),ul=fe=null},Ie.__c=function(e,t){t.some(function(n){try{n.__h.forEach(aa),n.__h=n.__h.filter(function(r){return!r.__||_l(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ie.__e(r,n.__v)}}),Zm&&Zm(e,t)},Ie.unmount=function(e){eh&&eh(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{aa(r)}catch(o){t=o}}),n.__H=void 0,t&&Ie.__e(t,n.__v))};var nh=typeof requestAnimationFrame=="function";function _I(e){var t,n=function(){clearTimeout(r),nh&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);nh&&(t=requestAnimationFrame(n))}function aa(e){var t=fe,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),fe=t}function _l(e){var t=fe;e.__c=e.__(),fe=t}function Il(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function gh(e,t){return typeof t=="function"?t(e):t}var SI=Object.defineProperty({__proto__:null,useCallback:Zr,useContext:fI,useDebugValue:pI,useEffect:uI,useErrorBoundary:mI,useId:hI,useImperativeHandle:dI,useLayoutEffect:hh,useMemo:bi,useReducer:mh,useRef:lI,useState:mr},Symbol.toStringTag,{value:"Module"}),EI="http://www.w3.org/2000/svg";function yI(){let e=r=>de.createElementNS(EI,r),t=wt(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=wt(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function TI({options:e}){let t=bi(()=>({__html:yI().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function bI(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function ll(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function II({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:m,emailPlaceholder:g,isEmailRequired:_,isNameRequired:S,messageLabel:y,messagePlaceholder:D,nameLabel:R,namePlaceholder:U,submitButtonLabel:N,isRequiredLabel:b}=e,[C,I]=mr(!1),[O,$]=mr(null),[w,M]=mr(!1),Y=u?.input,[ee,te]=mr(null),G=Zr(P=>{te(P),M(!1)},[]),B=Zr(P=>{let K=bI(P,{emailLabel:m,isEmailRequired:_,isNameRequired:S,messageLabel:y,nameLabel:R});return K.length>0?$(`Please enter in the following required fields: ${K.join(", ")}`):$(null),K.length===0},[m,_,S,y,R]),F=Zr(async P=>{I(!0);try{if(P.preventDefault(),!(P.target instanceof HTMLFormElement))return;let K=new FormData(P.target),le=await(u&&w?u.value():void 0),Ee={name:ll(K,"name"),email:ll(K,"email"),message:ll(K,"message"),attachments:le?[le]:void 0};if(!B(Ee))return;try{let Re=await o({name:Ee.name,email:Ee.email,message:Ee.message,source:qb,tags:d},{attachments:Ee.attachments});i(Ee,Re)}catch(Re){ra&&h.error(Re),$(Re),s(Re)}}finally{I(!1)}},[u&&w,i,s]);return V("form",{class:"form",onSubmit:F},Y&&w?V(Y,{onError:G}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:C},V("div",{class:"form__top"},O?V("div",{class:"form__error-container"},O):null,c?V("label",{for:"name",class:"form__label"},V(dl,{label:R,isRequiredLabel:b,isRequired:S}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:U,required:S,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(dl,{label:m,isRequiredLabel:b,isRequired:_}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:_,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(dl,{label:y,isRequiredLabel:b,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:D,required:!0,rows:5})),Y?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:C,type:"button",onClick:()=>{te(null),M(P=>!P)}},w?p:l),ee?V("div",{class:"form__error-container"},ee.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:C,type:"submit"},N),V("button",{class:"btn btn--default",disabled:C,type:"button",onClick:r},f))))}function dl({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}var na=16,rh=17,vI="http://www.w3.org/2000/svg";function AI(){let e=c=>jt.document.createElementNS(vI,c),t=wt(e("svg"),{width:`${na}`,height:`${rh}`,viewBox:`0 0 ${na} ${rh}`,fill:"inherit"}),n=wt(e("g"),{clipPath:"url(#clip0_57_156)"}),r=wt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=wt(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=wt(e("clipPath"),{id:"clip0_57_156"}),a=wt(e("rect"),{width:`${na}`,height:`${na}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function RI({open:e,onFormSubmitted:t,...n}){let r=n.options,o=bi(()=>({__html:AI().outerHTML}),[]),[i,s]=mr(null),a=Zr(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=Zr((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},Vb))},[t]);return V(Ti,null,i?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(TI,{options:r}),V(II,{...n,onSubmitSuccess:c})))))}var CI=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,wI=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,NI=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,xI=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,kI=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function OI(e){let t=de.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${CI}
${wI}
${NI}
${xI}
${kI}
`,e&&t.setAttribute("nonce",e),t}function MI(){let e=x().getUser(),t=se().getUser(),n=ft().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var _h=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=MI(),a=de.createElement("div"),c=OI(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),de.body.style.overflow=u},open(){p(!0),e.onFormOpen?.(),T()?.emit("openFeedbackWidget"),u=de.body.style.overflow,de.body.style.overflow="hidden"},close(){p(!1),de.body.style.overflow=u}},l=t?.createInput({h:V,hooks:SI,dialog:d,options:e}),p=f=>{cI(V(RI,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&s?.[i.name]||"",defaultEmail:i&&s?.[i.email]||"",onFormClose:()=>{p(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,g)=>{p(!1),e.onSubmitSuccess?.(m,g)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:f}),a)};return d}}));function LI({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function PI(e){let t=de.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function DI({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function UI({hooks:e}){function t(){let[n,r]=e.useState(jt.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(jt.devicePixelRatio)},i=matchMedia(`(resolution: ${jt.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await Ei.mediaDevices.getDisplayMedia({video:{width:jt.innerWidth*a,height:jt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=de.createElement("video");await new Promise((l,p)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(f=>f.stop()),l()},d.play().catch(p)}),i()})().catch(s)},[])}}function BI(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Gn(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function fl(e,t){Gn(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function pl(e,t,n){Gn(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{BI(i,o,t)})})}function FI({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=UI({hooks:t}),s=DI({h:e}),a=LI({h:e}),c={__html:PI(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[p,f]=t.useState("highlight"),[m,g]=t.useState([]),_=t.useRef(null),S=t.useRef(null),y=t.useRef(null),D=t.useRef(null),[R,U]=t.useState(1),N=t.useMemo(()=>{let w=de.getElementById(o.id);if(!w)return"white";let M=getComputedStyle(w);return M.getPropertyValue("--button-primary-background")||M.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let w=()=>{let M=_.current;M&&(Gn(l.canvas,{alpha:!1},Y=>{let ee=Math.min(M.clientWidth/Y.width,M.clientHeight/Y.height);U(ee)}),(M.clientHeight===0||M.clientWidth===0)&&setTimeout(w,0))};return w(),jt.addEventListener("resize",w),()=>{jt.removeEventListener("resize",w)}},[l]);let b=t.useCallback((w,M)=>{Gn(w,{alpha:!0},(Y,ee)=>{ee.scale(M,M),Y.width=l.canvas.width,Y.height=l.canvas.height})},[l]);t.useEffect(()=>{b(S.current,l.dpi),fl(S.current,l.canvas)},[l]),t.useEffect(()=>{b(y.current,l.dpi),Gn(y.current,{alpha:!0},(w,M)=>{M.clearRect(0,0,w.width,w.height)}),pl(y.current,N,m)},[m,N]),t.useEffect(()=>{b(n,l.dpi),fl(n,l.canvas),Gn(de.createElement("canvas"),{alpha:!0},(w,M)=>{M.scale(l.dpi,l.dpi),w.width=l.canvas.width,w.height=l.canvas.height,pl(w,N,m),fl(n,w)})},[m,l,N]);let C=w=>{if(!p||!D.current)return;let M=D.current.getBoundingClientRect(),Y={type:p,x:w.offsetX/R,y:w.offsetY/R},ee=(B,F)=>{let P=(F.clientX-M.x)/R,K=(F.clientY-M.y)/R;return{type:B.type,x:Math.min(B.x,P),y:Math.min(B.y,K),w:Math.abs(P-B.x),h:Math.abs(K-B.y)}},te=B=>{Gn(y.current,{alpha:!0},(F,P)=>{P.clearRect(0,0,F.width,F.height)}),pl(y.current,N,[...m,ee(Y,B)])},G=B=>{let F=ee(Y,B);F.w*R>=1&&F.h*R>=1&&g(P=>[...P,F]),de.removeEventListener("mousemove",te),de.removeEventListener("mouseup",G)};de.addEventListener("mousemove",te),de.addEventListener("mouseup",G)},I=t.useCallback(w=>M=>{M.preventDefault(),M.stopPropagation(),g(Y=>{let ee=[...Y];return ee.splice(w,1),ee})},[]),O={width:`${l.canvas.width*R}px`,height:`${l.canvas.height*R}px`},$=w=>{w.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:S,id:"background",style:O}),e("canvas",{ref:y,id:"foreground",style:O}),e("div",{ref:D,onMouseDown:C,style:O},m.map((w,M)=>e("div",{key:M,class:"editor__rect",style:{top:`${w.y*R}px`,left:`${w.x*R}px`,width:`${w.w*R}px`,height:`${w.h*R}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:I(M),onMouseDown:$,onMouseUp:$,type:"button"},e(a,null))))))),e(s,{options:o,action:p,setAction:f}))};return function({onError:p}){let[f,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((g,_)=>{Gn(de.createElement("canvas"),{alpha:!1},(S,y)=>{y.scale(_,_),S.width=g.videoWidth,S.height=g.videoHeight,y.drawImage(g,0,0,S.width,S.height),m({canvas:S,dpi:_})}),n.width=g.videoWidth,n.height=g.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(g=>{u.display="block",p(g)},[])}),f?e(d,{screenshot:f}):e("div",null)}}var Sh=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=de.createElement("canvas");return{input:FI({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var k=v,vl=0;function Al(){return vl>0}function HI(){vl++,setTimeout(()=>{vl--})}function gr(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(Qn(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>gr(s,t));return e.apply(this,i)}catch(i){throw HI(),Le(s=>{s.addEventProcessor(a=>(t.mechanism&&(Nr(a,void 0,void 0),Ye(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),ae(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}ns(r,e),ye(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Ii(){let e=nt(),{referrer:t}=k.document||{},{userAgent:n}=k.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var $I={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient"},Eh=k;async function da(e,t){let n=$I[e],r=Eh.Sentry=Eh.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=GI(n),s=k.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,p)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",p)}),c=k.document.currentScript,u=k.document.body||k.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function GI(e){let n=T()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${ct}/${e}.min.js`,n).toString()}var yh=ua({lazyLoadIntegration:da});var Rl=ua({getModalIntegration:()=>_h,getScreenshotIntegration:()=>Sh});function no(e,t){let n=Nl(e,t),r={type:YI(t),value:VI(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function WI(e,t,n,r){let i=T()?.getOptions().normalizeDepth,s=XI(t),a={__serialized__:Ss(t,i)};if(s)return{exception:{values:[no(e,s)]},extra:a};let c={exception:{values:[{type:Kn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:JI(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=Nl(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Cl(e,t){return{exception:{values:[no(e,t)]}}}function Nl(e,t){let n=t.stacktrace||t.stack||"",r=jI(t),o=qI(t);try{return e(n,r,o)}catch{}return[]}var zI=/Minified React error #\d+;/i;function jI(e){return e&&zI.test(e.message)?1:0}function qI(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Th(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function YI(e){let t=e?.name;return!t&&Th(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function VI(e){let t=e?.message;return Th(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function fa(e,t,n,r){let o=n?.syntheticException||void 0,i=ma(e,t,o,r);return Ye(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Pn(i)}function pa(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=wl(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),Pn(s)}function ma(e,t,n,r,o){let i;if(Zi(t)&&t.error)return Cl(e,t.error);if(es(t)||Rc(t)){let s=t;if("stack"in t)i=Cl(e,t);else{let a=s.name||(es(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=wl(e,c,n,r),Nr(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return lt(t)?Cl(e,t):qe(t)||Kn(t)?(i=WI(e,t,n,o),Ye(i,{synthetic:!0}),i):(i=wl(e,t,n,r),Nr(i,`${t}`,void 0),Ye(i,{synthetic:!0}),i)}function wl(e,t,n,r){let o={};if(r&&n){let i=Nl(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),Ye(o,{synthetic:!0})}if(wn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function JI(e,{isUnhandledRejection:t}){let n=kc(e),r=t?"promise rejection":"exception";return Zi(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Kn(e)?`Event \`${KI(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function KI(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function XI(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var ro=class extends ri{constructor(t){let n=QI(t),r=k.SENTRY_SDK_SOURCE||cl();xu(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a}=this._options;k.document&&(i||s||a?.enableMetrics)&&k.document.addEventListener("visibilitychange",()=>{k.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&Fr(this),a?.enableMetrics&&Hr(this))}),o&&this.on("beforeSendSession",Nu)}eventFromException(t,n){return fa(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return pa(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function QI(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:k.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var Dt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var H=v;var ZI=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",sn=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=ZI(t.value,n),e(t)))}};var bh=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var En=(e=!0)=>{let t=H.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var Ut=()=>En()?.activationStart??0;var an=(e,t=-1)=>{let n=En(),r="navigate";return n&&(H.document?.prerendering||Ut()>0?r="prerender":H.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:bh(),navigationType:r}};var xl=new WeakMap;function oo(e,t){return xl.get(e)||xl.set(e,new t),xl.get(e)}var ha=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Bt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var io=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var vi=-1,ev=()=>H.document?.visibilityState==="hidden"&&!H.document?.prerendering?0:1/0,ga=e=>{H.document.visibilityState==="hidden"&&vi>-1&&(vi=e.type==="visibilitychange"?e.timeStamp:0,nv())},tv=()=>{addEventListener("visibilitychange",ga,!0),addEventListener("prerenderingchange",ga,!0)},nv=()=>{removeEventListener("visibilitychange",ga,!0),removeEventListener("prerenderingchange",ga,!0)},so=()=>{if(H.document&&vi<0){let e=Ut();vi=(H.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??ev(),tv()}return{get firstHiddenTime(){return vi}}};var zn=e=>{H.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var rv=[1800,3e3],Ih=(e,t={})=>{zn(()=>{let n=so(),r=an("FCP"),o,s=Bt("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Ut(),0),r.entries.push(c),o(!0)))});s&&(o=sn(e,r,rv,t.reportAllChanges))})};var ov=[.1,.25],vh=(e,t={})=>{Ih(io(()=>{let n=an("CLS",0),r,o=oo(t,ha),i=a=>{for(let c of a)o._processEntry(c);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},s=Bt("layout-shift",i);s&&(r=sn(e,n,ov,t.reportAllChanges),H.document?.addEventListener("visibilitychange",()=>{H.document?.visibilityState==="hidden"&&(i(s.takeRecords()),r(!0))}),H?.setTimeout?.(r))}))};var Ah=0,kl=1/0,_a=0,iv=e=>{e.forEach(t=>{t.interactionId&&(kl=Math.min(kl,t.interactionId),_a=Math.max(_a,t.interactionId),Ah=_a?(_a-kl)/7+1:0)})},Ol,Ml=()=>Ol?Ah:performance.interactionCount||0,Rh=()=>{"interactionCount"in performance||Ol||(Ol=Bt("event",iv,{type:"event",buffered:!0,durationThreshold:0}))};var Ll=10,Ch=0,sv=()=>Ml()-Ch,Sa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Ch=Ml(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(sv()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Ll||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>Ll){let o=this._longestInteractionList.splice(Ll);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var ao=e=>{let t=n=>{(n.type==="pagehide"||H.document?.visibilityState==="hidden")&&e(n)};H.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var Ea=e=>{let t=H.requestIdleCallback||H.setTimeout;H.document?.visibilityState==="hidden"?e():(e=io(e),t(e),ao(e))};var av=[200,500],cv=40,wh=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&zn(()=>{Rh();let n=an("INP"),r,o=oo(t,Sa),i=a=>{Ea(()=>{for(let u of a)o._processEntry(u);let c=o._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},s=Bt("event",i,{durationThreshold:t.durationThreshold??cv});r=sn(e,n,av,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ao(()=>{i(s.takeRecords()),r(!0)}))})};var ya=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var uv=[2500,4e3],Nh=(e,t={})=>{zn(()=>{let n=so(),r=an("LCP"),o,i=oo(t,ya),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Ut(),0),r.entries=[u],o())},a=Bt("largest-contentful-paint",s);if(a){o=sn(e,r,uv,t.reportAllChanges);let c=io(()=>{s(a.takeRecords()),a.disconnect(),o(!0)});for(let u of["keydown","click","visibilitychange"])H.document&&addEventListener(u,()=>Ea(c),{capture:!0,once:!0})}})};var lv=[800,1800],Pl=e=>{H.document?.prerendering?zn(()=>Pl(e)):H.document?.readyState!=="complete"?addEventListener("load",()=>Pl(e),!0):setTimeout(e)},xh=(e,t={})=>{let n=an("TTFB"),r=sn(e,n,lv,t.reportAllChanges);Pl(()=>{let o=En();o&&(n.value=Math.max(o.responseStart-Ut(),0),n.entries=[o],r(!0))})};var Ai={},Ta={},kh,Oh,Mh,Lh;function _r(e,t=!1){return ba("cls",e,dv,kh,t)}function Sr(e,t=!1){return ba("lcp",e,fv,Oh,t)}function Dl(e){return ba("ttfb",e,pv,Mh)}function Ri(e){return ba("inp",e,mv,Lh)}function Nt(e,t){return Ph(e,t),Ta[e]||(hv(e),Ta[e]=!0),Dh(e,t)}function Ci(e,t){let n=Ai[e];if(n?.length)for(let r of n)try{r(t)}catch(o){Dt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ut(r)}
Error:`,o)}}function dv(){return vh(e=>{Ci("cls",{metric:e}),kh=e},{reportAllChanges:!0})}function fv(){return Nh(e=>{Ci("lcp",{metric:e}),Oh=e},{reportAllChanges:!0})}function pv(){return xh(e=>{Ci("ttfb",{metric:e}),Mh=e})}function mv(){return wh(e=>{Ci("inp",{metric:e}),Lh=e})}function ba(e,t,n,r,o=!1){Ph(e,t);let i;return Ta[e]||(i=n(),Ta[e]=!0),r&&t({metric:r}),Dh(e,t,o?i:void 0)}function hv(e){let t={};e==="event"&&(t.durationThreshold=0),Bt(e,n=>{Ci(e,{entries:n})},t)}function Ph(e,t){Ai[e]=Ai[e]||[],Ai[e].push(t)}function Dh(e,t,n){return()=>{n&&n();let r=Ai[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function Uh(e){return"duration"in e}function Ia(e){return typeof e=="number"&&isFinite(e)}function yn(e,t,n,{...r}){let o=L(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Ln(e,()=>{let i=mt({startTime:t,...r});return i&&i.end(n),i})}function co(e){let t=T();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=x(),p=l.getUser(),f=p!==void 0?p.email||p.id||p.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let g={release:s,environment:a,user:f||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":H.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return mt({name:n,attributes:g,startTime:i,experimental:{standalone:!0}})}function Tn(){return H.addEventListener&&H.performance}function me(e){return e/1e3}function Bh(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function va(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Aa(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}ao(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function Fh(e){let t=0,n;if(!va("layout-shift"))return;let r=_r(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Aa(e,(o,i)=>{gv(t,n,i,o),r()})}function gv(e,t,n,r){Dt&&h.log(`Sending CLS span (${e})`);let o=t?me((ge()||0)+t.startTime):Q(),i=x().getScopeData().transactionName,s=t?ke(t.sources[0]?.node):"Layout shift",a={[q]:"auto.http.browser.cls",[Te]:"ui.webvital.cls",[Pt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=ke(u.node)});let c=co({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[Xt]:"",[Qt]:e}),c.end(o))}function Hh(e){let t=0,n;if(!va("largest-contentful-paint"))return;let r=Sr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Aa(e,(o,i)=>{_v(t,n,i,o),r()})}function _v(e,t,n,r){Dt&&h.log(`Sending LCP span (${e})`);let o=me((ge()||0)+(t?.startTime||0)),i=x().getScopeData().transactionName,s=t?ke(t.element):"Largest contentful paint",a={[q]:"auto.http.browser.lcp",[Te]:"ui.webvital.lcp",[Pt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=ke(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=co({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[Xt]:"millisecond",[Qt]:e}),c.end(o))}function Ft(e){return e&&((ge()||performance.timeOrigin)+e)/1e3}function wi(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=Bh(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return ge()||Tn()?.timeOrigin?Sv({...t,"http.request.redirect_start":Ft(e.redirectStart),"http.request.redirect_end":Ft(e.redirectEnd),"http.request.worker_start":Ft(e.workerStart),"http.request.fetch_start":Ft(e.fetchStart),"http.request.domain_lookup_start":Ft(e.domainLookupStart),"http.request.domain_lookup_end":Ft(e.domainLookupEnd),"http.request.connect_start":Ft(e.connectStart),"http.request.secure_connection_start":Ft(e.secureConnectionStart),"http.request.connection_end":Ft(e.connectEnd),"http.request.request_start":Ft(e.requestStart),"http.request.response_start":Ft(e.responseStart),"http.request.response_end":Ft(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function Sv(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var Ev=2147483647,$h=0,qt={},Et,Ca;function Ul({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=Tn();if(r&&ge()){r.mark&&H.performance.mark("sentry-tracing-init");let o=t?Hh(n):Tv(),i=bv(),s=e?Fh(n):yv();return()=>{o?.(),i(),s?.()}}return()=>{}}function Bl(){Nt("longtask",({entries:e})=>{let t=X();if(!t)return;let{op:n,start_timestamp:r}=L(t);for(let o of e){let i=me(ge()+o.startTime),s=me(o.duration);n==="navigation"&&r&&i<r||yn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[q]:"auto.ui.browser.metrics"}})}})}function Fl(){new PerformanceObserver(t=>{let n=X();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=me(ge()+r.startTime),{start_timestamp:i,op:s}=L(n);if(s==="navigation"&&i&&o<i)continue;let a=me(r.duration),c={[q]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:p,sourceFunctionName:f,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,p&&(c["code.filepath"]=p),f&&(c["code.function"]=f),m!==-1&&(c["browser.script.source_char_position"]=m),yn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Hl(){Nt("event",({entries:e})=>{let t=X();if(t){for(let n of e)if(n.name==="click"){let r=me(ge()+n.startTime),o=me(n.duration),i={name:ke(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[q]:"auto.ui.browser.metrics"}},s=Lo(n.target);s&&(i.attributes["ui.component_name"]=s),yn(t,r,r+o,i)}}})}function yv(){return _r(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.cls={value:e.value,unit:""},Ca=t)},!0)}function Tv(){return Sr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.lcp={value:e.value,unit:"millisecond"},Et=t)},!0)}function bv(){return Dl(({metric:e})=>{e.entries[e.entries.length-1]&&(qt.ttfb={value:e.value,unit:"millisecond"})})}function $l(e,t){let n=Tn(),r=ge();if(!n?.getEntries||!r)return;let o=me(r),i=n.getEntries(),{op:s,start_timestamp:a}=L(e);i.slice($h).forEach(c=>{let u=me(c.startTime),d=me(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{Rv(e,c,o);break}case"mark":case"paint":case"measure":{vv(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=so(),p=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&p&&(qt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&p&&(qt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{Nv(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),$h=Math.max(i.length-1,0),xv(e),s==="pageload"&&(Mv(qt),t.recordClsOnPageloadSpan||delete qt.cls,t.recordLcpOnPageloadSpan||delete qt.lcp,Object.entries(qt).forEach(([c,u])=>{qo(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Ut()),kv(e,t)),Et=void 0,Ca=void 0,qt={}}function Iv(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function vv(e,t,n,r,o,i){if(Iv(t)||["mark","measure"].includes(t.entryType)&&He(t.name,i))return;let s=En(!1),a=me(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[q]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),Av(l,t),c<=d&&yn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function Av(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&Tt(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(Tt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function Rv(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Ra(e,t,r,n)}),Ra(e,t,"secureConnection",n,"TLS/SSL"),Ra(e,t,"fetch",n,"cache"),Ra(e,t,"domainLookup",n,"DNS"),wv(e,t,n)}function Ra(e,t,n,r,o=n){let i=Cv(n),s=t[i],a=t[`${n}Start`];!a||!s||yn(e,r+me(a),r+me(s),{op:`browser.${o}`,name:t.name,attributes:{[q]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function Cv(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function wv(e,t,n){let r=n+me(t.requestStart),o=n+me(t.responseEnd),i=n+me(t.responseStart);t.responseEnd&&(yn(e,r,o,{op:"browser.request",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}),yn(e,i,o,{op:"browser.response",name:t.name,attributes:{[q]:"auto.ui.browser.metrics"}}))}function Nv(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[q]:"auto.resource.browser.metrics"},u=Wt(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(H.location.origin),Ov(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...wi(t)},l=i+r,p=l+o;yn(e,l,p,{name:n.replace(H.location.origin,""),op:a,attributes:d})}function xv(e){let t=H.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ia(n.rtt)&&(qt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ia(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Ia(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function kv(e,t){Et&&t.recordLcpOnPageloadSpan&&(Et.element&&e.setAttribute("lcp.element",ke(Et.element)),Et.id&&e.setAttribute("lcp.id",Et.id),Et.url&&e.setAttribute("lcp.url",Et.url.trim().slice(0,200)),Et.loadTime!=null&&e.setAttribute("lcp.loadTime",Et.loadTime),Et.renderTime!=null&&e.setAttribute("lcp.renderTime",Et.renderTime),e.setAttribute("lcp.size",Et.size)),Ca?.sources&&t.recordClsOnPageloadSpan&&Ca.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,ke(n.node)))}function Ov(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<Ev||typeof i=="string")&&(t[o]=i)})}function Mv(e){let t=En(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Gl(){return Tn()&&ge()?Nt("element",Lv):()=>{}}var Lv=({entries:e})=>{let t=X(),n=t?Z(t):void 0,r=n?L(n).description:x().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[me(c),"load-time"]:a?[me(a),"render-time"]:[Q(),"entry-emission"],l=s==="image-paint"?me(Math.max(0,(a??0)-(c??0))):0,p={[q]:"auto.ui.browser.elementtiming",[Te]:"ui.elementtiming",[ve]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};pt({name:`element[${i.identifier}]`,attributes:p,startTime:u,onlyIfParent:!0},f=>{f.end(u+l)})})};var Pv=1e3,Gh,Wl,zl;function Ni(e){ze("dom",e),je("dom",Dv)}function Dv(){if(!H.document)return;let e=xe.bind(null,"dom"),t=Wh(e,!0);H.document.addEventListener("click",t,!1),H.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=H[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(he(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=Wh(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),he(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function Uv(e){if(e.type!==Wl)return!1;try{if(!e.target||e.target._sentryId!==zl)return!1}catch{}return!0}function Bv(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Wh(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=Fv(n);if(Bv(n.type,r))return;ye(n,"_sentryCaptured",!0),r&&!r._sentryId&&ye(r,"_sentryId",ce());let o=n.type==="keypress"?"input":n.type;Uv(n)||(e({event:n,name:o,global:t}),Wl=n.type,zl=r?r._sentryId:void 0),clearTimeout(Gh),Gh=H.setTimeout(()=>{zl=void 0,Wl=void 0},Pv)}}function Fv(e){try{return e.target}catch{return null}}var wa;function bn(e){let t="history";ze(t,e),je(t,Hv)}function Hv(){if(H.addEventListener("popstate",()=>{let t=H.location.href,n=wa;if(wa=t,n===t)return;xe("history",{from:n,to:t})}),!rl())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=wa,i=$v(String(r));if(wa=i,o===i)return t.apply(this,n);xe("history",{from:o,to:i})}return t.apply(this,n)}}he(H.history,"pushState",e),he(H.history,"replaceState",e)}function $v(e){try{return new URL(e,H.location.origin).toString()}catch{return e}}var Na={};function uo(e){let t=Na[e];if(t)return t;let n=H[e];if(_i(n))return Na[e]=n.bind(H);let r=H.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){Dt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Na[e]=n.bind(H))}function jl(e){Na[e]=void 0}function Er(...e){return uo("setTimeout")(...e)}var ot="__sentry_xhr_v3__";function yr(e){ze("xhr",e),je("xhr",Gv)}function Gv(){if(!H.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=Q()*1e3,s=De(r[0])?r[0].toUpperCase():void 0,a=Wv(r[1]);if(!s||!a)return t.apply(n,r);n[ot]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[ot];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:Q()*1e3,startTimestamp:i,xhr:n,virtualError:o};xe("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[p,f]=l,m=d[ot];return m&&De(p)&&De(f)&&(m.request_headers[p.toLowerCase()]=f),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[ot];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:Q()*1e3,xhr:n};return xe("xhr",i),t.apply(n,r)}})}function Wv(e){if(De(e))return e;try{return e.toString()}catch{}}function xa(e){return new URLSearchParams(e).toString()}function Tr(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[xa(e)];if(!e)return[void 0]}catch(n){return Dt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Dt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function lo(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function xi(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Dt&&h.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}var ql=[],ka=new Map,zv=60;function Yl(){if(Tn()&&ge()){let t=jv();return()=>{t()}}return()=>{}}var zh={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function jv(){return Ri(qv)}var qv=({metric:e})=>{if(e.value==null)return;let t=me(e.value);if(t>zv)return;let n=e.entries.find(m=>m.duration===e.value&&zh[m.name]);if(!n)return;let{interactionId:r}=n,o=zh[n.name],i=me(ge()+n.startTime),s=X(),a=s?Z(s):void 0,u=(r!=null?ka.get(r):void 0)||a,d=u?L(u).description:x().getScopeData().transactionName,l=ke(n.target),p={[q]:"auto.http.browser.inp",[Te]:`ui.interaction.${o}`,[Pt]:n.duration},f=co({name:l,transaction:d,attributes:p,startTime:i});f&&(f.addEvent("inp",{[Xt]:"millisecond",[Qt]:e.value}),f.end(i+t))};function Vl(){let e=({entries:t})=>{let n=X(),r=n&&Z(n);t.forEach(o=>{if(!Uh(o)||!r)return;let i=o.interactionId;if(i!=null&&!ka.has(i)){if(ql.length>10){let s=ql.shift();ka.delete(s)}ql.push(i),ka.set(i,r)}})};Nt("event",e),Nt("first-input",e)}function fo(e,t=uo("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw jl("fetch"),c}finally{n-=s,r--}}return si(e,o)}var Yv=10,Vv=20,Jv=30,Kv=40,Xv=50;function po(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var Qv=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Zv=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,eA=/\((\S*)(?::(\d+))(?::(\d+))\)/,tA=/at (.+?) ?\(data:(.+?),/,nA=e=>{let t=e.match(tA);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=Qv.exec(e);if(n){let[,o,i,s]=n;return po(o,"?",+i,+s)}let r=Zv.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=eA.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=Vh(r[1]||"?",r[2]);return po(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Jl=[Jv,nA],rA=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,oA=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,iA=e=>{let t=rA.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=oA.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=Vh(o,r),po(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Kl=[Xv,iA],sA=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,aA=e=>{let t=sA.exec(e);return t?po(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},jh=[Kv,aA],cA=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,uA=e=>{let t=cA.exec(e);return t?po(t[2],t[3]||"?",+t[1]):void 0},qh=[Yv,uA],lA=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,dA=e=>{let t=lA.exec(e);return t?po(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},Yh=[Vv,dA],Xl=[Jl,Kl],Oa=Xi(...Xl),Vh=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function Jh(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ue(r)}},i=fA(e);return Ne(o,[i])}function fA(e){return[{type:"user_report"},e]}var A=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var Ma=1024,pA="Breadcrumbs",mA=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:pA,setup(n){t.console&&cr(_A(n)),t.dom&&Ni(gA(n,t.dom)),t.xhr&&yr(SA(n)),t.fetch&&fr(EA(n)),t.history&&bn(yA(n)),t.sentry&&n.on("beforeSendEvent",hA(n))}}}),La=mA;function hA(e){return function(n){T()===e&&rt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Kt(n)},{event:n})}}function gA(e,t){return function(r){if(T()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Ma&&(A&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Ma}, but a value of ${a} was configured. Sentry will use ${Ma} instead.`),a=Ma),typeof s=="string"&&(s=[s]);try{let u=r.event,d=TA(u)?u.target:u;o=ke(d,{keyAttrs:s,maxStringLength:a}),i=Lo(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),rt(c,{event:r.event,name:r.name,global:r.global})}}function _A(e){return function(n){if(T()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:ur(n.level),message:Xn(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Xn(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;rt(r,{input:n.args,level:n.level})}}function SA(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[ot];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},p={category:"xhr",data:d,type:"http",level:Zs(c)};e.emit("beforeOutgoingRequestBreadcrumb",p,l),rt(p,l)}}function EA(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),rt(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:Zs(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),rt(c,a)}}}function yA(e){return function(n){if(T()!==e)return;let r=n.from,o=n.to,i=Wt(k.location.href),s=r?Wt(r):void 0,a=Wt(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),rt({category:"navigation",data:{from:r,to:o}})}}function TA(e){return!!e&&!!e.target}var bA=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],IA="BrowserApiErrors",vA=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:IA,setupOnce(){t.setTimeout&&he(k,"setTimeout",Kh),t.setInterval&&he(k,"setInterval",Kh),t.requestAnimationFrame&&he(k,"requestAnimationFrame",AA),t.XMLHttpRequest&&"XMLHttpRequest"in k&&he(XMLHttpRequest.prototype,"send",RA);let n=t.eventTarget;n&&(Array.isArray(n)?n:bA).forEach(o=>CA(o,t))}}}),Pa=vA;function Kh(e){return function(...t){let n=t[0];return t[0]=gr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${ut(e)}`}}),e.apply(this,t)}}function AA(e){return function(t){return e.apply(this,[gr(t,{mechanism:{data:{handler:ut(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function RA(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&he(n,o,function(i){let s={mechanism:{data:{handler:ut(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=Qn(i);return a&&(s.mechanism.data.handler=ut(a)),gr(i,s)})}),e.apply(this,t)}}function CA(e,t){let r=k[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(he(r,"addEventListener",function(o){return function(i,s,a){try{wA(s)&&(s.handleEvent=gr(s.handleEvent,{mechanism:{data:{handler:ut(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&NA(this,i,s),o.apply(this,[i,gr(s,{mechanism:{data:{handler:ut(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),he(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function wA(e){return typeof e.handleEvent=="function"}function NA(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var Da=()=>({name:"BrowserSession",setupOnce(){if(typeof k.document>"u"){A&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Dr({ignoreDuration:!0}),Ur(),bn(({from:e,to:t})=>{e!==void 0&&e!==t&&(Dr({ignoreDuration:!0}),Ur())})}});var xA="GlobalHandlers",kA=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:xA,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(OA(n),Xh("onerror")),t.onunhandledrejection&&(MA(n),Xh("onunhandledrejection"))}}}),Ua=kA;function OA(e){ko(t=>{let{stackParser:n,attachStacktrace:r}=Qh();if(T()!==e||Al())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=DA(ma(n,c||o,void 0,r,!1),i,s,a);u.level="error",mn(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function MA(e){Oo(t=>{let{stackParser:n,attachStacktrace:r}=Qh();if(T()!==e||Al())return;let o=LA(t),i=Tt(o)?PA(o):ma(n,o,void 0,r,!0);i.level="error",mn(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function LA(e){if(Tt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function PA(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function DA(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=UA(t)??nt();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function Xh(e){A&&h.log(`Global Handler attached: ${e}`)}function Qh(){return T()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function UA(e){if(!(!De(e)||e.length===0)){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e.slice(0,1024)}}var Ba=()=>({name:"HttpContext",preprocessEvent(e){if(!k.navigator&&!k.location&&!k.document)return;let t=Ii(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var BA="cause",FA=5,HA="LinkedErrors",$A=((e={})=>{let t=e.limit||FA,n=e.key||BA;return{name:HA,preprocessEvent(r,o,i){let s=i.getOptions();Mu(no,s.stackParser,n,t,r,o)}}}),Fa=$A;function Zh(){return GA()?(A&&We(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function GA(){if(typeof k.window>"u")return!1;let e=k;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=nt(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(k===k.top&&r.some(i=>n.startsWith(`${i}://`)))}function Ql(e){return[li(),ui(),Pa(),La(),Ua(),Fa(),di(),Ba(),Da()]}function eg(e={}){let t=!e.skipBrowserExtensionCheck&&Zh(),n={...e,enabled:t?!1:e.enabled,stackParser:Ic(e.stackParser||Oa),integrations:pu({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?Ql():e.defaultIntegrations}),transport:e.transport||fo};return Tu(ro,n)}function tg(){}function ng(e){e()}function rg(e={}){let t=k.document,n=t?.head||t?.body;if(!n){A&&h.error("[showReportDialog] Global document not defined");return}let r=x(),i=T()?.getDsn();if(!i){A&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Qo()},a=k.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=fu(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{k.removeEventListener("message",d)}};k.addEventListener("message",d)}n.appendChild(a)}var WA=v,zA="ReportingObserver",og=new WeakMap,jA=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(og.has(T()))for(let o of r)Le(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Un(`${s}: ${a}`)})}return{name:zA,setupOnce(){if(!ol())return;new WA.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){og.set(r,!0)}}}),ig=jA;var qA="HttpClient",YA=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:qA,setup(n){tR(n,t),nR(n,t)}}}),ag=YA;function VA(e,t,n,r,o){if(ug(e,n.status,n.url)){let i=rR(t,r),s,a,c,u;dg()&&([s,c]=sg("Cookie",i),[a,u]=sg("Set-Cookie",n));let d=lg({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});mn(d)}}function sg(e,t){let n=XA(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=cg(o))}catch{}return[n,r]}function JA(e,t,n,r,o){if(ug(e,t.status,t.responseURL)){let i,s,a;if(dg()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=cg(u))}catch{}try{a=QA(t)}catch{}i=r}let c=lg({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});mn(c)}}function KA(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function cg(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function XA(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function QA(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function ZA(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function eR(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function tR(e,t){Si()&&fr(n=>{if(T()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&VA(t,a,r,c,i||s)},!1)}function nR(e,t){"XMLHttpRequest"in v&&yr(n=>{if(T()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[ot];if(!s)return;let{method:a,request_headers:c}=s;try{JA(t,i,a,c,r||o)}catch(u){A&&h.warn("Error while extracting response event form XHR response",u)}})}function ug(e,t,n){return eR(e.failedRequestStatusCodes,t)&&ZA(e.failedRequestTargets,n)&&!ci(n,T())}function lg(e){let t=T(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:KA(e.responseHeaders)}}};return Ye(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function rR(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function dg(){let e=T();return e?!!e.getOptions().sendDefaultPii:!1}var Zl=v,oR=7,iR="ContextLines",sR=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:oR;return{name:iR,processEvent(n){return aR(n,t)}}}),fg=sR;function aR(e,t){let n=Zl.document,r=Zl.location&&ai(Zl.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>cR(u,s,r,t)))}),e}function cR(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Mc(t,e,r),e}var uR="GraphQLClient",lR=(e=>({name:uR,setup(t){dR(t,e),fR(t,e)}}));function dR(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=L(n).data||{};if(!(i[Te]==="http.client"))return;let c=i[Bc]||i["http.url"],u=i[Uc]||i["http.method"];if(!De(c)||!De(u))return;let{endpoints:d}=t,l=He(c,d),p=mg(r);if(l&&p){let f=hg(p);if(f){let m=pg(f);n.updateName(`${u} ${c} (${m})`),n.setAttribute("graphql.document",p)}}})}function fR(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,p=He(d,l),f=mg(r);if(p&&s&&f){let m=hg(f);if(!s.graphql&&m){let g=pg(m);s["graphql.document"]=m.query,s["graphql.operation"]=g}}}})}function pg(e){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=pR(t);return r?`${o} ${r}`:`${o}`}function mg(e){let t="xhr"in e,n;if(t){let r=e.xhr[ot];n=r&&Tr(r.body)[0]}else{let r=lo(e.input);n=Tr(r)[0]}return n}function pR(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function hg(e){let t;try{let n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}var gg=lR;var Se=v,wd="sentryReplaySession",mR="replay_event",Nd="Unable to send Replay",hR=3e5,gR=9e5,_R=5e3,SR=5500,ER=6e4,yR=5e3,TR=3,_g=15e4,Ha=5e3,bR=3e3,IR=300,xd=2e7,vR=4999,AR=15e3,Sg=36e5,RR=Object.defineProperty,CR=(e,t,n)=>t in e?RR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eg=(e,t,n)=>CR(e,typeof t!="symbol"?t+"":t,n),Me=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Me||{});function wR(e){return e.nodeType===e.ELEMENT_NODE}function Mi(e){return e?.host?.shadowRoot===e}function Li(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function NR(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function xR(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ja(e){try{let t=e.rules||e.cssRules;return t?NR(Array.from(t,$g).join("")):null}catch{return null}}function kR(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function $g(e){let t;if(MR(e))try{t=ja(e.styleSheet)||xR(e)}catch{}else if(LR(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=kR(e)),r&&(n=OR(n)),r||o)return n}return t||e.cssText}function OR(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function MR(e){return"styleSheet"in e}function LR(e){return"selectorText"in e}var qa=class{constructor(){Eg(this,"idNodeMap",new Map),Eg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function PR(){return new qa}function rc({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Di({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function To(e){return e.toLowerCase()}function id(e){return e.toUpperCase()}var yg="__rrweb_original__";function DR(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=yg in i?i[yg]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function kd(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?To(t):null}function Ya(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Gg(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var Tg={};function Wg(e){let t=Tg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Tg[e]=r.bind(window)}function sd(...e){return Wg("setTimeout")(...e)}function zg(...e){return Wg("clearTimeout")(...e)}function jg(e){try{return e.contentDocument}catch{}}var UR=1,BR=new RegExp("[^a-z0-9-_:]"),Ui=-2;function Od(){return UR++}function FR(e){if(e instanceof HTMLFormElement)return"form";let t=To(e.tagName);return BR.test(t)?"div":t}function HR(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var mo,bg,$R=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,GR=/^(?:[a-z+]+:)?\/\//i,WR=/^www\..*/i,zR=/^(data:)([^,]*),(.*)/i;function Va(e,t){return(e||"").replace($R,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(GR.test(c)||WR.test(c))return`url(${u}${c}${u})`;if(zR.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${HR(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let p of l)p!=="."&&(p===".."?d.pop():d.push(p));return`url(${u}${d.join("/")}${u})`})}var jR=/^[^ \t\n\r\u000c]+/,qR=/^[, \t\n\r\u000c]+/;function YR(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(qR),!(n>=t.length);){let i=r(jR);if(i.slice(-1)===",")i=_o(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=_o(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var Ig=new WeakMap;function _o(e,t){return!t||t.trim()===""?t:oc(e,t)}function VR(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function oc(e,t){let n=Ig.get(e);if(n||(n=e.createElement("a"),Ig.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function qg(e,t,n,r,o,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?_o(e,r):n==="srcset"?YR(e,r):n==="style"?Va(r,oc(e)):t==="object"&&n==="data"?_o(e,r):typeof i=="function"?i(n,r,o):r)}function Yg(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function JR(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function KR(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function br(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:br(e.parentNode,t,n,r+1)}function So(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(KR(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function bo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=br(s,So(r,o)),c<0)return!0;a=br(s,So(t,n),c>=0?c:1/0)}else{if(a=br(s,So(t,n)),a<0)return!1;c=br(s,So(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function XR(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=sd(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{zg(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return sd(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function QR(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=sd(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{zg(i),r=!0,t()})}function ZR(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:m={},maskTextFn:g,maskInputFn:_,dataURLOptions:S={},inlineImages:y,recordCanvas:D,keepIframeSrcFn:R,newlyAddedElement:U=!1}=t,N=e0(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Me.Document,childNodes:[],compatMode:e.compatMode}:{type:Me.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Me.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:N};case e.ELEMENT_NODE:return n0(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:m,maskInputFn:_,dataURLOptions:S,inlineImages:y,recordCanvas:D,keepIframeSrcFn:R,newlyAddedElement:U,rootId:N,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p});case e.TEXT_NODE:return t0(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:m,maskInputFn:_,rootId:N});case e.CDATA_SECTION_NODE:return{type:Me.CDATA,textContent:"",rootId:N};case e.COMMENT_NODE:return{type:Me.Comment,textContent:e.textContent||"",rootId:N};default:return!1}}function e0(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function t0(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,p=e.textContent,f=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,g=l==="TEXTAREA"?!0:void 0;if(f&&p){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(p=ja(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}p=Va(p,oc(t.doc))}m&&(p="SCRIPT_PLACEHOLDER");let _=bo(e,r,i,o,s,n);if(!f&&!m&&!g&&p&&_&&(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),g&&p&&(c.textarea||_)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),l==="OPTION"&&p){let S=rc({type:null,tagName:l,maskInputOptions:c});p=Di({isMasked:bo(e,r,i,o,s,S),element:e,value:p,maskInputFn:u})}return{type:Me.Text,textContent:p||"",isStyle:f,rootId:d}}function n0(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:m=!1,rootId:g,maskTextClass:_,unmaskTextClass:S,maskTextSelector:y,unmaskTextSelector:D}=t,R=JR(e,r,o,i),U=FR(e),N={},b=e.attributes.length;for(let I=0;I<b;I++){let O=e.attributes[I];O.name&&!Yg(U,O.name,O.value)&&(N[O.name]=qg(n,U,To(O.name),O.value,e,c))}if(U==="link"&&s){let I=Array.from(n.styleSheets).find($=>$.href===e.href),O=null;I&&(O=ja(I)),O&&(N.rel=null,N.href=null,N.crossorigin=null,N._cssText=Va(O,I.href))}if(U==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let I=ja(e.sheet);I&&(N._cssText=Va(I,oc(n)))}if(U==="input"||U==="textarea"||U==="select"||U==="option"){let I=e,O=kd(I),$=Ya(I,id(U),O),w=I.checked;if(O!=="submit"&&O!=="button"&&$){let M=bo(I,_,y,S,D,rc({type:O,tagName:id(U),maskInputOptions:a}));N.value=Di({isMasked:M,element:I,value:$,maskInputFn:u})}w&&(N.checked=w)}if(U==="option"&&(e.selected&&!a.select?N.selected=!0:delete N.selected),U==="canvas"&&p){if(e.__context==="2d")DR(e)||(N.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let I=e.toDataURL(d.type,d.quality),O=n.createElement("canvas");O.width=e.width,O.height=e.height;let $=O.toDataURL(d.type,d.quality);I!==$&&(N.rr_dataURL=I)}}if(U==="img"&&l){mo||(mo=n.createElement("canvas"),bg=mo.getContext("2d"));let I=e,O=I.currentSrc||I.getAttribute("src")||"<unknown-src>",$=I.crossOrigin,w=()=>{I.removeEventListener("load",w);try{mo.width=I.naturalWidth,mo.height=I.naturalHeight,bg.drawImage(I,0,0),N.rr_dataURL=mo.toDataURL(d.type,d.quality)}catch(M){if(I.crossOrigin!=="anonymous"){I.crossOrigin="anonymous",I.complete&&I.naturalWidth!==0?w():I.addEventListener("load",w);return}else console.warn(`Cannot inline img src=${O}! Error: ${M}`)}I.crossOrigin==="anonymous"&&($?N.crossOrigin=$:I.removeAttribute("crossorigin"))};I.complete&&I.naturalWidth!==0?w():I.addEventListener("load",w)}if((U==="audio"||U==="video")&&(N.rr_mediaState=e.paused?"paused":"played",N.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(N.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(N.rr_scrollTop=e.scrollTop)),R){let{width:I,height:O}=e.getBoundingClientRect();N={class:N.class,rr_width:`${I}px`,rr_height:`${O}px`}}U==="iframe"&&!f(N.src)&&(!R&&!jg(e)&&(N.rr_src=N.src),delete N.src);let C;try{customElements.get(U)&&(C=!0)}catch{}return{type:Me.Element,tagName:U,attributes:N,childNodes:[],isSVG:VR(e)||void 0,needBlock:R,rootId:g,isCustom:C}}function _e(e){return e==null?"":e.toLowerCase()}function r0(e,t){if(t.comment&&e.type===Me.Comment)return!0;if(e.type===Me.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Gg(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(_e(e.attributes.name).match(/^msapplication-tile(image|color)$/)||_e(e.attributes.name)==="application-name"||_e(e.attributes.rel)==="icon"||_e(e.attributes.rel)==="apple-touch-icon"||_e(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&_e(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(_e(e.attributes.property).match(/^(og|twitter|fb):/)||_e(e.attributes.name).match(/^(og|twitter):/)||_e(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(_e(e.attributes.name)==="robots"||_e(e.attributes.name)==="googlebot"||_e(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(_e(e.attributes.name)==="author"||_e(e.attributes.name)==="generator"||_e(e.attributes.name)==="framework"||_e(e.attributes.name)==="publisher"||_e(e.attributes.name)==="progid"||_e(e.attributes.property).match(/^article:/)||_e(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(_e(e.attributes.name)==="google-site-verification"||_e(e.attributes.name)==="yandex-verification"||_e(e.attributes.name)==="csrf-token"||_e(e.attributes.name)==="p:domain_verify"||_e(e.attributes.name)==="verify-v1"||_e(e.attributes.name)==="verification"||_e(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Eo(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOMOptions:y,dataURLOptions:D={},inlineImages:R=!1,recordCanvas:U=!1,onSerialize:N,onIframeLoad:b,iframeLoadTimeout:C=5e3,onBlockedImageLoad:I,onStylesheetLoad:O,stylesheetLoadTimeout:$=5e3,keepIframeSrcFn:w=()=>!1,newlyAddedElement:M=!1}=t,{preserveWhiteSpace:Y=!0}=t,ee=ZR(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,dataURLOptions:D,inlineImages:R,recordCanvas:U,keepIframeSrcFn:w,newlyAddedElement:M});if(!ee)return console.warn(e,"not serialized"),null;let te;r.hasNode(e)?te=r.getId(e):r0(ee,y)||!Y&&ee.type===Me.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?te=Ui:te=Od();let G=Object.assign(ee,{id:te});if(r.add(e,G),te===Ui)return null;N&&N(e);let B=!p;if(G.type===Me.Element){B=B&&!G.needBlock;let F=e.shadowRoot;F&&Li(F)&&(G.isShadowHost=!0)}if((G.type===Me.Document||G.type===Me.Element)&&B){y.headWhitespace&&G.type===Me.Element&&G.tagName==="head"&&(Y=!1);let F={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOMOptions:y,dataURLOptions:D,inlineImages:R,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:N,onIframeLoad:b,iframeLoadTimeout:C,onBlockedImageLoad:I,onStylesheetLoad:O,stylesheetLoadTimeout:$,keepIframeSrcFn:w},P=e.childNodes?Array.from(e.childNodes):[];for(let K of P){let le=Eo(K,F);le&&G.childNodes.push(le)}if(wR(e)&&e.shadowRoot)for(let K of Array.from(e.shadowRoot.childNodes)){let le=Eo(K,F);le&&(Li(e.shadowRoot)&&(le.isShadow=!0),G.childNodes.push(le))}}if(e.parentNode&&Mi(e.parentNode)&&Li(e.parentNode)&&(G.isShadow=!0),G.type===Me.Element&&G.tagName==="iframe"&&!G.needBlock&&XR(e,()=>{let F=jg(e);if(F&&b){let P=Eo(F,{doc:F,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOMOptions:y,dataURLOptions:D,inlineImages:R,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:N,onIframeLoad:b,iframeLoadTimeout:C,onStylesheetLoad:O,stylesheetLoadTimeout:$,keepIframeSrcFn:w});P&&b(e,P)}},C),G.type===Me.Element&&G.tagName==="img"&&!e.complete&&G.needBlock){let F=e,P=()=>{if(F.isConnected&&!F.complete&&I)try{let K=F.getBoundingClientRect();K.width>0&&K.height>0&&I(F,G,K)}catch{}F.removeEventListener("load",P)};F.isConnected&&F.addEventListener("load",P)}return G.type===Me.Element&&G.tagName==="link"&&typeof G.attributes.rel=="string"&&(G.attributes.rel==="stylesheet"||G.attributes.rel==="preload"&&typeof G.attributes.href=="string"&&Gg(G.attributes.href)==="css")&&QR(e,()=>{if(O){let F=Eo(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOMOptions:y,dataURLOptions:D,inlineImages:R,recordCanvas:U,preserveWhiteSpace:Y,onSerialize:N,onIframeLoad:b,iframeLoadTimeout:C,onStylesheetLoad:O,stylesheetLoadTimeout:$,keepIframeSrcFn:w});F&&O(e,F)}},$),G.type===Me.Element&&delete G.needBlock,G}function o0(e,t){let{mirror:n=new qa,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOM:y=!1,dataURLOptions:D,preserveWhiteSpace:R,onSerialize:U,onIframeLoad:N,iframeLoadTimeout:b,onBlockedImageLoad:C,onStylesheetLoad:I,stylesheetLoadTimeout:O,keepIframeSrcFn:$=()=>!1}=t||{};return Eo(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:S,slimDOMOptions:y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:y==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:y===!1?{}:y,dataURLOptions:D,inlineImages:p,recordCanvas:f,preserveWhiteSpace:R,onSerialize:U,onIframeLoad:N,iframeLoadTimeout:b,onBlockedImageLoad:C,onStylesheetLoad:I,stylesheetLoadTimeout:O,keepIframeSrcFn:$,newlyAddedElement:!1})}function st(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var ho=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,vg={map:{},getId(){return console.error(ho),-1},getNode(){return console.error(ho),null},removeNodeFromMap(){console.error(ho)},has(){return console.error(ho),!1},reset(){console.error(ho)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(vg=new Proxy(vg,{get(e,t,n){return t==="map"&&console.error(ho),Reflect.get(e,t,n)}}));function Bi(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(l0(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=ic(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Vg(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){ic(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Vg(e,t,i||{},!0)}function Md(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Ja=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Ja=()=>new Date().getTime());function Jg(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Kg(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Xg(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Qg(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function xt(e,t,n,r,o){if(!e)return!1;let i=Qg(e);if(!i)return!1;let s=So(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=br(i,s),c=-1;return a<0?!1:(r&&(c=br(i,So(null,r))),a>-1&&c<0?!0:a<c)}function i0(e,t){return t.getId(e)!==-1}function ed(e,t){return t.getId(e)===Ui}function Zg(e,t){if(Mi(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Zg(e.parentNode,t):!0:!0}function ad(e){return!!e.changedTouches}function s0(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function e_(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function t_(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function cd(e){return!!e?.shadowRoot}var ud=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function n_(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function a0(e){let t=e,n;for(;n=n_(t);)t=n;return t}function c0(e){let t=e.ownerDocument;if(!t)return!1;let n=a0(e);return t.contains(n)}function r_(e){let t=e.ownerDocument;return t?t.contains(e)||c0(e):!1}var Ag={};function Ld(e){let t=Ag[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Ag[e]=r.bind(window)}function u0(...e){return Ld("requestAnimationFrame")(...e)}function ic(...e){return Ld("setTimeout")(...e)}function l0(...e){return Ld("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),j=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(j||{}),it=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(it||{}),In=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(In||{}),go=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(go||{});function Pd(e){try{return e.contentDocument}catch{}}function d0(e){try{return e.contentWindow}catch{}}function Rg(e){return"__ln"in e}var ld=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Rg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Rg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Cg=(e,t)=>`${e}@${t}`,dd=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new ld,o=c=>{let u=c,d=Ui;for(;d===Ui;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!r_(c))return;let u=Mi(c.parentNode)?this.mirror.getId(n_(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=Eo(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{e_(p,this.mirror)&&!xt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),t_(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),cd(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,f)=>{xt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,f),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,f)=>{this.stylesheetManager.attachLinkElement(p,f)},onBlockedImageLoad:(p,f,{width:m,height:g})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:f.id,attributes:{style:{width:`${m}px`,height:`${g}px`}}}]})}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)wg(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Ng(this.droppedSet,c)&&!wg(this.removes,c,this.mirror)||Ng(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let f=d.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=f.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!ed(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:bo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Qg(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=kd(n),a=n.tagName;o=Ya(n,a,s);let c=rc({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=bo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Di({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!Pd(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Yg(n.tagName,r)&&(i.attributes[r]=qg(this.doc,To(n.tagName),To(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=Mi(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ed(n,this.mirror)||!i0(n,this.mirror)||(this.addedSet.has(n)?(fd(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Zg(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Cg(r,o)]?fd(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Mi(t.target)&&Li(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(ed(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Cg(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);xt(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),cd(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function fd(e,t){e.delete(t),t.childNodes?.forEach(n=>fd(e,n))}function wg(e,t,n){return e.length===0?!1:f0(e,t,n)}function f0(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function Ng(e,t){return e.size===0?!1:o_(e,t)}function o_(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:o_(e,n):!1}var Pi;function p0(e){Pi=e}function m0(){Pi=void 0}var oe=e=>Pi?(...n)=>{try{return e(...n)}catch(r){if(Pi&&Pi(r)===!0)return()=>{};throw r}}:e,yo=[];function Wi(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function i_(e,t){let n=new dd;yo.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(oe(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function h0({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=Bi(oe(l=>{let p=Date.now()-a;e(s.map(f=>(f.timeOffset-=p,f)),l),s=[],a=null}),i),u=oe(Bi(oe(l=>{let p=Wi(l),{clientX:f,clientY:m}=ad(l)?l.changedTouches[0]:l;a||(a=Ja()),s.push({x:f,y:m,id:r.getId(p),timeOffset:Ja()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?j.Drag:l instanceof MouseEvent?j.MouseMove:j.TouchMove)}),o,{trailing:!1})),d=[st("mousemove",u,n),st("touchmove",u,n),st("drag",u,n)];return oe(()=>{d.forEach(l=>l())})}function g0({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>p=>{let f=Wi(p);if(xt(f,r,o,i,!0))return;let m=null,g=l;if("pointerType"in p){switch(p.pointerType){case"mouse":m=In.Mouse;break;case"touch":m=In.Touch;break;case"pen":m=In.Pen;break}m===In.Touch?it[l]===it.MouseDown?g="TouchStart":it[l]===it.MouseUp&&(g="TouchEnd"):In.Pen}else ad(p)&&(m=In.Touch);m!==null?(u=m,(g.startsWith("Touch")&&m===In.Touch||g.startsWith("Mouse")&&m===In.Mouse)&&(m=null)):it[l]===it.Click&&(m=u,u=null);let _=ad(p)?p.changedTouches[0]:p;if(!_)return;let S=n.getId(f),{clientX:y,clientY:D}=_;oe(e)({type:it[g],id:S,x:y,y:D,...m!==null&&{pointerType:m}})};return Object.keys(it).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let p=To(l),f=d(l);if(window.PointerEvent)switch(it[l]){case it.MouseDown:case it.MouseUp:p=p.replace("mouse","pointer");break;case it.TouchStart:case it.TouchEnd:return}c.push(st(p,f,t))}),oe(()=>{c.forEach(l=>l())})}function s_({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=oe(Bi(oe(c=>{let u=Wi(c);if(!u||xt(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=Jg(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return st("scroll",a,t)}function _0({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=oe(Bi(oe(()=>{let i=Kg(),s=Xg();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return st("resize",o,t)}var S0=["INPUT","TEXTAREA","SELECT"],xg=new WeakMap;function E0({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g}){function _(b){let C=Wi(b),I=b.isTrusted,O=C&&id(C.tagName);if(O==="OPTION"&&(C=C.parentElement),!C||!O||S0.indexOf(O)<0||xt(C,r,o,i,!0))return;let $=C;if($.classList.contains(s)||a&&$.matches(a))return;let w=kd(C),M=Ya($,O,w),Y=!1,ee=rc({maskInputOptions:c,tagName:O,type:w}),te=bo(C,p,m,f,g,ee);(w==="radio"||w==="checkbox")&&(Y=C.checked),M=Di({isMasked:te,element:C,value:M,maskInputFn:u}),S(C,l?{text:M,isChecked:Y,userTriggered:I}:{text:M,isChecked:Y});let G=C.name;w==="radio"&&G&&Y&&t.querySelectorAll(`input[type="radio"][name="${G}"]`).forEach(B=>{if(B!==C){let F=Di({isMasked:te,element:B,value:Ya(B,O,w),maskInputFn:u});S(B,l?{text:F,isChecked:!Y,userTriggered:!1}:{text:F,isChecked:!Y})}})}function S(b,C){let I=xg.get(b);if(!I||I.text!==C.text||I.isChecked!==C.isChecked){xg.set(b,C);let O=n.getId(b);oe(e)({...C,id:O})}}let D=(d.input==="last"?["change"]:["input","change"]).map(b=>st(b,oe(_),t)),R=t.defaultView;if(!R)return()=>{D.forEach(b=>b())};let U=R.Object.getOwnPropertyDescriptor(R.HTMLInputElement.prototype,"value"),N=[[R.HTMLInputElement.prototype,"value"],[R.HTMLInputElement.prototype,"checked"],[R.HTMLSelectElement.prototype,"value"],[R.HTMLTextAreaElement.prototype,"value"],[R.HTMLSelectElement.prototype,"selectedIndex"],[R.HTMLOptionElement.prototype,"selected"]];return U&&U.set&&D.push(...N.map(b=>Vg(b[0],b[1],{set(){oe(_)({target:this,isTrusted:!1})}},!1,R))),oe(()=>{D.forEach(b=>b())})}function Ka(e){let t=[];function n(r,o){if($a("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||$a("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||$a("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||$a("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function jn(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function y0({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:oe((d,l,p)=>{let[f,m]=p,{id:g,styleId:_}=jn(l,t,n.styleMirror);return(g&&g!==-1||_&&_!==-1)&&e({id:g,styleId:_,adds:[{rule:f,index:m}]}),d.apply(l,p)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:g}=jn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:f}]}),d.apply(l,p)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:g}=jn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replace:f}),d.apply(l,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:oe((d,l,p)=>{let[f]=p,{id:m,styleId:g}=jn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replaceSync:f}),d.apply(l,p)})}));let c={};Ga("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ga("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ga("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ga("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:oe((p,f,m)=>{let[g,_]=m,{id:S,styleId:y}=jn(f.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||y&&y!==-1)&&e({id:S,styleId:y,adds:[{rule:g,index:[...Ka(f),_||0]}]}),p.apply(f,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:oe((p,f,m)=>{let[g]=m,{id:_,styleId:S}=jn(f.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||S&&S!==-1)&&e({id:_,styleId:S,removes:[{index:[...Ka(f),g]}]}),p.apply(f,m)})})}),oe(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function a_({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),oe(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function T0({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:oe((a,c,u)=>{let[d,l,p]=u;if(n.has(d))return i.apply(c,[d,l,p]);let{id:f,styleId:m}=jn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:d,value:l,priority:p},index:Ka(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:oe((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:p}=jn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||p&&p!==-1)&&e({id:l,styleId:p,remove:{property:d},index:Ka(c.parentRule)}),a.apply(c,u)})}),oe(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function b0({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=oe(u=>Bi(oe(d=>{let l=Wi(d);if(!l||xt(l,t,n,r,!0))return;let{currentTime:p,volume:f,muted:m,playbackRate:g}=l;e({type:u,id:o.getId(l),currentTime:p,volume:f,muted:m,playbackRate:g})}),i.media||500)),c=[st("play",a(go.Play),s),st("pause",a(go.Pause),s),st("seeked",a(go.Seeked),s),st("volumechange",a(go.VolumeChange),s),st("ratechange",a(go.RateChange),s)];return oe(()=>{c.forEach(u=>u())})}function I0({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=Md(t.fonts,"add",function(a){return function(c){return ic(oe(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),oe(()=>{r.forEach(a=>a())})}function v0(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=oe(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let p=0;p<l;p++){let f=u.getRangeAt(p),{startContainer:m,startOffset:g,endContainer:_,endOffset:S}=f;xt(m,r,o,i,!0)||xt(_,r,o,i,!0)||d.push({start:n.getId(m),startOffset:g,end:n.getId(_),endOffset:S})}s({ranges:d})});return c(),st("selectionchange",c)}function A0({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Md(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function R0(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=i_(e,e.doc));let o=h0(e),i=g0(e),s=s_(e),a=_0(e,{win:n}),c=E0(e),u=b0(e),d=()=>{},l=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(d=y0(e,{win:n}),l=a_(e,e.doc),p=T0(e,{win:n}),e.collectFonts&&(f=I0(e)));let m=v0(e),g=A0(e),_=[];for(let S of e.plugins)_.push(S.observer(S.callback,n,S.options));return oe(()=>{yo.forEach(S=>S.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),p(),f(),m(),g(),_.forEach(S=>S())})}function $a(e){return typeof window[e]<"u"}function Ga(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Fi=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},pd=class{constructor(){this.crossOriginIframeMirror=new Fi(Od),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},md=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Fi(Od),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Fi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=Pd(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:j.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case j.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case j.Drag:case j.TouchMove:case j.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case j.ViewportResize:return!1;case j.MediaInteraction:case j.MouseInteraction:case j.Scroll:case j.CanvasMutation:case j.Input:return this.replaceIds(n.data,t,["id"]),n;case j.StyleSheetRule:case j.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case j.Font:return n;case j.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case j.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Me.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},hd=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},gd=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Li(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=i_({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(s_({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),ic(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(a_({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=Pd(t),r=d0(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Md(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&r_(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ki=0;ki<kg.length;ki++)C0[kg.charCodeAt(ki)]=ki;var ki,Xa=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},_d=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new ud,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:$g(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},Sd=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,u0(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Ae,Qa;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var Yt=PR();function vn(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:_,slimDOMOptions:S,maskAttributeFn:y,maskInputFn:D,maskTextFn:R,maxCanvasSize:U=null,packFn:N,sampling:b={},dataURLOptions:C={},mousemoveWait:I,recordDOM:O=!0,recordCanvas:$=!1,recordCrossOriginIframes:w=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:Y=!1,collectFonts:ee=!1,inlineImages:te=!1,plugins:G,keepIframeSrcFn:B=()=>!1,ignoreCSSAttributes:F=new Set([]),errorHandler:P,onMutation:K,getCanvasManager:le}=e;p0(P);let Ee=w?window.parent===window:!0,Re=!1;if(!Ee)try{window.parent.document&&(Re=!1)}catch{Re=!0}if(Ee&&!t)throw new Error("emit function is required");if(!Ee&&!Re)return()=>{};I!==void 0&&b.mousemove===void 0&&(b.mousemove=I),Yt.reset();let Ze=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},An=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};s0();let et,at=0,Vt=ne=>{for(let yt of G||[])yt.eventProcessor&&(ne=yt.eventProcessor(ne));return N&&!Re&&(ne=N(ne)),ne};Ae=(ne,yt)=>{let re=ne;if(re.timestamp=Ja(),yo[0]?.isFrozen()&&re.type!==J.FullSnapshot&&!(re.type===J.IncrementalSnapshot&&re.data.source===j.Mutation)&&yo.forEach(Fe=>Fe.unfreeze()),Ee)t?.(Vt(re),yt);else if(Re){let Fe={type:"rrweb",event:Vt(re),origin:window.location.origin,isCheckout:yt};window.parent.postMessage(Fe,"*")}if(re.type===J.FullSnapshot)et=re,at=0;else if(re.type===J.IncrementalSnapshot){if(re.data.source===j.Mutation&&re.data.isAttachIframe)return;at++;let Fe=r&&at>=r,ie=n&&et&&re.timestamp-et.timestamp>n;(Fe||ie)&&Jt(!0)}};let Rn=ne=>{Ae({type:J.IncrementalSnapshot,data:{source:j.Mutation,...ne}})},wo=ne=>Ae({type:J.IncrementalSnapshot,data:{source:j.Scroll,...ne}}),Ji=ne=>Ae({type:J.IncrementalSnapshot,data:{source:j.CanvasMutation,...ne}}),No=ne=>Ae({type:J.IncrementalSnapshot,data:{source:j.AdoptedStyleSheet,...ne}}),ue=new _d({mutationCb:Rn,adoptedStyleSheetCb:No}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new pd:new md({mirror:Yt,mutationCb:Rn,stylesheetManager:ue,recordCrossOriginIframes:w,wrappedEmit:Ae});for(let ne of G||[])ne.getMirror&&ne.getMirror({nodeMirror:Yt,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});let kt=new Sd,Be=N0(le,{mirror:Yt,win:window,mutationCb:ne=>Ae({type:J.IncrementalSnapshot,data:{source:j.CanvasMutation,...ne}}),recordCanvas:$,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:U,sampling:b.canvas,dataURLOptions:C,errorHandler:P}),Ge=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new hd:new gd({mutationCb:Rn,scrollCb:wo,bypassOptions:{onMutation:K,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:Ze,dataURLOptions:C,maskAttributeFn:y,maskTextFn:R,maskInputFn:D,recordCanvas:$,inlineImages:te,sampling:b,slimDOMOptions:An,iframeManager:be,stylesheetManager:ue,canvasManager:Be,keepIframeSrcFn:B,processedNodeManager:kt},mirror:Yt}),Jt=(ne=!1)=>{if(!O)return;Ae({type:J.Meta,data:{href:window.location.href,width:Xg(),height:Kg()}},ne),ue.reset(),Ge.init(),yo.forEach(re=>re.lock());let yt=o0(document,{mirror:Yt,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskAllInputs:Ze,maskAttributeFn:y,maskInputFn:D,maskTextFn:R,slimDOM:An,dataURLOptions:C,recordCanvas:$,inlineImages:te,onSerialize:re=>{e_(re,Yt)&&be.addIframe(re),t_(re,Yt)&&ue.trackLinkElement(re),cd(re)&&Ge.addShadowRoot(re.shadowRoot,document)},onIframeLoad:(re,Fe)=>{be.attachIframe(re,Fe),re.contentWindow&&Be.addWindow(re.contentWindow),Ge.observeAttachShadow(re)},onStylesheetLoad:(re,Fe)=>{ue.attachLinkElement(re,Fe)},onBlockedImageLoad:(re,Fe,{width:ie,height:xo})=>{Rn({adds:[],removes:[],texts:[],attributes:[{id:Fe.id,attributes:{style:{width:`${ie}px`,height:`${xo}px`}}}]})},keepIframeSrcFn:B});if(!yt)return console.warn("Failed to snapshot the document");Ae({type:J.FullSnapshot,data:{node:yt,initialOffset:Jg(window)}}),yo.forEach(re=>re.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ue.adoptStyleSheets(document.adoptedStyleSheets,Yt.getId(document))};Qa=Jt;try{let ne=[],yt=Fe=>oe(R0)({onMutation:K,mutationCb:Rn,mousemoveCb:(ie,xo)=>Ae({type:J.IncrementalSnapshot,data:{source:xo,positions:ie}}),mouseInteractionCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.MouseInteraction,...ie}}),scrollCb:wo,viewportResizeCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.ViewportResize,...ie}}),inputCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.Input,...ie}}),mediaInteractionCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.StyleDeclaration,...ie}}),canvasMutationCb:Ji,fontCb:ie=>Ae({type:J.IncrementalSnapshot,data:{source:j.Font,...ie}}),selectionCb:ie=>{Ae({type:J.IncrementalSnapshot,data:{source:j.Selection,...ie}})},customElementCb:ie=>{Ae({type:J.IncrementalSnapshot,data:{source:j.CustomElement,...ie}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:Ze,inlineStylesheet:m,sampling:b,recordDOM:O,recordCanvas:$,inlineImages:te,userTriggeredOnInput:Y,collectFonts:ee,doc:Fe,maskAttributeFn:y,maskInputFn:D,maskTextFn:R,keepIframeSrcFn:B,blockSelector:i,unblockSelector:s,slimDOMOptions:An,dataURLOptions:C,mirror:Yt,iframeManager:be,stylesheetManager:ue,shadowDomManager:Ge,processedNodeManager:kt,canvasManager:Be,ignoreCSSAttributes:F,plugins:G?.filter(ie=>ie.observer)?.map(ie=>({observer:ie.observer,options:ie.options,callback:xo=>Ae({type:J.Plugin,data:{plugin:ie.name,payload:xo}})}))||[]},{});be.addLoadListener(Fe=>{try{ne.push(yt(Fe.contentDocument))}catch(ie){console.warn(ie)}});let re=()=>{Jt(),ne.push(yt(document))};return document.readyState==="interactive"||document.readyState==="complete"?re():(ne.push(st("DOMContentLoaded",()=>{Ae({type:J.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&re()})),ne.push(st("load",()=>{Ae({type:J.Load,data:{}}),M==="load"&&re()},window))),()=>{ne.forEach(Fe=>Fe()),kt.destroy(),Qa=void 0,m0()}}catch(ne){console.warn(ne)}}function w0(e){if(!Qa)throw new Error("please take full snapshot after start recording");Qa(e)}vn.mirror=Yt;vn.takeFullSnapshot=w0;function N0(e,t){try{return e?e(t):new Xa}catch{return console.warn("Unable to initialize CanvasManager"),new Xa}}var Og;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Og||(Og={}));var x0=3,k0=5;function Dd(e){return e>9999999999?e:e*1e3}function td(e){return e>9999999999?e/1e3:e}function zi(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Pe(t,10,1e3)}}),t.category==="console")))}var O0="button,a";function c_(e){return e.closest(O0)||e}function u_(e){let t=l_(e);return!t||!(t instanceof Element)?t:c_(t)}function l_(e){return M0(e)?e.target:e}function M0(e){return typeof e=="object"&&!!e&&"target"in e}var qn;function L0(e){return qn||(qn=[],P0()),qn.push(e),()=>{let t=qn?qn.indexOf(e):-1;t>-1&&qn.splice(t,1)}}function P0(){he(Se,"open",function(e){return function(...t){if(qn)try{qn.forEach(n=>n())}catch{}return e.apply(Se,t)}})}var D0=new Set([j.Mutation,j.StyleSheetRule,j.StyleDeclaration,j.AdoptedStyleSheet,j.CanvasMutation,j.Selection,j.MediaInteraction]);function U0(e,t,n){e.handleClick(t,n)}var Ed=class{constructor(t,n,r=zi){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=L0(()=>{this._lastMutation=Mg()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(F0(n,this._ignoreSelector)||!H0(t))return;let r={timestamp:td(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=td(t)}registerScroll(t=Date.now()){this._lastScroll=td(t)}registerClick(t){let n=c_(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Mg();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Se.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Se.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Er(()=>this._checkClicks(),1e3)}},B0=["A","BUTTON","INPUT"];function F0(e,t){return!!(!B0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function H0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Mg(){return Date.now()/1e3}function $0(e,t){try{if(!G0(t))return;let{source:n}=t.data;if(D0.has(n)&&e.registerMutation(t.timestamp),n===j.Scroll&&e.registerScroll(t.timestamp),W0(t)){let{type:r,id:o}=t.data,i=vn.mirror.getNode(o);i instanceof HTMLElement&&r===it.Click&&e.registerClick(i)}}catch{}}function G0(e){return e.type===x0}function W0(e){return e.data.source===j.MouseInteraction}function cn(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Ud=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ud||{}),z0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function j0(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(z0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var q0=e=>t=>{if(!e.isEnabled())return;let n=Y0(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&U0(e.clickDetector,n,u_(t.event)),zi(e,n)};function d_(e,t){let n=vn.mirror.getId(e),r=n&&vn.mirror.getNode(n),o=r&&vn.mirror.getMeta(r),i=o&&J0(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===Ud.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:j0(i.attributes)}}:{}}}function Y0(e){let{target:t,message:n}=V0(e);return cn({category:`ui.${e.name}`,...d_(t,n)})}function V0(e){let t=e.name==="click",n,r=null;try{r=t?u_(e.event):l_(e.event),n=ke(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function J0(e){return e.type===Ud.Element}function K0(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=X0(t);n&&zi(e,n)}function X0(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||Q0(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=ke(s,{maxStringLength:200})||"<unknown>",d=d_(s,u);return cn({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function Q0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var Z0={resource:oC,paint:nC,navigation:rC};function nd(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function eC(e){return e.map(tC).filter(Boolean)}function tC(e){let t=Z0[e.entryType];return t?t(e):null}function Io(e){return((ge()||Se.performance.timeOrigin)+e)/1e3}function nC(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Io(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function rC(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:p,startTime:f,transferSize:m,type:g}=e;return o===0?null:{type:`${t}.${g}`,start:Io(f),end:Io(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:p}}}function oC(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Io(i),end:Io(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function iC(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Bd(e,"largest-contentful-paint",n)}function sC(e){return e.sources!==void 0}function aC(e){let t=[],n=[];for(let r of e.entries)if(sC(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=vn.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return Bd(e,"cumulative-layout-shift",n,t)}function cC(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Bd(e,"interaction-to-next-paint",n)}function Bd(e,t,n,r){let o=e.value,i=e.rating,s=Io(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>vn.mirror.getId(a)):void 0,attributions:r}}}function uC(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Nt(o,n))}),r.push(Sr(nd(iC,e)),_r(nd(aC,e)),Ri(nd(cC,e))),()=>{r.forEach(o=>o())}}var W=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lC='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function dC(){let e=new Blob([lC]);return URL.createObjectURL(e)}var Lg=["log","warn","error"],za="[Replay] ";function rd(e,t="info"){rt({category:"console",data:{logger:"replay"},level:t,message:`${za}${e}`},{level:t})}function fC(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return W?(Lg.forEach(r=>{n[r]=(...o)=>{h[r](za,...o),t&&rd(o.join(""),ur(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(za,r),e?ae(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&rd(r,"error")},n.infoTick=(...r)=>{h.log(za,...r),t&&setTimeout(()=>rd(r[0]),0)}):Lg.forEach(r=>{n[r]=()=>{}}),n}var z=fC(),Hi=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${xd}.`)}},Za=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>xd)throw new Hi;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?Dd(t):null}},yd=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){W&&z.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){W&&z.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},Td=class{constructor(t){this._worker=new yd(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=Dd(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>xd?Promise.reject(new Hi):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{W&&z.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},bd=class{constructor(t){this._fallback=new Za,this._compression=new Td(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){W&&z.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){W&&z.exception(i,"Failed to add events when switching buffers.")}}};function pC({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=mC(t);if(n)return n}return W&&z.log("Using simple buffer"),new Za}function mC(e){try{let t=e||hC();if(!t)return;W&&z.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new bd(n)}catch(t){W&&z.exception(t,"Failed to create compression worker")}}function hC(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?dC():""}function Fd(){try{return"sessionStorage"in Se&&!!Se.sessionStorage}catch{return!1}}function gC(e){_C(),e.session=void 0}function _C(){if(Fd())try{Se.sessionStorage.removeItem(wd)}catch{}}function f_(e){return e===void 0?!1:Math.random()<e}function Hd(e){if(Fd())try{Se.sessionStorage.setItem(wd,JSON.stringify(e))}catch{}}function p_(e){let t=Date.now(),n=e.id||ce(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a}}function SC(e,t){return f_(e)?"session":t?"buffer":!1}function Pg({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=SC(e,t),i=p_({sampled:o,previousSessionId:r});return n&&Hd(i),i}function EC(){if(!Fd())return null;try{let e=Se.sessionStorage.getItem(wd);if(!e)return null;let t=JSON.parse(e);return W&&z.infoTick("Loading existing session"),p_(t)}catch{return null}}function Id(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function m_(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Id(e.started,t,r)||Id(e.lastActivity,n,r)}function h_(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!m_(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function od({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&EC();return o?h_(o,{sessionIdleExpire:e,maxReplayDuration:t})?(W&&z.infoTick("Session in sessionStorage is expired, creating new one..."),Pg(r,{previousSessionId:o.id})):o:(W&&z.infoTick("Creating new session"),Pg(r,{previousSessionId:n}))}function yC(e){return e.type===J.Custom}function $d(e,t,n){return __(e,t)?(g_(e,t,n),!0):!1}function TC(e,t,n){return __(e,t)?g_(e,t,n):Promise.resolve(null)}async function g_(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=bC(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof Hi,a=s?"addEventSizeExceeded":"addEvent",c=T();if(c){let u=s?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function __(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=Dd(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(W&&z.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function bC(e,t){try{if(typeof t=="function"&&yC(e))return t(e)}catch(n){return W&&z.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Gd(e){return!e.type}function vd(e){return e.type==="transaction"}function IC(e){return e.type==="replay_event"}function Dg(e){return e.type==="feedback"}function vC(e){return(t,n)=>{if(!e.isEnabled()||!Gd(t)&&!vd(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(vd(t)){AC(e,t);return}RC(e,t)}}}function AC(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function RC(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Er(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function CC(e){return t=>{!e.isEnabled()||!Gd(t)||wC(e,t)}}function wC(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=cn({category:"replay.hydrate-error",data:{url:nt()}});zi(e,r)}}function NC(e){let t=T();t&&t.on("beforeAddBreadcrumb",n=>xC(e,n))}function xC(e,t){if(!e.isEnabled()||!S_(t))return;let n=kC(t);n&&zi(e,n)}function kC(e){return!S_(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?OC(e):cn(e)}function OC(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return cn(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Ha?(n=!0,`${o.slice(0,Ha)}\u2026`):o;if(typeof o=="object")try{let i=Pe(o,7);return JSON.stringify(i).length>Ha?(n=!0,`${JSON.stringify(i,null,2).slice(0,Ha)}\u2026`):i}catch{}return o});return cn({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function S_(e){return!!e.category}function MC(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function E_(){let e=x().getPropagationContext().dsc;e&&delete e.replay_id;let t=X();if(t){let n=we(t);delete n.replay_id}}function LC(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function PC(e,t){return e.recordingMode!=="buffer"||t.message===Nd||!t.exception||t.type?!1:f_(e.getOptions().errorSampleRate)}function DC(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:IC(t)?(delete t.breadcrumbs,t):!Gd(t)&&!vd(t)&&!Dg(t)?t:e.checkAndHandleExpiredSession()?Dg(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),LC(e,t),t):MC(t,n)&&!e.getOptions()._experiments.captureExceptions?(W&&z.log("Ignoring error from rrweb internals",t),null):((PC(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(E_(),t),{id:"Replay"})}function sc(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function UC(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function BC(e){return t=>{if(!e.isEnabled())return;let n=UC(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(sc(e,[n]),!1)))}}function FC(e,t){return W&&e.getOptions()._experiments.traceInternals?!1:ci(t,T())}function y_(e,t){e.isEnabled()&&t!==null&&(FC(e,t.name)||e.addUpdate(()=>(sc(e,[t]),!0)))}function ac(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=xa(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function T_(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function ec(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function b_(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function $i(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Yn(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=HC(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function Ad(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function HC(e){if(!e||typeof e!="string")return{body:e};let t=e.length>_g,n=$C(e);if(t){let r=e.slice(0,_g);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function $C(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function tc(e,t){let n=GC(e);return He(n,t)}function GC(e,t=Se.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Se.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function WC(e,t,n){try{let r=await jC(e,t,n),o=b_("resource.fetch",r);y_(n.replay,o)}catch(r){W&&z.exception(r,"Failed to capture fetch breadcrumb")}}function zC(e,t){let{input:n,response:r}=t,o=n?lo(n):void 0,i=ac(o),s=r?T_(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function jC(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=tc(s,n.networkDetailAllowUrls)&&!tc(s,n.networkDetailDenyUrls),p=l?qC(n,t.input,u):$i(u),f=await YC(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:f}}function qC({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?KC(n,t):{};if(!e)return Yn(o,r,void 0);let i=lo(n),[s,a]=Tr(i,z),c=Yn(o,r,s);return a?ec(c,a):c}async function YC(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return $i(o);let i=r?I_(r.headers,n):{};if(!r||!t&&o!==void 0)return Yn(i,o,void 0);let[s,a]=await JC(r),c=VC(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?ec(c,a):c}function VC(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?ac(e):n;return r?t?Yn(o,i,e):Yn(o,i,void 0):$i(i)}catch(i){return W&&z.exception(i,"Failed to serialize response body"),Yn(o,n,void 0)}}async function JC(e){let t=XC(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await QC(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(W&&z.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(W&&z.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function I_(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function KC(e,t){return e.length===1&&typeof e[0]!="string"?Ug(e[0],t):e.length===2?Ug(e[1],t):{}}function Ug(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?I_(n,t):Array.isArray(n)?{}:Ad(n,t):{}}function XC(e){try{return e.clone()}catch(t){W&&z.exception(t,"Failed to clone response body")}}function QC(e){return new Promise((t,n)=>{let r=Er(()=>n(new Error("Timeout while trying to read response body")),500);ZC(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function ZC(e){return await e.text()}async function ew(e,t,n){try{let r=nw(e,t,n),o=b_("resource.xhr",r);y_(n.replay,o)}catch(r){W&&z.exception(r,"Failed to capture xhr breadcrumb")}}function tw(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=ac(r),i=n.getResponseHeader("content-length")?T_(n.getResponseHeader("content-length")):iw(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function nw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:p}=e.data;if(!c)return null;if(!a||!tc(c,n.networkDetailAllowUrls)||tc(c,n.networkDetailDenyUrls)){let N=$i(l),b=$i(p);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:N,response:b}}let f=a[ot],m=f?Ad(f.request_headers,n.networkRequestHeaders):{},g=Ad(xi(a),n.networkResponseHeaders),[_,S]=n.networkCaptureBodies?Tr(s,z):[void 0],[y,D]=n.networkCaptureBodies?rw(a):[void 0],R=Yn(m,l,_),U=Yn(g,p,y);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S?ec(R,S):R,response:D?ec(U,D):U}}function rw(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return ow(e.response,e.responseType)}catch(n){t.push(n)}return W&&z.warn("Failed to get xhr response body",...t),[void 0]}function ow(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return W&&z.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return W&&z.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function iw(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return ac(n)}catch{return}}function sw(e){let t=T();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>aw(a,c,u))}catch{}}function aw(e,t,n){if(t.data)try{cw(t)&&lw(n)&&(tw(t,n),ew(t,n,e)),uw(t)&&dw(n)&&(zC(t,n),WC(t,n,e))}catch(r){W&&z.exception(r,"Error when enriching network breadcrumb")}}function cw(e){return e.category==="xhr"}function uw(e){return e.category==="fetch"}function lw(e){return e?.xhr}function dw(e){return e?.response}function fw(e){let t=T();Ni(q0(e)),bn(BC(e)),NC(e),sw(e);let n=DC(e);ei(n),t&&(t.on("beforeSendEvent",CC(e)),t.on("afterSendEvent",vC(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function pw(e){try{return Promise.all(sc(e,[mw(Se.performance.memory)]))}catch{return[]}}function mw(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function hw(e,t,n){return ku(e,t,{...n,setTimeoutImpl:Er})}var Wa=v.navigator;function gw(){return/iPhone|iPad|iPod/i.test(Wa?.userAgent??"")||/Macintosh/i.test(Wa?.userAgent??"")&&Wa?.maxTouchPoints&&Wa?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function _w(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){W&&z.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&$0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!$d(e,n,o))return!0;if(!o)return!1;let i=e.session;if(Ew(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer){let s=e.eventBuffer.getEarliestTimestamp();s&&(W&&z.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&Hd(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Sw(e){let t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Ew(e,t){!t||!e.session||e.session.segmentId!==0||$d(e,Sw(e),!1)}function yw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Tw(e,t,n,r){return Ne(jo(e,On(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function bw({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function Iw({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await Ko(e.getOptions(),r,i,t,e,se());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function vw({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=bw({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=T(),p=x(),f=l?.getTransport(),m=l?.getDsn();if(!l||!f||!m||!i.sampled)return Promise.resolve({});let g={type:mR,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},_=await Iw({scope:p,client:l,replayId:t,event:g});if(!_)return l.recordDroppedEvent("event_processor","replay"),W&&z.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete _.sdkProcessingMetadata;let S=Tw(_,s,m,l.getOptions().tunnel),y;try{y=await f.send(S)}catch(R){let U=new Error(Nd);try{U.cause=R}catch{}throw U}if(typeof y.statusCode=="number"&&(y.statusCode<200||y.statusCode>=300))throw new nc(y.statusCode);let D=ii({},y);if(oi(D,"replay"))throw new Gi(D);return y}var nc=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},Gi=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function v_(e,t={count:0,interval:yR}){let{recordingData:n,onError:r}=e;if(n.length)try{return await vw(e),!0}catch(o){if(o instanceof nc||o instanceof Gi)throw o;if(Xo("Replays",{_retryCount:t.count}),r&&r(o),t.count>=TR){let i=new Error(`${Nd} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{Er(async()=>{try{await v_(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var A_="__THROTTLED",Aw="__SKIPPED";function Rw(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?Aw:A_}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var Rd=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:hR,sessionIdleExpire:gR},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=hw(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Rw((s,a)=>TC(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(bR,r),timeout:r,scrollTimeout:IR,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new Ed(this,i)),W){let s=t._experiments;z.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{Se.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=cn({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=cn({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{K0(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){W&&z.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){W&&z.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",W&&z.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){W&&z.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){W&&z.log("Buffering is in progress, call `flush()` to save the replay");return}W&&z.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=od({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){W&&z.log("Buffering is in progress, call `flush()` to save the replay");return}W&&z.infoTick("Starting replay in buffer mode");let t=od({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=vn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:ER}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:_w(this),...gw(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{W&&z.log(`Stopping Replay${n?` triggered by ${n}`:""}`),E_(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,gC(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),W&&z.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),W&&z.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();W&&z.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Id(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${Se.location.pathname}${Se.location.hash}${Se.location.search}`,n=`${Se.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===A_){let o=cn({category:"replay.throttled"});this.addUpdate(()=>!$d(this,{type:k0,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||X(),n=t&&Z(t),o=(n&&L(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return L(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=pC({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=od({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return h_(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Se.document.addEventListener("visibilitychange",this._handleVisibilityChange),Se.addEventListener("blur",this._handleWindowBlur),Se.addEventListener("focus",this._handleWindowFocus),Se.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(fw(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=uC(this)}_removeListeners(){try{Se.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Se.removeEventListener("blur",this._handleWindowBlur),Se.removeEventListener("focus",this._handleWindowFocus),Se.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||m_(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){W&&z.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=eC(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(sc(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){W&&z.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await pw(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await v_({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=T();if(r){let o=n instanceof Gi?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){W&&z.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){W&&z.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&W&&z.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Hd(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=yw(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=cn({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function Oi(e,t){return[...e,...t].join(",")}function Cw({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=Oi(e,[".sentry-mask","[data-sentry-mask]"]),a=Oi(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:Oi(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Oi(r,[]),ignoreSelector:Oi(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function ww({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var Bg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Nw=["content-length","content-type","accept"],Fg=!1,R_=(e=>new Cd(e)),Cd=class{constructor({flushMinDelay:t=_R,flushMaxDelay:n=SR,minReplayDuration:r=vR,maxReplayDuration:o=Sg,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:S=[],networkCaptureBodies:y=!0,networkRequestHeaders:D=[],networkResponseHeaders:R=[],mask:U=[],maskAttributes:N=["title","placeholder","aria-label"],unmask:b=[],block:C=[],unblock:I=[],ignore:O=[],maskFn:$,beforeAddRecordingEvent:w,beforeErrorSampling:M,onError:Y}={}){this.name="Replay";let ee=Cw({mask:U,unmask:b,block:C,unblock:I,ignore:O});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:$,maskInputFn:$,maskAttributeFn:(te,G,B)=>ww({maskAttributes:N,maskAllText:u,privacyOptions:ee,key:te,value:G,el:B}),...ee,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:te=>{try{te.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,AR),maxReplayDuration:Math.min(o,Sg),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:_,networkDetailDenyUrls:S,networkCaptureBodies:y,networkRequestHeaders:Hg(D),networkResponseHeaders:Hg(R),beforeAddRecordingEvent:w,beforeErrorSampling:M,onError:Y,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Bg}`:Bg),this._isInitialized&&Xr())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Fg}set _isInitialized(t){Fg=t}afterAllSetup(t){!Xr()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=xw(this._initialOptions,t);this._replay=new Rd({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function xw(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=vt(n.replaysSessionSampleRate),i=vt(n.replaysOnErrorSampleRate);return o==null&&i==null&&We(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function Hg(e){return[...Nw,...e.map(t=>t.toLowerCase())]}function C_(){return T()?.getIntegrationByName("Replay")}var kw=Object.defineProperty,Ow=(e,t,n)=>t in e?kw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w_=(e,t,n)=>Ow(e,typeof t!="symbol"?t+"":t,n),zd=class{constructor(){w_(this,"idNodeMap",new Map),w_(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Mw(){return new zd}function Lw(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function jd(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:jd(e.parentNode,t,n,r+1)}function N_(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Lw(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var vo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,x_={map:{},getId(){return console.error(vo),-1},getNode(){return console.error(vo),null},removeNodeFromMap(){console.error(vo)},has(){return console.error(vo),!1},reset(){console.error(vo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(x_=new Proxy(x_,{get(e,t,n){return t==="map"&&console.error(vo),Reflect.get(e,t,n)}}));function Yd(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){B_(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Yd(e,t,i||{},!0)}function Vd(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function Pw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function dc(e,t,n,r,o){if(!e)return!1;let i=Pw(e);if(!i)return!1;let s=N_(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=jd(i,s),c=-1;return a<0?!1:(r&&(c=jd(i,N_(null,r))),a>-1&&c<0?!0:a<c)}var k_={};function U_(e){let t=k_[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return k_[e]=r.bind(window)}function Ir(...e){return U_("requestAnimationFrame")(...e)}function B_(...e){return U_("setTimeout")(...e)}var Ro=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ro||{}),uc;function Dw(e){uc=e}var Wd=e=>uc?(...n)=>{try{return e(...n)}catch(r){if(uc&&uc(r)===!0)return()=>{};throw r}}:e,Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ji=0;ji<Ao.length;ji++)Uw[Ao.charCodeAt(ji)]=ji;var ji,Bw=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Ao[t[n]>>2],o+=Ao[(t[n]&3)<<4|t[n+1]>>4],o+=Ao[(t[n+1]&15)<<2|t[n+2]>>6],o+=Ao[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},O_=new Map;function Fw(e,t){let n=O_.get(e);return n||(n=new Map,O_.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var F_=(e,t,n)=>{if(!e||!($_(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=Fw(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function lc(e,t,n){if(e instanceof Array)return e.map(r=>lc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=Bw(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[lc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[lc(e.data,t,n),e.width,e.height]};if($_(e,t)||typeof e=="object"){let r=e.constructor.name,o=F_(e,t,n);return{rr_type:r,index:o}}}}return e}var H_=(e,t,n)=>e.map(r=>lc(r,t,n)),$_=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Hw(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=Vd(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return dc(this.canvas,n,r,o,!0)||B_(()=>{let l=H_(d,t,this);e(this.canvas,{type:Ro["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Yd(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Ro["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function $w(e){return e==="experimental-webgl"?"webgl":e}function M_(e,t,n,r,o){let i=[];try{let s=Vd(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!dc(this,t,n,r,!0)){let d=$w(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function L_(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=Vd(e,d,function(p){return function(...f){let m=p.apply(this,f);if(F_(m,a,this),"tagName"in this.canvas&&!dc(this.canvas,r,o,i,!0)){let g=H_(f,a,this),_={type:t,property:d,args:g};n(this.canvas,_)}return m}});c.push(l)}catch{let l=Yd(e,d,{set(p){n(this.canvas,{type:t,property:d,args:[p],setter:!0})}});c.push(l)}return c}function Gw(e,t,n,r,o,i){let s=[];return s.push(...L_(t.WebGLRenderingContext.prototype,Ro.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...L_(t.WebGL2RenderingContext.prototype,Ro.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var Ww='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function zw(){let e=new Blob([Ww]);return URL.createObjectURL(e)}var qd=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&Dw(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&Wd(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Wd(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=M_(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}Ir(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(zw());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:Ro["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=Ir(n)};t=Ir(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=M_(t,n,r,o,!1),s=Hw(this.processMutation.bind(this),t,n,r,o),a=Gw(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{dc(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let g=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(g))){if(this.snapshotInProgressMap.set(g,!0),!n&&["webgl","webgl2"].includes(m.__context)){let _=m.getContext(m.__context);_?.getContextAttributes()?.preserveDrawingBuffer===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(m).then(_=>{this.worker?.postMessage({id:g,bitmap:_,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[_])}).catch(_=>{Wd(()=>{throw this.snapshotInProgressMap.delete(g),_})()})}}),!0)}startPendingCanvasMutationFlusher(){Ir(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,Ir(t)};Ir(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Ir(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}Mw();var P_;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(P_||(P_={}));var D_={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},jw="ReplayCanvas",cc=1280,qw=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,cc):cc,n?Math.min(n,cc):cc]},o,i=new Promise(s=>o=s);return{name:jw,getOptions(){let{quality:s,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{let d=new qd({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return o(d),d},...D_[s]||D_.medium}},async snapshot(s,a){(await i).snapshot(s,a)}}}),G_=qw;function W_(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Jd(e){try{return new URL(e,k.location.origin).href}catch{return}}function z_(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Kd(e){try{return new Headers(e)}catch{return}}var j_=new WeakMap,Xd=new Map,qi={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function fc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...qi,...t},d=typeof i=="function"?i:m=>!0,l=m=>Yw(m,a),p={},f=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(g=>{if(g.op==="http.client"){let _=Xd.get(g.span_id);_&&(g.timestamp=_/1e3,Xd.delete(g.span_id))}}),m)),o&&sl(m=>{if(m.response){let g=j_.get(m.response);g&&m.endTimestamp&&Xd.set(g,m.endTimestamp)}}),fr(m=>{let g=Wu(m,d,l,p,{propagateTraceparent:f,onRequestSpanEnd:u});if(m.response&&m.fetchData.__span&&j_.set(m.response,m.fetchData.__span),g){let _=Jd(m.fetchData.url),S=_?Wt(_).host:void 0;g.setAttributes({"http.url":_,"server.address":S}),s&&q_(g),c?.(g,{headers:m.headers})}})),r&&yr(m=>{let g=Vw(m,d,l,p,f,u);g&&(s&&q_(g),c?.(g,{headers:Kd(m.xhr.__sentry_xhr_v3__?.request_headers)}))})}function q_(e){let{url:t}=L(e).data;if(!t||typeof t!="string")return;let n=Nt("resource",({entries:r})=>{r.forEach(o=>{z_(o)&&o.name.endsWith(t)&&(e.setAttributes(wi(o)),setTimeout(n))})})}function Yw(e,t){let n=nt();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?He(r.toString(),t)||i&&He(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?He(e,t):r}}function Vw(e,t,n,r,o,i){let s=e.xhr,a=s?.[ot];if(!s||s.__sentry_own_request__||!a)return;let{url:c,method:u}=a,d=Ce()&&t(c);if(e.endTimestamp&&d){let S=s.__sentry_xhr_span_id__;if(!S)return;let y=r[S];y&&a.status_code!==void 0&&(Zt(y,a.status_code),y.end(),i?.(y,{headers:Kd(xi(s)),error:e.error}),delete r[S]);return}let l=Jd(c),p=l?Wt(l):Wt(c),f=ai(c),m=!!X(),g=d&&m?mt({name:`${u} ${f}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":p?.host,[q]:"auto.http.browser",[Te]:"http.client",...p?.search&&{"http.query":p?.search},...p?.hash&&{"http.fragment":p?.hash}}}):new Ke;s.__sentry_xhr_span_id__=g.spanContext().spanId,r[s.__sentry_xhr_span_id__]=g,n(c)&&Jw(s,Ce()&&m?g:void 0,o);let _=T();return _&&_.emit("beforeOutgoingRequestSpan",g,e),g}function Jw(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=ar({span:t,propagateTraceparent:n});r&&Kw(e,r,o,i)}function Kw(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!W_(i))&&e.setRequestHeader("baggage",n)}}catch{}}function Y_(){k.document?k.document.addEventListener("visibilitychange",()=>{let e=X();if(!e)return;let t=Z(e);if(k.document.hidden&&t){let n="cancelled",{op:r,status:o}=L(t);A&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):A&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var Xw=3600,V_="sentry_previous_trace",Qw="sentry.previous_trace";function J_(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?tN():void 0;e.on("spanStart",s=>{if(Z(s)!==s)return;let a=x().getPropagationContext();o=Zw(o,s,a),r&&eN(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=x(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(Qd(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=Qd(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[Uo]:o.sampleRate}})}function Zw(e,t,n){let r=L(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[ln])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=Xw&&(A&&h.log(`Adding previous_trace ${s} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:s,attributes:{[Fc]:"previous_trace"}}),t.setAttribute(Qw,`${s.traceId}-${s.spanId}-${Qd(s)?1:0}`)),i)}function eN(e){try{k.sessionStorage.setItem(V_,JSON.stringify(e))}catch(t){A&&h.warn("Could not store previous trace in sessionStorage",t)}}function tN(){try{let e=k.sessionStorage?.getItem(V_);return JSON.parse(e)}catch{return}}function Qd(e){return e.traceFlags===1}var nN="BrowserTracing",rN={...Pr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...qi},Z_=((e={})=>{let t={name:void 0,source:void 0},n=k.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:p,childSpanTimeout:f,markBackgroundSpan:m,traceFetch:g,traceXHR:_,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:y,enableHTTPTimings:D,ignoreResourceSpans:R,ignorePerformanceApiSpans:U,instrumentPageLoad:N,instrumentNavigation:b,detectRedirects:C,linkPreviousTrace:I,consistentTraceSampling:O,enableReportPageLoaded:$,onRequestSpanStart:w,onRequestSpanEnd:M}={...rN,...e},Y,ee,te;function G(B,F,P=!0){let K=F.op==="pageload",le=F.name,Ee=d?d(F):F,Re=Ee.attributes||{};if(le!==Ee.name&&(Re[ve]="custom",Ee.attributes=Re),!P){let et=It();mt({...Ee,startTime:et}).end(et);return}t.name=Ee.name,t.source=Re[ve];let Ze=As(Ee,{idleTimeout:l,finalTimeout:p,childSpanTimeout:f,disableAutoFinish:K,beforeSpanEnd:et=>{Y?.(),$l(et,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:R,ignorePerformanceApiSpans:U}),X_(B,void 0);let at=x(),Vt=at.getPropagationContext();at.setPropagationContext({...Vt,traceId:Ze.spanContext().traceId,sampled:At(Ze),dsc:we(et)}),K&&(te=void 0)},trimIdleSpanEndTimestamp:!$});K&&$&&(te=Ze),X_(B,Ze);function An(){n&&["interactive","complete"].includes(n.readyState)&&B.emit("idleSpanEnableAutoFinish",Ze)}K&&!$&&n&&(n.addEventListener("readystatechange",()=>{An()}),An())}return{name:nN,setup(B){if(zo(),Y=Ul({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:B}),r&&Yl(),o&&Gl(),s&&v.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Fl():i&&Bl(),a&&Hl(),C&&n){let P=()=>{ee=Q()};addEventListener("click",P,{capture:!0}),addEventListener("keydown",P,{capture:!0,passive:!0})}function F(){let P=Yi(B);P&&!L(P).timestamp&&(A&&h.log(`[Tracing] Finishing current active span with op: ${L(P).op}`),P.setAttribute(xn,"cancelled"),P.end())}B.on("startNavigationSpan",(P,K)=>{if(T()!==B)return;if(K?.isRedirect){A&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),G(B,{op:"navigation.redirect",...P},!1);return}ee=void 0,F(),se().setPropagationContext({traceId:$e(),sampleRand:Math.random(),propagationSpanId:Ce()?void 0:Ve()});let le=x();le.setPropagationContext({traceId:$e(),sampleRand:Math.random(),propagationSpanId:Ce()?void 0:Ve()}),le.setSDKProcessingMetadata({normalizedRequest:void 0}),G(B,{op:"navigation",...P,parentSpan:null,forceTransaction:!0})}),B.on("startPageLoadSpan",(P,K={})=>{if(T()!==B)return;F();let le=K.sentryTrace||K_("sentry-trace"),Ee=K.baggage||K_("baggage"),Re=Fo(le,Ee),Ze=x();Ze.setPropagationContext(Re),Ce()||(Ze.getPropagationContext().propagationSpanId=Ve()),Ze.setSDKProcessingMetadata({normalizedRequest:Ii()}),G(B,{op:"pageload",...P})}),B.on("endPageloadSpan",()=>{$&&te&&(te.setAttribute(xn,"reportPageLoaded"),te.end())})},afterAllSetup(B){let F=nt();if(I!=="off"&&J_(B,{linkPreviousTrace:I,consistentTraceSampling:O}),k.location){if(N){let P=ge();Zd(B,{name:k.location.pathname,startTime:P?P/1e3:void 0,attributes:{[ve]:"url",[q]:"auto.pageload.browser"}})}b&&bn(({to:P,from:K})=>{if(K===void 0&&F?.indexOf(P)!==-1){F=void 0;return}F=void 0;let le=sr(P),Ee=Yi(B),Re=Ee&&C&&iN(Ee,ee);ef(B,{name:le?.pathname||k.location.pathname,attributes:{[ve]:"url",[q]:"auto.navigation.browser"}},{url:P,isRedirect:Re})})}m&&Y_(),a&&oN(B,l,p,f,t),r&&Vl(),fc(B,{traceFetch:g,traceXHR:_,trackFetchStreamPerformance:S,tracePropagationTargets:B.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:y,enableHTTPTimings:D,onRequestSpanStart:w,onRequestSpanEnd:M})}}});function Zd(e,t,n){e.emit("startPageLoadSpan",t,n),x().setTransactionName(t.name);let r=Yi(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function ef(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=x();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...Ii(),url:r}}),Yi(e)}function K_(e){return k.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function oN(e,t,n,r,o){let i=k.document,s,a=()=>{let c="ui.action.click",u=Yi(e);if(u){let d=L(u).op;if(["navigation","pageload"].includes(d)){A&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(xn,"interactionInterrupted"),s.end(),s=void 0),!o.name){A&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=As({name:o.name,op:c,attributes:{[ve]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var eS="_sentry_idleSpan";function Yi(e){return e[eS]}function X_(e,t){ye(e,eS,t)}var Q_=1.5;function iN(e,t){let n=L(e),r=It(),o=n.start_timestamp;return!(r-o>Q_||t&&r-t<=Q_)}function tS(e=T()){e?.emit("endPageloadSpan")}function nS(e){let t=X();if(t===e)return;let n=x();e.end=new Proxy(e.end,{apply(r,o,i){return dt(n,t),Reflect.apply(r,o,i)}}),dt(n,e)}function Co(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function sN(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Co(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function tf(e){return Co(e.getAllKeys())}function aN(e,t,n){return e(r=>tf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),Co(r.transaction)}))}function cN(e,t,n){return e(r=>tf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),Co(r.transaction)}))}function uN(e){return e(t=>tf(t).then(n=>{let r=n[0];if(r!=null)return Co(t.get(r)).then(o=>(t.delete(r),Co(t.transaction).then(()=>o)))}))}function lN(e){let t;function n(){return t==null&&(t=sN(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await kn(r);await aN(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await kn(r);await cN(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await uN(n());if(r)return Vc(r)}catch{}}}}function dN(e){return t=>{let n=e({...t,createStore:lN});return k.addEventListener("online",async r=>{await n.flush()}),n}}function rS(e=fo){return dN(Au(e))}var oS=1e6,fN="window"in v&&v.window===v&&typeof importScripts>"u",Vn=String(0),pc=fN?"main":"worker",mc=k.navigator,sS="",aS="",cS="",nf=mc?.userAgent||"",uS="",pN=mc?.language||mc?.languages?.[0]||"";function mN(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var iS=mc?.userAgentData;mN(iS)&&iS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(sS=e.platform||"",cS=e.architecture||"",uS=e.model||"",aS=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];nf=`${t.brand} ${t.version}`}}).catch(e=>{});function hN(e){return!("thread_metadata"in e)}function gN(e){return hN(e)?yN(e):e}function _N(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&A&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function SN(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=_N(r),i=gN(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Q()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Q()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||fn,runtime:{name:"javascript",version:k.navigator.userAgent},os:{name:sS,version:aS,build_number:nf},device:{locale:pN,model:uS,manufacturer:nf,architecture:cS,is_emulator:!1},debug_meta:{images:mS(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||ce(),trace_id:o,active_thread_id:Vn,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function lS(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);let r=EN(e),o=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:ce(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||ce(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:mS(e.resources)},profile:r}}function dS(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};let t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};let n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function EN(e){let t=[];for(let a=0;a<e.frames.length;a++){let c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}let n=[];for(let a=0;a<e.stacks.length;a++){let c=e.stacks[a];if(!c)continue;let u=[],d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}let r=ge(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=o-(r||o),s=[];for(let a=0;a<e.samples.length;a++){let c=e.samples[a];if(!c)continue;let u=(o+(c.timestamp-i))/1e3;s[a]={stack_id:c.stackId??0,thread_id:Vn,timestamp:u}}return{frames:t,stacks:n,samples:s,thread_metadata:{[Vn]:{name:pc}}}}function hc(e){return L(e).op==="pageload"}function yN(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[Vn]:{name:pc}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=ge(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*oS).toFixed(0),stack_id:t,thread_id:Vn};return}let l=e.stacks[u.stackId],p=[];for(;l;){p.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let f={elapsed_since_start_ns:((u.timestamp+c-i)*oS).toFixed(0),stack_id:n,thread_id:Vn};r.stacks[n]=p,r.samples[d]=f,n++}),r}function fS(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function pS(e){let t=[];return Rt(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function mS(e){let r=T()?.getOptions()?.stackParser;return r?ru(r,e):[]}function hS(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(A&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(A&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function TN(e){return e.samples.length<2?(A&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(A&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var rf=!1,of=3e4;function bN(e){return typeof e=="function"}function gc(){let e=k.Profiler;if(!bN(e)){A&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(of/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{A&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),rf=!0}}function sf(e){if(rf)return A&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return A&&h.log("[Profiling] Discarding profile because root span was not sampled."),!1;let n=T()?.getOptions();if(!n)return A&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return hS(r)?r?(r===!0?!0:Math.random()<r)?!0:(A&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(A&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(A&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function gS(e){if(rf)return A&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(e.profileLifecycle!=="trace")return!1;let t=e.profileSessionSampleRate;return hS(t)?t?Math.random()<=t:(A&&h.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(A&&h.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function Vi(e){return typeof e.profilesSampleRate<"u"}function _S(e,t,n,r){return TN(n)?SN(e,t,n,r):null}var vr=new Map;function SS(){return vr.size}function ES(e){let t=vr.get(e);return t&&vr.delete(e),t}function yS(e,t){if(vr.set(e,t),vr.size>30){let n=vr.keys().next().value;n!==void 0&&vr.delete(n)}}function TS(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":Vn,"thread.name":pc}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":Vn,"thread.name":pc}})),e}var IN=6e4,vN=3e5,_c=class{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1}initialize(t,n){this._profilerId=ce(),A&&h.log("[Profiling] Initializing profiler (lifecycle='trace')."),this._client=t,this._sessionSampled=n,t.on("spanStart",r=>{if(!this._sessionSampled){A&&h.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(r!==Z(r))return;if(!r.isRecording()){A&&h.log("[Profiling] Discarding profile because root span was not sampled.");return}ft().setContext("profile",{profiler_id:this._profilerId});let o=r.spanContext().spanId;if(!o||this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.add(o);let i=this._activeRootSpanIds.size,s=setTimeout(()=>{this._onRootSpanTimeout(o)},vN);this._rootSpanTimeouts.set(o,s),i===1&&(A&&h.log(`[Profiling] Root span with ID ${o} started. Will continue profiling for as long as there are active root spans (currently: ${i}).`),this.start())}),t.on("spanEnd",r=>{if(!this._sessionSampled)return;let o=r.spanContext().spanId;if(!o||!this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.delete(o);let i=this._activeRootSpanIds.size;A&&h.log(`[Profiling] Root span with ID ${o} ended. Will continue profiling for as long as there are active root spans (currently: ${i}).`),i===0&&(this._collectCurrentChunk().catch(s=>{A&&h.error("[Profiling] Failed to collect current profile chunk on `spanEnd`:",s)}),this.stop())})}notifyRootSpanActive(t){if(!this._sessionSampled)return;let n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._activeRootSpanIds.add(n);let r=this._activeRootSpanIds.size;r===1&&(A&&h.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this.start())}start(){if(!this._isRunning){if(this._isRunning=!0,A&&h.log("[Profiling] Started profiling with profile ID:",this._profilerId),this._startProfilerInstance(),!this._profiler){A&&h.log("[Profiling] Stopping trace lifecycle profiling."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}stop(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{A&&h.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}))}_resetProfilerInfo(){this._isRunning=!1,ft().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let t=gc();if(!t){A&&h.log("[Profiling] Failed to start JS Profiler in trace lifecycle.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{A&&h.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},IN))}_onRootSpanTimeout(t){if(!this._rootSpanTimeouts.has(t)||(this._rootSpanTimeouts.delete(t),!this._activeRootSpanIds.has(t)))return;A&&h.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this.stop()}async _collectCurrentChunk(){let t=this._profiler;if(this._profiler=void 0,!!t)try{let n=await t.stop(),r=lS(n,this._client,this._profilerId),o=dS(r);if("reason"in o){A&&h.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),A&&h.log("[Profiling] Collected browser profile chunk.")}catch(n){A&&h.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){let n=this._client,r=On(n.getSdkMetadata?.()),o=n.getDsn(),i=n.getOptions().tunnel,s=Ne({event_id:ce(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&o&&{dsn:Ue(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(s).then(null,a=>{A&&h.error("Error while sending profile chunk envelope:",a)})}};function af(e){let t;hc(e)&&(t=Q()*1e3);let n=gc();if(!n)return;A&&h.log(`[Profiling] started profiling span: ${L(e).description}`);let r=ce(),o=null;x().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(o){A&&h.log("[Profiling] profile for:",L(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(s&&(k.clearTimeout(s),s=void 0),A&&h.log(`[Profiling] stopped profiling of span: ${L(e).description}`),!u){A&&h.log(`[Profiling] profiler returned null profile for: ${L(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,yS(r,u)}).catch(u=>{A&&h.log("[Profiling] error while stopping profiler:",u)})}}let s=k.setTimeout(()=>{A&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",L(e).description),i()},of),a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}var AN="BrowserProfiling",RN=(()=>({name:AN,setup(e){let t=e.getOptions();if(!Vi(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),Vi(t)&&!t.profilesSampleRate){A&&h.log("[Profiling] Profiling disabled, no profiling options found.");return}let n=X(),r=n&&Z(n);if(Vi(t)&&t.profileSessionSampleRate!==void 0&&A&&h.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),Vi(t))r&&hc(r)&&sf(r)&&af(r),e.on("spanStart",o=>{o===Z(o)&&sf(o)&&af(o)}),e.on("beforeEnvelope",o=>{if(!SS())return;let i=pS(o);if(!i.length)return;let s=[];for(let a of i){let c=a?.contexts,u=c?.profile?.profile_id,d=c?.profile?.start_timestamp;if(typeof u!="string"){A&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!u){A&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}c?.profile&&delete c.profile;let l=ES(u);if(!l){A&&h.log(`[Profiling] Could not retrieve profile for span: ${u}`);continue}let p=_S(u,d,l,a);p&&s.push(p)}fS(o,s)});else{let o=gS(t);if(o||A&&h.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),t.profileLifecycle==="trace"){if(!Ce(t)){A&&h.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}let s=new _c;s.initialize(e,o),r&&s.notifyRootSpanActive(r),k.setTimeout(()=>{let a=X(),c=a&&Z(a);c&&s.notifyRootSpanActive(c)},0)}}},processEvent(e){return TS(e)}})),bS=RN;var CN="SpotlightBrowser",wN=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:CN,setup:()=>{A&&h.log("Using Sidecar URL",t)},processEvent:n=>xN(n)?null:n,afterAllSetup:n=>{NN(n,t)}}});function NN(e,t){let n=uo("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:kn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var IS=wN;function xN(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}var vS=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Ct(e)}});function AS(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{ht(e,t.value),gt(e,t.value)}}}var RS=()=>({name:"OpenFeature",processEvent(e,t,n){return Ct(e)}}),Sc=class{after(t,n){ht(n.flagKey,n.value),gt(n.flagKey,n.value)}error(t,n,r){ht(t.flagKey,t.defaultValue),gt(t.flagKey,t.defaultValue)}};var CS=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;he(t,"isEnabled",kN)},processEvent(t,n,r){return Ct(t)}});function kN(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(ht(n,r),gt(n,r)):A&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var wS=(({growthbookClass:e})=>Gu({growthbookClass:e}));var NS=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{ht(n.gate.name,n.gate.value),gt(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Ct(t)}});async function xS(){let e=T();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await Yo(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var ON="WebWorker",OS=({worker:e})=>({name:ON,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>kS(t))},addWorker:t=>kS(t)});function kS(e){e.addEventListener("message",t=>{MN(t.data)&&(t.stopImmediatePropagation(),A&&h.log("Sentry debugId web worker message received",t.data),k._sentryDebugIds={...t.data._sentryDebugIds,...k._sentryDebugIds})})}function MS({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0})}function MN(e){return qe(e)&&e._sentryMessage===!0&&"_sentryDebugIds"in e&&(qe(e._sentryDebugIds)||e._sentryDebugIds===void 0)}export{LS as Sentry};
