var FS=Object.defineProperty;var Ic=(e,t)=>{for(var n in t)FS(e,n,{get:t[n],enumerable:!0})};var BS={};Ic(BS,{BrowserClient:()=>oo,OpenFeatureIntegrationHook:()=>bc,SDK_VERSION:()=>ut,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>Te,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>z,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>dn,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>Ae,Scope:()=>Je,WINDOW:()=>k,addBreadcrumb:()=>ot,addEventProcessor:()=>ni,addIntegration:()=>Fr,breadcrumbsIntegration:()=>Ua,browserApiErrorsIntegration:()=>Ba,browserProfilingIntegration:()=>CS,browserSessionIntegration:()=>Fa,browserTracingIntegration:()=>oS,buildLaunchDarklyFlagUsedHandler:()=>NS,captureConsoleIntegration:()=>Bu,captureEvent:()=>Gt,captureException:()=>ae,captureFeedback:()=>hi,captureMessage:()=>Un,captureSession:()=>Br,chromeStackLineParser:()=>ed,close:()=>mu,consoleLoggingIntegration:()=>Yu,contextLinesIntegration:()=>_g,continueTrace:()=>tu,createConsolaReporter:()=>Ju,createTransport:()=>ui,createUserFeedbackEnvelope:()=>Zh,dedupeIntegration:()=>mi,defaultRequestInstrumentationOptions:()=>Ji,defaultStackLineParsers:()=>nd,defaultStackParser:()=>Pa,diagnoseSdkConnectivity:()=>LS,endSession:()=>ri,eventFiltersIntegration:()=>Fs,eventFromException:()=>ga,eventFromMessage:()=>_a,exceptionFromError:()=>no,extraErrorDataIntegration:()=>Fu,featureFlagsIntegration:()=>ju,feedbackAsyncIntegration:()=>Ah,feedbackIntegration:()=>xl,feedbackSyncIntegration:()=>xl,flush:()=>pu,forceLoad:()=>sg,functionToStringIntegration:()=>fi,geckoStackLineParser:()=>td,getActiveSpan:()=>J,getClient:()=>T,getCurrentScope:()=>x,getDefaultIntegrations:()=>id,getFeedback:()=>dh,getGlobalScope:()=>pt,getIsolationScope:()=>se,getReplay:()=>O_,getRootSpan:()=>Z,getSpanDescendants:()=>fn,getSpanStatusFromHttpCode:()=>us,getTraceData:()=>cr,globalHandlersIntegration:()=>Ha,graphqlClientIntegration:()=>Tg,growthbookIntegration:()=>OS,httpClientIntegration:()=>fg,httpContextIntegration:()=>$a,inboundFiltersIntegration:()=>pi,init:()=>ig,instrumentAnthropicAiClient:()=>nl,instrumentGoogleGenAIClient:()=>sl,instrumentOpenAiClient:()=>el,instrumentOutgoingRequests:()=>gc,instrumentSupabaseClient:()=>js,isEnabled:()=>ti,isInitialized:()=>hu,lastEventId:()=>ei,launchDarklyIntegration:()=>wS,lazyLoadIntegration:()=>ha,linkedErrorsIntegration:()=>Ga,logger:()=>Ys,makeBrowserOfflineTransport:()=>cS,makeFetchTransport:()=>mo,makeMultiplexedTransport:()=>Nu,metrics:()=>Vs,moduleMetadataIntegration:()=>Uu,onLoad:()=>ag,openFeatureIntegration:()=>xS,opera10StackLineParser:()=>Kh,opera11StackLineParser:()=>Xh,parameterize:()=>Us,registerSpanErrorInstrumentation:()=>qo,registerWebWorker:()=>US,replayCanvasIntegration:()=>Y_,replayIntegration:()=>k_,reportPageLoaded:()=>sS,reportingObserverIntegration:()=>lg,rewriteFramesIntegration:()=>Hu,sendFeedback:()=>bl,setActiveSpanInBrowser:()=>aS,setContext:()=>Zo,setCurrentClient:()=>Ls,setExtra:()=>uu,setExtras:()=>cu,setHttpStatus:()=>Zt,setMeasurement:()=>Vo,setTag:()=>du,setTags:()=>lu,setUser:()=>fu,showReportDialog:()=>cg,spanToBaggageHeader:()=>Jc,spanToJSON:()=>P,spanToTraceHeader:()=>jo,spotlightBrowserIntegration:()=>rg,startBrowserTracingNavigationSpan:()=>af,startBrowserTracingPageLoadSpan:()=>sf,startInactiveSpan:()=>ht,startNewTrace:()=>Cs,startSession:()=>Ur,startSpan:()=>mt,startSpanManual:()=>en,statsigIntegration:()=>MS,supabaseIntegration:()=>$u,suppressTracing:()=>Jo,thirdPartyErrorFilterIntegration:()=>Wu,unleashIntegration:()=>kS,updateSpanName:()=>Yc,webWorkerIntegration:()=>DS,winjsStackLineParser:()=>Jh,withActiveSpan:()=>Ln,withIsolationScope:()=>cs,withScope:()=>Le,zodErrorsIntegration:()=>Gu});var y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var R=globalThis;var ut="10.25.0";function tt(){return Cn(R),R}function Cn(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ut,t[ut]=t[ut]||{}}function Ft(e,t,n=R){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[ut]=r[ut]||{};return o[e]||(o[e]=t())}var Kn=["debug","info","warn","error","log","assert","trace"],HS="Sentry Logger ",Rr={};function je(e){if(!("console"in R))return e();let t=R.console,n={},r=Object.keys(Rr);r.forEach(o=>{let i=Rr[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function $S(){Ac().enabled=!0}function GS(){Ac().enabled=!1}function mf(){return Ac().enabled}function WS(...e){vc("log",...e)}function jS(...e){vc("warn",...e)}function zS(...e){vc("error",...e)}function vc(e,...t){y&&mf()&&je(()=>{R.console[e](`${HS}[${e}]:`,...t)})}function Ac(){return y?Ft("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:$S,disable:GS,isEnabled:mf,log:WS,warn:jS,error:zS};var hf=/\(error: (.*)\)/,gf=/captureMessage|captureException/;function es(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=hf.test(c)?c.replace(hf,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return _f(i.slice(o))}}function Cc(e){return Array.isArray(e)?es(...e):e}function _f(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(Zi(t).function||"")&&t.pop(),t.reverse(),gf.test(Zi(t).function||"")&&(t.pop(),gf.test(Zi(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||Zi(t).filename,function:n.function||"?"}))}function Zi(e){return e[e.length-1]||{}}var Rc="<anonymous>";function lt(e){try{return!e||typeof e!="function"?Rc:e.name||Rc}catch{return Rc}}function Cr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}var ts={},Sf={};function ze(e,t){ts[e]=ts[e]||[],ts[e].push(t)}function qe(e,t){if(!Sf[e]){Sf[e]=!0;try{t()}catch(n){y&&h.error(`Error while instrumenting ${e}`,n)}}}function ke(e,t){let n=e&&ts[e];if(n)for(let r of n)try{r(t)}catch(o){y&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${lt(r)}
Error:`,o)}}var wc=null;function Mo(e){let t="error";ze(t,e),qe(t,qS)}function qS(){wc=R.onerror,R.onerror=function(e,t,n,r,o){return ke("error",{column:r,error:o,line:n,msg:e,url:t}),wc?wc.apply(this,arguments):!1},R.onerror.__SENTRY_INSTRUMENTED__=!0}var Nc=null;function Lo(e){let t="unhandledrejection";ze(t,e),qe(t,YS)}function YS(){Nc=R.onunhandledrejection,R.onunhandledrejection=function(e){return ke("unhandledrejection",e),Nc?Nc.apply(this,arguments):!0},R.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Ef=Object.prototype.toString;function dt(e){switch(Ef.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return bt(e,Error)}}function wr(e,t){return Ef.call(e)===`[object ${t}]`}function ns(e){return wr(e,"ErrorEvent")}function rs(e){return wr(e,"DOMError")}function xc(e){return wr(e,"DOMException")}function De(e){return wr(e,"String")}function wn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function nt(e){return e===null||wn(e)||typeof e!="object"&&typeof e!="function"}function He(e){return wr(e,"Object")}function Xn(e){return typeof Event<"u"&&bt(e,Event)}function kc(e){return typeof Element<"u"&&bt(e,Element)}function Oc(e){return wr(e,"RegExp")}function Ot(e){return!!(e?.then&&typeof e.then=="function")}function Mc(e){return He(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function bt(e,t){try{return e instanceof t}catch{return!1}}function Po(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function os(e){return typeof Request<"u"&&bt(e,Request)}var Lc=R,VS=80;function ve(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||VS;for(;n&&i++<r&&(u=JS(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function JS(e,t){let n=e,r=[];if(!n?.tagName)return"";if(Lc.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&De(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function rt(){try{return Lc.document.location.href}catch{return""}}function Do(e){if(!Lc.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function ge(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&is(o,r);try{e[t]=o}catch{y&&h.log(`Failed to replace method "${t}" in object`,e)}}function ye(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{y&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function is(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,ye(e,"__sentry_original__",t)}catch{}}function Qn(e){return e.__sentry_original__}function ss(e){if(dt(e))return{message:e.message,name:e.name,stack:e.stack,...Tf(e)};if(Xn(e)){let t={type:e.type,target:yf(e.target),currentTarget:yf(e.currentTarget),...Tf(e)};return typeof CustomEvent<"u"&&bt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function yf(e){try{return kc(e)?ve(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Tf(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Pc(e){let t=Object.keys(ss(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function un(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Uo(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Zn(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{Po(o)?n.push("[VueViewModel]"):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Nr(e,t,n=!1){return De(e)?Oc(t)?t.test(e):De(t)?n?e===t:e.includes(t):!1:!1}function $e(e,t=[],n=!1){return t.some(r=>Nr(e,r,n))}function KS(){let e=R;return e.crypto||e.msCrypto}var Dc;function XS(){return Math.random()*16}function ue(e=KS()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Dc||(Dc="10000000100040008000"+1e11),Dc.replace(/[018]/g,t=>(t^(XS()&15)>>t/4).toString(16))}function bf(e){return e.exception?.values?.[0]}function Kt(e){let{message:t,event_id:n}=e;if(t)return t;let r=bf(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function xr(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Ye(e,t){let n=bf(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function Uc(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Uo(s,0));let i=Math.min(r-1,o);t.context_line=Uo(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Uo(s,0))}function as(e){if(QS(e))return!0;try{ye(e,"__sentry_captured__",!0)}catch{}return!1}function QS(e){try{return e.__sentry_captured__}catch{}}var vf=1e3;function It(){return Date.now()/vf}function ZS(){let{performance:e}=R;if(!e?.now||!e.timeOrigin)return It;let t=e.timeOrigin;return()=>(t+e.now())/vf}var If;function Q(){return(If??(If=ZS()))()}var Bc;function eE(){let{performance:e}=R;if(!e?.now)return[void 0,"none"];let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing?.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?[e.timeOrigin,"timeOrigin"]:[s,"navigationStart"]:[r,"dateNow"]}function _e(){return Bc||(Bc=eE()),Bc[0]}function Af(e){let t=Q(),n={sid:ue(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>tE(n)};return e&&ln(n,e),n}function ln(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Q(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ue()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Rf(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ln(e,n)}function tE(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Nn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Nn(r[o],t[o],n-1));return r}function Ge(){return ue()}function Ve(){return ue().substring(16)}var Fc="_sentrySpan";function ft(e,t){t?ye(e,Fc,t):delete e[Fc]}function Ht(e){return e[Fc]}var nE=100,Je=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ge(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,ft(t,Ht(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ln(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():He(n)?t:void 0,{tags:o,extra:i,user:s,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},s&&Object.keys(s).length&&(this._user=s),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ft(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ge(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:nE;if(r<=0)return this;let o={timestamp:It(),...t,message:t.message?un(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Ht(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Nn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||ue();if(!this._client)return y&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||ue();if(!this._client)return y&&h.warn("No client configured on scope - will not capture message!"),o;let i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||ue();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(y&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Cf(){return Ft("defaultCurrentScope",()=>new Je)}function wf(){return Ft("defaultIsolationScope",()=>new Je)}var Hc=class{constructor(t,n){let r;t?r=t:r=new Je;let o;n?o=n:o=new Je,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return Ot(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function kr(){let e=tt(),t=Cn(e);return t.stack=t.stack||new Hc(Cf(),wf())}function rE(e){return kr().withScope(e)}function oE(e,t){let n=kr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Nf(e){return kr().withScope(()=>e(kr().getIsolationScope()))}function xf(){return{withIsolationScope:Nf,withScope:rE,withSetScope:oE,withSetIsolationScope:(e,t)=>Nf(t),getCurrentScope:()=>kr().getScope(),getIsolationScope:()=>kr().getIsolationScope()}}function Mt(e){let t=Cn(e);return t.acs?t.acs:xf()}function x(){let e=tt();return Mt(e).getCurrentScope()}function se(){let e=tt();return Mt(e).getIsolationScope()}function pt(){return Ft("globalScope",()=>new Je)}function Le(...e){let t=tt(),n=Mt(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function cs(...e){let t=tt(),n=Mt(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function T(){return x().getClient()}function Bo(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Ve()};return r&&(i.parent_span_id=r),i}var Ae="sentry.source",dn="sentry.sample_rate",Fo="sentry.previous_trace_sample_rate",Te="sentry.op",z="sentry.origin",xn="sentry.idle_span_finish_reason",Xt="sentry.measurement_unit",Qt="sentry.measurement_value",Or="sentry.custom_span_name",Mr="sentry.profile_id",Lt="sentry.exclusive_time";var $c="http.request.method",Gc="url.full",Wc="sentry.link.type";function us(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}function Zt(e,t){e.setAttribute("http.response.status_code",t);let n=us(t);n.message!=="unknown_error"&&e.setStatus(n)}var kf="_sentryScope",Of="_sentryIsolationScope";function iE(e){try{let t=R.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function sE(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Mf(e,t,n){e&&(ye(e,Of,iE(n)),ye(e,kf,t))}function er(e){let t=e;return{scope:t[kf],isolationScope:sE(t[Of])}}var ls="sentry-",aE=/^sentry-/,cE=8192;function Lr(e){let t=uE(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(aE)){let s=o.slice(ls.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function ds(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${ls}${r}`]=o),n),{});return lE(t)}function uE(e){if(!(!e||!De(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=Lf(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):Lf(e)}function Lf(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function lE(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>cE?(y&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var dE=/^o(\d+)\./,fE=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function pE(e){return e==="http"||e==="https"}function Ue(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function fs(e){let t=fE.exec(e);if(!t){je(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return Pf({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function Pf(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function mE(e){if(!y)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?pE(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function hE(e){return e.match(dE)?.[1]}function ps(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=hE(n)),r}function Ho(e){let t=typeof e=="string"?fs(e):Pf(e);if(!(!t||!mE(t)))return t}function vt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var ms=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Df(e){if(!e)return;let t=e.match(ms);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function $o(e,t){let n=Df(e),r=Lr(t);if(!n?.traceId)return{traceId:Ge(),sampleRand:Math.random()};let o=gE(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function Go(e=Ge(),t=Ve(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function hs(e=Ge(),t=Ve(),n){return`00-${e}-${t}-${n?"01":"00"}`}function gE(e,t){let n=vt(t?.sample_rand);if(n!==void 0)return n;let r=vt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function jc(e,t){let n=ps(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var gs=0,_s=1,Uf=!1;function Ff(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=P(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function Wo(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:P(e).parent_span_id,i=er(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Ve():t;return{parent_span_id:o,span_id:s,trace_id:n}}function jo(e){let{traceId:t,spanId:n}=e.spanContext(),r=At(e);return Go(t,n,r)}function Hf(e){let{traceId:t,spanId:n}=e.spanContext(),r=At(e);return hs(t,n,r)}function Ss(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===_s,attributes:i,...o}))}function $t(e){return typeof e=="number"?Bf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Bf(e.getTime()):Q()}function Bf(e){return e>9999999999?e/1e3:e}function P(e){if(EE(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(SE(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:$t(o),timestamp:$t(s)||void 0,status:Es(a),op:r[Te],origin:r[z],links:Ss(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function SE(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function EE(e){return typeof e.getSpanJSON=="function"}function At(e){let{traceFlags:t}=e.spanContext();return t===_s}function Es(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"internal_error"}var tr="_sentryChildSpans",zc="_sentryRootSpan";function ys(e,t){let n=e[zc]||e;ye(t,zc,n),e[tr]?e[tr].add(t):ye(e,tr,new Set([t]))}function $f(e,t){e[tr]&&e[tr].delete(t)}function fn(e){let t=new Set;function n(r){if(!t.has(r)&&At(r)){t.add(r);let o=r[tr]?Array.from(r[tr]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function Z(e){return e[zc]||e}function J(){let e=tt(),t=Mt(e);return t.getActiveSpan?t.getActiveSpan():Ht(x())}function zo(){Uf||(je(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Uf=!0)}function Yc(e,t){e.updateName(t),e.setAttributes({[Ae]:"custom",[Or]:t})}var Gf=!1;function qo(){if(Gf)return;function e(){let t=J(),n=t&&Z(t);if(n){let r="internal_error";y&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",Gf=!0,Mo(e),Lo(e)}function we(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||T()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Wf(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function nr(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(yE(n)){if(Nr(e.description,n))return y&&Wf(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?Nr(e.description,n.name):!0,o=n.op?e.op&&Nr(e.op,n.op):!0;if(r&&o)return y&&Wf(e),!0}return!1}function jf(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function yE(e){return typeof e=="string"||e instanceof RegExp}var pn="production";var zf="_frozenDsc";function Pr(e,t){ye(e,zf,t)}function Vc(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||pn,release:n.release,public_key:r,trace_id:e,org_id:ps(t)};return t.emit("createDsc",o),o}function rr(e,t){let n=t.getPropagationContext();return n.dsc||Vc(n.traceId,e)}function Ne(e){let t=T();if(!t)return{};let n=Z(e),r=P(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[dn]??o[Fo];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[zf];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&Lr(u);if(d)return a(d);let l=Vc(e.spanContext().traceId,t),p=o[Ae],f=r.description;return p!=="url"&&f&&(l.transaction=f),we()&&(l.sampled=String(At(n)),l.sample_rand=i?.get("sentry.sample_rand")??er(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function Jc(e){let t=Ne(e);return ds(t)}var Ke=class{constructor(t={}){this._traceId=t.traceId||Ge(),this._spanId=t.spanId||Ve()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:gs}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Pe(e,t=100,n=1/0){try{return Kc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ts(e,t=3,n=100*1024){let r=Pe(e,t);return vE(r)>n?Ts(e,t-1,n):r}function Kc(e,t,n=1/0,r=1/0,o=AE()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=TE(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let f=u.toJSON();return Kc("",f,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,p=ss(t);for(let f in p){if(!Object.prototype.hasOwnProperty.call(p,f))continue;if(l>=r){d[f]="[MaxProperties ~]";break}let m=p[f];d[f]=Kc(f,m,c-1,r,o),l++}return s(t),d}function TE(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Po(t))return"[VueViewModel]";if(Mc(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${lt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=bE(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function bE(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function IE(e){return~-encodeURI(e).split(/%..|./).length}function vE(e){return IE(JSON.stringify(e))}function AE(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function xe(e,t=[]){return[e,t]}function Xc(e,t){let[n,r]=e;return[n,[...r,t]]}function Rt(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Is(e,t){return Rt(e,(n,r)=>t.includes(r))}function bs(e){let t=Cn(R);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function RE(e){let t=Cn(R);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function kn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[bs(r),i]:r.push(typeof i=="string"?bs(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Pe(a))}o(c)}}return typeof r=="string"?r:CE(r)}function CE(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function Qc(e){let t=typeof e=="string"?bs(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(RE(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function Zc(e){return[{type:"span"},e]}function eu(e){let t=typeof e.data=="string"?bs(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var wE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function vs(e){return wE[e]}function On(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Yo(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ue(r)},...o&&{trace:o}}}function NE(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function qf(e,t,n,r){let o=On(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Ue(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return xe(i,[s])}function Yf(e,t,n,r){let o=On(n),i=e.type&&e.type!=="replay_event"?e.type:"event";NE(e,n?.sdk);let s=Yo(e,o,r,t);return delete e.sdkProcessingMetadata,xe(s,[[{type:i},e]])}function Vf(e,t){function n(f){return!!f.trace_id&&!!f.public_key}let r=Ne(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Ue(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(f=>!nr(P(f),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?f=>{let m=P(f),g=a(m);return g||(zo(),m)}:P,p=[];for(let f of u){let m=l(f);m&&p.push(Zc(m))}return xe(s,p)}function Jf(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=P(e),{spanId:o}=e.spanContext(),i=At(e),s=Z(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=P(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function Kf(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >"}=P(e),{spanId:r}=e.spanContext(),i=Z(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function Vo(e,t,n,r=J()){let o=r&&Z(r);o&&(y&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Qt]:t,[Xt]:n}))}function As(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[Xt],i=r[Qt];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var Xf=1e3,Mn=class{constructor(t={}){this._traceId=t.traceId||Ge(),this._spanId=t.spanId||Ve(),this._startTime=t.startTimestamp||Q(),this._links=t.links,this._attributes={},this.setAttributes({[z]:"manual",[Te]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?_s:gs}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=$t(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Ae,"custom"),this}end(t){this._endTime||(this._endTime=$t(t),Kf(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Te],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Es(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[z],profile_id:this._attributes[Mr],exclusive_time:this._attributes[Lt],measurements:As(this._events),is_segment:this._isStandaloneSpan&&Z(this)===this||void 0,segment_id:this._isStandaloneSpan?Z(this).spanContext().spanId:void 0,links:Ss(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){y&&h.log("[Tracing] Adding an event to span:",t);let o=Qf(n)?n:r||Q(),i=Qf(n)?{}:n||{},s={name:t,time:$t(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=T();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Z(this)))return;if(this._isStandaloneSpan){this._sampled?kE(Vf([this],t)):(y&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(er(this).scope||x()).captureEvent(r)}_convertSpanToTransaction(){if(!Zf(P(this)))return;this._name||(y&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=er(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=fn(this).filter(d=>d!==this&&!xE(d)).map(d=>P(d)).filter(Zf),s=this._attributes[Ae];delete this._attributes[Or],i.forEach(d=>{delete d.data[Or]});let a={contexts:{trace:Ff(this)},spans:i.length>Xf?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Xf):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:Ne(this)},request:r,...s&&{transaction_info:{source:s}}},c=As(this._events);return c&&Object.keys(c).length&&(y&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Qf(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Zf(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function xE(e){return e instanceof Mn&&e.isStandaloneSpan()}function kE(e){let t=T();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function or(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return OE(o,t,n,r)}function OE(e,t,n,r){return Ot(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function ep(e,t,n){if(!we(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=vt(o);if(i===void 0)return y&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return y&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||y&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Rs="__SENTRY_SUPPRESS_TRACING__";function mt(e,t){let n=Ko();if(n.startSpan)return n.startSpan(e,t);let r=ru(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Le(a,()=>np(i)(()=>{let u=x(),d=ou(u,i),p=e.onlyIfParent&&!d?new Ke:nu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ft(u,p),or(()=>t(p),()=>{let{status:f}=P(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})},()=>{p.end()})}))}function en(e,t){let n=Ko();if(n.startSpanManual)return n.startSpanManual(e,t);let r=ru(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Le(a,()=>np(i)(()=>{let u=x(),d=ou(u,i),p=e.onlyIfParent&&!d?new Ke:nu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return ft(u,p),or(()=>t(p,()=>p.end()),()=>{let{status:f}=P(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:2,message:"internal_error"})})}))}function ht(e){let t=Ko();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=ru(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>Le(e.scope,s):o!==void 0?s=>Ln(o,s):s=>s())(()=>{let s=x(),a=ou(s,o);return e.onlyIfParent&&!a?new Ke:nu({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var tu=(e,t)=>{let n=tt(),r=Mt(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=T(),a=Lr(i);return s&&!jc(s,a?.org_id)?Cs(t):Le(c=>{let u=$o(o,i);return c.setPropagationContext(u),t()})};function Ln(e,t){let n=Ko();return n.withActiveSpan?n.withActiveSpan(e,t):Le(r=>(ft(r,e||void 0),t(r)))}function Jo(e){let t=Ko();return t.suppressTracing?t.suppressTracing(e):Le(n=>{n.setSDKProcessingMetadata({[Rs]:!0});let r=e();return n.setSDKProcessingMetadata({[Rs]:void 0}),r})}function Cs(e){return Le(t=>(t.setPropagationContext({traceId:Ge(),sampleRand:Math.random()}),y&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Ln(null,e)))}function nu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!we()){let s=new Ke;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...Ne(s)};Pr(s,a)}return s}let o=se(),i;if(e&&!n)i=ME(e,r,t),ys(e,i);else if(e){let s=Ne(e),{traceId:a,spanId:c}=e.spanContext(),u=At(e);i=tp({traceId:a,parentSpanId:c,...t},r,u),Pr(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=tp({traceId:s,parentSpanId:c,...t},r,u),a&&Pr(i,a)}return Jf(i),Mf(i,r,o),i}function ru(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=$t(e.startTime),delete r.startTime,r}return n}function Ko(){let e=tt();return Mt(e)}function tp(e,t,n){let r=T(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,p]=t.getScopeData().sdkProcessingMetadata[Rs]?[!1]:ep(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:vt(u.dsc?.sample_rate)},u.sampleRand),f=new Mn({...e,attributes:{[Ae]:"custom",[dn]:l!==void 0&&p?l:void 0,...c},sampled:d});return!d&&r&&(y&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function ME(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Rs]?!1:At(e),s=i?new Mn({...n,parentSpanId:r,traceId:o,sampled:i}):new Ke({traceId:o});ys(e,s);let a=T();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function ou(e,t){if(t)return t;if(t===null)return;let n=Ht(e);if(!n)return;let r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Z(n):n}function np(e){return e!==void 0?t=>Ln(e,t):t=>t()}var Dr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},LE="heartbeatFailed",PE="idleTimeout",DE="finalTimeout",UE="externalFinish";function ws(e,t={}){let n=new Map,r=!1,o,i=UE,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Dr.idleTimeout,finalTimeout:u=Dr.finalTimeout,childSpanTimeout:d=Dr.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:p=!0}=t,f=T();if(!f||!we()){let S=new Ke,O={sample_rate:"0",sampled:"false",...Ne(S)};return Pr(S,O),S}let m=x(),g=J(),_=BE(e);_.end=new Proxy(_.end,{apply(S,O,F){if(l&&l(_),O instanceof Ke)return;let[I,...L]=F,C=I||Q(),N=$t(C),G=fn(_).filter(w=>w!==_),ee=P(_);if(!G.length||!p)return B(N),Reflect.apply(S,O,[N,...L]);let K=f.getOptions().ignoreSpans,ce=G?.reduce((w,X)=>{let le=P(X);return!le.timestamp||K&&nr(le,K)?w:w?Math.max(w,le.timestamp):le.timestamp},void 0),A=ee.start_timestamp,q=Math.min(A?A+u/1e3:1/0,Math.max(A||-1/0,Math.min(N,ce||1/0)));return B(q),Reflect.apply(S,O,[q,...L])}});function E(){o&&(clearTimeout(o),o=void 0)}function b(S){E(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=PE,_.end(S))},c)}function U(S){o=setTimeout(()=>{!r&&s&&(i=LE,_.end(S))},d)}function M(S){E(),n.set(S,!0);let O=Q();U(O+d/1e3)}function j(S){if(n.has(S)&&n.delete(S),n.size===0){let O=Q();b(O+c/1e3)}}function B(S){r=!0,n.clear(),a.forEach(N=>N()),ft(m,g);let O=P(_),{start_timestamp:F}=O;if(!F)return;O.data[xn]||_.setAttribute(xn,i),h.log(`[Tracing] Idle span "${O.op}" finished`);let L=fn(_).filter(N=>N!==_),C=0;L.forEach(N=>{N.isRecording()&&(N.setStatus({code:2,message:"cancelled"}),N.end(S),y&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(N,void 0,2)));let G=P(N),{timestamp:ee=0,start_timestamp:K=0}=G,ce=K<=S,A=(u+c)/1e3,q=ee-K<=A;if(y){let w=JSON.stringify(N,void 0,2);ce?q||h.log("[Tracing] Discarding span since it finished after idle span final timeout",w):h.log("[Tracing] Discarding span since it happened after idle span was finished",w)}(!q||!ce)&&($f(_,N),C++)}),C>0&&_.setAttribute("sentry.idle_span_discarded_spans",C)}return a.push(f.on("spanStart",S=>{if(r||S===_||P(S).timestamp||S instanceof Mn&&S.isStandaloneSpan())return;fn(_).includes(S)&&M(S.spanContext().spanId)})),a.push(f.on("spanEnd",S=>{r||j(S.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",S=>{S===_&&(s=!0,b(),n.size&&U())})),t.disableAutoFinish||b(),setTimeout(()=>{r||(_.setStatus({code:2,message:"deadline_exceeded"}),i=DE,_.end())},u),_}function BE(e){let t=ht(e);return ft(x(),t),y&&h.log("[Tracing] Started span is an idle span"),t}var iu=0,rp=1,op=2;function Pn(e){return new Xo(t=>{t(e)})}function ir(e){return new Xo((t,n)=>{n(e)})}var Xo=class e{constructor(t){this._state=iu,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===iu)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===rp&&n[1](this._value),this._state===op&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===iu){if(Ot(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(rp,i)},o=i=>{n(op,i)};try{t(r,o)}catch(i){o(i)}}};function ip(e,t,n,r=0){try{let o=su(t,n,e,r);return Ot(o)?o:Pn(o)}catch(o){return ir(o)}}function su(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return y&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),Ot(i)?i.then(s=>su(s,t,n,r+1)):su(i,t,n,r+1)}function sp(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;FE(e,t),r&&GE(e,r),WE(e,n),HE(e,o),$E(e,i)}function mn(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:p,transactionName:f,span:m}=t;Ns(e,"extra",n),Ns(e,"tags",r),Ns(e,"user",o),Ns(e,"contexts",i),e.sdkProcessingMetadata=Nn(e.sdkProcessingMetadata,a,2),s&&(e.level=s),f&&(e.transactionName=f),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...p}}function Ns(e,t,n){e[t]=Nn(e[t],n,1)}function FE(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function HE(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function $E(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function GE(e,t){e.contexts={trace:Wo(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ne(t),...e.sdkProcessingMetadata};let n=Z(t),r=P(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function WE(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}var sr,ap,cp,Dn;function xs(e){let t=R._sentryDebugIds,n=R._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Dn&&r.length===ap&&o.length===cp)return Dn;ap=r.length,cp=o.length,Dn={},sr||(sr={});let i=(s,a)=>{for(let c of s){let u=a[c],d=sr?.[c];if(d&&Dn&&u)Dn[d[0]]=u,sr&&(sr[c]=[d[0],u]);else if(u){let l=e(c);for(let p=l.length-1;p>=0;p--){let m=l[p]?.filename;if(m&&Dn&&sr){Dn[m]=u,sr[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),Dn}function au(e,t){let n=xs(e);if(!n)return[];let r=[];for(let o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function Qo(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ue(),timestamp:t.timestamp||It()},u=n.integrations||e.integrations.map(_=>_.name);jE(c,e),YE(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&zE(c,e.stackParser);let d=JE(r,n.captureContext);n.mechanism&&Ye(c,n.mechanism);let l=o?o.getEventProcessors():[],p=pt().getScopeData();if(i){let _=i.getScopeData();mn(p,_)}if(d){let _=d.getScopeData();mn(p,_)}let f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),sp(c,p);let m=[...l,...p.eventProcessors];return ip(m,c,n).then(_=>(_&&qE(_),typeof s=="number"&&s>0?VE(_,s,a):_))}function jE(e,t){let{environment:n,release:r,dist:o,maxValueLength:i}=t;e.environment=e.environment||n||pn,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&(s.url=i?un(s.url,i):s.url)}function zE(e,t){let n=xs(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function qE(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function YE(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function VE(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Pe(o.data,t,n)}}))},...e.user&&{user:Pe(e.user,t,n)},...e.contexts&&{contexts:Pe(e.contexts,t,n)},...e.extra&&{extra:Pe(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Pe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Pe(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Pe(e.contexts.flags,3,n)),r}function JE(e,t){if(!t)return e;let n=e?e.clone():new Je;return n.update(t),n}function up(e){if(e)return KE(e)?{captureContext:e}:QE(e)?{captureContext:e}:e}function KE(e){return e instanceof Je||typeof e=="function"}var XE=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function QE(e){return Object.keys(e).some(t=>XE.includes(t))}function ae(e,t){return x().captureException(e,up(t))}function Un(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return x().captureMessage(e,n,r)}function Gt(e,t){return x().captureEvent(e,t)}function Zo(e,t){se().setContext(e,t)}function cu(e){se().setExtras(e)}function uu(e,t){se().setExtra(e,t)}function lu(e){se().setTags(e)}function du(e,t){se().setTag(e,t)}function fu(e){se().setUser(e)}function ei(){return se().lastEventId()}async function pu(e){let t=T();return t?t.flush(e):(y&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function mu(e){let t=T();return t?t.close(e):(y&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function hu(){return!!T()}function ti(){let e=T();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function ni(e){se().addEventProcessor(e)}function Ur(e){let t=se(),n=x(),{userAgent:r}=R.navigator||{},o=Af({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&ln(i,{status:"exited"}),ri(),t.setSession(o),o}function ri(){let e=se(),n=x().getSession()||e.getSession();n&&Rf(n),lp(),e.setSession()}function lp(){let e=se(),t=T(),n=e.getSession();n&&t&&t.captureSession(n)}function Br(e=!1){if(e){ri();return}lp()}var ZE="7";function dp(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function ey(e){return`${dp(e)}${e.projectId}/envelope/`}function ty(e,t){let n={sentry_version:ZE};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function oi(e,t,n){return t||`${ey(e)}?${ty(e,n)}`}function gu(e,t){let n=Ho(e);if(!n)return"";let r=`${dp(n)}embed/error-page/`,o=`dsn=${Ue(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var fp=[];function ny(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function _u(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return ny(r)}function pp(e,t){let n={};return t.forEach(r=>{r&&Eu(e,r,n)}),n}function Su(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Eu(e,t,n){if(n[t.name]){y&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,fp.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),fp.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}y&&h.log(`Integration installed: ${t.name}`)}function Fr(e){let t=T();if(!t){y&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function ks(e,t){return t?Le(t,()=>{let n=J(),r=n?Wo(n):Bo(t);return[n?Ne(n):rr(e,t),r]}):[void 0,void 0]}var mp={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function ry(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function hp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Ue(r)),xe(o,[ry(e)])}var oy=100;function iy(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function tn(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function gp(e,t){let n=yu(),r=_p(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=oy&&Hr(e,r))}function Bn(e,t=x(),n=gp){let r=t?.getClient()??T();if(!r){y&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){y&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=ks(r,t),u={...e.attributes},{user:{id:d,email:l,username:p}}=sy(t);tn(u,"user.id",d,!1),tn(u,"user.email",l,!1),tn(u,"user.name",p,!1),tn(u,"sentry.release",o),tn(u,"sentry.environment",i);let{name:f,version:m}=r.getSdkMetadata()?.sdk??{};tn(u,"sentry.sdk.name",f),tn(u,"sentry.sdk.version",m);let g=r.getIntegrationByName("Replay"),_=g?.getReplayId(!0);tn(u,"sentry.replay_id",_),_&&g?.getRecordingMode()==="buffer"&&tn(u,"sentry._internal.replay_is_buffering",!0);let E=e.message;if(wn(E)){let{__sentry_template_string__:I,__sentry_template_values__:L=[]}=E;L?.length&&(u["sentry.message.template"]=I),L.forEach((C,N)=>{u[`sentry.message.parameter.${N}`]=C})}let b=Ht(t);tn(u,"sentry.trace.parent_span_id",b?.spanContext().spanId);let U={...e,attributes:u};r.emit("beforeCaptureLog",U);let M=a?je(()=>a(U)):U;if(!M){r.recordDroppedEvent("before_send","log_item",1),y&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:j,message:B,attributes:S={},severityNumber:O}=M,F={timestamp:Q(),level:j,body:B,trace_id:c?.trace_id,severity_number:O??mp[j],attributes:Object.keys(S).reduce((I,L)=>(I[L]=iy(S[L]),I),{})};n(r,F),r.emit("afterCaptureLog",M)}function Hr(e,t){let n=t??_p(e)??[];if(n.length===0)return;let r=e.getOptions(),o=hp(n,r._metadata,r.tunnel,e.getDsn());yu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function _p(e){return yu().get(e)}function sy(e){let t=pt().getScopeData();return mn(t,se().getScopeData()),mn(t,e.getScopeData()),t}function yu(){return Ft("clientToLogBufferMap",()=>new WeakMap)}function ay(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function Sp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Ue(r)),xe(o,[ay(e)])}var cy=1e3;function uy(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function hn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function Ep(e,t){let n=bu(),r=yp(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=cy&&$r(e,r))}function ly(e,t,n){let{release:r,environment:o}=t.getOptions(),i={...e.attributes},{user:{id:s,email:a,username:c}}=fy(n);hn(i,"user.id",s,!1),hn(i,"user.email",a,!1),hn(i,"user.name",c,!1),hn(i,"sentry.release",r),hn(i,"sentry.environment",o);let{name:u,version:d}=t.getSdkMetadata()?.sdk??{};hn(i,"sentry.sdk.name",u),hn(i,"sentry.sdk.version",d);let l=t.getIntegrationByName("Replay"),p=l?.getReplayId(!0);return hn(i,"sentry.replay_id",p),p&&l?.getRecordingMode()==="buffer"&&hn(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function dy(e,t,n){let r={};for(let c in e.attributes)e.attributes[c]!==void 0&&(r[c]=uy(e.attributes[c]));let[,o]=ks(t,n),i=Ht(n),s=i?i.spanContext().traceId:o?.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:Q(),trace_id:s??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:r}}function Tu(e,t){let n=t?.scope??x(),r=t?.captureSerializedMetric??Ep,o=n?.getClient()??T();if(!o){y&&h.warn("No client available to capture metric.");return}let{_experiments:i,enableMetrics:s,beforeSendMetric:a}=o.getOptions();if(!(s??i?.enableMetrics??!0)){y&&h.warn("metrics option not enabled, metric will not be captured.");return}let u=ly(e,o,n),d=a||i?.beforeSendMetric,l=d?d(u):u;if(!l){y&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let p=dy(l,o,n);y&&h.log("[Metric]",p),r(o,p),o.emit("afterCaptureMetric",u)}function $r(e,t){let n=t??yp(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Sp(n,r._metadata,r.tunnel,e.getDsn());bu().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function yp(e){return bu().get(e)}function fy(e){let t=pt().getScopeData();return mn(t,se().getScopeData()),mn(t,e.getScopeData()),t}function bu(){return Ft("clientToMetricBufferMap",()=>new WeakMap)}function Tp(e,t,n){let r=[{type:"client_report"},{timestamp:n||It(),discarded_events:e}];return xe(t?{dsn:t}:{},[r])}function Os(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function bp(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[Mr],exclusive_time:s?.[Lt],measurements:e.measurements,is_segment:!0}}function Ip(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Mr]:e.profile_id},...e.exclusive_time&&{[Lt]:e.exclusive_time}}}},measurements:e.measurements}}var vp="Not capturing exception because it's already been captured.",Ap="Discarded session because of missing or non-string release",xp=Symbol.for("SentryInternalError"),kp=Symbol.for("SentryDoNotSendEventError"),py=5e3;function Ms(e){return{message:e,[xp]:!0}}function Iu(e){return{message:e,[kp]:!0}}function Rp(e){return!!e&&typeof e=="object"&&xp in e}function Cp(e){return!!e&&typeof e=="object"&&kp in e}function wp(e,t,n,r,o){let i=0,s;e.on(n,()=>{i=0,clearTimeout(s)}),e.on(t,a=>{i+=r(a),i>=8e5?o(e):(clearTimeout(s),s=setTimeout(()=>{o(e)},py))}),e.on("flush",()=>{o(e)})}var ii=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Ho(t.dsn):y&&h.warn("No DSN provided, client will not send events."),this._dsn){let r=oi(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs&&wp(this,"afterCaptureLog","flushLogs",_y,Hr),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&wp(this,"afterCaptureMetric","flushMetrics",gy,$r)}captureException(t,n,r){let o=ue();if(as(t))return y&&h.log(vp),o;let i={event_id:o,...n};return this._process(this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r))),i.event_id}captureMessage(t,n,r,o){let i={event_id:ue(),...r},s=wn(t)?t:String(t),a=nt(t)?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,o))),i.event_id}captureEvent(t,n,r){let o=ue();if(n?.originalException&&as(n.originalException))return y&&h.log(vp),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),ln(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];Eu(this,t,this._integrations),n||Su(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Yf(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=Xc(r,eu(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=pn}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){y&&h.warn(Ap);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){y&&h.warn(Ap);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=qf(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;y&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return y&&h.error("Error while sending envelope:",n),{}}return y&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=pp(this,t),Su(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0,r=!1;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(ln(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Qo(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Bo(r),...a.contexts};let c=rr(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=x(),o=se()){return y&&vu(t)&&h.log(`Captured error event \`${Os(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{y&&(Cp(i)?h.log(i.message):Rp(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=Op(t),c=vu(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof s>"u"?void 0:vt(s);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),ir(Iu(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let p=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",p),Iu("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return f;let g=hy(this,i,f,n);return my(g,d)}).then(f=>{if(f===null){if(this.recordDroppedEvent("before_send",p),a){let E=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw Iu(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,f),a){let _=f.sdkProcessingMetadata?.spanCountBeforeProcessing||0,E=f.spans?f.spans.length:0,b=_-E;b>0&&this.recordDroppedEvent("before_send","span",b)}let g=f.transaction_info;if(a&&g&&f.transaction!==t.transaction){let _="custom";f.transaction_info={...g,source:_}}return this.sendEvent(f,n),f}).then(null,f=>{throw Cp(f)||Rp(f)?f:(this.captureException(f,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:f}),Ms(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){y&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){y&&h.log("No outcomes to send");return}if(!this._dsn){y&&h.log("No dsn provided, will not send outcomes");return}y&&h.log("Sending outcomes:",t);let n=Tp(t,this._options.tunnel&&Ue(this._dsn));this.sendEnvelope(n)}};function my(e,t){let n=`${t} must return \`null\` or a valid event.`;if(Ot(e))return e.then(r=>{if(!He(r)&&r!==null)throw Ms(n);return r},r=>{throw Ms(`${t} rejected with ${r}`)});if(!He(e)&&e!==null)throw Ms(n);return e}function hy(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(vu(c)&&o)return o(c,r);if(Op(c)){if(s||a){let u=bp(c);if(a?.length&&nr(u,a))return null;if(s){let d=s(u);d?c=Nn(n,Ip(d)):zo()}if(c.spans){let d=[],l=c.spans;for(let f of l){if(a?.length&&nr(f,a)){jf(l,f);continue}if(s){let m=s(f);m?d.push(m):(zo(),d.push(f))}else d.push(f)}let p=c.spans.length-d.length;p&&e.recordDroppedEvent("before_send","span",p),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function vu(e){return e.type===void 0}function Op(e){return e.type==="transaction"}function gy(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+Mp(e.attributes)}function _y(e){let t=0;return e.message&&(t+=e.message.length*2),t+Mp(e.attributes)}function Mp(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Np(n[0]):nt(n)?t+=Np(n):t+=100}),t}function Np(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Au(e,t){t.debug===!0&&(y?h.enable():je(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),x().update(t.initialScope);let r=new e(t);return Ls(r),r.init(),r}function Ls(e){x().setClient(e)}var Ps=Symbol.for("SentryBufferFullError");function si(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return ir(Ps);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return Pn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}function Ds(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Lp(e,t){return e[t]||e.all||0}function ai(e,t,n=Date.now()){return Lp(e,t)>n}function ci(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),p=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+p;else for(let f of u.split(";"))f==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[f]=r+p):o[f]=r+p}else s?o.all=r+Ds(s,r):t===429&&(o.all=r+60*1e3);return o}var Sy=64;function ui(e,t,n=si(e.bufferSize||Sy)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(Rt(s,(l,p)=>{let f=vs(p);ai(r,f)?e.recordDroppedEvent("ratelimit_backoff",f):a.push(l)}),a.length===0)return Promise.resolve({});let c=xe(s[0],a),u=l=>{Rt(c,(p,f)=>{e.recordDroppedEvent(l,vs(f))})},d=()=>t({body:kn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&y&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=ci(r,l),l),l=>{throw u("network_error"),y&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Ps)return y&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}var Ru=100,Cu=5e3,Ey=36e5;function wu(e){function t(...n){y&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=Cu,s;function a(l,p,f){return Is(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,p,f):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let p=await o.shift();p&&(t("Attempting to send previously queued event"),p[0].sent_at=new Date().toISOString(),d(p,!0).catch(f=>{t("Failed to retry sending",f)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,Ey))}async function d(l,p=!1){if(!p&&Is(l,["replay_event","replay_recording"]))return await o.push(l),c(Ru),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let f=await r.send(l),m=Ru;if(f){if(f.headers?.["retry-after"])m=Ds(f.headers["retry-after"]);else if(f.headers?.["x-sentry-rate-limits"])m=6e4;else if((f.statusCode||0)>=400)return f}return c(m),i=Cu,f}catch(f){if(await a(l,f,i))return p?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",f),{};throw f}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=Cu,c(Ru)),r.flush(l))}}}function Pp(e,t){let n;return Rt(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function yy(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=Pp(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function Ty(e,t){return xe(t?{...e[0],dsn:t}:e[0],e[1])}function Nu(e,t){return n=>{let r=e(n),o=new Map;function i(c,u){let d=u?`${c}:${u}`:c,l=o.get(d);if(!l){let p=fs(c);if(!p)return;let f=oi(p,n.tunnel);l=u?yy(e,u)({...n,url:f}):e({...n,url:f}),o.set(d,l)}return[c,l]}async function s(c){function u(f){let m=f?.length?f:["event"];return Pp(c,m)}let d=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f),l=d.length?d:[["",r]];return(await Promise.all(l.map(([f,m])=>m.send(Ty(c,f)))))[0]}async function a(c){let u=[...o.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:s,flush:a}}}var by="thismessage:/";function Gr(e){return"isRelative"in e}function ar(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?by:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function xu(e){if(Gr(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Wt(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function li(e){return e.split(/[?#]/,1)[0]}function di(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return vy(e,n)||Iy(e,r)}function Iy(e,t){return t?Dp(e)===Dp(t):!1}function vy(e,t){let n=ar(e);return!n||Gr(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Dp(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Us(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var ku=Us;function Ou(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Mu(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:ut})),version:ut}),e._metadata=o}function cr(e={}){let t=e.client||T();if(!ti()||!t)return{};let n=tt(),r=Mt(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||x(),i=e.span||J(),s=i?jo(i):Ay(o),a=i?Ne(i):rr(t,o),c=ds(a);if(!ms.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};if(e.propagateTraceparent){let l=i?Hf(i):Ry(o);l&&(d.traceparent=l)}return d}function Ay(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Go(t,r,n)}function Ry(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return hs(t,r,n)}function Lu(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var Cy=100;function ot(e,t){let n=T(),r=se();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Cy}=n.getOptions();if(i<=0)return;let a={timestamp:It(),...e},c=o?je(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var Up,wy="FunctionToString",Bp=new WeakMap,Ny=(()=>({name:wy,setupOnce(){Up=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=Qn(this),n=Bp.has(T())&&t!==void 0?t:this;return Up.apply(n,e)}}catch{}},setup(e){Bp.set(e,!0)}})),fi=Ny;var xy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ky="EventFilters",Fs=(e={})=>{let t;return{name:ky,setup(n){let r=n.getOptions();t=Fp(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=Fp(e,i)}return Oy(n,t)?null:n}}},pi=((e={})=>({...Fs(e),name:"InboundFilters"}));function Fp(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:xy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Oy(e,t){if(e.type){if(e.type==="transaction"&&Ly(e,t.ignoreTransactions))return y&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Kt(e)}`),!0}else{if(My(e,t.ignoreErrors))return y&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Kt(e)}`),!0;if(By(e))return y&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Kt(e)}`),!0;if(Py(e,t.denyUrls))return y&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Kt(e)}.
Url: ${Bs(e)}`),!0;if(!Dy(e,t.allowUrls))return y&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Kt(e)}.
Url: ${Bs(e)}`),!0}return!1}function My(e,t){return t?.length?Os(e).some(n=>$e(n,t)):!1}function Ly(e,t){if(!t?.length)return!1;let n=e.transaction;return n?$e(n,t):!1}function Py(e,t){if(!t?.length)return!1;let n=Bs(e);return n?$e(n,t):!1}function Dy(e,t){if(!t?.length)return!0;let n=Bs(e);return n?$e(n,t):!0}function Uy(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Bs(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?Uy(n):null}catch{return y&&h.error(`Cannot extract url for event ${Kt(e)}`),null}}function By(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function Du(e,t,n,r,o,i){if(!o.exception?.values||!i||!bt(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Pu(e,t,r,i.originalException,n,o.exception.values,s,0))}function Pu(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(bt(r[o],Error)){Hp(s,a);let u=e(t,r[o]),d=c.length;$p(u,o,d,a),c=Pu(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(bt(u,Error)){Hp(s,a);let l=e(t,u),p=c.length;$p(l,`errors[${d}]`,p,a),c=Pu(e,t,n,u,o,[l,...c],l,p)}}),c}function Hp(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function $p(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var Wp=new Map,Gp=new Set;function Fy(e){if(R._sentryModuleMetadata)for(let t of Object.keys(R._sentryModuleMetadata)){let n=R._sentryModuleMetadata[t];if(Gp.has(t))continue;Gp.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){Wp.set(o.filename,n);break}}}function Hy(e,t){return Fy(e),Wp.get(t)}function Hs(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=Hy(e,r.filename);o&&(r.module_metadata=o)})})}function $s(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var Uu=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Rt(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&($s(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;Hs(n,t)})}});function ur(e){let t="console";ze(t,e),qe(t,$y)}function $y(){"console"in R&&Kn.forEach(function(e){e in R.console&&ge(R.console,e,function(t){return Rr[e]=t,function(...n){ke("console",{args:n,level:e}),Rr[e]?.apply(R.console,n)}})})}function lr(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var Gy="CaptureConsole",Wy=((e={})=>{let t=e.levels||Kn,n=e.handled??!0;return{name:Gy,setup(r){"console"in R&&ur(({args:o,level:i})=>{T()!==r||!t.includes(i)||jy(o,i,n)})}}}),Bu=Wy;function jy(e,t,n){let r={level:lr(t),extra:{arguments:e}};Le(o=>{if(o.addEventProcessor(a=>(a.logger="console",Ye(a,{handled:n,type:"auto.core.capture_console"}),a)),t==="assert"){if(!e[0]){let a=`Assertion failed: ${Zn(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),Un(a,r)}return}let i=e.find(a=>a instanceof Error);if(i){ae(i,r);return}let s=Zn(e," ");Un(s,r)})}var zy="Dedupe",qy=(()=>{let e;return{name:zy,processEvent(t){if(t.type)return t;try{if(Yy(t,e))return y&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),mi=qy;function Yy(e,t){return t?!!(Vy(e,t)||Jy(e,t)):!1}function Vy(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!qp(e,t)||!zp(e,t))}function Jy(e,t){let n=jp(t),r=jp(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!qp(e,t)||!zp(e,t))}function zp(e,t){let n=Cr(e),r=Cr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function qp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function jp(e){return e.exception?.values?.[0]}var Ky="ExtraErrorData",Xy=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:Ky,processEvent(r,o,i){let{maxValueLength:s}=i.getOptions();return Qy(r,o,t,n,s)}}}),Fu=Xy;function Qy(e,t={},n,r,o){if(!t.originalException||!dt(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=Yp(t.originalException,r,o);if(s){let a={...e.contexts},c=Pe(s,n);return He(c)&&(ye(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function Yp(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=dt(s)||typeof s=="string"?n?un(`${s}`,n):`${s}`:s}if(t&&e.cause!==void 0)if(dt(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:Yp(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=dt(a)?a.toString():a}}return o}catch(r){y&&h.error("Unable to extract extra data from the Error object:",r)}return null}function Zy(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var eT=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function tT(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=eT.exec(t);return n?n.slice(1):[]}function Vp(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=Zy(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Jp(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Kp(e,t){e=Vp(e).slice(1),t=Vp(t).slice(1);let n=Jp(e.split("/")),r=Jp(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function Xp(e,t){let n=tT(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var nT="RewriteFrames",Hu=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in R&&!!R.window,o=e.iteratee||rT({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:nT,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function rT({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Kp(t,s):Xp(s);r.filename=`${n}${a}`}return r}}var oT=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],iT=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],sT={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Zp=["select","insert","upsert","update","delete"];function Gs(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Ws(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function aT(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function cT(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&sT[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Qp(e,t=!1){return new Proxy(e,{apply(n,r,o){return mt({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[z]:"auto.db.supabase",[Te]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),ae(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),ae(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function uT(e){let t=e.auth;if(!(!t||Ws(e.auth))){for(let n of oT){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Qp(r))}for(let n of iT){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Qp(r,!0))}Gs(e.auth)}}function lT(e){Ws(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return fT(i),o}}),Gs(e.prototype.from))}function dT(e){Ws(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=Zp,i=n,s=aT(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[f,m]of i.url.searchParams.entries())u.push(cT(f,m));let d=Object.create(null);if(He(i.body))for(let[f,m]of Object.entries(i.body))d[f]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,p={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[z]:"auto.db.supabase",[Te]:"db"};return u.length&&(p["db.query"]=u),Object.keys(d).length&&(p["db.body"]=d),mt({name:l,attributes:p},f=>Reflect.apply(t,n,[]).then(m=>{if(f&&(m&&typeof m=="object"&&"status"in m&&Zt(f,m.status||500),f.end()),m.error){let E=new Error(m.error.message);m.error.code&&(E.code=m.error.code),m.error.details&&(E.details=m.error.details);let b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),ae(E,U=>(U.addEventProcessor(M=>(Ye(M,{handled:!1,type:"auto.db.supabase.postgres"}),M)),U.setContext("supabase",b),U))}let g={type:"supabase",category:`db.${s}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(g.data=_),ot(g),m},m=>{throw f&&(Zt(f,500),f.end()),m}).then(...r))}}),Gs(e.prototype.then))}function fT(e){for(let t of Zp)Ws(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return y&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),dT(s),i}}),Gs(e.prototype[t]))}var js=e=>{if(!e){y&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;lT(t),uT(e)},pT="Supabase",mT=(e=>({setupOnce(){js(e)},name:pT})),$u=e=>mT(e.supabaseClient);var hT=10,gT="ZodErrors";function _T(e){return dt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function ST(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function ET(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function yT(e){let t=new Set;for(let r of e.issues){let o=ET(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${un(n.join(", "),100)}`}function TT(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!_T(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(ST);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:yT(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var bT=((e={})=>{let t=e.limit??hT;return{name:gT,processEvent(n,r){return TT(t,e.saveZodIssuesAsAttachment,n,r)}}}),Gu=bT;var Wu=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{Rt(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&($s(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;Hs(r,n)})},processEvent(t){let n=IT(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function IT(e){let t=Cr(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(em)).map(r=>r.slice(em.length)):[])}var em="_sentryBundlerPluginAppKey:";var tm=100,nm=10,zs="flag.evaluation.";function Ct(e){let n=x().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function gt(e,t,n=tm){let r=x().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;vT(o,e,t,n)}function vT(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){y&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function _t(e,t,n=nm){if(typeof t!="boolean")return;let r=J();if(!r)return;let o=P(r).data;if(`${zs}${e}`in o){r.setAttribute(`${zs}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith(zs)).length<n&&r.setAttribute(`${zs}${e}`,t)}var ju=()=>({name:"FeatureFlags",processEvent(e,t,n){return Ct(e)},addFeatureFlag(e,t){gt(e,t),_t(e,t)}});var zu=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&ge(t,"isOn",rm),typeof t.getFeatureValue=="function"&&ge(t,"getFeatureValue",rm)},processEvent(t,n,r){return Ct(t)}});function rm(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(gt(n,r),_t(n,r)),r}}function qu(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=we()&&t(s);if(e.endTimestamp&&a){let f=e.fetchData.__span;if(!f)return;let m=r[f];m&&(CT(m,e),AT(m,e,o),delete r[f]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!J(),l=a&&d?ht(NT(s,i,c)):new Ke;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let f=e.args[0],m=e.args[1]||{},g=RT(f,m,we()&&d?l:void 0,u);g&&(e.args[1]=m,m.headers=g)}let p=T();if(p){let f={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};p.emit("beforeOutgoingRequestSpan",l,f)}return l}function AT(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function RT(e,t,n,r){let o=cr({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(os(e)?e.headers:void 0);if(c)if(wT(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?qs(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&qs(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,p=l?Array.isArray(l)?[...l]:[l]:[],f=l&&(Array.isArray(l)?l.find(g=>qs(g)):qs(l));s&&!f&&p.push(s);let m={...c,"sentry-trace":u??i,baggage:p.length>0?p.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function CT(e,t){if(t.response){Zt(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function qs(e){return e.split(",").some(t=>t.trim().startsWith(ls))}function wT(e){return typeof Headers<"u"&&bt(e,Headers)}function NT(e,t,n){let r=ar(e);return{name:r?`${t} ${xu(r)}`:t,attributes:xT(e,r,t,n)}}function xT(e,t,n,r){let o={url:e,type:"fetch","http.method":n,[z]:r,[Te]:"http.client"};return t&&(Gr(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function hi(e,t={},n=x()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||T();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var Ys={};Ic(Ys,{debug:()=>OT,error:()=>PT,fatal:()=>DT,fmt:()=>ku,info:()=>MT,trace:()=>kT,warn:()=>LT});function Wr(e,t,n,r,o){Bn({level:e,message:t,attributes:n,severityNumber:o},r)}function kT(e,t,{scope:n}={}){Wr("trace",e,t,n)}function OT(e,t,{scope:n}={}){Wr("debug",e,t,n)}function MT(e,t,{scope:n}={}){Wr("info",e,t,n)}function LT(e,t,{scope:n}={}){Wr("warn",e,t,n)}function PT(e,t,{scope:n}={}){Wr("error",e,t,n)}function DT(e,t,{scope:n}={}){Wr("fatal",e,t,n)}function gi(e,t,n){return"util"in R&&typeof R.util.format=="function"?R.util.format(...e):UT(e,t,n)}function UT(e,t,n){return e.map(r=>nt(r)?String(r):JSON.stringify(Pe(r,t,n))).join(" ")}function om(e){return/%[sdifocO]/.test(e)}function im(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var BT="ConsoleLogs",sm={[z]:"auto.log.console"},FT=((e={})=>{let t=e.levels||Kn;return{name:BT,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){y&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}ur(({args:s,level:a})=>{if(T()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let f=u.length>0?`Assertion failed: ${gi(u,o,i)}`:"Assertion failed";Bn({level:"error",message:f,attributes:sm})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!om(s[0]),p={...sm,...l?im(c,u):{}};Bn({level:d?"info":a,message:gi(s,o,i),severityNumber:d?10:void 0,attributes:p})})}}}),Yu=FT;var Vs={};Ic(Vs,{count:()=>HT,distribution:()=>GT,gauge:()=>$T});function Vu(e,t,n,r){Tu({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function HT(e,t=1,n){Vu("counter",e,t,n)}function $T(e,t,n){Vu("gauge",e,t,n)}function GT(e,t,n){Vu("distribution",e,t,n)}var WT=["trace","debug","info","warn","error","fatal"];function Ju(e={}){let t=new Set(e.levels??WT),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||T();if(!l)return;let p=qT(o,i);if(!t.has(p))return;let{normalizeDepth:f=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),g=[];s&&g.push(s),a&&a.length>0&&g.push(gi(a,f,m));let _=g.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),Bn({level:p,message:_,attributes:d})}}}var jT={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},zT={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function qT(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=jT[e];if(n)return n}if(typeof t=="number"){let n=zT[t];if(n)return n}return"info"}var am="gen_ai.prompt",jr="gen_ai.system",St="gen_ai.request.model",Js="gen_ai.request.stream",zr="gen_ai.request.temperature",Ks="gen_ai.request.max_tokens",qr="gen_ai.request.frequency_penalty",Xs="gen_ai.request.presence_penalty",Yr="gen_ai.request.top_p",Qs="gen_ai.request.top_k",nn="gen_ai.response.finish_reasons",gn="gen_ai.response.model",_n="gen_ai.response.id";var Fn="gen_ai.usage.input_tokens",Hn="gen_ai.usage.output_tokens",$n="gen_ai.usage.total_tokens",Vr="gen_ai.operation.name",rn="gen_ai.request.messages",Xe="gen_ai.response.text",Jr="gen_ai.request.available_tools",dr="gen_ai.response.streaming",Et="gen_ai.response.tool_calls";var cm="openai.response.id",um="openai.response.model",lm="openai.response.timestamp",dm="openai.usage.completion_tokens",fm="openai.usage.prompt_tokens",Ku={CHAT:"chat",RESPONSES:"responses"},Xu="anthropic.response.timestamp";var Zs=e=>new TextEncoder().encode(e).length,ea=e=>Zs(JSON.stringify(e));function Qu(e,t){if(Zs(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){let i=Math.floor((n+r)/2),s=e.slice(0,i);Zs(s)<=t?(o=s,n=i+1):r=i-1}return o}function YT(e){return typeof e=="string"?e:e.text}function pm(e,t){return typeof e=="string"?t:{...e,text:t}}function VT(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function JT(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function KT(e,t){let n={...e,content:""},r=ea(n),o=t-r;if(o<=0)return[];let i=Qu(e.content,o);return[{...e,content:i}]}function XT(e,t){let{parts:n}=e,r=n.map(a=>pm(a,"")),o=ea({...e,parts:r}),i=t-o;if(i<=0)return[];let s=[];for(let a of n){let c=YT(a),u=Zs(c);if(u<=i)s.push(a),i-=u;else if(s.length===0){let d=Qu(c,i);d&&s.push(pm(a,d));break}else break}return s.length>0?[{...e,parts:s}]:[]}function QT(e,t){return!e||typeof e!="object"?[]:VT(e)?KT(e,t):JT(e)?XT(e,t):[]}function ZT(e,t){if(!Array.isArray(e)||e.length===0||ea(e)<=t)return e;let r=e.map(ea),o=0,i=e.length;for(let s=e.length-1;s>=0;s--){let a=r[s];if(a&&o+a>t)break;a&&(o+=a),i=s}if(i===e.length){let s=e[e.length-1];return QT(s,t)}return e.slice(i)}function mm(e){return ZT(e,2e4)}function hm(e){return Qu(e,2e4)}function fr(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Kr(e){return`gen_ai.${fr(e)}`}function ta(e,t){return e?`${e}.${t}`:t}function _i(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Fn]:t}),n!==void 0&&e.setAttributes({[Hn]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[$n]:i})}}function on(e){if(typeof e=="string")return hm(e);if(Array.isArray(e)){let t=mm(e);return JSON.stringify(t)}return JSON.stringify(e)}var gm="OpenAI",_m=["responses.create","chat.completions.create"],eb=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],Sm=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...eb];function na(e){return e.includes("chat.completions")?Ku.CHAT:e.includes("responses")?Ku.RESPONSES:e.split(".").pop()||"unknown"}function Zu(e){return`gen_ai.${na(e)}`}function Em(e){return _m.includes(e)}function ym(e,t){return e?`${e}.${t}`:t}function Tm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function bm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function Im(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function vm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function Si(e,t,n,r){t!==void 0&&e.setAttributes({[fm]:t,[Fn]:t}),n!==void 0&&e.setAttributes({[dm]:n,[Hn]:n}),r!==void 0&&e.setAttributes({[$n]:r})}function Ei(e,t,n,r){e.setAttributes({[cm]:t,[_n]:t}),e.setAttributes({[um]:n,[gn]:n}),e.setAttributes({[lm]:new Date(r*1e3).toISOString()})}function tb(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function nb(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&tb(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function rb(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),ae(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!Sm.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*Am(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)vm(o)?nb(o,r,n):Im(o)&&rb(o,r,n,t),yield o}finally{Ei(t,r.responseId,r.responseModel,r.responseTimestamp),Si(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[dr]:!0}),r.finishReasons.length&&t.setAttributes({[nn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Xe]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[Et]:JSON.stringify(i)}),t.end()}}function ob(e,t){let n={[jr]:"openai",[Vr]:na(t),[z]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Array.isArray(r.tools)?r.tools:[],s=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...s];a.length>0&&(n[Jr]=JSON.stringify(a))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];n[St]=r.model??"unknown","temperature"in r&&(n[zr]=r.temperature),"top_p"in r&&(n[Yr]=r.top_p),"frequency_penalty"in r&&(n[qr]=r.frequency_penalty),"presence_penalty"in r&&(n[Xs]=r.presence_penalty),"stream"in r&&(n[Js]=r.stream)}else n[St]="unknown";return n}function ib(e,t,n){if(Ei(e,t.id,t.model,t.created),t.usage&&Si(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[nn]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[Et]:JSON.stringify(o)})}}}function sb(e,t,n){if(Ei(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[nn]:JSON.stringify([t.status])}),t.usage&&Si(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[Et]:JSON.stringify(o)})}}}function ab(e,t,n){if(!t||typeof t!="object")return;let r=t;if(Tm(r)){if(ib(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Xe]:JSON.stringify(o)})}}else bm(r)&&(sb(e,r,n),n&&r.output_text&&e.setAttributes({[Xe]:r.output_text}))}function Rm(e,t){if("messages"in t){let n=on(t.messages);e.setAttributes({[rn]:n})}if("input"in t){let n=on(t.input);e.setAttributes({[rn]:n})}}function cb(){let t=x().getClient(),n=t?.getIntegrationByName(gm),r=n?!!t?.getOptions().sendDefaultPii:!1;return{recordInputs:n?.options?.recordInputs??r,recordOutputs:n?.options?.recordOutputs??r}}function ub(e,t,n,r){return async function(...i){let s=r||cb(),a=ob(i,t),c=a[St]||"unknown",u=na(t),d=i[0];return d&&typeof d=="object"&&d.stream===!0?en({name:`${u} ${c} stream-response`,op:Zu(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&Rm(p,i[0]);let f=await e.apply(n,i);return Am(f,p,s.recordOutputs??!1)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ae(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),p.end(),f}}):mt({name:`${u} ${c}`,op:Zu(t),attributes:a},async p=>{try{s.recordInputs&&i[0]&&typeof i[0]=="object"&&Rm(p,i[0]);let f=await e.apply(n,i);return ab(p,f,s.recordOutputs),f}catch(f){throw ae(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function Cm(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=ym(t,String(o));return typeof i=="function"&&Em(s)?ub(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Cm(i,s,n):i}})}function el(e,t){return Cm(e,"",t)}function lb(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"internal_error"}),ae(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function db(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function fb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function pb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function mb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function wm(e,t,n,r){!(e&&typeof e=="object")||lb(e,r)||(db(e,t),fb(e,t),pb(e,t,n),mb(e,t))}function hb(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[_n]:e.responseId}),e.responseModel&&t.setAttributes({[gn]:e.responseModel}),_i(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[dr]:!0}),e.finishReasons.length>0&&t.setAttributes({[nn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Xe]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[Et]:JSON.stringify(e.toolCalls)}),t.end())}async function*Nm(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)wm(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[_n]:r.responseId}),r.responseModel&&t.setAttributes({[gn]:r.responseModel}),_i(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[dr]:!0}),r.finishReasons.length>0&&t.setAttributes({[nn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Xe]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[Et]:JSON.stringify(r.toolCalls)}),t.end()}}function xm(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{wm(o,r,n,t)}),e.on("message",()=>{hb(r,t,n)}),e.on("error",o=>{ae(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var km=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Om(e){return km.includes(e)}function Mm(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),ae(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function gb(e,t){let n={[jr]:"anthropic",[Vr]:fr(t),[z]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Jr]=JSON.stringify(r.tools)),n[St]=r.model??"unknown","temperature"in r&&(n[zr]=r.temperature),"top_p"in r&&(n[Yr]=r.top_p),"stream"in r&&(n[Js]=r.stream),"top_k"in r&&(n[Qs]=r.top_k),"frequency_penalty"in r&&(n[qr]=r.frequency_penalty),"max_tokens"in r&&(n[Ks]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[St]=e[0]:n[St]="unknown";return n}function tl(e,t){if("messages"in t){let n=on(t.messages);e.setAttributes({[rn]:n})}if("input"in t){let n=on(t.input);e.setAttributes({[rn]:n})}"prompt"in t&&e.setAttributes({[am]:JSON.stringify(t.prompt)})}function _b(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Xe]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[Et]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Xe]:t.completion}),"input_tokens"in t&&e.setAttributes({[Xe]:JSON.stringify(t.input_tokens)})}function Sb(e,t){"id"in t&&"model"in t&&(e.setAttributes({[_n]:t.id,[gn]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Xu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Xu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&_i(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function Eb(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){Mm(e,t);return}n&&_b(e,t),Sb(e,t)}}function Lm(e,t,n){throw ae(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function yb(e,t,n,r,o,i,s,a,c,u,d){let l=o[St]??"unknown",p={name:`${i} ${l} stream-response`,op:Kr(s),attributes:o};return u&&!d?en(p,async f=>{try{c.recordInputs&&a&&tl(f,a);let m=await e.apply(n,r);return Nm(m,f,c.recordOutputs??!1)}catch(m){return Lm(m,f,s)}}):en(p,f=>{try{c.recordInputs&&a&&tl(f,a);let m=t.apply(n,r);return xm(m,f,c.recordOutputs??!1)}catch(m){return Lm(m,f,s)}})}function Tb(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=gb(s,t),c=a[St]??"unknown",u=fr(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream,p=t==="messages.stream";return l||p?yb(e,o,n,s,a,u,t,d,r,l,p):mt({name:`${u} ${c}`,op:Kr(t),attributes:a},f=>(r.recordInputs&&d&&tl(f,d),or(()=>o.apply(n,s),m=>{ae(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>Eb(f,m,r.recordOutputs))))}})}function Pm(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=ta(t,String(o));return typeof i=="function"&&Om(s)?Tb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Pm(i,s,n):i}})}function nl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Pm(e,"",r)}var rl=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Dm="google_genai",ol="chats.create",Um="chat";function bb(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),ae(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function Ib(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function vb(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Ab(e,t,n,r){!e||bb(e,r)||(Ib(e,t),vb(e,t,n))}async function*Bm(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)Ab(o,r,n,t),yield o}finally{let o={[dr]:!0};r.responseId&&(o[_n]=r.responseId),r.responseModel&&(o[gn]=r.responseModel),r.promptTokens!==void 0&&(o[Fn]=r.promptTokens),r.completionTokens!==void 0&&(o[Hn]=r.completionTokens),r.totalTokens!==void 0&&(o[$n]=r.totalTokens),r.finishReasons.length&&(o[nn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Xe]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[Et]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Fm(e){if(rl.includes(e))return!0;let t=e.split(".").pop();return rl.includes(t)}function Hm(e){return e.includes("Stream")||e.endsWith("generateContentStream")||e.endsWith("sendMessageStream")}function $m(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Rb(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[zr]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Yr]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Qs]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Ks]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[qr]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Xs]=e.presencePenalty),t}function Cb(e,t,n){let r={[jr]:Dm,[Vr]:fr(e),[z]:"auto.ai.google_genai"};if(t){if(r[St]=$m(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,Rb(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.map(s=>s.functionDeclarations);r[Jr]=JSON.stringify(i)}}}else r[St]=$m({},n);return r}function Gm(e,t){if("contents"in t){let n=t.contents,r=on(n);e.setAttributes({[rn]:r})}if("message"in t){let n=t.message,r=on(n);e.setAttributes({[rn]:r})}if("history"in t){let n=t.history,r=on(n);e.setAttributes({[rn]:r})}}function wb(e,t,n){if(!(!t||typeof t!="object")){if(t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Fn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Hn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[$n]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Xe]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[Et]:JSON.stringify(r)})}}}function Wm(e,t,n,r){let o=t===ol;return new Proxy(e,{apply(i,s,a){let c=a[0],u=Cb(t,c,n),d=u[St]??"unknown",l=fr(t);return Hm(t)?en({name:`${l} ${d} stream-response`,op:Kr(t),attributes:u},async p=>{try{r.recordInputs&&c&&Gm(p,c);let f=await i.apply(n,a);return Bm(f,p,!!r.recordOutputs)}catch(f){throw p.setStatus({code:2,message:"internal_error"}),ae(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),p.end(),f}}):mt({name:o?`${l} ${d} create`:`${l} ${d}`,op:Kr(t),attributes:u},p=>(r.recordInputs&&c&&Gm(p,c),or(()=>i.apply(n,a),f=>{ae(f,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},f=>{o||wb(p,f,r.recordOutputs)})))}})}function il(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=ta(t,String(o));if(typeof s=="function"&&Fm(a)){if(a===ol){let c=Wm(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?il(l,Um,n):l}}return Wm(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?il(s,a,n):s}})}function sl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return il(e,"",r)}function ra(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var Xr=R;function al(){return"history"in Xr&&!!Xr.history}function Nb(){if(!("fetch"in Xr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function yi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ti(){if(typeof EdgeRuntime=="string")return!0;if(!Nb())return!1;if(yi(Xr.fetch))return!0;let e=!1,t=Xr.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=yi(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){y&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function cl(){return"ReportingObserver"in Xr}function pr(e,t){let n="fetch";ze(n,e),qe(n,()=>zm(void 0,t))}function ll(e){let t="fetch-body-resolved";ze(t,e),qe(t,()=>zm(kb))}function zm(e,t=!1){t&&!Ti()||ge(R,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=Ob(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:Q()*1e3,virtualError:o,headers:Mb(r)};return e||ke("fetch",{...a}),n.apply(R,r).then(async c=>(e?e(c):ke("fetch",{...a,endTimestamp:Q()*1e3,response:c}),c),c=>{if(ke("fetch",{...a,endTimestamp:Q()*1e3,error:c}),dt(c)&&c.stack===void 0&&(c.stack=o.stack,ye(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function xb(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function kb(e){let t;try{t=e.clone()}catch{return}xb(t,()=>{ke("fetch-body-resolved",{endTimestamp:Q()*1e3,response:e})})}function ul(e,t){return!!e&&typeof e=="object"&&!!e[t]}function jm(e){return typeof e=="string"?e:e?ul(e,"url")?e.url:e.toString?e.toString():"":""}function Ob(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:jm(n),method:ul(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:jm(t),method:ul(t,"method")?String(t.method).toUpperCase():"GET"}}function Mb(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(os(t))return new Headers(t.headers)}catch{}}function dl(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function fl(){return"npm"}function qm(){return!dl()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Gn(){return typeof window<"u"&&(!qm()||Lb())}function Lb(){return R.process?.type==="renderer"}var zt=R,fe=zt.document,bi=zt.navigator,uh="Report a Bug",Pb="Cancel",Db="Send Bug Report",Ub="Confirm",Bb="Report a Bug",Fb="your.email@example.org",Hb="Email",$b="What's the bug? What did you expect?",Gb="Description",Wb="Your Name",jb="Name",zb="Thank you for your report!",qb="(required)",Yb="Add a screenshot",Vb="Remove screenshot",Jb="Highlight",Kb="Hide",Xb="Remove",Qb="widget",Zb="api",eI=5e3,bl=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=T();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&x().setTags(e.tags);let r=hi({source:Zb,url:rt(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},aa=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function tI(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(bi.userAgent)||/Macintosh/i.test(bi.userAgent)&&bi.maxTouchPoints&&bi.maxTouchPoints>1||!isSecureContext)}function oa(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function nI(e){let t=fe.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function wt(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var Qr=20,rI="http://www.w3.org/2000/svg";function oI(){let e=a=>zt.document.createElementNS(rI,a),t=wt(e("svg"),{width:`${Qr}`,height:`${Qr}`,viewBox:`0 0 ${Qr} ${Qr}`,fill:"var(--actor-color, var(--foreground))"}),n=wt(e("g"),{clipPath:"url(#clip0_57_80)"}),r=wt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=wt(e("clipPath"),{id:"clip0_57_80"}),s=wt(e("rect"),{width:`${Qr}`,height:`${Qr}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function iI({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=fe.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||uh,o.appendChild(oI()),e){let s=fe.createElement("span");s.appendChild(fe.createTextNode(e)),o.appendChild(s)}let i=nI(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var lh="rgba(88, 74, 192, 1)",sI={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:lh,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Ym={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:lh,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Vm(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function aI({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=fe.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Vm(e==="dark"?{...Ym,...t}:{...sI,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Vm({...Ym,...t})}
  }
}`:""}
}
`,r&&o.setAttribute("nonce",r),o}var pa=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:p={email:"email",name:"username"},tags:f,styleNonce:m,scriptNonce:g,colorScheme:_="system",themeLight:E={},themeDark:b={},addScreenshotButtonLabel:U=Yb,cancelButtonLabel:M=Pb,confirmButtonLabel:j=Ub,emailLabel:B=Hb,emailPlaceholder:S=Fb,formTitle:O=Bb,isRequiredLabel:F=qb,messageLabel:I=Gb,messagePlaceholder:L=$b,nameLabel:C=jb,namePlaceholder:N=Wb,removeScreenshotButtonLabel:G=Vb,submitButtonLabel:ee=Db,successMessageText:K=zb,triggerLabel:ce=uh,triggerAriaLabel:A="",highlightToolText:q=Jb,hideToolText:w=Kb,removeHighlightText:X=Xb,onFormOpen:le,onFormClose:oe,onSubmitSuccess:Ce,onSubmitError:Ze,onFormSubmitted:An}={})=>{let et={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:p,tags:f,styleNonce:m,scriptNonce:g,colorScheme:_,themeDark:b,themeLight:E,triggerLabel:ce,triggerAriaLabel:A,cancelButtonLabel:M,submitButtonLabel:ee,confirmButtonLabel:j,formTitle:O,emailLabel:B,emailPlaceholder:S,messageLabel:I,messagePlaceholder:L,nameLabel:C,namePlaceholder:N,successMessageText:K,isRequiredLabel:F,addScreenshotButtonLabel:U,removeScreenshotButtonLabel:G,highlightToolText:q,hideToolText:w,removeHighlightText:X,onFormClose:oe,onFormOpen:le,onSubmitError:Ze,onSubmitSuccess:Ce,onFormSubmitted:An},ct=null,Vt=[],Rn=de=>{if(!ct){let be=fe.createElement("div");be.id=String(de.id),fe.body.appendChild(be),ct=be.attachShadow({mode:"open"}),ct.appendChild(aI(de))}return ct},xo=async de=>{let be=de.enableScreenshot&&tI(),kt,Be;try{kt=(t?t():await e("feedbackModalIntegration",g))(),Fr(kt)}catch{throw aa&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let Jt=be?n?n():await e("feedbackScreenshotIntegration",g):void 0;Jt&&(Be=Jt(),Fr(Be))}catch{aa&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let We=kt.createDialog({options:{...de,onFormClose:()=>{We?.close(),de.onFormClose?.()},onFormSubmitted:()=>{We?.close(),de.onFormSubmitted?.()}},screenshotIntegration:Be,sendFeedback:bl,shadow:Rn(de)});return We},Qi=(de,be={})=>{let kt=oa(et,be),Be=typeof de=="string"?fe.querySelector(de):typeof de.addEventListener=="function"?de:null;if(!Be)throw aa&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let We=null,Jt=async()=>{We||(We=await xo({...kt,onFormSubmitted:()=>{We?.removeFromDom(),kt.onFormSubmitted?.()}})),We.appendToDom(),We.open()};Be.addEventListener("click",Jt);let te=()=>{Vt=Vt.filter(Tt=>Tt!==te),We?.removeFromDom(),We=null,Be.removeEventListener("click",Jt)};return Vt.push(te),te},ko=(de={})=>{let be=oa(et,de),kt=Rn(be),Be=iI({triggerLabel:be.triggerLabel,triggerAriaLabel:be.triggerAriaLabel,shadow:kt,styleNonce:m});return Qi(Be.el,{...be,onFormOpen(){Be.hide()},onFormClose(){Be.show()},onFormSubmitted(){Be.show()}}),Be};return{name:"Feedback",setupOnce(){!Gn()||!et.autoInject||(fe.readyState==="loading"?fe.addEventListener("DOMContentLoaded",()=>ko().appendToDom()):ko().appendToDom())},attachTo:Qi,createWidget(de={}){let be=ko(oa(et,de));return be.appendToDom(),be},async createForm(de={}){return xo(oa(et,de))},remove(){ct&&(ct.parentElement?.remove(),ct=null),Vt.forEach(de=>de()),Vt=[]}}});function dh(){return T()?.getIntegrationByName("Feedback")}var ma,me,fh,mr,Jm,ph,Sl,Ii={},Il=[],cI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vl=Array.isArray;function jn(e,t){for(var n in t)e[n]=t[n];return e}function mh(e){var t=e.parentNode;t&&t.removeChild(e)}function Y(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ma.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return ca(e,s,r,o,null)}function ca(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++fh,__i:-1,__u:0};return o==null&&me.vnode!=null&&me.vnode(i),i}function vi(e){return e.children}function ua(e,t){this.props=e,this.context=t}function eo(e,t){if(t==null)return e.__?eo(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?eo(e):null}function uI(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=jn({},o)).__v=o.__v+1,me.vnode&&me.vnode(r),Al(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??eo(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&hh(r),r}function hh(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return hh(e)}}function Km(e){(!e.__d&&(e.__d=!0)&&mr.push(e)&&!fa.__r++||Jm!==me.debounceRendering)&&((Jm=me.debounceRendering)||ph)(fa)}function fa(){var e,t,n,r=[],o=[];for(mr.sort(Sl);e=mr.shift();)e.__d&&(n=mr.length,t=uI(e,r,o)||t,n===0||mr.length>n?(El(r,t,o),o.length=r.length=0,t=void 0,mr.sort(Sl)):t&&me.__c&&me.__c(t,Il));t&&El(r,t,o),fa.__r=0}function gh(e,t,n,r,o,i,s,a,c,u,d){var l,p,f,m,g,_=r&&r.__k||Il,E=t.length;for(n.__d=c,lI(n,t,_),c=n.__d,l=0;l<E;l++)(f=n.__k[l])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?Ii:_[f.__i]||Ii,f.__i=l,Al(e,f,p,o,i,s,a,c,u,d),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Rl(p.ref,null,f),d.push(f.ref,f.__c||m,f)),g==null&&m!=null&&(g=m),65536&f.__u||p.__k===f.__k?c=_h(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:m&&(c=m.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=g}function lI(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?ca(null,o,null,null,o):vl(o)?ca(vi,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?ca(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=dI(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=eo(i)),yl(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=eo(i)),yl(i,i))}function _h(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=_h(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function dI(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function Xm(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||cI.test(t)?n:n+"px"}function ia(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Xm(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Xm(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Zm:Qm,i)):e.removeEventListener(t,i?Zm:Qm,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Qm(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(me.event?me.event(e):e)}}function Zm(e){if(this.l)return this.l[e.type+!0](me.event?me.event(e):e)}function Al(e,t,n,r,o,i,s,a,c,u){var d,l,p,f,m,g,_,E,b,U,M,j,B,S,O,F=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=me.__b)&&d(t);e:if(typeof F=="function")try{if(E=t.props,b=(d=F.contextType)&&r[d.__c],U=d?b?b.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in F&&F.prototype.render?t.__c=l=new F(E,U):(t.__c=l=new ua(E,U),l.constructor=F,l.render=pI),b&&b.sub(l),l.props=E,l.state||(l.state={}),l.context=U,l.__n=r,p=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),F.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=jn({},l.__s)),jn(l.__s,F.getDerivedStateFromProps(E,l.__s))),f=l.props,m=l.state,l.__v=t,p)F.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(F.getDerivedStateFromProps==null&&E!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(E,U),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(E,l.__s,U)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=E,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(I){I&&(I.__=t)}),M=0;M<l._sb.length;M++)l.__h.push(l._sb[M]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(E,l.__s,U),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,m,g)})}if(l.context=U,l.props=E,l.__P=e,l.__e=!1,j=me.__r,B=0,"prototype"in F&&F.prototype.render){for(l.state=l.__s,l.__d=!1,j&&j(t),d=l.render(l.props,l.state,l.context),S=0;S<l._sb.length;S++)l.__h.push(l._sb[S]);l._sb=[]}else do l.__d=!1,j&&j(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++B<25);l.state=l.__s,l.getChildContext!=null&&(r=jn(jn({},r),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(g=l.getSnapshotBeforeUpdate(f,m)),gh(e,vl(O=d!=null&&d.type===vi&&d.key==null?d.props.children:d)?O:[O],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),_&&(l.__E=l.__=null)}catch(I){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),me.__e(I,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=fI(n.__e,t,n,r,o,i,s,c,u);(d=me.diffed)&&d(t)}function El(e,t,n){for(var r=0;r<n.length;r++)Rl(n[r],n[++r],n[++r]);me.__c&&me.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){me.__e(i,o.__v)}})}function fI(e,t,n,r,o,i,s,a,c){var u,d,l,p,f,m,g,_=n.props,E=t.props,b=t.type;if(b==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((f=i[u])&&"setAttribute"in f==!!b&&(b?f.localName===b:f.nodeType===3)){e=f,i[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(E);e=o?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,E.is&&E),i=null,a=!1}if(b===null)_===E||a&&e.data===E||(e.data=E);else{if(i=i&&ma.call(e.childNodes),_=n.props||Ii,!a&&i!=null)for(_={},u=0;u<e.attributes.length;u++)_[(f=e.attributes[u]).name]=f.value;for(u in _)f=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=f:u==="key"||u in E||ia(e,u,null,f,o));for(u in E)f=E[u],u=="children"?p=f:u=="dangerouslySetInnerHTML"?d=f:u=="value"?m=f:u=="checked"?g=f:u==="key"||a&&typeof f!="function"||_[u]===f||ia(e,u,f,_[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),gh(e,vl(p)?p:[p],t,n,r,o&&b!=="foreignObject",i,s,i?i[0]:n.__k&&eo(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&mh(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||b==="progress"&&!m||b==="option"&&m!==_[u])&&ia(e,u,m,_[u],!1),u="checked",g!==void 0&&g!==e[u]&&ia(e,u,g,_[u],!1))}return e}function Rl(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){me.__e(r,n)}}function yl(e,t,n){var r,o;if(me.unmount&&me.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Rl(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){me.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&yl(r[o],t,n||typeof e.type!="function");n||e.__e==null||mh(e.__e),e.__=e.__e=e.__d=void 0}function pI(e,t,n){return this.constructor(e,n)}function mI(e,t,n){var r,o,i,s;me.__&&me.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],Al(t,e=t.__k=Y(vi,null,[e]),o||Ii,Ii,t.ownerSVGElement!==void 0,o?null:t.firstChild?ma.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,El(i,e,s)}ma=Il.slice,me={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},fh=0,ua.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=jn({},this.state),typeof e=="function"&&(e=e(jn({},n),this.props)),e&&jn(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Km(this))},ua.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Km(this))},ua.prototype.render=vi,mr=[],ph=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Sl=function(e,t){return e.__v.__b-t.__v.__b},fa.__r=0;var Sn,pe,pl,eh,to=0,Sh=[],la=[],Ie=me,th=Ie.__b,nh=Ie.__r,rh=Ie.diffed,oh=Ie.__c,ih=Ie.unmount,sh=Ie.__;function gr(e,t){Ie.__h&&Ie.__h(pe,e,to||t),to=0;var n=pe.__H||(pe.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:la}),n.__[e]}function hr(e){return to=1,Eh(Th,e)}function Eh(e,t,n){var r=gr(Sn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Th(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=pe,!pe.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};pe.u=!0;var i=pe.shouldComponentUpdate,s=pe.componentWillUpdate;pe.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},pe.shouldComponentUpdate=o}return r.__N||r.__}function hI(e,t){var n=gr(Sn++,3);!Ie.__s&&Cl(n.__H,t)&&(n.__=e,n.i=t,pe.__H.__h.push(n))}function yh(e,t){var n=gr(Sn++,4);!Ie.__s&&Cl(n.__H,t)&&(n.__=e,n.i=t,pe.__h.push(n))}function gI(e){return to=5,Ai(function(){return{current:e}},[])}function _I(e,t,n){to=6,yh(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Ai(e,t){var n=gr(Sn++,7);return Cl(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Zr(e,t){return to=8,Ai(function(){return e},t)}function SI(e){var t=pe.context[e.__c],n=gr(Sn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(pe)),t.props.value):e.__}function EI(e,t){Ie.useDebugValue&&Ie.useDebugValue(t?t(e):e)}function yI(e){var t=gr(Sn++,10),n=hr();return t.__=e,pe.componentDidCatch||(pe.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function TI(){var e=gr(Sn++,11);if(!e.__){for(var t=pe.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function bI(){for(var e;e=Sh.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(da),e.__H.__h.forEach(Tl),e.__H.__h=[]}catch(t){e.__H.__h=[],Ie.__e(t,e.__v)}}Ie.__b=function(e){pe=null,th&&th(e)},Ie.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),sh&&sh(e,t)},Ie.__r=function(e){nh&&nh(e),Sn=0;var t=(pe=e.__c).__H;t&&(pl===pe?(t.__h=[],pe.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=la,n.__N=n.i=void 0})):(t.__h.forEach(da),t.__h.forEach(Tl),t.__h=[],Sn=0)),pl=pe},Ie.diffed=function(e){rh&&rh(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Sh.push(t)!==1&&eh===Ie.requestAnimationFrame||((eh=Ie.requestAnimationFrame)||II)(bI)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==la&&(n.__=n.__V),n.i=void 0,n.__V=la})),pl=pe=null},Ie.__c=function(e,t){t.some(function(n){try{n.__h.forEach(da),n.__h=n.__h.filter(function(r){return!r.__||Tl(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ie.__e(r,n.__v)}}),oh&&oh(e,t)},Ie.unmount=function(e){ih&&ih(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{da(r)}catch(o){t=o}}),n.__H=void 0,t&&Ie.__e(t,n.__v))};var ah=typeof requestAnimationFrame=="function";function II(e){var t,n=function(){clearTimeout(r),ah&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ah&&(t=requestAnimationFrame(n))}function da(e){var t=pe,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),pe=t}function Tl(e){var t=pe;e.__c=e.__(),pe=t}function Cl(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Th(e,t){return typeof t=="function"?t(e):t}var vI=Object.defineProperty({__proto__:null,useCallback:Zr,useContext:SI,useDebugValue:EI,useEffect:hI,useErrorBoundary:yI,useId:TI,useImperativeHandle:_I,useLayoutEffect:yh,useMemo:Ai,useReducer:Eh,useRef:gI,useState:hr},Symbol.toStringTag,{value:"Module"}),AI="http://www.w3.org/2000/svg";function RI(){let e=r=>fe.createElementNS(AI,r),t=wt(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=wt(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function CI({options:e}){let t=Ai(()=>({__html:RI().outerHTML}),[]);return Y("h2",{class:"dialog__header"},Y("span",{class:"dialog__title"},e.formTitle),e.showBranding?Y("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function wI(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function ml(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function NI({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:m,emailPlaceholder:g,isEmailRequired:_,isNameRequired:E,messageLabel:b,messagePlaceholder:U,nameLabel:M,namePlaceholder:j,submitButtonLabel:B,isRequiredLabel:S}=e,[O,F]=hr(!1),[I,L]=hr(null),[C,N]=hr(!1),G=u?.input,[ee,K]=hr(null),ce=Zr(w=>{K(w),N(!1)},[]),A=Zr(w=>{let X=wI(w,{emailLabel:m,isEmailRequired:_,isNameRequired:E,messageLabel:b,nameLabel:M});return X.length>0?L(`Please enter in the following required fields: ${X.join(", ")}`):L(null),X.length===0},[m,_,E,b,M]),q=Zr(async w=>{F(!0);try{if(w.preventDefault(),!(w.target instanceof HTMLFormElement))return;let X=new FormData(w.target),le=await(u&&C?u.value():void 0),oe={name:ml(X,"name"),email:ml(X,"email"),message:ml(X,"message"),attachments:le?[le]:void 0};if(!A(oe))return;try{let Ce=await o({name:oe.name,email:oe.email,message:oe.message,source:Qb,tags:d},{attachments:oe.attachments});i(oe,Ce)}catch(Ce){aa&&h.error(Ce),L(Ce),s(Ce)}}finally{F(!1)}},[u&&C,i,s]);return Y("form",{class:"form",onSubmit:q},G&&C?Y(G,{onError:ce}):null,Y("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:O},Y("div",{class:"form__top"},I?Y("div",{class:"form__error-container"},I):null,c?Y("label",{for:"name",class:"form__label"},Y(hl,{label:M,isRequiredLabel:S,isRequired:E}),Y("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:j,required:E,type:"text"})):Y("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?Y("label",{for:"email",class:"form__label"},Y(hl,{label:m,isRequiredLabel:S,isRequired:_}),Y("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:_,type:"email"})):Y("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Y("label",{for:"message",class:"form__label"},Y(hl,{label:b,isRequiredLabel:S,isRequired:!0}),Y("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:U,required:!0,rows:5})),G?Y("label",{for:"screenshot",class:"form__label"},Y("button",{class:"btn btn--default",disabled:O,type:"button",onClick:()=>{K(null),N(w=>!w)}},C?p:l),ee?Y("div",{class:"form__error-container"},ee.message):null):null),Y("div",{class:"btn-group"},Y("button",{class:"btn btn--primary",disabled:O,type:"submit"},B),Y("button",{class:"btn btn--default",disabled:O,type:"button",onClick:r},f))))}function hl({label:e,isRequired:t,isRequiredLabel:n}){return Y("span",{class:"form__label__text"},e,t&&Y("span",{class:"form__label__text--required"},n))}var sa=16,ch=17,xI="http://www.w3.org/2000/svg";function kI(){let e=c=>zt.document.createElementNS(xI,c),t=wt(e("svg"),{width:`${sa}`,height:`${ch}`,viewBox:`0 0 ${sa} ${ch}`,fill:"inherit"}),n=wt(e("g"),{clipPath:"url(#clip0_57_156)"}),r=wt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=wt(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=wt(e("clipPath"),{id:"clip0_57_156"}),a=wt(e("rect"),{width:`${sa}`,height:`${sa}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function OI({open:e,onFormSubmitted:t,...n}){let r=n.options,o=Ai(()=>({__html:kI().outerHTML}),[]),[i,s]=hr(null),a=Zr(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=Zr((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},eI))},[t]);return Y(vi,null,i?Y("div",{class:"success__position",onClick:a},Y("div",{class:"success__content"},r.successMessageText,Y("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):Y("dialog",{class:"dialog",onClick:r.onFormClose,open:e},Y("div",{class:"dialog__position"},Y("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},Y(CI,{options:r}),Y(NI,{...n,onSubmitSuccess:c})))))}var MI=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,LI=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,PI=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,DI=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,UI=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function BI(e){let t=fe.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${MI}
${LI}
${PI}
${DI}
${UI}
`,e&&t.setAttribute("nonce",e),t}function FI(){let e=x().getUser(),t=se().getUser(),n=pt().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var bh=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=FI(),a=fe.createElement("div"),c=BI(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),fe.body.style.overflow=u},open(){p(!0),e.onFormOpen?.(),T()?.emit("openFeedbackWidget"),u=fe.body.style.overflow,fe.body.style.overflow="hidden"},close(){p(!1),fe.body.style.overflow=u}},l=t?.createInput({h:Y,hooks:vI,dialog:d,options:e}),p=f=>{mI(Y(OI,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&s?.[i.name]||"",defaultEmail:i&&s?.[i.email]||"",onFormClose:()=>{p(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,g)=>{p(!1),e.onSubmitSuccess?.(m,g)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:f}),a)};return d}}));function HI({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function $I(e){let t=fe.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function GI({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function WI({hooks:e}){function t(){let[n,r]=e.useState(zt.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(zt.devicePixelRatio)},i=matchMedia(`(resolution: ${zt.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await bi.mediaDevices.getDisplayMedia({video:{width:zt.innerWidth*a,height:zt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=fe.createElement("video");await new Promise((l,p)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(f=>f.stop()),l()},d.play().catch(p)}),i()})().catch(s)},[])}}function jI(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Wn(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function gl(e,t){Wn(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function _l(e,t,n){Wn(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{jI(i,o,t)})})}function zI({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=WI({hooks:t}),s=GI({h:e}),a=HI({h:e}),c={__html:$I(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[p,f]=t.useState("highlight"),[m,g]=t.useState([]),_=t.useRef(null),E=t.useRef(null),b=t.useRef(null),U=t.useRef(null),[M,j]=t.useState(1),B=t.useMemo(()=>{let C=fe.getElementById(o.id);if(!C)return"white";let N=getComputedStyle(C);return N.getPropertyValue("--button-primary-background")||N.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let C=()=>{let N=_.current;N&&(Wn(l.canvas,{alpha:!1},G=>{let ee=Math.min(N.clientWidth/G.width,N.clientHeight/G.height);j(ee)}),(N.clientHeight===0||N.clientWidth===0)&&setTimeout(C,0))};return C(),zt.addEventListener("resize",C),()=>{zt.removeEventListener("resize",C)}},[l]);let S=t.useCallback((C,N)=>{Wn(C,{alpha:!0},(G,ee)=>{ee.scale(N,N),G.width=l.canvas.width,G.height=l.canvas.height})},[l]);t.useEffect(()=>{S(E.current,l.dpi),gl(E.current,l.canvas)},[l]),t.useEffect(()=>{S(b.current,l.dpi),Wn(b.current,{alpha:!0},(C,N)=>{N.clearRect(0,0,C.width,C.height)}),_l(b.current,B,m)},[m,B]),t.useEffect(()=>{S(n,l.dpi),gl(n,l.canvas),Wn(fe.createElement("canvas"),{alpha:!0},(C,N)=>{N.scale(l.dpi,l.dpi),C.width=l.canvas.width,C.height=l.canvas.height,_l(C,B,m),gl(n,C)})},[m,l,B]);let O=C=>{if(!p||!U.current)return;let N=U.current.getBoundingClientRect(),G={type:p,x:C.offsetX/M,y:C.offsetY/M},ee=(A,q)=>{let w=(q.clientX-N.x)/M,X=(q.clientY-N.y)/M;return{type:A.type,x:Math.min(A.x,w),y:Math.min(A.y,X),w:Math.abs(w-A.x),h:Math.abs(X-A.y)}},K=A=>{Wn(b.current,{alpha:!0},(q,w)=>{w.clearRect(0,0,q.width,q.height)}),_l(b.current,B,[...m,ee(G,A)])},ce=A=>{let q=ee(G,A);q.w*M>=1&&q.h*M>=1&&g(w=>[...w,q]),fe.removeEventListener("mousemove",K),fe.removeEventListener("mouseup",ce)};fe.addEventListener("mousemove",K),fe.addEventListener("mouseup",ce)},F=t.useCallback(C=>N=>{N.preventDefault(),N.stopPropagation(),g(G=>{let ee=[...G];return ee.splice(C,1),ee})},[]),I={width:`${l.canvas.width*M}px`,height:`${l.canvas.height*M}px`},L=C=>{C.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:E,id:"background",style:I}),e("canvas",{ref:b,id:"foreground",style:I}),e("div",{ref:U,onMouseDown:O,style:I},m.map((C,N)=>e("div",{key:N,class:"editor__rect",style:{top:`${C.y*M}px`,left:`${C.x*M}px`,width:`${C.w*M}px`,height:`${C.h*M}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:F(N),onMouseDown:L,onMouseUp:L,type:"button"},e(a,null))))))),e(s,{options:o,action:p,setAction:f}))};return function({onError:p}){let[f,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((g,_)=>{Wn(fe.createElement("canvas"),{alpha:!1},(E,b)=>{b.scale(_,_),E.width=g.videoWidth,E.height=g.videoHeight,b.drawImage(g,0,0,E.width,E.height),m({canvas:E,dpi:_})}),n.width=g.videoWidth,n.height=g.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(g=>{u.display="block",p(g)},[])}),f?e(d,{screenshot:f}):e("div",null)}}var Ih=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=fe.createElement("canvas");return{input:zI({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var k=R,wl=0;function Nl(){return wl>0}function qI(){wl++,setTimeout(()=>{wl--})}function _r(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(Qn(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>_r(s,t));return e.apply(this,i)}catch(i){throw qI(),Le(s=>{s.addEventProcessor(a=>(t.mechanism&&(xr(a,void 0,void 0),Ye(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),ae(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}is(r,e),ye(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Ri(){let e=rt(),{referrer:t}=k.document||{},{userAgent:n}=k.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var YI={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient"},vh=k;async function ha(e,t){let n=YI[e],r=vh.Sentry=vh.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=VI(n),s=k.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,p)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",p)}),c=k.document.currentScript,u=k.document.body||k.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function VI(e){let n=T()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${ut}/${e}.min.js`,n).toString()}var Ah=pa({lazyLoadIntegration:ha});var xl=pa({getModalIntegration:()=>bh,getScreenshotIntegration:()=>Ih});function no(e,t){let n=Ml(e,t),r={type:ZI(t),value:ev(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function JI(e,t,n,r){let i=T()?.getOptions().normalizeDepth,s=rv(t),a={__serialized__:Ts(t,i)};if(s)return{exception:{values:[no(e,s)]},extra:a};let c={exception:{values:[{type:Xn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:tv(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=Ml(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function kl(e,t){return{exception:{values:[no(e,t)]}}}function Ml(e,t){let n=t.stacktrace||t.stack||"",r=XI(t),o=QI(t);try{return e(n,r,o)}catch{}return[]}var KI=/Minified React error #\d+;/i;function XI(e){return e&&KI.test(e.message)?1:0}function QI(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Rh(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function ZI(e){let t=e?.name;return!t&&Rh(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function ev(e){let t=e?.message;return Rh(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function ga(e,t,n,r){let o=n?.syntheticException||void 0,i=ro(e,t,o,r);return Ye(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Pn(i)}function _a(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=Ol(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),Pn(s)}function ro(e,t,n,r,o){let i;if(ns(t)&&t.error)return kl(e,t.error);if(rs(t)||xc(t)){let s=t;if("stack"in t)i=kl(e,t);else{let a=s.name||(rs(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=Ol(e,c,n,r),xr(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return dt(t)?kl(e,t):He(t)||Xn(t)?(i=JI(e,t,n,o),Ye(i,{synthetic:!0}),i):(i=Ol(e,t,n,r),xr(i,`${t}`,void 0),Ye(i,{synthetic:!0}),i)}function Ol(e,t,n,r){let o={};if(r&&n){let i=Ml(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),Ye(o,{synthetic:!0})}if(wn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function tv(e,{isUnhandledRejection:t}){let n=Pc(e),r=t?"promise rejection":"exception";return ns(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Xn(e)?`Event \`${nv(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function nv(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function rv(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var oo=class extends ii{constructor(t){let n=ov(t),r=k.SENTRY_SDK_SOURCE||fl();Mu(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;k.document&&(i||s||u)&&k.document.addEventListener("visibilitychange",()=>{k.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&Hr(this),u&&$r(this))}),o&&this.on("beforeSendSession",Ou)}eventFromException(t,n){return ga(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return _a(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function ov(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:k.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var Pt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var D=R;var iv=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",sn=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=iv(t.value,n),e(t)))}};var Ch=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var En=(e=!0)=>{let t=D.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var Dt=()=>En()?.activationStart??0;var an=(e,t=-1)=>{let n=En(),r="navigate";return n&&(D.document?.prerendering||Dt()>0?r="prerender":D.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:Ch(),navigationType:r}};var Ll=new WeakMap;function io(e,t){return Ll.get(e)||Ll.set(e,new t),Ll.get(e)}var Sa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Ut=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var so=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var Ci=-1,sv=()=>D.document?.visibilityState==="hidden"&&!D.document?.prerendering?0:1/0,Ea=e=>{D.document.visibilityState==="hidden"&&Ci>-1&&(Ci=e.type==="visibilitychange"?e.timeStamp:0,cv())},av=()=>{addEventListener("visibilitychange",Ea,!0),addEventListener("prerenderingchange",Ea,!0)},cv=()=>{removeEventListener("visibilitychange",Ea,!0),removeEventListener("prerenderingchange",Ea,!0)},ao=()=>{if(D.document&&Ci<0){let e=Dt();Ci=(D.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??sv(),av()}return{get firstHiddenTime(){return Ci}}};var zn=e=>{D.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var uv=[1800,3e3],wh=(e,t={})=>{zn(()=>{let n=ao(),r=an("FCP"),o,s=Ut("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Dt(),0),r.entries.push(c),o(!0)))});s&&(o=sn(e,r,uv,t.reportAllChanges))})};var lv=[.1,.25],Nh=(e,t={})=>{wh(so(()=>{let n=an("CLS",0),r,o=io(t,Sa),i=a=>{for(let c of a)o._processEntry(c);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},s=Ut("layout-shift",i);s&&(r=sn(e,n,lv,t.reportAllChanges),D.document?.addEventListener("visibilitychange",()=>{D.document?.visibilityState==="hidden"&&(i(s.takeRecords()),r(!0))}),D?.setTimeout?.(r))}))};var xh=0,Pl=1/0,ya=0,dv=e=>{e.forEach(t=>{t.interactionId&&(Pl=Math.min(Pl,t.interactionId),ya=Math.max(ya,t.interactionId),xh=ya?(ya-Pl)/7+1:0)})},Dl,Ul=()=>Dl?xh:performance.interactionCount||0,kh=()=>{"interactionCount"in performance||Dl||(Dl=Ut("event",dv,{type:"event",buffered:!0,durationThreshold:0}))};var Bl=10,Oh=0,fv=()=>Ul()-Oh,Ta=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Oh=Ul(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(fv()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Bl||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>Bl){let o=this._longestInteractionList.splice(Bl);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var co=e=>{let t=n=>{(n.type==="pagehide"||D.document?.visibilityState==="hidden")&&e(n)};D.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))};var ba=e=>{let t=D.requestIdleCallback||D.setTimeout;D.document?.visibilityState==="hidden"?e():(e=so(e),t(e),co(e))};var pv=[200,500],mv=40,Mh=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&zn(()=>{kh();let n=an("INP"),r,o=io(t,Ta),i=a=>{ba(()=>{for(let u of a)o._processEntry(u);let c=o._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},s=Ut("event",i,{durationThreshold:t.durationThreshold??mv});r=sn(e,n,pv,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),co(()=>{i(s.takeRecords()),r(!0)}))})};var Ia=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var hv=[2500,4e3],Lh=(e,t={})=>{zn(()=>{let n=ao(),r=an("LCP"),o,i=io(t,Ia),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Dt(),0),r.entries=[u],o())},a=Ut("largest-contentful-paint",s);if(a){o=sn(e,r,hv,t.reportAllChanges);let c=so(()=>{s(a.takeRecords()),a.disconnect(),o(!0)});for(let u of["keydown","click","visibilitychange"])D.document&&addEventListener(u,()=>ba(c),{capture:!0,once:!0})}})};var gv=[800,1800],Fl=e=>{D.document?.prerendering?zn(()=>Fl(e)):D.document?.readyState!=="complete"?addEventListener("load",()=>Fl(e),!0):setTimeout(e)},Ph=(e,t={})=>{let n=an("TTFB"),r=sn(e,n,gv,t.reportAllChanges);Fl(()=>{let o=En();o&&(n.value=Math.max(o.responseStart-Dt(),0),n.entries=[o],r(!0))})};var wi={},va={},Dh,Uh,Bh,Fh;function Sr(e,t=!1){return Aa("cls",e,_v,Dh,t)}function Er(e,t=!1){return Aa("lcp",e,Sv,Uh,t)}function Hl(e){return Aa("ttfb",e,Ev,Bh)}function Ni(e){return Aa("inp",e,yv,Fh)}function Nt(e,t){return Hh(e,t),va[e]||(Tv(e),va[e]=!0),$h(e,t)}function xi(e,t){let n=wi[e];if(n?.length)for(let r of n)try{r(t)}catch(o){Pt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${lt(r)}
Error:`,o)}}function _v(){return Nh(e=>{xi("cls",{metric:e}),Dh=e},{reportAllChanges:!0})}function Sv(){return Lh(e=>{xi("lcp",{metric:e}),Uh=e},{reportAllChanges:!0})}function Ev(){return Ph(e=>{xi("ttfb",{metric:e}),Bh=e})}function yv(){return Mh(e=>{xi("inp",{metric:e}),Fh=e})}function Aa(e,t,n,r,o=!1){Hh(e,t);let i;return va[e]||(i=n(),va[e]=!0),r&&t({metric:r}),$h(e,t,o?i:void 0)}function Tv(e){let t={};e==="event"&&(t.durationThreshold=0),Ut(e,n=>{xi(e,{entries:n})},t)}function Hh(e,t){wi[e]=wi[e]||[],wi[e].push(t)}function $h(e,t,n){return()=>{n&&n();let r=wi[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function Gh(e){return"duration"in e}function Ra(e){return typeof e=="number"&&isFinite(e)}function yn(e,t,n,{...r}){let o=P(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Ln(e,()=>{let i=ht({startTime:t,...r});return i&&i.end(n),i})}function uo(e){let t=T();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=x(),p=l.getUser(),f=p!==void 0?p.email||p.id||p.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let g={release:s,environment:a,user:f||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":D.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return ht({name:n,attributes:g,startTime:i,experimental:{standalone:!0}})}function Tn(){return D.addEventListener&&D.performance}function he(e){return e/1e3}function Wh(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function Ca(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function wa(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}co(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function jh(e){let t=0,n;if(!Ca("layout-shift"))return;let r=Sr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);wa(e,(o,i)=>{bv(t,n,i,o),r()})}function bv(e,t,n,r){Pt&&h.log(`Sending CLS span (${e})`);let o=t?he((_e()||0)+t.startTime):Q(),i=x().getScopeData().transactionName,s=t?ve(t.sources[0]?.node):"Layout shift",a={[z]:"auto.http.browser.cls",[Te]:"ui.webvital.cls",[Lt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=ve(u.node)});let c=uo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[Xt]:"",[Qt]:e}),c.end(o))}function zh(e){let t=0,n;if(!Ca("largest-contentful-paint"))return;let r=Er(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);wa(e,(o,i)=>{Iv(t,n,i,o),r()})}function Iv(e,t,n,r){Pt&&h.log(`Sending LCP span (${e})`);let o=he((_e()||0)+(t?.startTime||0)),i=x().getScopeData().transactionName,s=t?ve(t.element):"Largest contentful paint",a={[z]:"auto.http.browser.lcp",[Te]:"ui.webvital.lcp",[Lt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=ve(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=uo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[Xt]:"millisecond",[Qt]:e}),c.end(o))}function Bt(e){return e&&((_e()||performance.timeOrigin)+e)/1e3}function ki(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=Wh(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return _e()||Tn()?.timeOrigin?vv({...t,"http.request.redirect_start":Bt(e.redirectStart),"http.request.redirect_end":Bt(e.redirectEnd),"http.request.worker_start":Bt(e.workerStart),"http.request.fetch_start":Bt(e.fetchStart),"http.request.domain_lookup_start":Bt(e.domainLookupStart),"http.request.domain_lookup_end":Bt(e.domainLookupEnd),"http.request.connect_start":Bt(e.connectStart),"http.request.secure_connection_start":Bt(e.secureConnectionStart),"http.request.connection_end":Bt(e.connectEnd),"http.request.request_start":Bt(e.requestStart),"http.request.response_start":Bt(e.responseStart),"http.request.response_end":Bt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function vv(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var Av=2147483647,qh=0,qt={},yt,xa;function $l({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=Tn();if(r&&_e()){r.mark&&D.performance.mark("sentry-tracing-init");let o=t?zh(n):Cv(),i=wv(),s=e?jh(n):Rv();return()=>{o?.(),i(),s?.()}}return()=>{}}function Gl(){Nt("longtask",({entries:e})=>{let t=J();if(!t)return;let{op:n,start_timestamp:r}=P(t);for(let o of e){let i=he(_e()+o.startTime),s=he(o.duration);n==="navigation"&&r&&i<r||yn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[z]:"auto.ui.browser.metrics"}})}})}function Wl(){new PerformanceObserver(t=>{let n=J();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=he(_e()+r.startTime),{start_timestamp:i,op:s}=P(n);if(s==="navigation"&&i&&o<i)continue;let a=he(r.duration),c={[z]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:p,sourceFunctionName:f,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,p&&(c["code.filepath"]=p),f&&(c["code.function"]=f),m!==-1&&(c["browser.script.source_char_position"]=m),yn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function jl(){Nt("event",({entries:e})=>{let t=J();if(t){for(let n of e)if(n.name==="click"){let r=he(_e()+n.startTime),o=he(n.duration),i={name:ve(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[z]:"auto.ui.browser.metrics"}},s=Do(n.target);s&&(i.attributes["ui.component_name"]=s),yn(t,r,r+o,i)}}})}function Rv(){return Sr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.cls={value:e.value,unit:""},xa=t)},!0)}function Cv(){return Er(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(qt.lcp={value:e.value,unit:"millisecond"},yt=t)},!0)}function wv(){return Hl(({metric:e})=>{e.entries[e.entries.length-1]&&(qt.ttfb={value:e.value,unit:"millisecond"})})}function zl(e,t){let n=Tn(),r=_e();if(!n?.getEntries||!r)return;let o=he(r),i=n.getEntries(),{op:s,start_timestamp:a}=P(e);i.slice(qh).forEach(c=>{let u=he(c.startTime),d=he(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{Ov(e,c,o);break}case"mark":case"paint":case"measure":{xv(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=ao(),p=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&p&&(qt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&p&&(qt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{Pv(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),qh=Math.max(i.length-1,0),Dv(e),s==="pageload"&&(Fv(qt),t.recordClsOnPageloadSpan||delete qt.cls,t.recordLcpOnPageloadSpan||delete qt.lcp,Object.entries(qt).forEach(([c,u])=>{Vo(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Dt()),Uv(e,t)),yt=void 0,xa=void 0,qt={}}function Nv(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function xv(e,t,n,r,o,i){if(Nv(t)||["mark","measure"].includes(t.entryType)&&$e(t.name,i))return;let s=En(!1),a=he(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[z]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),kv(l,t),c<=d&&yn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function kv(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&nt(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(nt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function Ov(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Na(e,t,r,n)}),Na(e,t,"secureConnection",n,"TLS/SSL"),Na(e,t,"fetch",n,"cache"),Na(e,t,"domainLookup",n,"DNS"),Lv(e,t,n)}function Na(e,t,n,r,o=n){let i=Mv(n),s=t[i],a=t[`${n}Start`];!a||!s||yn(e,r+he(a),r+he(s),{op:`browser.${o}`,name:t.name,attributes:{[z]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function Mv(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function Lv(e,t,n){let r=n+he(t.requestStart),o=n+he(t.responseEnd),i=n+he(t.responseStart);t.responseEnd&&(yn(e,r,o,{op:"browser.request",name:t.name,attributes:{[z]:"auto.ui.browser.metrics"}}),yn(e,i,o,{op:"browser.response",name:t.name,attributes:{[z]:"auto.ui.browser.metrics"}}))}function Pv(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[z]:"auto.resource.browser.metrics"},u=Wt(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(D.location.origin),Bv(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...ki(t)},l=i+r,p=l+o;yn(e,l,p,{name:n.replace(D.location.origin,""),op:a,attributes:d})}function Dv(e){let t=D.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ra(n.rtt)&&(qt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ra(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Ra(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function Uv(e,t){yt&&t.recordLcpOnPageloadSpan&&(yt.element&&e.setAttribute("lcp.element",ve(yt.element)),yt.id&&e.setAttribute("lcp.id",yt.id),yt.url&&e.setAttribute("lcp.url",yt.url.trim().slice(0,200)),yt.loadTime!=null&&e.setAttribute("lcp.loadTime",yt.loadTime),yt.renderTime!=null&&e.setAttribute("lcp.renderTime",yt.renderTime),e.setAttribute("lcp.size",yt.size)),xa?.sources&&t.recordClsOnPageloadSpan&&xa.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,ve(n.node)))}function Bv(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<Av||typeof i=="string")&&(t[o]=i)})}function Fv(e){let t=En(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function ql(){return Tn()&&_e()?Nt("element",Hv):()=>{}}var Hv=({entries:e})=>{let t=J(),n=t?Z(t):void 0,r=n?P(n).description:x().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[he(c),"load-time"]:a?[he(a),"render-time"]:[Q(),"entry-emission"],l=s==="image-paint"?he(Math.max(0,(a??0)-(c??0))):0,p={[z]:"auto.ui.browser.elementtiming",[Te]:"ui.elementtiming",[Ae]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};mt({name:`element[${i.identifier}]`,attributes:p,startTime:u,onlyIfParent:!0},f=>{f.end(u+l)})})};var $v=1e3,Yh,Yl,Vl;function Oi(e){ze("dom",e),qe("dom",Gv)}function Gv(){if(!D.document)return;let e=ke.bind(null,"dom"),t=Vh(e,!0);D.document.addEventListener("click",t,!1),D.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=D[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(ge(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=Vh(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),ge(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function Wv(e){if(e.type!==Yl)return!1;try{if(!e.target||e.target._sentryId!==Vl)return!1}catch{}return!0}function jv(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Vh(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=zv(n);if(jv(n.type,r))return;ye(n,"_sentryCaptured",!0),r&&!r._sentryId&&ye(r,"_sentryId",ue());let o=n.type==="keypress"?"input":n.type;Wv(n)||(e({event:n,name:o,global:t}),Yl=n.type,Vl=r?r._sentryId:void 0),clearTimeout(Yh),Yh=D.setTimeout(()=>{Vl=void 0,Yl=void 0},$v)}}function zv(e){try{return e.target}catch{return null}}var ka;function bn(e){let t="history";ze(t,e),qe(t,qv)}function qv(){if(D.addEventListener("popstate",()=>{let t=D.location.href,n=ka;if(ka=t,n===t)return;ke("history",{from:n,to:t})}),!al())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=ka,i=Yv(String(r));if(ka=i,o===i)return t.apply(this,n);ke("history",{from:o,to:i})}return t.apply(this,n)}}ge(D.history,"pushState",e),ge(D.history,"replaceState",e)}function Yv(e){try{return new URL(e,D.location.origin).toString()}catch{return e}}var Oa={};function lo(e){let t=Oa[e];if(t)return t;let n=D[e];if(yi(n))return Oa[e]=n.bind(D);let r=D.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){Pt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Oa[e]=n.bind(D))}function Jl(e){Oa[e]=void 0}function yr(...e){return lo("setTimeout")(...e)}var it="__sentry_xhr_v3__";function Tr(e){ze("xhr",e),qe("xhr",Vv)}function Vv(){if(!D.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=Q()*1e3,s=De(r[0])?r[0].toUpperCase():void 0,a=Jv(r[1]);if(!s||!a)return t.apply(n,r);n[it]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[it];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:Q()*1e3,startTimestamp:i,xhr:n,virtualError:o};ke("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[p,f]=l,m=d[it];return m&&De(p)&&De(f)&&(m.request_headers[p.toLowerCase()]=f),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[it];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:Q()*1e3,xhr:n};return ke("xhr",i),t.apply(n,r)}})}function Jv(e){if(De(e))return e;try{return e.toString()}catch{}}function Ma(e){return new URLSearchParams(e).toString()}function br(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Ma(e)];if(!e)return[void 0]}catch(n){return Pt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Pt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function fo(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Mi(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Pt&&h.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}var Kl=[],La=new Map,po=new Map,Kv=60;function Ql(){if(Tn()&&_e()){let t=Xv();return()=>{t()}}return()=>{}}var Xl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Xv(){return Ni(Qv)}var Qv=({metric:e})=>{if(e.value==null)return;let t=he(e.value);if(t>Kv)return;let n=e.entries.find(m=>m.duration===e.value&&Xl[m.name]);if(!n)return;let{interactionId:r}=n,o=Xl[n.name],i=he(_e()+n.startTime),s=J(),a=s?Z(s):void 0,c=r!=null?La.get(r):void 0,u=c?.span||a,d=u?P(u).description:x().getScopeData().transactionName,l=c?.elementName||ve(n.target),p={[z]:"auto.http.browser.inp",[Te]:`ui.interaction.${o}`,[Lt]:n.duration},f=uo({name:l,transaction:d,attributes:p,startTime:i});f&&(f.addEvent("inp",{[Xt]:"millisecond",[Qt]:e.value}),f.end(i+t))};function Zl(){let e=Object.keys(Xl);Gn()&&e.forEach(o=>{D.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){let i=o.target;if(!i)return;let s=ve(i),a=Math.round(o.timeStamp);if(po.set(a,s),po.size>50){let c=po.keys().next().value;c!==void 0&&po.delete(c)}}function n(o){let i=Math.round(o.startTime),s=po.get(i);if(!s)for(let a=-5;a<=5;a++){let c=po.get(i+a);if(c){s=c;break}}return s||"<unknown>"}let r=({entries:o})=>{let i=J(),s=i&&Z(i);o.forEach(a=>{if(!Gh(a))return;let c=a.interactionId;if(c==null||La.has(c))return;let u=a.target?ve(a.target):n(a);if(Kl.length>10){let d=Kl.shift();La.delete(d)}Kl.push(c),La.set(c,{span:s,elementName:u})})};Nt("event",r),Nt("first-input",r)}var Zv=40;function mo(e,t=lo("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw Jl("fetch"),c}finally{n-=s,r--}}return ui(e,o,si(e.bufferSize||Zv))}var eA=10,tA=20,nA=30,rA=40,oA=50;function ho(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var iA=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,sA=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,aA=/\((\S*)(?::(\d+))(?::(\d+))\)/,cA=/at (.+?) ?\(data:(.+?),/,uA=e=>{let t=e.match(cA);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=iA.exec(e);if(n){let[,o,i,s]=n;return ho(o,"?",+i,+s)}let r=sA.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=aA.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=Qh(r[1]||"?",r[2]);return ho(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},ed=[nA,uA],lA=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,dA=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,fA=e=>{let t=lA.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=dA.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=Qh(o,r),ho(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},td=[oA,fA],pA=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,mA=e=>{let t=pA.exec(e);return t?ho(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},Jh=[rA,mA],hA=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,gA=e=>{let t=hA.exec(e);return t?ho(t[2],t[3]||"?",+t[1]):void 0},Kh=[eA,gA],_A=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,SA=e=>{let t=_A.exec(e);return t?ho(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},Xh=[tA,SA],nd=[ed,td],Pa=es(...nd),Qh=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function Zh(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ue(r)}},i=EA(e);return xe(o,[i])}function EA(e){return[{type:"user_report"},e]}var v=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var Da=1024,yA="Breadcrumbs",TA=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:yA,setup(n){t.console&&ur(vA(n)),t.dom&&Oi(IA(n,t.dom)),t.xhr&&Tr(AA(n)),t.fetch&&pr(RA(n)),t.history&&bn(CA(n)),t.sentry&&n.on("beforeSendEvent",bA(n))}}}),Ua=TA;function bA(e){return function(n){T()===e&&ot({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Kt(n)},{event:n})}}function IA(e,t){return function(r){if(T()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Da&&(v&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Da}, but a value of ${a} was configured. Sentry will use ${Da} instead.`),a=Da),typeof s=="string"&&(s=[s]);try{let u=r.event,d=wA(u)?u.target:u;o=ve(d,{keyAttrs:s,maxStringLength:a}),i=Do(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),ot(c,{event:r.event,name:r.name,global:r.global})}}function vA(e){return function(n){if(T()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:lr(n.level),message:Zn(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Zn(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ot(r,{input:n.args,level:n.level})}}function AA(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[it];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},p={category:"xhr",data:d,type:"http",level:ra(c)};e.emit("beforeOutgoingRequestBreadcrumb",p,l),ot(p,l)}}function RA(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),ot(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:ra(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),ot(c,a)}}}function CA(e){return function(n){if(T()!==e)return;let r=n.from,o=n.to,i=Wt(k.location.href),s=r?Wt(r):void 0,a=Wt(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),ot({category:"navigation",data:{from:r,to:o}})}}function wA(e){return!!e&&!!e.target}var NA=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],xA="BrowserApiErrors",kA=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:xA,setupOnce(){t.setTimeout&&ge(k,"setTimeout",eg),t.setInterval&&ge(k,"setInterval",eg),t.requestAnimationFrame&&ge(k,"requestAnimationFrame",OA),t.XMLHttpRequest&&"XMLHttpRequest"in k&&ge(XMLHttpRequest.prototype,"send",MA);let n=t.eventTarget;n&&(Array.isArray(n)?n:NA).forEach(o=>LA(o,t))}}}),Ba=kA;function eg(e){return function(...t){let n=t[0];return t[0]=_r(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${lt(e)}`}}),e.apply(this,t)}}function OA(e){return function(t){return e.apply(this,[_r(t,{mechanism:{data:{handler:lt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function MA(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ge(n,o,function(i){let s={mechanism:{data:{handler:lt(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=Qn(i);return a&&(s.mechanism.data.handler=lt(a)),_r(i,s)})}),e.apply(this,t)}}function LA(e,t){let r=k[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(ge(r,"addEventListener",function(o){return function(i,s,a){try{PA(s)&&(s.handleEvent=_r(s.handleEvent,{mechanism:{data:{handler:lt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&DA(this,i,s),o.apply(this,[i,_r(s,{mechanism:{data:{handler:lt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),ge(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function PA(e){return typeof e.handleEvent=="function"}function DA(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var Fa=()=>({name:"BrowserSession",setupOnce(){if(typeof k.document>"u"){v&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ur({ignoreDuration:!0}),Br(),bn(({from:e,to:t})=>{e!==void 0&&e!==t&&(Ur({ignoreDuration:!0}),Br())})}});var UA="GlobalHandlers",BA=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:UA,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(FA(n),tg("onerror")),t.onunhandledrejection&&(HA(n),tg("onunhandledrejection"))}}}),Ha=BA;function FA(e){Mo(t=>{let{stackParser:n,attachStacktrace:r}=ng();if(T()!==e||Nl())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=$A(ro(n,c||o,void 0,r,!1),i,s,a);u.level="error",Gt(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function HA(e){Lo(t=>{let{stackParser:n,attachStacktrace:r}=ng();if(T()!==e||Nl())return;let o=rd(t),i=nt(o)?od(o):ro(n,o,void 0,r,!0);i.level="error",Gt(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function rd(e){if(nt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function od(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function $A(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=GA(t)??rt();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function tg(e){v&&h.log(`Global Handler attached: ${e}`)}function ng(){return T()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function GA(e){if(!(!De(e)||e.length===0)){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e}}var $a=()=>({name:"HttpContext",preprocessEvent(e){if(!k.navigator&&!k.location&&!k.document)return;let t=Ri(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var WA="cause",jA=5,zA="LinkedErrors",qA=((e={})=>{let t=e.limit||jA,n=e.key||WA;return{name:zA,preprocessEvent(r,o,i){let s=i.getOptions();Du(no,s.stackParser,n,t,r,o)}}}),Ga=qA;var YA="SpotlightBrowser",VA=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:YA,setup:()=>{v&&h.log("Using Sidecar URL",t)},processEvent:n=>KA(n)?null:n,afterAllSetup:n=>{JA(n,t)}}});function JA(e,t){let n=lo("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:kn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var rg=VA;function KA(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function og(){return XA()?(v&&je(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function XA(){if(typeof k.window>"u")return!1;let e=k;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=rt(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(k===k.top&&r.some(i=>n.startsWith(`${i}://`)))}function id(e){return[pi(),fi(),Ba(),Ua(),Ha(),Ga(),mi(),$a(),Fa()]}function ig(e={}){let t=!e.skipBrowserExtensionCheck&&og(),n=e.defaultIntegrations==null?id():e.defaultIntegrations,r={...e,enabled:t?!1:e.enabled,stackParser:Cc(e.stackParser||Pa),integrations:_u({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||mo};return Au(oo,r)}function sg(){}function ag(e){e()}function cg(e={}){let t=k.document,n=t?.head||t?.body;if(!n){v&&h.error("[showReportDialog] Global document not defined");return}let r=x(),i=T()?.getDsn();if(!i){v&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||ei()},a=k.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=gu(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{k.removeEventListener("message",d)}};k.addEventListener("message",d)}n.appendChild(a)}var QA=R,ZA="ReportingObserver",ug=new WeakMap,eR=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(ug.has(T()))for(let o of r)Le(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Un(`${s}: ${a}`)})}return{name:ZA,setupOnce(){if(!cl())return;new QA.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){ug.set(r,!0)}}}),lg=eR;var tR="HttpClient",nR=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:tR,setup(n){lR(n,t),dR(n,t)}}}),fg=nR;function rR(e,t,n,r,o){if(mg(e,n.status,n.url)){let i=fR(t,r),s,a,c,u;gg()&&([s,c]=dg("Cookie",i),[a,u]=dg("Set-Cookie",n));let d=hg({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});Gt(d)}}function dg(e,t){let n=sR(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=pg(o))}catch{}return[n,r]}function oR(e,t,n,r,o){if(mg(e,t.status,t.responseURL)){let i,s,a;if(gg()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=pg(u))}catch{}try{a=aR(t)}catch{}i=r}let c=hg({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});Gt(c)}}function iR(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function pg(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function sR(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function aR(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function cR(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function uR(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function lR(e,t){Ti()&&pr(n=>{if(T()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&rR(t,a,r,c,i||s)},!1)}function dR(e,t){"XMLHttpRequest"in R&&Tr(n=>{if(T()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[it];if(!s)return;let{method:a,request_headers:c}=s;try{oR(t,i,a,c,r||o)}catch(u){v&&h.warn("Error while extracting response event form XHR response",u)}})}function mg(e,t,n){return uR(e.failedRequestStatusCodes,t)&&cR(e.failedRequestTargets,n)&&!di(n,T())}function hg(e){let t=T(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:iR(e.responseHeaders)}}};return Ye(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function fR(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function gg(){let e=T();return e?!!e.getOptions().sendDefaultPii:!1}var sd=R,pR=7,mR="ContextLines",hR=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:pR;return{name:mR,processEvent(n){return gR(n,t)}}}),_g=hR;function gR(e,t){let n=sd.document,r=sd.location&&li(sd.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>_R(u,s,r,t)))}),e}function _R(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Uc(t,e,r),e}var SR="GraphQLClient",ER=(e=>({name:SR,setup(t){yR(t,e),TR(t,e)}}));function yR(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=P(n).data||{};if(!(i[Te]==="http.client"))return;let c=i[Gc]||i["http.url"],u=i[$c]||i["http.method"];if(!De(c)||!De(u))return;let{endpoints:d}=t,l=$e(c,d),p=Eg(r);if(l&&p){let f=yg(p);if(f){let m=Sg(f);n.updateName(`${u} ${c} (${m})`),n.setAttribute("graphql.document",p)}}})}function TR(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,p=$e(d,l),f=Eg(r);if(p&&s&&f){let m=yg(f);if(!s.graphql&&m){let g=Sg(m);s["graphql.document"]=m.query,s["graphql.operation"]=g}}}})}function Sg(e){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=bR(t);return r?`${o} ${r}`:`${o}`}function Eg(e){let t="xhr"in e,n;if(t){let r=e.xhr[it];n=r&&br(r.body)[0]}else{let r=fo(e.input);n=br(r)[0]}return n}function bR(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function yg(e){let t;try{let n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}var Tg=ER;var Ee=R,Pd="sentryReplaySession",IR="replay_event",Dd="Unable to send Replay",vR=3e5,AR=9e5,RR=5e3,CR=5500,wR=6e4,NR=5e3,xR=3,bg=15e4,Wa=5e3,kR=3e3,OR=300,Ud=2e7,MR=4999,LR=15e3,Ig=36e5,PR=Object.defineProperty,DR=(e,t,n)=>t in e?PR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vg=(e,t,n)=>DR(e,typeof t!="symbol"?t+"":t,n),Me=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Me||{});function UR(e){return e.nodeType===e.ELEMENT_NODE}function Di(e){return e?.host?.shadowRoot===e}function Ui(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function BR(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function FR(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Va(e){try{let t=e.rules||e.cssRules;return t?BR(Array.from(t,qg).join("")):null}catch{return null}}function HR(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function qg(e){let t;if(GR(e))try{t=Va(e.styleSheet)||FR(e)}catch{}else if(WR(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=HR(e)),r&&(n=$R(n)),r||o)return n}return t||e.cssText}function $R(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function GR(e){return"styleSheet"in e}function WR(e){return"selectorText"in e}var Ja=class{constructor(){vg(this,"idNodeMap",new Map),vg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function jR(){return new Ja}function sc({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Fi({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Io(e){return e.toLowerCase()}function fd(e){return e.toUpperCase()}var Ag="__rrweb_original__";function zR(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=Ag in i?i[Ag]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function Bd(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Io(t):null}function Ka(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Yg(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var Rg={};function Vg(e){let t=Rg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return Rg[e]=r.bind(window)}function pd(...e){return Vg("setTimeout")(...e)}function Jg(...e){return Vg("clearTimeout")(...e)}function Kg(e){try{return e.contentDocument}catch{}}var qR=1,YR=new RegExp("[^a-z0-9-_:]"),Hi=-2;function Fd(){return qR++}function VR(e){if(e instanceof HTMLFormElement)return"form";let t=Io(e.tagName);return YR.test(t)?"div":t}function JR(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var go,Cg,KR=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,XR=/^(?:[a-z+]+:)?\/\//i,QR=/^www\..*/i,ZR=/^(data:)([^,]*),(.*)/i;function e0(e,t){if(!e||t.size===0)return e;try{let n=e.split(";"),r=[];for(let o of n){if(o=o.trim(),!o)continue;let i=o.indexOf(":");if(i===-1){r.push(o);continue}let s=o.slice(0,i).trim();t.has(s)||r.push(o)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function Xa(e,t){return(e||"").replace(KR,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(XR.test(c)||QR.test(c))return`url(${u}${c}${u})`;if(ZR.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${JR(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let p of l)p!=="."&&(p===".."?d.pop():d.push(p));return`url(${u}${d.join("/")}${u})`})}var t0=/^[^ \t\n\r\u000c]+/,n0=/^[, \t\n\r\u000c]+/;function r0(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(n0),!(n>=t.length);){let i=r(t0);if(i.slice(-1)===",")i=Eo(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=Eo(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var wg=new WeakMap;function Eo(e,t){return!t||t.trim()===""?t:ac(e,t)}function o0(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ac(e,t){let n=wg.get(e);if(n||(n=e.createElement("a"),wg.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Xg(e,t,n,r,o,i,s){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Eo(e,r);if(n==="xlink:href"&&r[0]!=="#")return Eo(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Eo(e,r);if(n==="srcset")return r0(e,r);if(n==="style"){let a=Xa(r,ac(e));return s&&s.size>0&&(a=e0(a,s)),a}else if(t==="object"&&n==="data")return Eo(e,r);return typeof i=="function"?i(n,r,o):r}function Qg(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function i0(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function s0(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Ir(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ir(e.parentNode,t,n,r+1)}function yo(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(s0(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function vo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Ir(s,yo(r,o)),c<0)return!0;a=Ir(s,yo(t,n),c>=0?c:1/0)}else{if(a=Ir(s,yo(t,n)),a<0)return!1;c=Ir(s,yo(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function a0(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=pd(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Jg(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return pd(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function c0(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=pd(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Jg(i),r=!0,t()})}function u0(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:m={},maskTextFn:g,maskInputFn:_,dataURLOptions:E={},inlineImages:b,recordCanvas:U,keepIframeSrcFn:M,newlyAddedElement:j=!1,ignoreCSSAttributes:B}=t,S=l0(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Me.Document,childNodes:[],compatMode:e.compatMode}:{type:Me.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Me.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return f0(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:m,maskInputFn:_,dataURLOptions:E,inlineImages:b,recordCanvas:U,keepIframeSrcFn:M,newlyAddedElement:j,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,ignoreCSSAttributes:B});case e.TEXT_NODE:return d0(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:m,maskInputFn:_,rootId:S});case e.CDATA_SECTION_NODE:return{type:Me.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Me.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function l0(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function d0(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,p=e.textContent,f=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,g=l==="TEXTAREA"?!0:void 0;if(f&&p){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(p=Va(e.parentNode.sheet))}catch(E){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${E}`,e)}p=Xa(p,ac(t.doc))}m&&(p="SCRIPT_PLACEHOLDER");let _=vo(e,r,i,o,s,n);if(!f&&!m&&!g&&p&&_&&(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),g&&p&&(c.textarea||_)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),l==="OPTION"&&p){let E=sc({type:null,tagName:l,maskInputOptions:c});p=Fi({isMasked:vo(e,r,i,o,s,E),element:e,value:p,maskInputFn:u})}return{type:Me.Text,textContent:p||"",isStyle:f,rootId:d}}function f0(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:m=!1,rootId:g,maskTextClass:_,unmaskTextClass:E,maskTextSelector:b,unmaskTextSelector:U,ignoreCSSAttributes:M}=t,j=i0(e,r,o,i),B=VR(e),S={},O=e.attributes.length;for(let I=0;I<O;I++){let L=e.attributes[I];L.name&&!Qg(B,L.name,L.value)&&(S[L.name]=Xg(n,B,Io(L.name),L.value,e,c,M))}if(B==="link"&&s){let I=Array.from(n.styleSheets).find(C=>C.href===e.href),L=null;I&&(L=Va(I)),L&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=Xa(L,I.href))}if(B==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let I=Va(e.sheet);I&&(S._cssText=Xa(I,ac(n)))}if(B==="input"||B==="textarea"||B==="select"||B==="option"){let I=e,L=Bd(I),C=Ka(I,fd(B),L),N=I.checked;if(L!=="submit"&&L!=="button"&&C){let G=vo(I,_,b,E,U,sc({type:L,tagName:fd(B),maskInputOptions:a}));S.value=Fi({isMasked:G,element:I,value:C,maskInputFn:u})}N&&(S.checked=N)}if(B==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),B==="canvas"&&p){if(e.__context==="2d")zR(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let I=e.toDataURL(d.type,d.quality),L=n.createElement("canvas");L.width=e.width,L.height=e.height;let C=L.toDataURL(d.type,d.quality);I!==C&&(S.rr_dataURL=I)}}if(B==="img"&&l){go||(go=n.createElement("canvas"),Cg=go.getContext("2d"));let I=e,L=I.currentSrc||I.getAttribute("src")||"<unknown-src>",C=I.crossOrigin,N=()=>{I.removeEventListener("load",N);try{go.width=I.naturalWidth,go.height=I.naturalHeight,Cg.drawImage(I,0,0),S.rr_dataURL=go.toDataURL(d.type,d.quality)}catch(G){if(I.crossOrigin!=="anonymous"){I.crossOrigin="anonymous",I.complete&&I.naturalWidth!==0?N():I.addEventListener("load",N);return}else console.warn(`Cannot inline img src=${L}! Error: ${G}`)}I.crossOrigin==="anonymous"&&(C?S.crossOrigin=C:I.removeAttribute("crossorigin"))};I.complete&&I.naturalWidth!==0?N():I.addEventListener("load",N)}if((B==="audio"||B==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),j){let{width:I,height:L}=e.getBoundingClientRect();S={class:S.class,rr_width:`${I}px`,rr_height:`${L}px`}}B==="iframe"&&!f(S.src)&&(!j&&!Kg(e)&&(S.rr_src=S.src),delete S.src);let F;try{customElements.get(B)&&(F=!0)}catch{}return{type:Me.Element,tagName:B,attributes:S,childNodes:[],isSVG:o0(e)||void 0,needBlock:j,rootId:g,isCustom:F}}function Se(e){return e==null?"":e.toLowerCase()}function p0(e,t){if(t.comment&&e.type===Me.Comment)return!0;if(e.type===Me.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Yg(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Se(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Se(e.attributes.name)==="application-name"||Se(e.attributes.rel)==="icon"||Se(e.attributes.rel)==="apple-touch-icon"||Se(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Se(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Se(e.attributes.property).match(/^(og|twitter|fb):/)||Se(e.attributes.name).match(/^(og|twitter):/)||Se(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Se(e.attributes.name)==="robots"||Se(e.attributes.name)==="googlebot"||Se(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Se(e.attributes.name)==="author"||Se(e.attributes.name)==="generator"||Se(e.attributes.name)==="framework"||Se(e.attributes.name)==="publisher"||Se(e.attributes.name)==="progid"||Se(e.attributes.property).match(/^article:/)||Se(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Se(e.attributes.name)==="google-site-verification"||Se(e.attributes.name)==="yandex-verification"||Se(e.attributes.name)==="csrf-token"||Se(e.attributes.name)==="p:domain_verify"||Se(e.attributes.name)==="verify-v1"||Se(e.attributes.name)==="verification"||Se(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function To(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOMOptions:b,dataURLOptions:U={},inlineImages:M=!1,recordCanvas:j=!1,onSerialize:B,onIframeLoad:S,iframeLoadTimeout:O=5e3,onBlockedImageLoad:F,onStylesheetLoad:I,stylesheetLoadTimeout:L=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:N=!1,ignoreCSSAttributes:G}=t,{preserveWhiteSpace:ee=!0}=t,K=u0(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,dataURLOptions:U,inlineImages:M,recordCanvas:j,keepIframeSrcFn:C,newlyAddedElement:N,ignoreCSSAttributes:G});if(!K)return console.warn(e,"not serialized"),null;let ce;r.hasNode(e)?ce=r.getId(e):p0(K,b)||!ee&&K.type===Me.Text&&!K.isStyle&&!K.textContent.replace(/^\s+|\s+$/gm,"").length?ce=Hi:ce=Fd();let A=Object.assign(K,{id:ce});if(r.add(e,A),ce===Hi)return null;B&&B(e);let q=!p;if(A.type===Me.Element){q=q&&!A.needBlock;let w=e.shadowRoot;w&&Ui(w)&&(A.isShadowHost=!0)}if((A.type===Me.Document||A.type===Me.Element)&&q){b.headWhitespace&&A.type===Me.Element&&A.tagName==="head"&&(ee=!1);let w={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOMOptions:b,dataURLOptions:U,inlineImages:M,recordCanvas:j,preserveWhiteSpace:ee,onSerialize:B,onIframeLoad:S,iframeLoadTimeout:O,onBlockedImageLoad:F,onStylesheetLoad:I,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:G},X=e.childNodes?Array.from(e.childNodes):[];for(let le of X){let oe=To(le,w);oe&&A.childNodes.push(oe)}if(UR(e)&&e.shadowRoot)for(let le of Array.from(e.shadowRoot.childNodes)){let oe=To(le,w);oe&&(Ui(e.shadowRoot)&&(oe.isShadow=!0),A.childNodes.push(oe))}}if(e.parentNode&&Di(e.parentNode)&&Ui(e.parentNode)&&(A.isShadow=!0),A.type===Me.Element&&A.tagName==="iframe"&&!A.needBlock&&a0(e,()=>{let w=Kg(e);if(w&&S){let X=To(w,{doc:w,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOMOptions:b,dataURLOptions:U,inlineImages:M,recordCanvas:j,preserveWhiteSpace:ee,onSerialize:B,onIframeLoad:S,iframeLoadTimeout:O,onStylesheetLoad:I,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:G});X&&S(e,X)}},O),A.type===Me.Element&&A.tagName==="img"&&!e.complete&&A.needBlock){let w=e,X=()=>{if(w.isConnected&&!w.complete&&F)try{let le=w.getBoundingClientRect();le.width>0&&le.height>0&&F(w,A,le)}catch{}w.removeEventListener("load",X)};w.isConnected&&w.addEventListener("load",X)}return A.type===Me.Element&&A.tagName==="link"&&typeof A.attributes.rel=="string"&&(A.attributes.rel==="stylesheet"||A.attributes.rel==="preload"&&typeof A.attributes.href=="string"&&Yg(A.attributes.href)==="css")&&c0(e,()=>{if(I){let w=To(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOMOptions:b,dataURLOptions:U,inlineImages:M,recordCanvas:j,preserveWhiteSpace:ee,onSerialize:B,onIframeLoad:S,iframeLoadTimeout:O,onStylesheetLoad:I,stylesheetLoadTimeout:L,keepIframeSrcFn:C,ignoreCSSAttributes:G});w&&I(e,w)}},L),A.type===Me.Element&&delete A.needBlock,A}function m0(e,t){let{mirror:n=new Ja,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOM:b=!1,dataURLOptions:U,preserveWhiteSpace:M,onSerialize:j,onIframeLoad:B,iframeLoadTimeout:S,onBlockedImageLoad:O,onStylesheetLoad:F,stylesheetLoadTimeout:I,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:C=new Set([])}=t||{};return To(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:E,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:U,inlineImages:p,recordCanvas:f,preserveWhiteSpace:M,onSerialize:j,onIframeLoad:B,iframeLoadTimeout:S,onBlockedImageLoad:O,onStylesheetLoad:F,stylesheetLoadTimeout:I,keepIframeSrcFn:L,newlyAddedElement:!1,ignoreCSSAttributes:C})}function at(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var _o=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Ng={map:{},getId(){return console.error(_o),-1},getNode(){return console.error(_o),null},removeNodeFromMap(){console.error(_o)},has(){return console.error(_o),!1},reset(){console.error(_o)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ng=new Proxy(Ng,{get(e,t,n){return t==="map"&&console.error(_o),Reflect.get(e,t,n)}}));function $i(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(y0(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=cc(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Zg(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){cc(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Zg(e,t,i||{},!0)}function Hd(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var Qa=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Qa=()=>new Date().getTime());function e_(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function t_(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function n_(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function r_(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function xt(e,t,n,r,o){if(!e)return!1;let i=r_(e);if(!i)return!1;let s=yo(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Ir(i,s),c=-1;return a<0?!1:(r&&(c=Ir(i,yo(null,r))),a>-1&&c<0?!0:a<c)}function h0(e,t){return t.getId(e)!==-1}function ad(e,t){return t.getId(e)===Hi}function o_(e,t){if(Di(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?o_(e.parentNode,t):!0:!0}function md(e){return!!e.changedTouches}function g0(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function i_(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function s_(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function hd(e){return!!e?.shadowRoot}var gd=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function a_(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function _0(e){let t=e,n;for(;n=a_(t);)t=n;return t}function S0(e){let t=e.ownerDocument;if(!t)return!1;let n=_0(e);return t.contains(n)}function c_(e){let t=e.ownerDocument;return t?t.contains(e)||S0(e):!1}var xg={};function $d(e){let t=xg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return xg[e]=r.bind(window)}function E0(...e){return $d("requestAnimationFrame")(...e)}function cc(...e){return $d("setTimeout")(...e)}function y0(...e){return $d("clearTimeout")(...e)}var V=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(V||{}),W=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(W||{}),st=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(st||{}),In=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(In||{}),So=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(So||{});function Gd(e){try{return e.contentDocument}catch{}}function T0(e){try{return e.contentWindow}catch{}}function kg(e){return"__ln"in e}var _d=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&kg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&kg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Og=(e,t)=>`${e}@${t}`,Sd=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new _d,o=c=>{let u=c,d=Hi;for(;d===Hi;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!c_(c))return;let u=Di(c.parentNode)?this.mirror.getId(a_(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=To(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{i_(p,this.mirror)&&!xt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),s_(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),hd(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,f)=>{xt(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,f),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,f)=>{this.stylesheetManager.attachLinkElement(p,f)},onBlockedImageLoad:(p,f,{width:m,height:g})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:f.id,attributes:{style:{width:`${m}px`,height:`${g}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)Mg(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Lg(this.droppedSet,c)&&!Mg(this.removes,c,this.mirror)||Lg(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let f=d.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=f.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!ad(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:vo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,r_(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=Bd(n),a=n.tagName;o=Ka(n,a,s);let c=sc({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=vo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Fi({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!Gd(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Qg(n.tagName,r)&&(i.attributes[r]=Xg(this.doc,Io(n.tagName),Io(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=Di(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);xt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ad(n,this.mirror)||!h0(n,this.mirror)||(this.addedSet.has(n)?(Ed(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||o_(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Og(r,o)]?Ed(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Di(t.target)&&Ui(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(ad(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Og(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);xt(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),hd(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Ed(e,t){e.delete(t),t.childNodes?.forEach(n=>Ed(e,n))}function Mg(e,t,n){return e.length===0?!1:b0(e,t,n)}function b0(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function Lg(e,t){return e.size===0?!1:u_(e,t)}function u_(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:u_(e,n):!1}var Bi;function I0(e){Bi=e}function v0(){Bi=void 0}var re=e=>Bi?(...n)=>{try{return e(...n)}catch(r){if(Bi&&Bi(r)===!0)return()=>{};throw r}}:e,bo=[];function qi(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function l_(e,t){let n=new Sd;bo.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(re(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function A0({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=$i(re(l=>{let p=Date.now()-a;e(s.map(f=>(f.timeOffset-=p,f)),l),s=[],a=null}),i),u=re($i(re(l=>{let p=qi(l),{clientX:f,clientY:m}=md(l)?l.changedTouches[0]:l;a||(a=Qa()),s.push({x:f,y:m,id:r.getId(p),timeOffset:Qa()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?W.Drag:l instanceof MouseEvent?W.MouseMove:W.TouchMove)}),o,{trailing:!1})),d=[at("mousemove",u,n),at("touchmove",u,n),at("drag",u,n)];return re(()=>{d.forEach(l=>l())})}function R0({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>p=>{let f=qi(p);if(xt(f,r,o,i,!0))return;let m=null,g=l;if("pointerType"in p){switch(p.pointerType){case"mouse":m=In.Mouse;break;case"touch":m=In.Touch;break;case"pen":m=In.Pen;break}m===In.Touch?st[l]===st.MouseDown?g="TouchStart":st[l]===st.MouseUp&&(g="TouchEnd"):In.Pen}else md(p)&&(m=In.Touch);m!==null?(u=m,(g.startsWith("Touch")&&m===In.Touch||g.startsWith("Mouse")&&m===In.Mouse)&&(m=null)):st[l]===st.Click&&(m=u,u=null);let _=md(p)?p.changedTouches[0]:p;if(!_)return;let E=n.getId(f),{clientX:b,clientY:U}=_;re(e)({type:st[g],id:E,x:b,y:U,...m!==null&&{pointerType:m}})};return Object.keys(st).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let p=Io(l),f=d(l);if(window.PointerEvent)switch(st[l]){case st.MouseDown:case st.MouseUp:p=p.replace("mouse","pointer");break;case st.TouchStart:case st.TouchEnd:return}c.push(at(p,f,t))}),re(()=>{c.forEach(l=>l())})}function d_({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=re($i(re(c=>{let u=qi(c);if(!u||xt(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=e_(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return at("scroll",a,t)}function C0({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=re($i(re(()=>{let i=t_(),s=n_();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return at("resize",o,t)}var w0=["INPUT","TEXTAREA","SELECT"],Pg=new WeakMap;function N0({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:g}){function _(S){let O=qi(S),F=S.isTrusted,I=O&&fd(O.tagName);if(I==="OPTION"&&(O=O.parentElement),!O||!I||w0.indexOf(I)<0||xt(O,r,o,i,!0))return;let L=O;if(L.classList.contains(s)||a&&L.matches(a))return;let C=Bd(O),N=Ka(L,I,C),G=!1,ee=sc({maskInputOptions:c,tagName:I,type:C}),K=vo(O,p,m,f,g,ee);(C==="radio"||C==="checkbox")&&(G=O.checked),N=Fi({isMasked:K,element:O,value:N,maskInputFn:u}),E(O,l?{text:N,isChecked:G,userTriggered:F}:{text:N,isChecked:G});let ce=O.name;C==="radio"&&ce&&G&&t.querySelectorAll(`input[type="radio"][name="${ce}"]`).forEach(A=>{if(A!==O){let q=Fi({isMasked:K,element:A,value:Ka(A,I,C),maskInputFn:u});E(A,l?{text:q,isChecked:!G,userTriggered:!1}:{text:q,isChecked:!G})}})}function E(S,O){let F=Pg.get(S);if(!F||F.text!==O.text||F.isChecked!==O.isChecked){Pg.set(S,O);let I=n.getId(S);re(e)({...O,id:I})}}let U=(d.input==="last"?["change"]:["input","change"]).map(S=>at(S,re(_),t)),M=t.defaultView;if(!M)return()=>{U.forEach(S=>S())};let j=M.Object.getOwnPropertyDescriptor(M.HTMLInputElement.prototype,"value"),B=[[M.HTMLInputElement.prototype,"value"],[M.HTMLInputElement.prototype,"checked"],[M.HTMLSelectElement.prototype,"value"],[M.HTMLTextAreaElement.prototype,"value"],[M.HTMLSelectElement.prototype,"selectedIndex"],[M.HTMLOptionElement.prototype,"selected"]];return j&&j.set&&U.push(...B.map(S=>Zg(S[0],S[1],{set(){re(_)({target:this,isTrusted:!1})}},!1,M))),re(()=>{U.forEach(S=>S())})}function Za(e){let t=[];function n(r,o){if(ja("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ja("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ja("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ja("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function qn(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function x0({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:re((d,l,p)=>{let[f,m]=p,{id:g,styleId:_}=qn(l,t,n.styleMirror);return(g&&g!==-1||_&&_!==-1)&&e({id:g,styleId:_,adds:[{rule:f,index:m}]}),d.apply(l,p)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:re((d,l,p)=>{let[f]=p,{id:m,styleId:g}=qn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:f}]}),d.apply(l,p)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:re((d,l,p)=>{let[f]=p,{id:m,styleId:g}=qn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replace:f}),d.apply(l,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:re((d,l,p)=>{let[f]=p,{id:m,styleId:g}=qn(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replaceSync:f}),d.apply(l,p)})}));let c={};za("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(za("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),za("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),za("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:re((p,f,m)=>{let[g,_]=m,{id:E,styleId:b}=qn(f.parentStyleSheet,t,n.styleMirror);return(E&&E!==-1||b&&b!==-1)&&e({id:E,styleId:b,adds:[{rule:g,index:[...Za(f),_||0]}]}),p.apply(f,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:re((p,f,m)=>{let[g]=m,{id:_,styleId:E}=qn(f.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||E&&E!==-1)&&e({id:_,styleId:E,removes:[{index:[...Za(f),g]}]}),p.apply(f,m)})})}),re(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function f_({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),re(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function k0({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:re((a,c,u)=>{let[d,l,p]=u;if(n.has(d))return i.apply(c,[d,l,p]);let{id:f,styleId:m}=qn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:d,value:l,priority:p},index:Za(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:re((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:p}=qn(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||p&&p!==-1)&&e({id:l,styleId:p,remove:{property:d},index:Za(c.parentRule)}),a.apply(c,u)})}),re(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function O0({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=re(u=>$i(re(d=>{let l=qi(d);if(!l||xt(l,t,n,r,!0))return;let{currentTime:p,volume:f,muted:m,playbackRate:g}=l;e({type:u,id:o.getId(l),currentTime:p,volume:f,muted:m,playbackRate:g})}),i.media||500)),c=[at("play",a(So.Play),s),at("pause",a(So.Pause),s),at("seeked",a(So.Seeked),s),at("volumechange",a(So.VolumeChange),s),at("ratechange",a(So.RateChange),s)];return re(()=>{c.forEach(u=>u())})}function M0({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=Hd(t.fonts,"add",function(a){return function(c){return cc(re(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),re(()=>{r.forEach(a=>a())})}function L0(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=re(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let p=0;p<l;p++){let f=u.getRangeAt(p),{startContainer:m,startOffset:g,endContainer:_,endOffset:E}=f;xt(m,r,o,i,!0)||xt(_,r,o,i,!0)||d.push({start:n.getId(m),startOffset:g,end:n.getId(_),endOffset:E})}s({ranges:d})});return c(),at("selectionchange",c)}function P0({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:Hd(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function D0(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=l_(e,e.doc));let o=A0(e),i=R0(e),s=d_(e),a=C0(e,{win:n}),c=N0(e),u=O0(e),d=()=>{},l=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(d=x0(e,{win:n}),l=f_(e,e.doc),p=k0(e,{win:n}),e.collectFonts&&(f=M0(e)));let m=L0(e),g=P0(e),_=[];for(let E of e.plugins)_.push(E.observer(E.callback,n,E.options));return re(()=>{bo.forEach(E=>E.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),p(),f(),m(),g(),_.forEach(E=>E())})}function ja(e){return typeof window[e]<"u"}function za(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Gi=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},yd=class{constructor(){this.crossOriginIframeMirror=new Gi(Fd),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},Td=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Gi(Fd),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Gi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=Gd(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case V.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:V.IncrementalSnapshot,data:{source:W.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case V.Meta:case V.Load:case V.DomContentLoaded:return!1;case V.Plugin:return n;case V.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case V.IncrementalSnapshot:switch(n.data.source){case W.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.Drag:case W.TouchMove:case W.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.ViewportResize:return!1;case W.MediaInteraction:case W.MouseInteraction:case W.Scroll:case W.CanvasMutation:case W.Input:return this.replaceIds(n.data,t,["id"]),n;case W.StyleSheetRule:case W.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case W.Font:return n;case W.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case W.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Me.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},bd=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},Id=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Ui(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=l_({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(d_({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),cc(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(f_({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=Gd(t),r=T0(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(Hd(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&c_(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},Dg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Li=0;Li<Dg.length;Li++)U0[Dg.charCodeAt(Li)]=Li;var Li,ec=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},vd=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new gd,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:qg(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},Ad=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,E0(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Re,tc;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var Yt=jR();function vn(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:_,slimDOMOptions:E,maskAttributeFn:b,maskInputFn:U,maskTextFn:M,maxCanvasSize:j=null,packFn:B,sampling:S={},dataURLOptions:O={},mousemoveWait:F,recordDOM:I=!0,recordCanvas:L=!1,recordCrossOriginIframes:C=!1,recordAfter:N=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:G=!1,collectFonts:ee=!1,inlineImages:K=!1,plugins:ce,keepIframeSrcFn:A=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:w,onMutation:X,getCanvasManager:le}=e;I0(w);let oe=C?window.parent===window:!0,Ce=!1;if(!oe)try{window.parent.document&&(Ce=!1)}catch{Ce=!0}if(oe&&!t)throw new Error("emit function is required");if(!oe&&!Ce)return()=>{};F!==void 0&&S.mousemove===void 0&&(S.mousemove=F),Yt.reset();let Ze=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},An=E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:E==="all",headMetaDescKeywords:E==="all"}:E||{};g0();let et,ct=0,Vt=te=>{for(let Tt of ce||[])Tt.eventProcessor&&(te=Tt.eventProcessor(te));return B&&!Ce&&(te=B(te)),te};Re=(te,Tt)=>{let ne=te;if(ne.timestamp=Qa(),bo[0]?.isFrozen()&&ne.type!==V.FullSnapshot&&!(ne.type===V.IncrementalSnapshot&&ne.data.source===W.Mutation)&&bo.forEach(Fe=>Fe.unfreeze()),oe)t?.(Vt(ne),Tt);else if(Ce){let Fe={type:"rrweb",event:Vt(ne),origin:window.location.origin,isCheckout:Tt};window.parent.postMessage(Fe,"*")}if(ne.type===V.FullSnapshot)et=ne,ct=0;else if(ne.type===V.IncrementalSnapshot){if(ne.data.source===W.Mutation&&ne.data.isAttachIframe)return;ct++;let Fe=r&&ct>=r,ie=n&&et&&ne.timestamp-et.timestamp>n;(Fe||ie)&&Jt(!0)}};let Rn=te=>{Re({type:V.IncrementalSnapshot,data:{source:W.Mutation,...te}})},xo=te=>Re({type:V.IncrementalSnapshot,data:{source:W.Scroll,...te}}),Qi=te=>Re({type:V.IncrementalSnapshot,data:{source:W.CanvasMutation,...te}}),ko=te=>Re({type:V.IncrementalSnapshot,data:{source:W.AdoptedStyleSheet,...te}}),de=new vd({mutationCb:Rn,adoptedStyleSheetCb:ko}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new yd:new Td({mirror:Yt,mutationCb:Rn,stylesheetManager:de,recordCrossOriginIframes:C,wrappedEmit:Re});for(let te of ce||[])te.getMirror&&te.getMirror({nodeMirror:Yt,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});let kt=new Ad,Be=F0(le,{mirror:Yt,win:window,mutationCb:te=>Re({type:V.IncrementalSnapshot,data:{source:W.CanvasMutation,...te}}),recordCanvas:L,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:j,sampling:S.canvas,dataURLOptions:O,errorHandler:w}),We=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new bd:new Id({mutationCb:Rn,scrollCb:xo,bypassOptions:{onMutation:X,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:Ze,dataURLOptions:O,maskAttributeFn:b,maskTextFn:M,maskInputFn:U,recordCanvas:L,inlineImages:K,sampling:S,slimDOMOptions:An,iframeManager:be,stylesheetManager:de,canvasManager:Be,keepIframeSrcFn:A,processedNodeManager:kt,ignoreCSSAttributes:q},mirror:Yt}),Jt=(te=!1)=>{if(!I)return;Re({type:V.Meta,data:{href:window.location.href,width:n_(),height:t_()}},te),de.reset(),We.init(),bo.forEach(ne=>ne.lock());let Tt=m0(document,{mirror:Yt,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskAllInputs:Ze,maskAttributeFn:b,maskInputFn:U,maskTextFn:M,slimDOM:An,dataURLOptions:O,recordCanvas:L,inlineImages:K,onSerialize:ne=>{i_(ne,Yt)&&be.addIframe(ne),s_(ne,Yt)&&de.trackLinkElement(ne),hd(ne)&&We.addShadowRoot(ne.shadowRoot,document)},onIframeLoad:(ne,Fe)=>{be.attachIframe(ne,Fe),ne.contentWindow&&Be.addWindow(ne.contentWindow),We.observeAttachShadow(ne)},onStylesheetLoad:(ne,Fe)=>{de.attachLinkElement(ne,Fe)},onBlockedImageLoad:(ne,Fe,{width:ie,height:Oo})=>{Rn({adds:[],removes:[],texts:[],attributes:[{id:Fe.id,attributes:{style:{width:`${ie}px`,height:`${Oo}px`}}}]})},keepIframeSrcFn:A,ignoreCSSAttributes:q});if(!Tt)return console.warn("Failed to snapshot the document");Re({type:V.FullSnapshot,data:{node:Tt,initialOffset:e_(window)}}),bo.forEach(ne=>ne.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&de.adoptStyleSheets(document.adoptedStyleSheets,Yt.getId(document))};tc=Jt;try{let te=[],Tt=Fe=>re(D0)({onMutation:X,mutationCb:Rn,mousemoveCb:(ie,Oo)=>Re({type:V.IncrementalSnapshot,data:{source:Oo,positions:ie}}),mouseInteractionCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.MouseInteraction,...ie}}),scrollCb:xo,viewportResizeCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.ViewportResize,...ie}}),inputCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.Input,...ie}}),mediaInteractionCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.StyleDeclaration,...ie}}),canvasMutationCb:Qi,fontCb:ie=>Re({type:V.IncrementalSnapshot,data:{source:W.Font,...ie}}),selectionCb:ie=>{Re({type:V.IncrementalSnapshot,data:{source:W.Selection,...ie}})},customElementCb:ie=>{Re({type:V.IncrementalSnapshot,data:{source:W.CustomElement,...ie}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:Ze,inlineStylesheet:m,sampling:S,recordDOM:I,recordCanvas:L,inlineImages:K,userTriggeredOnInput:G,collectFonts:ee,doc:Fe,maskAttributeFn:b,maskInputFn:U,maskTextFn:M,keepIframeSrcFn:A,blockSelector:i,unblockSelector:s,slimDOMOptions:An,dataURLOptions:O,mirror:Yt,iframeManager:be,stylesheetManager:de,shadowDomManager:We,processedNodeManager:kt,canvasManager:Be,ignoreCSSAttributes:q,plugins:ce?.filter(ie=>ie.observer)?.map(ie=>({observer:ie.observer,options:ie.options,callback:Oo=>Re({type:V.Plugin,data:{plugin:ie.name,payload:Oo}})}))||[]},{});be.addLoadListener(Fe=>{try{te.push(Tt(Fe.contentDocument))}catch(ie){console.warn(ie)}});let ne=()=>{Jt(),te.push(Tt(document))};return document.readyState==="interactive"||document.readyState==="complete"?ne():(te.push(at("DOMContentLoaded",()=>{Re({type:V.DomContentLoaded,data:{}}),N==="DOMContentLoaded"&&ne()})),te.push(at("load",()=>{Re({type:V.Load,data:{}}),N==="load"&&ne()},window))),()=>{te.forEach(Fe=>Fe()),kt.destroy(),tc=void 0,v0()}}catch(te){console.warn(te)}}function B0(e){if(!tc)throw new Error("please take full snapshot after start recording");tc(e)}vn.mirror=Yt;vn.takeFullSnapshot=B0;function F0(e,t){try{return e?e(t):new ec}catch{return console.warn("Unable to initialize CanvasManager"),new ec}}var Ug;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ug||(Ug={}));var H0=3,$0=5;function Wd(e){return e>9999999999?e:e*1e3}function cd(e){return e>9999999999?e/1e3:e}function Yi(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:V.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Pe(t,10,1e3)}}),t.category==="console")))}var G0="button,a";function p_(e){return e.closest(G0)||e}function m_(e){let t=h_(e);return!t||!(t instanceof Element)?t:p_(t)}function h_(e){return W0(e)?e.target:e}function W0(e){return typeof e=="object"&&!!e&&"target"in e}var Yn;function j0(e){return Yn||(Yn=[],z0()),Yn.push(e),()=>{let t=Yn?Yn.indexOf(e):-1;t>-1&&Yn.splice(t,1)}}function z0(){ge(Ee,"open",function(e){return function(...t){if(Yn)try{Yn.forEach(n=>n())}catch{}return e.apply(Ee,t)}})}var q0=new Set([W.Mutation,W.StyleSheetRule,W.StyleDeclaration,W.AdoptedStyleSheet,W.CanvasMutation,W.Selection,W.MediaInteraction]);function Y0(e,t,n){e.handleClick(t,n)}var Rd=class{constructor(t,n,r=Yi){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=j0(()=>{this._lastMutation=Bg()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(J0(n,this._ignoreSelector)||!K0(t))return;let r={timestamp:cd(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=cd(t)}registerScroll(t=Date.now()){this._lastScroll=cd(t)}registerClick(t){let n=p_(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Bg();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Ee.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Ee.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=yr(()=>this._checkClicks(),1e3)}},V0=["A","BUTTON","INPUT"];function J0(e,t){return!!(!V0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function K0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Bg(){return Date.now()/1e3}function X0(e,t){try{if(!Q0(t))return;let{source:n}=t.data;if(q0.has(n)&&e.registerMutation(t.timestamp),n===W.Scroll&&e.registerScroll(t.timestamp),Z0(t)){let{type:r,id:o}=t.data,i=vn.mirror.getNode(o);i instanceof HTMLElement&&r===st.Click&&e.registerClick(i)}}catch{}}function Q0(e){return e.type===H0}function Z0(e){return e.data.source===W.MouseInteraction}function cn(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var jd=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(jd||{}),eC=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function tC(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(eC.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var nC=e=>t=>{if(!e.isEnabled())return;let n=rC(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&Y0(e.clickDetector,n,m_(t.event)),Yi(e,n)};function g_(e,t){let n=vn.mirror.getId(e),r=n&&vn.mirror.getNode(n),o=r&&vn.mirror.getMeta(r),i=o&&iC(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===jd.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:tC(i.attributes)}}:{}}}function rC(e){let{target:t,message:n}=oC(e);return cn({category:`ui.${e.name}`,...g_(t,n)})}function oC(e){let t=e.name==="click",n,r=null;try{r=t?m_(e.event):h_(e.event),n=ve(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function iC(e){return e.type===jd.Element}function sC(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=aC(t);n&&Yi(e,n)}function aC(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||cC(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=ve(s,{maxStringLength:200})||"<unknown>",d=g_(s,u);return cn({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function cC(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var uC={resource:mC,paint:fC,navigation:pC};function ud(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function lC(e){return e.map(dC).filter(Boolean)}function dC(e){let t=uC[e.entryType];return t?t(e):null}function Ao(e){return((_e()||Ee.performance.timeOrigin)+e)/1e3}function fC(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Ao(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function pC(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:p,startTime:f,transferSize:m,type:g}=e;return o===0?null:{type:`${t}.${g}`,start:Ao(f),end:Ao(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:p}}}function mC(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Ao(i),end:Ao(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function hC(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return zd(e,"largest-contentful-paint",n)}function gC(e){return e.sources!==void 0}function _C(e){let t=[],n=[];for(let r of e.entries)if(gC(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=vn.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return zd(e,"cumulative-layout-shift",n,t)}function SC(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return zd(e,"interaction-to-next-paint",n)}function zd(e,t,n,r){let o=e.value,i=e.rating,s=Ao(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>vn.mirror.getId(a)):void 0,attributions:r}}}function EC(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Nt(o,n))}),r.push(Er(ud(hC,e)),Sr(ud(_C,e)),Ni(ud(SC,e))),()=>{r.forEach(o=>o())}}var H=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,yC='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function TC(){let e=new Blob([yC]);return URL.createObjectURL(e)}var Fg=["log","warn","error"],Ya="[Replay] ";function ld(e,t="info"){ot({category:"console",data:{logger:"replay"},level:t,message:`${Ya}${e}`},{level:t})}function bC(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return H?(Fg.forEach(r=>{n[r]=(...o)=>{h[r](Ya,...o),t&&ld(o.join(""),lr(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(Ya,r),e?ae(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&ld(r,"error")},n.infoTick=(...r)=>{h.log(Ya,...r),t&&setTimeout(()=>ld(r[0]),0)}):Fg.forEach(r=>{n[r]=()=>{}}),n}var $=bC(),Wi=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Ud}.`)}},nc=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Ud)throw new Wi;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?Wd(t):null}},Cd=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){H&&$.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){H&&$.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},wd=class{constructor(t){this._worker=new Cd(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=Wd(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Ud?Promise.reject(new Wi):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{H&&$.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},Nd=class{constructor(t){this._fallback=new nc,this._compression=new wd(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){H&&$.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){H&&$.exception(i,"Failed to add events when switching buffers.")}}};function IC({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=vC(t);if(n)return n}return H&&$.log("Using simple buffer"),new nc}function vC(e){try{let t=e||AC();if(!t)return;H&&$.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new Nd(n)}catch(t){H&&$.exception(t,"Failed to create compression worker")}}function AC(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?TC():""}function qd(){try{return"sessionStorage"in Ee&&!!Ee.sessionStorage}catch{return!1}}function RC(e){CC(),e.session=void 0}function CC(){if(qd())try{Ee.sessionStorage.removeItem(Pd)}catch{}}function __(e){return e===void 0?!1:Math.random()<e}function uc(e){if(qd())try{Ee.sessionStorage.setItem(Pd,JSON.stringify(e))}catch{}}function S_(e){let t=Date.now(),n=e.id||ue(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a,dirty:c}}function wC(e,t){return __(e)?"session":t?"buffer":!1}function Hg({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=wC(e,t),i=S_({sampled:o,previousSessionId:r});return n&&uc(i),i}function NC(){if(!qd())return null;try{let e=Ee.sessionStorage.getItem(Pd);if(!e)return null;let t=JSON.parse(e);return H&&$.infoTick("Loading existing session"),S_(t)}catch{return null}}function xd(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function E_(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return xd(e.started,t,r)||xd(e.lastActivity,n,r)}function y_(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!E_(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function dd({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&NC();return o?y_(o,{sessionIdleExpire:e,maxReplayDuration:t})?(H&&$.infoTick("Session in sessionStorage is expired, creating new one..."),Hg(r,{previousSessionId:o.id})):o:(H&&$.infoTick("Creating new session"),Hg(r,{previousSessionId:n}))}function xC(e){return e.type===V.Custom}function Yd(e,t,n){return b_(e,t)?(T_(e,t,n),!0):!1}function kC(e,t,n){return b_(e,t)?T_(e,t,n):Promise.resolve(null)}async function T_(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=OC(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof Wi,a=s?"addEventSizeExceeded":"addEvent",c=T();if(c){let u=s?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function b_(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=Wd(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(H&&$.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function OC(e,t){try{if(typeof t=="function"&&xC(e))return t(e)}catch(n){return H&&$.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Vd(e){return!e.type}function kd(e){return e.type==="transaction"}function MC(e){return e.type==="replay_event"}function $g(e){return e.type==="feedback"}function LC(e){return(t,n)=>{if(!e.isEnabled()||!Vd(t)&&!kd(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(kd(t)){PC(e,t);return}DC(e,t)}}}function PC(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function DC(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||yr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function UC(e){return t=>{!e.isEnabled()||!Vd(t)||BC(e,t)}}function BC(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=cn({category:"replay.hydrate-error",data:{url:rt()}});Yi(e,r)}}function FC(e){let t=T();t&&t.on("beforeAddBreadcrumb",n=>HC(e,n))}function HC(e,t){if(!e.isEnabled()||!I_(t))return;let n=$C(t);n&&Yi(e,n)}function $C(e){return!I_(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?GC(e):cn(e)}function GC(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return cn(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>Wa?(n=!0,`${o.slice(0,Wa)}\u2026`):o;if(typeof o=="object")try{let i=Pe(o,7);return JSON.stringify(i).length>Wa?(n=!0,`${JSON.stringify(i,null,2).slice(0,Wa)}\u2026`):i}catch{}return o});return cn({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function I_(e){return!!e.category}function WC(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function v_(){let e=x().getPropagationContext().dsc;e&&delete e.replay_id;let t=J();if(t){let n=Ne(t);delete n.replay_id}}function jC(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:V.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function zC(e,t){return e.recordingMode!=="buffer"||t.message===Dd||!t.exception||t.type?!1:__(e.getOptions().errorSampleRate)}function qC(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(MC(t))return delete t.breadcrumbs,t;if(!Vd(t)&&!kd(t)&&!$g(t))return t;if(!e.checkAndHandleExpiredSession())return v_(),t;if($g(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),jC(e,t),t;if(WC(t,n)&&!e.getOptions()._experiments.captureExceptions)return H&&$.log("Ignoring error from rrweb internals",t),null;let o=zC(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){let s=e.session;s.dirty=!0,e.getOptions().stickySession&&uc(s)}return t},{id:"Replay"})}function lc(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:V.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function YC(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function VC(e){return t=>{if(!e.isEnabled())return;let n=YC(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(lc(e,[n]),!1)))}}function JC(e,t){return H&&e.getOptions()._experiments.traceInternals?!1:di(t,T())}function A_(e,t){e.isEnabled()&&t!==null&&(JC(e,t.name)||e.addUpdate(()=>(lc(e,[t]),!0)))}function dc(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=Ma(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function R_(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function rc(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function C_(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function ji(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Vn(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=KC(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function Od(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function KC(e){if(!e||typeof e!="string")return{body:e};let t=e.length>bg,n=XC(e);if(t){let r=e.slice(0,bg);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function XC(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function oc(e,t){let n=QC(e);return $e(n,t)}function QC(e,t=Ee.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Ee.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function ZC(e,t,n){try{let r=await tw(e,t,n),o=C_("resource.fetch",r);A_(n.replay,o)}catch(r){H&&$.exception(r,"Failed to capture fetch breadcrumb")}}function ew(e,t){let{input:n,response:r}=t,o=n?fo(n):void 0,i=dc(o),s=r?R_(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function tw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=oc(s,n.networkDetailAllowUrls)&&!oc(s,n.networkDetailDenyUrls),p=l?nw(n,t.input,u):ji(u),f=await rw(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:p,response:f}}function nw({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?sw(n,t):{};if(!e)return Vn(o,r,void 0);let i=fo(n),[s,a]=br(i,$),c=Vn(o,r,s);return a?rc(c,a):c}async function rw(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return ji(o);let i=r?w_(r.headers,n):{};if(!r||!t&&o!==void 0)return Vn(i,o,void 0);let[s,a]=await iw(r),c=ow(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?rc(c,a):c}function ow(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?dc(e):n;return r?t?Vn(o,i,e):Vn(o,i,void 0):ji(i)}catch(i){return H&&$.exception(i,"Failed to serialize response body"),Vn(o,n,void 0)}}async function iw(e){let t=aw(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await cw(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(H&&$.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(H&&$.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function w_(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function sw(e,t){return e.length===1&&typeof e[0]!="string"?Gg(e[0],t):e.length===2?Gg(e[1],t):{}}function Gg(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?w_(n,t):Array.isArray(n)?{}:Od(n,t):{}}function aw(e){try{return e.clone()}catch(t){H&&$.exception(t,"Failed to clone response body")}}function cw(e){return new Promise((t,n)=>{let r=yr(()=>n(new Error("Timeout while trying to read response body")),500);uw(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function uw(e){return await e.text()}async function lw(e,t,n){try{let r=fw(e,t,n),o=C_("resource.xhr",r);A_(n.replay,o)}catch(r){H&&$.exception(r,"Failed to capture xhr breadcrumb")}}function dw(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=dc(r),i=n.getResponseHeader("content-length")?R_(n.getResponseHeader("content-length")):hw(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function fw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:p}=e.data;if(!c)return null;if(!a||!oc(c,n.networkDetailAllowUrls)||oc(c,n.networkDetailDenyUrls)){let B=ji(l),S=ji(p);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:B,response:S}}let f=a[it],m=f?Od(f.request_headers,n.networkRequestHeaders):{},g=Od(Mi(a),n.networkResponseHeaders),[_,E]=n.networkCaptureBodies?br(s,$):[void 0],[b,U]=n.networkCaptureBodies?pw(a):[void 0],M=Vn(m,l,_),j=Vn(g,p,b);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:E?rc(M,E):M,response:U?rc(j,U):j}}function pw(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return mw(e.response,e.responseType)}catch(n){t.push(n)}return H&&$.warn("Failed to get xhr response body",...t),[void 0]}function mw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return H&&$.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return H&&$.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function hw(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return dc(n)}catch{return}}function gw(e){let t=T();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>_w(a,c,u))}catch{}}function _w(e,t,n){if(t.data)try{Sw(t)&&yw(n)&&(dw(t,n),lw(t,n,e)),Ew(t)&&Tw(n)&&(ew(t,n),ZC(t,n,e))}catch(r){H&&$.exception(r,"Error when enriching network breadcrumb")}}function Sw(e){return e.category==="xhr"}function Ew(e){return e.category==="fetch"}function yw(e){return e?.xhr}function Tw(e){return e?.response}function bw(e){let t=T();Oi(nC(e)),bn(VC(e)),FC(e),gw(e);let n=qC(e);ni(n),t&&(t.on("beforeSendEvent",UC(e)),t.on("afterSendEvent",LC(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Iw(e){try{return Promise.all(lc(e,[vw(Ee.performance.memory)]))}catch{return[]}}function vw(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Aw(e,t,n){return Lu(e,t,{...n,setTimeoutImpl:yr})}var qa=R.navigator;function Rw(){return/iPhone|iPad|iPod/i.test(qa?.userAgent??"")||/Macintosh/i.test(qa?.userAgent??"")&&qa?.maxTouchPoints&&qa?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Cw(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){H&&$.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&X0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Yd(e,n,o))return!0;if(!o)return!1;let i=e.session;if(Nw(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){let s=e.eventBuffer.getEarliestTimestamp();s&&(H&&$.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&uc(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function ww(e){let t=e.getOptions();return{type:V.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Nw(e,t){!t||!e.session||e.session.segmentId!==0||Yd(e,ww(e),!1)}function xw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function kw(e,t,n,r){return xe(Yo(e,On(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Ow({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function Mw({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await Qo(e.getOptions(),r,i,t,e,se());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function Lw({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=Ow({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=T(),p=x(),f=l?.getTransport(),m=l?.getDsn();if(!l||!f||!m||!i.sampled)return Promise.resolve({});let g={type:IR,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},_=await Mw({scope:p,client:l,replayId:t,event:g});if(!_)return l.recordDroppedEvent("event_processor","replay"),H&&$.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete _.sdkProcessingMetadata;let E=kw(_,s,m,l.getOptions().tunnel),b;try{b=await f.send(E)}catch(M){let j=new Error(Dd);try{j.cause=M}catch{}throw j}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new ic(b.statusCode);let U=ci({},b);if(ai(U,"replay"))throw new zi(U);return b}var ic=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},zi=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function N_(e,t={count:0,interval:NR}){let{recordingData:n,onError:r}=e;if(n.length)try{return await Lw(e),!0}catch(o){if(o instanceof ic||o instanceof zi)throw o;if(Zo("Replays",{_retryCount:t.count}),r&&r(o),t.count>=xR){let i=new Error(`${Dd} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{yr(async()=>{try{await N_(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var x_="__THROTTLED",Pw="__SKIPPED";function Dw(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?Pw:x_}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var Md=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:vR,sessionIdleExpire:AR},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Aw(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Dw((s,a)=>kC(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(kR,r),timeout:r,scrollTimeout:OR,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new Rd(this,i)),H){let s=t._experiments;$.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{Ee.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=cn({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=cn({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{sC(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){H&&$.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){H&&$.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",H&&$.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){H&&$.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){H&&$.log("Buffering is in progress, call `flush()` to save the replay");return}H&&$.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=dd({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){H&&$.log("Buffering is in progress, call `flush()` to save the replay");return}H&&$.infoTick("Starting replay in buffer mode");let t=dd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=vn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:wR}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Cw(this),...Rw(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{H&&$.log(`Stopping Replay${n?` triggered by ${n}`:""}`),v_(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,RC(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),H&&$.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),H&&$.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();H&&$.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&xd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${Ee.location.pathname}${Ee.location.hash}${Ee.location.search}`,n=`${Ee.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===x_){let o=cn({category:"replay.throttled"});this.addUpdate(()=>!Yd(this,{type:$0,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||J(),n=t&&Z(t),o=(n&&P(n).data||{})[Ae];if(!(!n||!o||!["route","custom"].includes(o)))return P(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=IC({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=dd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return y_(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Ee.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ee.addEventListener("blur",this._handleWindowBlur),Ee.addEventListener("focus",this._handleWindowFocus),Ee.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(bw(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=EC(this)}_removeListeners(){try{Ee.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ee.removeEventListener("blur",this._handleWindowBlur),Ee.removeEventListener("focus",this._handleWindowFocus),Ee.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||E_(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){H&&$.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:V.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=lC(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(lc(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){H&&$.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await Iw(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await N_({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=T();if(r){let o=n instanceof zi?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){H&&$.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){H&&$.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&H&&$.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&uc(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=xw(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=cn({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function Pi(e,t){return[...e,...t].join(",")}function Uw({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=Pi(e,[".sentry-mask","[data-sentry-mask]"]),a=Pi(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:Pi(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Pi(r,[]),ignoreSelector:Pi(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function Bw({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var Wg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Fw=["content-length","content-type","accept"],jg=!1,k_=(e=>new Ld(e)),Ld=class{constructor({flushMinDelay:t=RR,flushMaxDelay:n=CR,minReplayDuration:r=MR,maxReplayDuration:o=Ig,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:E=[],networkCaptureBodies:b=!0,networkRequestHeaders:U=[],networkResponseHeaders:M=[],mask:j=[],maskAttributes:B=["title","placeholder","aria-label"],unmask:S=[],block:O=[],unblock:F=[],ignore:I=[],maskFn:L,beforeAddRecordingEvent:C,beforeErrorSampling:N,onError:G}={}){this.name="Replay";let ee=Uw({mask:j,unmask:S,block:O,unblock:F,ignore:I});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(K,ce,A)=>Bw({maskAttributes:B,maskAllText:u,privacyOptions:ee,key:K,value:ce,el:A}),...ee,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:K=>{try{K.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,LR),maxReplayDuration:Math.min(o,Ig),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:_,networkDetailDenyUrls:E,networkCaptureBodies:b,networkRequestHeaders:zg(U),networkResponseHeaders:zg(M),beforeAddRecordingEvent:C,beforeErrorSampling:N,onError:G,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Wg}`:Wg,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&Gn())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return jg}set _isInitialized(t){jg=t}afterAllSetup(t){!Gn()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=Hw(this._initialOptions,t);this._replay=new Md({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function Hw(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=vt(n.replaysSessionSampleRate),i=vt(n.replaysOnErrorSampleRate);return o==null&&i==null&&je(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function zg(e){return[...Fw,...e.map(t=>t.toLowerCase())]}function O_(){return T()?.getIntegrationByName("Replay")}var $w=Object.defineProperty,Gw=(e,t,n)=>t in e?$w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M_=(e,t,n)=>Gw(e,typeof t!="symbol"?t+"":t,n),Kd=class{constructor(){M_(this,"idNodeMap",new Map),M_(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Ww(){return new Kd}function jw(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Xd(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Xd(e.parentNode,t,n,r+1)}function L_(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(jw(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var Ro=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,P_={map:{},getId(){return console.error(Ro),-1},getNode(){return console.error(Ro),null},removeNodeFromMap(){console.error(Ro)},has(){return console.error(Ro),!1},reset(){console.error(Ro)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(P_=new Proxy(P_,{get(e,t,n){return t==="map"&&console.error(Ro),Reflect.get(e,t,n)}}));function Zd(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){W_(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Zd(e,t,i||{},!0)}function ef(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function zw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function hc(e,t,n,r,o){if(!e)return!1;let i=zw(e);if(!i)return!1;let s=L_(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Xd(i,s),c=-1;return a<0?!1:(r&&(c=Xd(i,L_(null,r))),a>-1&&c<0?!0:a<c)}var D_={};function G_(e){let t=D_[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return D_[e]=r.bind(window)}function vr(...e){return G_("requestAnimationFrame")(...e)}function W_(...e){return G_("setTimeout")(...e)}var wo=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(wo||{}),pc;function qw(e){pc=e}var Jd=e=>pc?(...n)=>{try{return e(...n)}catch(r){if(pc&&pc(r)===!0)return()=>{};throw r}}:e,Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Vi=0;Vi<Co.length;Vi++)Yw[Co.charCodeAt(Vi)]=Vi;var Vi,Vw=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Co[t[n]>>2],o+=Co[(t[n]&3)<<4|t[n+1]>>4],o+=Co[(t[n+1]&15)<<2|t[n+2]>>6],o+=Co[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},U_=new Map;function Jw(e,t){let n=U_.get(e);return n||(n=new Map,U_.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var j_=(e,t,n)=>{if(!e||!(q_(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=Jw(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function mc(e,t,n){if(e instanceof Array)return e.map(r=>mc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=Vw(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[mc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[mc(e.data,t,n),e.width,e.height]};if(q_(e,t)||typeof e=="object"){let r=e.constructor.name,o=j_(e,t,n);return{rr_type:r,index:o}}}}return e}var z_=(e,t,n)=>e.map(r=>mc(r,t,n)),q_=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Kw(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=ef(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return hc(this.canvas,n,r,o,!0)||W_(()=>{let l=z_(d,t,this);e(this.canvas,{type:wo["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Zd(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:wo["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function Xw(e){return e==="experimental-webgl"?"webgl":e}function B_(e,t,n,r,o){let i=[];try{let s=ef(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!hc(this,t,n,r,!0)){let d=Xw(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function F_(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=ef(e,d,function(p){return function(...f){let m=p.apply(this,f);if(j_(m,a,this),"tagName"in this.canvas&&!hc(this.canvas,r,o,i,!0)){let g=z_(f,a,this),_={type:t,property:d,args:g};n(this.canvas,_)}return m}});c.push(l)}catch{let l=Zd(e,d,{set(p){n(this.canvas,{type:t,property:d,args:[p],setter:!0})}});c.push(l)}return c}function Qw(e,t,n,r,o,i){let s=[];return s.push(...F_(t.WebGLRenderingContext.prototype,wo.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...F_(t.WebGL2RenderingContext.prototype,wo.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var Zw='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function eN(){let e=new Blob([Zw]);return URL.createObjectURL(e)}var Qd=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&qw(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&Jd(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Jd(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=B_(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}vr(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(eN());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:wo["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=vr(n)};t=vr(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=B_(t,n,r,o,!1),s=Kw(this.processMutation.bind(this),t,n,r,o),a=Qw(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{hc(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let g=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(g))){if(this.snapshotInProgressMap.set(g,!0),!n&&["webgl","webgl2"].includes(m.__context)){let _=m.getContext(m.__context);_?.getContextAttributes()?.preserveDrawingBuffer===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(m).then(_=>{this.worker?.postMessage({id:g,bitmap:_,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[_])}).catch(_=>{Jd(()=>{throw this.snapshotInProgressMap.delete(g),_})()})}}),!0)}startPendingCanvasMutationFlusher(){vr(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,vr(t)};vr(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),vr(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}Ww();var H_;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(H_||(H_={}));var $_={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},tN="ReplayCanvas",fc=1280,nN=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,fc):fc,n?Math.min(n,fc):fc]},o,i=new Promise(s=>o=s);return{name:tN,getOptions(){let{quality:s,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{let d=new Qd({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return o(d),d},...$_[s]||$_.medium}},async snapshot(s,a){(await i).snapshot(s,a)}}}),Y_=nN;function V_(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function tf(e){try{return new URL(e,k.location.origin).href}catch{return}}function J_(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function nf(e){try{return new Headers(e)}catch{return}}var K_=new WeakMap,rf=new Map,Ji={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function gc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...Ji,...t},d=typeof i=="function"?i:m=>!0,l=m=>rN(m,a),p={},f=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(g=>{if(g.op==="http.client"){let _=rf.get(g.span_id);_&&(g.timestamp=_/1e3,rf.delete(g.span_id))}}),m)),o&&ll(m=>{if(m.response){let g=K_.get(m.response);g&&m.endTimestamp&&rf.set(g,m.endTimestamp)}}),pr(m=>{let g=qu(m,d,l,p,{propagateTraceparent:f,onRequestSpanEnd:u});if(m.response&&m.fetchData.__span&&K_.set(m.response,m.fetchData.__span),g){let _=tf(m.fetchData.url),E=_?Wt(_).host:void 0;g.setAttributes({"http.url":_,"server.address":E}),s&&X_(g),c?.(g,{headers:m.headers})}})),r&&Tr(m=>{let g=oN(m,d,l,p,f,u);g&&(s&&X_(g),c?.(g,{headers:nf(m.xhr.__sentry_xhr_v3__?.request_headers)}))})}function X_(e){let{url:t}=P(e).data;if(!t||typeof t!="string")return;let n=Nt("resource",({entries:r})=>{r.forEach(o=>{J_(o)&&o.name.endsWith(t)&&(e.setAttributes(ki(o)),setTimeout(n))})})}function rN(e,t){let n=rt();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?$e(r.toString(),t)||i&&$e(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?$e(e,t):r}}function oN(e,t,n,r,o,i){let s=e.xhr,a=s?.[it];if(!s||s.__sentry_own_request__||!a)return;let{url:c,method:u}=a,d=we()&&t(c);if(e.endTimestamp&&d){let E=s.__sentry_xhr_span_id__;if(!E)return;let b=r[E];b&&a.status_code!==void 0&&(Zt(b,a.status_code),b.end(),i?.(b,{headers:nf(Mi(s)),error:e.error}),delete r[E]);return}let l=tf(c),p=l?Wt(l):Wt(c),f=li(c),m=!!J(),g=d&&m?ht({name:`${u} ${f}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":p?.host,[z]:"auto.http.browser",[Te]:"http.client",...p?.search&&{"http.query":p?.search},...p?.hash&&{"http.fragment":p?.hash}}}):new Ke;s.__sentry_xhr_span_id__=g.spanContext().spanId,r[s.__sentry_xhr_span_id__]=g,n(c)&&iN(s,we()&&m?g:void 0,o);let _=T();return _&&_.emit("beforeOutgoingRequestSpan",g,e),g}function iN(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=cr({span:t,propagateTraceparent:n});r&&sN(e,r,o,i)}function sN(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!V_(i))&&e.setRequestHeader("baggage",n)}}catch{}}function Q_(){k.document?k.document.addEventListener("visibilitychange",()=>{let e=J();if(!e)return;let t=Z(e);if(k.document.hidden&&t){let n="cancelled",{op:r,status:o}=P(t);v&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):v&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var aN=3600,Z_="sentry_previous_trace",cN="sentry.previous_trace";function eS(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?dN():void 0;e.on("spanStart",s=>{if(Z(s)!==s)return;let a=x().getPropagationContext();o=uN(o,s,a),r&&lN(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=x(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(of(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=of(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[Fo]:o.sampleRate}})}function uN(e,t,n){let r=P(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[dn])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=aN&&(v&&h.log(`Adding previous_trace ${s} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:s,attributes:{[Wc]:"previous_trace"}}),t.setAttribute(cN,`${s.traceId}-${s.spanId}-${of(s)?1:0}`)),i)}function lN(e){try{k.sessionStorage.setItem(Z_,JSON.stringify(e))}catch(t){v&&h.warn("Could not store previous trace in sessionStorage",t)}}function dN(){try{let e=k.sessionStorage?.getItem(Z_);return JSON.parse(e)}catch{return}}function of(e){return e.traceFlags===1}var fN="BrowserTracing",pN={...Dr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Ji},oS=((e={})=>{let t={name:void 0,source:void 0},n=k.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:p,childSpanTimeout:f,markBackgroundSpan:m,traceFetch:g,traceXHR:_,trackFetchStreamPerformance:E,shouldCreateSpanForRequest:b,enableHTTPTimings:U,ignoreResourceSpans:M,ignorePerformanceApiSpans:j,instrumentPageLoad:B,instrumentNavigation:S,detectRedirects:O,linkPreviousTrace:F,consistentTraceSampling:I,enableReportPageLoaded:L,onRequestSpanStart:C,onRequestSpanEnd:N}={...pN,...e},G,ee,K;function ce(A,q,w=!0){let X=q.op==="pageload",le=q.name,oe=d?d(q):q,Ce=oe.attributes||{};if(le!==oe.name&&(Ce[Ae]="custom",oe.attributes=Ce),!w){let et=It();ht({...oe,startTime:et}).end(et);return}t.name=oe.name,t.source=Ce[Ae];let Ze=ws(oe,{idleTimeout:l,finalTimeout:p,childSpanTimeout:f,disableAutoFinish:X,beforeSpanEnd:et=>{G?.(),zl(et,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:M,ignorePerformanceApiSpans:j}),nS(A,void 0);let ct=x(),Vt=ct.getPropagationContext();ct.setPropagationContext({...Vt,traceId:Ze.spanContext().traceId,sampled:At(Ze),dsc:Ne(et)}),X&&(K=void 0)},trimIdleSpanEndTimestamp:!L});X&&L&&(K=Ze),nS(A,Ze);function An(){n&&["interactive","complete"].includes(n.readyState)&&A.emit("idleSpanEnableAutoFinish",Ze)}X&&!L&&n&&(n.addEventListener("readystatechange",()=>{An()}),An())}return{name:fN,setup(A){if(qo(),G=$l({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:A}),r&&Ql(),o&&ql(),s&&R.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Wl():i&&Gl(),a&&jl(),O&&n){let w=()=>{ee=Q()};addEventListener("click",w,{capture:!0}),addEventListener("keydown",w,{capture:!0,passive:!0})}function q(){let w=Ki(A);w&&!P(w).timestamp&&(v&&h.log(`[Tracing] Finishing current active span with op: ${P(w).op}`),w.setAttribute(xn,"cancelled"),w.end())}A.on("startNavigationSpan",(w,X)=>{if(T()!==A)return;if(X?.isRedirect){v&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ce(A,{op:"navigation.redirect",...w},!1);return}ee=void 0,q(),se().setPropagationContext({traceId:Ge(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Ve()});let le=x();le.setPropagationContext({traceId:Ge(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Ve()}),le.setSDKProcessingMetadata({normalizedRequest:void 0}),ce(A,{op:"navigation",...w,parentSpan:null,forceTransaction:!0})}),A.on("startPageLoadSpan",(w,X={})=>{if(T()!==A)return;q();let le=X.sentryTrace||tS("sentry-trace"),oe=X.baggage||tS("baggage"),Ce=$o(le,oe),Ze=x();Ze.setPropagationContext(Ce),we()||(Ze.getPropagationContext().propagationSpanId=Ve()),Ze.setSDKProcessingMetadata({normalizedRequest:Ri()}),ce(A,{op:"pageload",...w})}),A.on("endPageloadSpan",()=>{L&&K&&(K.setAttribute(xn,"reportPageLoaded"),K.end())})},afterAllSetup(A){let q=rt();if(F!=="off"&&eS(A,{linkPreviousTrace:F,consistentTraceSampling:I}),k.location){if(B){let w=_e();sf(A,{name:k.location.pathname,startTime:w?w/1e3:void 0,attributes:{[Ae]:"url",[z]:"auto.pageload.browser"}})}S&&bn(({to:w,from:X})=>{if(X===void 0&&q?.indexOf(w)!==-1){q=void 0;return}q=void 0;let le=ar(w),oe=Ki(A),Ce=oe&&O&&hN(oe,ee);af(A,{name:le?.pathname||k.location.pathname,attributes:{[Ae]:"url",[z]:"auto.navigation.browser"}},{url:w,isRedirect:Ce})})}m&&Q_(),a&&mN(A,l,p,f,t),r&&Zl(),gc(A,{traceFetch:g,traceXHR:_,trackFetchStreamPerformance:E,tracePropagationTargets:A.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:U,onRequestSpanStart:C,onRequestSpanEnd:N})}}});function sf(e,t,n){e.emit("startPageLoadSpan",t,n),x().setTransactionName(t.name);let r=Ki(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function af(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=x();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...Ri(),url:r}}),Ki(e)}function tS(e){return k.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function mN(e,t,n,r,o){let i=k.document,s,a=()=>{let c="ui.action.click",u=Ki(e);if(u){let d=P(u).op;if(["navigation","pageload"].includes(d)){v&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(xn,"interactionInterrupted"),s.end(),s=void 0),!o.name){v&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=ws({name:o.name,op:c,attributes:{[Ae]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var iS="_sentry_idleSpan";function Ki(e){return e[iS]}function nS(e,t){ye(e,iS,t)}var rS=1.5;function hN(e,t){let n=P(e),r=It(),o=n.start_timestamp;return!(r-o>rS||t&&r-t<=rS)}function sS(e=T()){e?.emit("endPageloadSpan")}function aS(e){let t=J();if(t===e)return;let n=x();e.end=new Proxy(e.end,{apply(r,o,i){return ft(n,t),Reflect.apply(r,o,i)}}),ft(n,e)}function No(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function gN(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=No(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function cf(e){return No(e.getAllKeys())}function _N(e,t,n){return e(r=>cf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),No(r.transaction)}))}function SN(e,t,n){return e(r=>cf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),No(r.transaction)}))}function EN(e){return e(t=>cf(t).then(n=>{let r=n[0];if(r!=null)return No(t.get(r)).then(o=>(t.delete(r),No(t.transaction).then(()=>o)))}))}function yN(e){let t;function n(){return t==null&&(t=gN(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await kn(r);await _N(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await kn(r);await SN(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await EN(n());if(r)return Qc(r)}catch{}}}}function TN(e){return t=>{let n=e({...t,createStore:yN});return k.addEventListener("online",async r=>{await n.flush()}),n}}function cS(e=mo){return TN(wu(e))}var uS=1e6,bN="window"in R&&R.window===R&&typeof importScripts>"u",Jn=String(0),_c=bN?"main":"worker",Sc=k.navigator,dS="",fS="",pS="",uf=Sc?.userAgent||"",mS="",IN=Sc?.language||Sc?.languages?.[0]||"";function vN(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var lS=Sc?.userAgentData;vN(lS)&&lS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(dS=e.platform||"",pS=e.architecture||"",mS=e.model||"",fS=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];uf=`${t.brand} ${t.version}`}}).catch(e=>{});function AN(e){return!("thread_metadata"in e)}function RN(e){return AN(e)?xN(e):e}function CN(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&v&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function wN(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=CN(r),i=RN(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Q()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Q()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||pn,runtime:{name:"javascript",version:k.navigator.userAgent},os:{name:dS,version:fS,build_number:uf},device:{locale:IN,model:mS,manufacturer:uf,architecture:pS,is_emulator:!1},debug_meta:{images:ES(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||ue(),trace_id:o,active_thread_id:Jn,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function hS(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);let r=NN(e),o=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:ue(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||ue(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:ES(e.resources)},profile:r}}function gS(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};let t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};let n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function NN(e){let t=[];for(let a=0;a<e.frames.length;a++){let c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}let n=[];for(let a=0;a<e.stacks.length;a++){let c=e.stacks[a];if(!c)continue;let u=[],d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}let r=_e(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=o-(r||o),s=[];for(let a=0;a<e.samples.length;a++){let c=e.samples[a];if(!c)continue;let u=(o+(c.timestamp-i))/1e3;s[a]={stack_id:c.stackId??0,thread_id:Jn,timestamp:u}}return{frames:t,stacks:n,samples:s,thread_metadata:{[Jn]:{name:_c}}}}function Ec(e){return P(e).op==="pageload"}function xN(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[Jn]:{name:_c}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=_e(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*uS).toFixed(0),stack_id:t,thread_id:Jn};return}let l=e.stacks[u.stackId],p=[];for(;l;){p.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let f={elapsed_since_start_ns:((u.timestamp+c-i)*uS).toFixed(0),stack_id:n,thread_id:Jn};r.stacks[n]=p,r.samples[d]=f,n++}),r}function _S(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function SS(e){let t=[];return Rt(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function ES(e){let r=T()?.getOptions()?.stackParser;return r?au(r,e):[]}function yS(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(v&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(v&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function kN(e){return e.samples.length<2?(v&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(v&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var lf=!1,df=3e4;function ON(e){return typeof e=="function"}function yc(){let e=k.Profiler;if(!ON(e)){v&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(df/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{v&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),lf=!0}}function ff(e){if(lf)return v&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return v&&h.log("[Profiling] Discarding profile because root span was not sampled."),!1;let n=T()?.getOptions();if(!n)return v&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return yS(r)?r?(r===!0?!0:Math.random()<r)?!0:(v&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(v&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(v&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function TS(e){if(lf)return v&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(e.profileLifecycle!=="trace")return!1;let t=e.profileSessionSampleRate;return yS(t)?t?Math.random()<=t:(v&&h.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(v&&h.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function Xi(e){return typeof e.profilesSampleRate<"u"}function bS(e,t,n,r){return kN(n)?wN(e,t,n,r):null}var Ar=new Map;function IS(){return Ar.size}function vS(e){let t=Ar.get(e);return t&&Ar.delete(e),t}function AS(e,t){if(Ar.set(e,t),Ar.size>30){let n=Ar.keys().next().value;n!==void 0&&Ar.delete(n)}}function RS(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":Jn,"thread.name":_c}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":Jn,"thread.name":_c}})),e}var MN=6e4,LN=3e5,Tc=class{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1}initialize(t,n){this._profilerId=ue(),v&&h.log("[Profiling] Initializing profiler (lifecycle='trace')."),this._client=t,this._sessionSampled=n,t.on("spanStart",r=>{if(!this._sessionSampled){v&&h.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(r!==Z(r))return;if(!r.isRecording()){v&&h.log("[Profiling] Discarding profile because root span was not sampled.");return}pt().setContext("profile",{profiler_id:this._profilerId});let o=r.spanContext().spanId;if(!o||this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.add(o);let i=this._activeRootSpanIds.size,s=setTimeout(()=>{this._onRootSpanTimeout(o)},LN);this._rootSpanTimeouts.set(o,s),i===1&&(v&&h.log(`[Profiling] Root span with ID ${o} started. Will continue profiling for as long as there are active root spans (currently: ${i}).`),this.start())}),t.on("spanEnd",r=>{if(!this._sessionSampled)return;let o=r.spanContext().spanId;if(!o||!this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.delete(o);let i=this._activeRootSpanIds.size;v&&h.log(`[Profiling] Root span with ID ${o} ended. Will continue profiling for as long as there are active root spans (currently: ${i}).`),i===0&&(this._collectCurrentChunk().catch(s=>{v&&h.error("[Profiling] Failed to collect current profile chunk on `spanEnd`:",s)}),this.stop())})}notifyRootSpanActive(t){if(!this._sessionSampled)return;let n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._activeRootSpanIds.add(n);let r=this._activeRootSpanIds.size;r===1&&(v&&h.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this.start())}start(){if(!this._isRunning){if(this._isRunning=!0,v&&h.log("[Profiling] Started profiling with profile ID:",this._profilerId),this._startProfilerInstance(),!this._profiler){v&&h.log("[Profiling] Stopping trace lifecycle profiling."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}stop(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{v&&h.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}))}_resetProfilerInfo(){this._isRunning=!1,pt().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let t=yc();if(!t){v&&h.log("[Profiling] Failed to start JS Profiler in trace lifecycle.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{v&&h.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},MN))}_onRootSpanTimeout(t){if(!this._rootSpanTimeouts.has(t)||(this._rootSpanTimeouts.delete(t),!this._activeRootSpanIds.has(t)))return;v&&h.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this.stop()}async _collectCurrentChunk(){let t=this._profiler;if(this._profiler=void 0,!!t)try{let n=await t.stop(),r=hS(n,this._client,this._profilerId),o=gS(r);if("reason"in o){v&&h.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),v&&h.log("[Profiling] Collected browser profile chunk.")}catch(n){v&&h.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){let n=this._client,r=On(n.getSdkMetadata?.()),o=n.getDsn(),i=n.getOptions().tunnel,s=xe({event_id:ue(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&o&&{dsn:Ue(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(s).then(null,a=>{v&&h.error("Error while sending profile chunk envelope:",a)})}};function pf(e){let t;Ec(e)&&(t=Q()*1e3);let n=yc();if(!n)return;v&&h.log(`[Profiling] started profiling span: ${P(e).description}`);let r=ue(),o=null;x().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(o){v&&h.log("[Profiling] profile for:",P(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(s&&(k.clearTimeout(s),s=void 0),v&&h.log(`[Profiling] stopped profiling of span: ${P(e).description}`),!u){v&&h.log(`[Profiling] profiler returned null profile for: ${P(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,AS(r,u)}).catch(u=>{v&&h.log("[Profiling] error while stopping profiler:",u)})}}let s=k.setTimeout(()=>{v&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",P(e).description),i()},df),a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}var PN="BrowserProfiling",DN=(()=>({name:PN,setup(e){let t=e.getOptions();if(!Xi(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),Xi(t)&&!t.profilesSampleRate){v&&h.log("[Profiling] Profiling disabled, no profiling options found.");return}let n=J(),r=n&&Z(n);if(Xi(t)&&t.profileSessionSampleRate!==void 0&&v&&h.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),Xi(t))r&&Ec(r)&&ff(r)&&pf(r),e.on("spanStart",o=>{o===Z(o)&&ff(o)&&pf(o)}),e.on("beforeEnvelope",o=>{if(!IS())return;let i=SS(o);if(!i.length)return;let s=[];for(let a of i){let c=a?.contexts,u=c?.profile?.profile_id,d=c?.profile?.start_timestamp;if(typeof u!="string"){v&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!u){v&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}c?.profile&&delete c.profile;let l=vS(u);if(!l){v&&h.log(`[Profiling] Could not retrieve profile for span: ${u}`);continue}let p=bS(u,d,l,a);p&&s.push(p)}_S(o,s)});else{let o=TS(t);if(o||v&&h.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),t.profileLifecycle==="trace"){if(!we(t)){v&&h.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}let s=new Tc;s.initialize(e,o),r&&s.notifyRootSpanActive(r),k.setTimeout(()=>{let a=J(),c=a&&Z(a);c&&s.notifyRootSpanActive(c)},0)}}},processEvent(e){return RS(e)}})),CS=DN;var wS=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Ct(e)}});function NS(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{gt(e,t.value),_t(e,t.value)}}}var xS=()=>({name:"OpenFeature",processEvent(e,t,n){return Ct(e)}}),bc=class{after(t,n){gt(n.flagKey,n.value),_t(n.flagKey,n.value)}error(t,n,r){gt(t.flagKey,t.defaultValue),_t(t.flagKey,t.defaultValue)}};var kS=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;ge(t,"isEnabled",UN)},processEvent(t,n,r){return Ct(t)}});function UN(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(gt(n,r),_t(n,r)):v&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var OS=(({growthbookClass:e})=>zu({growthbookClass:e}));var MS=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{gt(n.gate.name,n.gate.value),_t(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Ct(t)}});async function LS(){let e=T();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await Jo(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var BN="WebWorker",DS=({worker:e})=>({name:BN,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>PS(t))},addWorker:t=>PS(t)});function PS(e){e.addEventListener("message",t=>{HN(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(v&&h.log("Sentry debugId web worker message received",t.data),k._sentryDebugIds={...t.data._sentryDebugIds,...k._sentryDebugIds}),t.data._sentryWorkerError&&(v&&h.log("Sentry worker rejection message received",t.data._sentryWorkerError),FN(t.data._sentryWorkerError)))})}function FN(e){let t=T();if(!t)return;let n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,i=nt(o)?od(o):ro(n,o,void 0,r,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),Gt(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),v&&h.log("Captured worker unhandled rejection",o)}function US({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{let r={reason:rd(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),v&&h.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),v&&h.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function HN(e){if(!He(e)||e._sentryMessage!==!0)return!1;let t="_sentryDebugIds"in e,n="_sentryWorkerError"in e;return!(!t&&!n||t&&!(He(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!He(e._sentryWorkerError))}export{BS as Sentry};
